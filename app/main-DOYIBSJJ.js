var IE=Object.defineProperty,wE=Object.defineProperties;var EE=Object.getOwnPropertyDescriptors;var bp=Object.getOwnPropertySymbols;var CE=Object.prototype.hasOwnProperty,DE=Object.prototype.propertyIsEnumerable;var Tp=(t,e,n)=>e in t?IE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_=(t,e)=>{for(var n in e||={})CE.call(e,n)&&Tp(t,n,e[n]);if(bp)for(var n of bp(e))DE.call(e,n)&&Tp(t,n,e[n]);return t},te=(t,e)=>wE(t,EE(e));var v=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(l){i(l)}},o=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});var Sp=null;var Zc=1,Ap=Symbol("SIGNAL");function $(t){let e=Sp;return Sp=t,e}var Np={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function bE(t){if(!(el(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Zc)){if(!t.producerMustRecompute(t)&&!Jc(t)){t.dirty=!1,t.lastCleanEpoch=Zc;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Zc}}function Mp(t){return t&&(t.nextProducerIndex=0),$(t)}function Rp(t,e){if($(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(el(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Xc(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Jc(t){ao(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(bE(n),r!==n.version))return!0}return!1}function xp(t){if(ao(t),el(t))for(let e=0;e<t.producerNode.length;e++)Xc(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Xc(t,e){if(TE(t),ao(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Xc(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];ao(i),i.producerIndexOfThis[r]=e}}function el(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function ao(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function TE(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function SE(){throw new Error}var AE=SE;function Op(t){AE=t}function A(t){return typeof t=="function"}function rr(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var co=rr(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function In(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ne=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(A(r))try{r()}catch(s){e=s instanceof co?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Pp(s)}catch(o){e=e??[],o instanceof co?e=[...e,...o.errors]:e.push(o)}}if(e)throw new co(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Pp(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&In(n,e)}remove(e){let{_finalizers:n}=this;n&&In(n,e),e instanceof t&&e._removeParent(this)}};ne.EMPTY=(()=>{let t=new ne;return t.closed=!0,t})();var tl=ne.EMPTY;function lo(t){return t instanceof ne||t&&"closed"in t&&A(t.remove)&&A(t.add)&&A(t.unsubscribe)}function Pp(t){A(t)?t():t.unsubscribe()}var Ke={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ir={setTimeout(t,e,...n){let{delegate:r}=ir;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ir;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function uo(t){ir.setTimeout(()=>{let{onUnhandledError:e}=Ke;if(e)e(t);else throw t})}function Ii(){}var kp=nl("C",void 0,void 0);function Lp(t){return nl("E",void 0,t)}function Fp(t){return nl("N",t,void 0)}function nl(t,e,n){return{kind:t,value:e,error:n}}var wn=null;function sr(t){if(Ke.useDeprecatedSynchronousErrorHandling){let e=!wn;if(e&&(wn={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=wn;if(wn=null,n)throw r}}else t()}function jp(t){Ke.useDeprecatedSynchronousErrorHandling&&wn&&(wn.errorThrown=!0,wn.error=t)}var En=class extends ne{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,lo(e)&&e.add(this)):this.destination=RE}static create(e,n,r){return new or(e,n,r)}next(e){this.isStopped?il(Fp(e),this):this._next(e)}error(e){this.isStopped?il(Lp(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?il(kp,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},NE=Function.prototype.bind;function rl(t,e){return NE.call(t,e)}var sl=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){fo(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){fo(r)}else fo(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){fo(n)}}},or=class extends En{constructor(e,n,r){super();let i;if(A(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Ke.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&rl(e.next,s),error:e.error&&rl(e.error,s),complete:e.complete&&rl(e.complete,s)}):i=e}this.destination=new sl(i)}};function fo(t){Ke.useDeprecatedSynchronousErrorHandling?jp(t):uo(t)}function ME(t){throw t}function il(t,e){let{onStoppedNotification:n}=Ke;n&&ir.setTimeout(()=>n(t,e))}var RE={closed:!0,next:Ii,error:ME,complete:Ii};var ar=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Oe(t){return t}function ol(...t){return al(t)}function al(t){return t.length===0?Oe:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var j=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=OE(n)?n:new or(n,r,i);return sr(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Up(r),new r((i,s)=>{let o=new or({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ar](){return this}pipe(...n){return al(n)(this)}toPromise(n){return n=Up(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Up(t){var e;return(e=t??Ke.Promise)!==null&&e!==void 0?e:Promise}function xE(t){return t&&A(t.next)&&A(t.error)&&A(t.complete)}function OE(t){return t&&t instanceof En||xE(t)&&lo(t)}function cl(t){return A(t?.lift)}function U(t){return e=>{if(cl(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function V(t,e,n,r,i){return new ll(t,e,n,r,i)}var ll=class extends En{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function cr(){return U((t,e)=>{let n=null;t._refCount++;let r=V(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var lr=class extends j{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,cl(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ne;let n=this.getSubject();e.add(this.source.subscribe(V(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ne.EMPTY)}return e}refCount(){return cr()(this)}};var Vp=rr(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var _e=(()=>{class t extends j{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new ho(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Vp}next(n){sr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){sr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){sr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?tl:(this.currentObservers=null,s.push(n),new ne(()=>{this.currentObservers=null,In(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new j;return n.source=this,n}}return t.create=(e,n)=>new ho(e,n),t})(),ho=class extends _e{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:tl}};var pe=class extends _e{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ul={now(){return(ul.delegate||Date).now()},delegate:void 0};var po=class extends ne{constructor(e,n){super()}schedule(e,n=0){return this}};var wi={setInterval(t,e,...n){let{delegate:r}=wi;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=wi;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var ur=class extends po{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return wi.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&wi.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,In(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var dr=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};dr.now=ul.now;var fr=class extends dr{constructor(e,n=dr.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var dl=new fr(ur);var go=class extends ur{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var mo=class extends fr{};var fl=new mo(go);var Pe=new j(t=>t.complete());function $p(t){return t&&A(t.schedule)}function Bp(t){return t[t.length-1]}function Hp(t){return A(Bp(t))?t.pop():void 0}function Wt(t){return $p(Bp(t))?t.pop():void 0}function hl(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function zp(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function Wp(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Cn(t){return this instanceof Cn?(this.v=t,this):new Cn(t)}function qp(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(f){r[f]&&(i[f]=function(h){return new Promise(function(p,y){s.push([f,h,p,y])>1||a(f,h)})})}function a(f,h){try{c(r[f](h))}catch(p){d(s[0][3],p)}}function c(f){f.value instanceof Cn?Promise.resolve(f.value.v).then(l,u):d(s[0][2],f)}function l(f){a("next",f)}function u(f){a("throw",f)}function d(f,h){f(h),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Gp(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Wp=="function"?Wp(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var vo=t=>t&&typeof t.length=="number"&&typeof t!="function";function yo(t){return A(t?.then)}function _o(t){return A(t[ar])}function Io(t){return Symbol.asyncIterator&&A(t?.[Symbol.asyncIterator])}function wo(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function PE(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Eo=PE();function Co(t){return A(t?.[Eo])}function Do(t){return qp(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Cn(n.read());if(i)return yield Cn(void 0);yield yield Cn(r)}}finally{n.releaseLock()}})}function bo(t){return A(t?.getReader)}function ue(t){if(t instanceof j)return t;if(t!=null){if(_o(t))return kE(t);if(vo(t))return LE(t);if(yo(t))return FE(t);if(Io(t))return Yp(t);if(Co(t))return jE(t);if(bo(t))return UE(t)}throw wo(t)}function kE(t){return new j(e=>{let n=t[ar]();if(A(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function LE(t){return new j(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function FE(t){return new j(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,uo)})}function jE(t){return new j(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Yp(t){return new j(e=>{VE(t,e).catch(n=>e.error(n))})}function UE(t){return Yp(Do(t))}function VE(t,e){var n,r,i,s;return zp(this,void 0,void 0,function*(){try{for(n=Gp(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function Ce(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function zt(t,e=0){return U((n,r)=>{n.subscribe(V(r,i=>Ce(r,t,()=>r.next(i),e),()=>Ce(r,t,()=>r.complete(),e),i=>Ce(r,t,()=>r.error(i),e)))})}function qt(t,e=0){return U((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Kp(t,e){return ue(t).pipe(qt(e),zt(e))}function Qp(t,e){return ue(t).pipe(qt(e),zt(e))}function Zp(t,e){return new j(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Jp(t,e){return new j(n=>{let r;return Ce(n,e,()=>{r=t[Eo](),Ce(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>A(r?.return)&&r.return()})}function To(t,e){if(!t)throw new Error("Iterable cannot be null");return new j(n=>{Ce(n,e,()=>{let r=t[Symbol.asyncIterator]();Ce(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Xp(t,e){return To(Do(t),e)}function eg(t,e){if(t!=null){if(_o(t))return Kp(t,e);if(vo(t))return Zp(t,e);if(yo(t))return Qp(t,e);if(Io(t))return To(t,e);if(Co(t))return Jp(t,e);if(bo(t))return Xp(t,e)}throw wo(t)}function J(t,e){return e?eg(t,e):ue(t)}function D(...t){let e=Wt(t);return J(t,e)}function hr(t,e){let n=A(t)?t:()=>t,r=i=>i.error(n());return new j(e?i=>e.schedule(r,0,i):r)}function pl(t){return!!t&&(t instanceof j||A(t.lift)&&A(t.subscribe))}var Nt=rr(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function b(t,e){return U((n,r)=>{let i=0;n.subscribe(V(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:$E}=Array;function BE(t,e){return $E(e)?t(...e):t(e)}function tg(t){return b(e=>BE(t,e))}var{isArray:HE}=Array,{getPrototypeOf:WE,prototype:zE,keys:qE}=Object;function ng(t){if(t.length===1){let e=t[0];if(HE(e))return{args:e,keys:null};if(GE(e)){let n=qE(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function GE(t){return t&&typeof t=="object"&&WE(t)===zE}function rg(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Qe(...t){let e=Wt(t),n=Hp(t),{args:r,keys:i}=ng(t);if(r.length===0)return J([],e);let s=new j(YE(r,e,i?o=>rg(i,o):Oe));return n?s.pipe(tg(n)):s}function YE(t,e,n=Oe){return r=>{ig(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)ig(e,()=>{let l=J(t[c],e),u=!1;l.subscribe(V(r,d=>{s[c]=d,u||(u=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function ig(t,e,n){t?Ce(n,t,e):e()}function sg(t,e,n,r,i,s,o,a){let c=[],l=0,u=0,d=!1,f=()=>{d&&!c.length&&!l&&e.complete()},h=y=>l<r?p(y):c.push(y),p=y=>{s&&e.next(y),l++;let w=!1;ue(n(y,u++)).subscribe(V(e,k=>{i?.(k),s?h(k):e.next(k)},()=>{w=!0},void 0,()=>{if(w)try{for(l--;c.length&&l<r;){let k=c.shift();o?Ce(e,o,()=>p(k)):p(k)}f()}catch(k){e.error(k)}}))};return t.subscribe(V(e,h,()=>{d=!0,f()})),()=>{a?.()}}function ie(t,e,n=1/0){return A(e)?ie((r,i)=>b((s,o)=>e(r,s,i,o))(ue(t(r,i))),n):(typeof e=="number"&&(n=e),U((r,i)=>sg(r,i,t,n)))}function pr(t=1/0){return ie(Oe,t)}function og(){return pr(1)}function gr(...t){return og()(J(t,Wt(t)))}function So(t){return new j(e=>{ue(t()).subscribe(e)})}function Ue(t,e){return U((n,r)=>{let i=0;n.subscribe(V(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Gt(t){return U((e,n)=>{let r=null,i=!1,s;r=e.subscribe(V(n,void 0,void 0,o=>{s=ue(t(o,Gt(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function ag(t,e,n,r,i){return(s,o)=>{let a=n,c=e,l=0;s.subscribe(V(o,u=>{let d=l++;c=a?t(c,u,d):(a=!0,u),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function Dn(t,e){return A(e)?ie(t,e,1):ie(t,1)}function Yt(t){return U((e,n)=>{let r=!1;e.subscribe(V(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Mt(t){return t<=0?()=>Pe:U((e,n)=>{let r=0;e.subscribe(V(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function gl(t){return b(()=>t)}function Ao(t=KE){return U((e,n)=>{let r=!1;e.subscribe(V(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function KE(){return new Nt}function Ei(t){return U((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function ut(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ue((i,s)=>t(i,s,r)):Oe,Mt(1),n?Yt(e):Ao(()=>new Nt))}function mr(t){return t<=0?()=>Pe:U((e,n)=>{let r=[];e.subscribe(V(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function ml(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ue((i,s)=>t(i,s,r)):Oe,mr(1),n?Yt(e):Ao(()=>new Nt))}function vl(t,e){return U(ag(t,e,arguments.length>=2,!0))}function yl(...t){let e=Wt(t);return U((n,r)=>{(e?gr(t,n,e):gr(t,n)).subscribe(r)})}function Ve(t,e){return U((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(V(r,c=>{i?.unsubscribe();let l=0,u=s++;ue(t(c,u)).subscribe(i=V(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function _l(t){return U((e,n)=>{ue(t).subscribe(V(n,()=>n.complete(),Ii)),!n.closed&&e.subscribe(n)})}function se(t,e,n){let r=A(t)||e||n?{next:t,error:e,complete:n}:t;return r?U((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(V(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Oe}var E=class extends Error{constructor(e,n){super(du(e,n)),this.code=e}};function du(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function ki(t){return{toString:t}.toString()}var No="__parameters__";function QE(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Hg(t,e,n){return ki(()=>{let r=QE(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,u){let d=c.hasOwnProperty(No)?c[No]:Object.defineProperty(c,No,{value:[]})[No];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Sn=globalThis;function K(t){for(let e in t)if(t[e]===K)return e;throw Error("Could not find renamed property on target object.")}function be(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(be).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function cg(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var ZE=K({__forward_ref__:K});function Wg(t){return t.__forward_ref__=Wg,t.toString=function(){return be(this())},t}function $e(t){return zg(t)?t():t}function zg(t){return typeof t=="function"&&t.hasOwnProperty(ZE)&&t.__forward_ref__===Wg}function I(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Li(t){return{providers:t.providers||[],imports:t.imports||[]}}function ea(t){return lg(t,Gg)||lg(t,Yg)}function qg(t){return ea(t)!==null}function lg(t,e){return t.hasOwnProperty(e)?t[e]:null}function JE(t){let e=t&&(t[Gg]||t[Yg]);return e||null}function ug(t){return t&&(t.hasOwnProperty(dg)||t.hasOwnProperty(XE))?t[dg]:null}var Gg=K({\u0275prov:K}),dg=K({\u0275inj:K}),Yg=K({ngInjectableDef:K}),XE=K({ngInjectorDef:K}),T=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=I({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Kg(t){return t&&!!t.\u0275providers}var eC=K({\u0275cmp:K}),tC=K({\u0275dir:K}),nC=K({\u0275pipe:K}),rC=K({\u0275mod:K}),ko=K({\u0275fac:K}),Ci=K({__NG_ELEMENT_ID__:K}),fg=K({__NG_ENV_ID__:K});function Lo(t){return typeof t=="string"?t:t==null?"":String(t)}function iC(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Lo(t)}function sC(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new E(-200,t)}function fu(t,e){throw new E(-201,!1)}var R=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(R||{}),Rl;function Qg(){return Rl}function De(t){let e=Rl;return Rl=t,e}function Zg(t,e,n){let r=ea(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&R.Optional)return null;if(e!==void 0)return e;fu(t,"Injector")}var oC={},Di=oC,xl="__NG_DI_FLAG__",Fo="ngTempTokenPath",aC="ngTokenPath",cC=/\n/gm,lC="\u0275",hg="__source",wr;function uC(){return wr}function Kt(t){let e=wr;return wr=t,e}function dC(t,e=R.Default){if(wr===void 0)throw new E(-203,!1);return wr===null?Zg(t,void 0,e):wr.get(t,e&R.Optional?null:void 0,e)}function C(t,e=R.Default){return(Qg()||dC)($e(t),e)}function g(t,e=R.Default){return C(t,ta(e))}function ta(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Ol(t){let e=[];for(let n=0;n<t.length;n++){let r=$e(t[n]);if(Array.isArray(r)){if(r.length===0)throw new E(900,!1);let i,s=R.Default;for(let o=0;o<r.length;o++){let a=r[o],c=fC(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(C(i,s))}else e.push(C(r))}return e}function Jg(t,e){return t[xl]=e,t.prototype[xl]=e,t}function fC(t){return t[xl]}function hC(t,e,n,r){let i=t[Fo];throw e[hg]&&i.unshift(e[hg]),t.message=pC(`
`+t.message,i,n,r),t[aC]=i,t[Fo]=null,t}function pC(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==lC?t.slice(2):t;let i=be(e);if(Array.isArray(e))i=e.map(be).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):be(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(cC,`
  `)}`}var et=Jg(Hg("Optional"),8);var Xg=Jg(Hg("SkipSelf"),4);function Nn(t,e){let n=t.hasOwnProperty(ko);return n?t[ko]:null}function hu(t,e){t.forEach(n=>Array.isArray(n)?hu(n,e):e(n))}function em(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function jo(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var bi={},dt=[],Cr=new T(""),tm=new T("",-1),nm=new T(""),Uo=class{get(e,n=Di){if(n===Di){let r=new Error(`NullInjectorError: No provider for ${be(e)}!`);throw r.name="NullInjectorError",r}return n}},rm=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(rm||{}),pt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(pt||{}),Dr=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Dr||{});function gC(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Pl(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];vC(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function mC(t){return t===3||t===4||t===6}function vC(t){return t.charCodeAt(0)===64}function pu(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?pg(t,n,i,null,e[++r]):pg(t,n,i,null,null))}}return t}function pg(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var im="ng-template";function yC(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&gC(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(gu(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function gu(t){return t.type===4&&t.value!==im}function _C(t,e,n){let r=t.type===4&&!n?im:t.value;return e===r}function IC(t,e,n){let r=4,i=t.attrs,s=i!==null?CC(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Ze(r)&&!Ze(c))return!1;if(o&&Ze(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!_C(t,c,n)||c===""&&e.length===1){if(Ze(r))return!1;o=!0}}else if(r&8){if(i===null||!yC(t,i,c,n)){if(Ze(r))return!1;o=!0}}else{let l=e[++a],u=wC(c,i,gu(t),n);if(u===-1){if(Ze(r))return!1;o=!0;continue}if(l!==""){let d;if(u>s?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(Ze(r))return!1;o=!0}}}}return Ze(r)||o}function Ze(t){return(t&1)===0}function wC(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return DC(e,t)}function EC(t,e,n=!1){for(let r=0;r<e.length;r++)if(IC(t,e[r],n))return!0;return!1}function CC(t){for(let e=0;e<t.length;e++){let n=t[e];if(mC(n))return e}return t.length}function DC(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function gg(t,e){return t?":not("+e.trim()+")":e}function bC(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Ze(o)&&(e+=gg(s,i),i=""),r=o,s=s||!Ze(r);n++}return i!==""&&(e+=gg(s,i)),e}function TC(t){return t.map(bC).join(",")}function SC(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Ze(i))break;i=s}r++}return{attrs:e,classes:n}}function tn(t){return ki(()=>{let e=lm(t),n=te(_({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===rm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||pt.Emulated,styles:t.styles||dt,_:null,schemas:t.schemas||null,tView:null,id:""});um(n);let r=t.dependencies;return n.directiveDefs=vg(r,!1),n.pipeDefs=vg(r,!0),n.id=MC(n),n})}function AC(t){return Jt(t)||sm(t)}function NC(t){return t!==null}function Fi(t){return ki(()=>({type:t.type,bootstrap:t.bootstrap||dt,declarations:t.declarations||dt,imports:t.imports||dt,exports:t.exports||dt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function mg(t,e){if(t==null)return bi;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=Dr.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==Dr.None?[r,a]:r,e[s]=o):n[s]=r}return n}function ji(t){return ki(()=>{let e=lm(t);return um(e),e})}function mu(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function Jt(t){return t[eC]||null}function sm(t){return t[tC]||null}function om(t){return t[nC]||null}function am(t){let e=Jt(t)||sm(t)||om(t);return e!==null?e.standalone:!1}function cm(t,e){let n=t[rC]||null;if(!n&&e===!0)throw new Error(`Type ${be(t)} does not have '\u0275mod' property.`);return n}function lm(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||bi,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||dt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:mg(t.inputs,e),outputs:mg(t.outputs),debugInfo:null}}function um(t){t.features?.forEach(e=>e(t))}function vg(t,e){if(!t)return null;let n=e?om:AC;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(NC)}function MC(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function nn(t){return{\u0275providers:t}}function RC(...t){return{\u0275providers:dm(!0,t),\u0275fromNgModule:!0}}function dm(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return hu(e,o=>{let a=o;kl(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&fm(i,s),n}function fm(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];vu(i,s=>{e(s,r)})}}function kl(t,e,n,r){if(t=$e(t),!t)return!1;let i=null,s=ug(t),o=!s&&Jt(t);if(!s&&!o){let c=t.ngModule;if(s=ug(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)kl(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{hu(s.imports,u=>{kl(u,e,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&fm(l,e)}if(!a){let l=Nn(i)||(()=>new i);e({provide:i,useFactory:l,deps:dt},i),e({provide:nm,useValue:i,multi:!0},i),e({provide:Cr,useValue:()=>C(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=t;vu(c,u=>{e(u,l)})}}else return!1;return i!==t&&t.providers!==void 0}function vu(t,e){for(let n of t)Kg(n)&&(n=n.\u0275providers),Array.isArray(n)?vu(n,e):e(n)}var xC=K({provide:String,useValue:K});function hm(t){return t!==null&&typeof t=="object"&&xC in t}function OC(t){return!!(t&&t.useExisting)}function PC(t){return!!(t&&t.useFactory)}function Ll(t){return typeof t=="function"}var na=new T(""),Mo={},kC={},Il;function yu(){return Il===void 0&&(Il=new Uo),Il}var Te=class{},Ti=class extends Te{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,jl(e,o=>this.processProvider(o)),this.records.set(tm,vr(void 0,this)),i.has("environment")&&this.records.set(Te,vr(void 0,this));let s=this.records.get(na);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(nm,dt,R.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=$(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),$(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Kt(this),r=De(void 0),i;try{return e()}finally{Kt(n),De(r)}}get(e,n=Di,r=R.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(fg))return e[fg](this);r=ta(r);let i,s=Kt(this),o=De(void 0);try{if(!(r&R.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=$C(e)&&ea(e);l&&this.injectableDefInScope(l)?c=vr(Fl(e),Mo):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&R.Self?yu():this.parent;return n=r&R.Optional&&n===Di?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Fo]=a[Fo]||[]).unshift(be(e)),s)throw a;return hC(a,e,"R3InjectorError",this.source)}else throw a}finally{De(o),Kt(s)}}resolveInjectorInitializers(){let e=$(null),n=Kt(this),r=De(void 0),i;try{let s=this.get(Cr,dt,R.Self);for(let o of s)o()}finally{Kt(n),De(r),$(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(be(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new E(205,!1)}processProvider(e){e=$e(e);let n=Ll(e)?e:$e(e&&e.provide),r=FC(e);if(!Ll(e)&&e.multi===!0){let i=this.records.get(n);i||(i=vr(void 0,Mo,!0),i.factory=()=>Ol(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=$(null);try{return n.value===Mo&&(n.value=kC,n.value=n.factory()),typeof n.value=="object"&&n.value&&VC(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{$(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=$e(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Fl(t){let e=ea(t),n=e!==null?e.factory:Nn(t);if(n!==null)return n;if(t instanceof T)throw new E(204,!1);if(t instanceof Function)return LC(t);throw new E(204,!1)}function LC(t){if(t.length>0)throw new E(204,!1);let n=JE(t);return n!==null?()=>n.factory(t):()=>new t}function FC(t){if(hm(t))return vr(void 0,t.useValue);{let e=jC(t);return vr(e,Mo)}}function jC(t,e,n){let r;if(Ll(t)){let i=$e(t);return Nn(i)||Fl(i)}else if(hm(t))r=()=>$e(t.useValue);else if(PC(t))r=()=>t.useFactory(...Ol(t.deps||[]));else if(OC(t))r=()=>C($e(t.useExisting));else{let i=$e(t&&(t.useClass||t.provide));if(UC(t))r=()=>new i(...Ol(t.deps));else return Nn(i)||Fl(i)}return r}function vr(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function UC(t){return!!t.deps}function VC(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function $C(t){return typeof t=="function"||typeof t=="object"&&t instanceof T}function jl(t,e){for(let n of t)Array.isArray(n)?jl(n,e):n&&Kg(n)?jl(n.\u0275providers,e):e(n)}function tt(t,e){t instanceof Ti&&t.assertNotDestroyed();let n,r=Kt(t),i=De(void 0);try{return e()}finally{Kt(r),De(i)}}function pm(){return Qg()!==void 0||uC()!=null}function BC(t){if(!pm())throw new E(-203,!1)}function HC(t){return typeof t=="function"}var xt=0,F=1,S=2,we=3,Je=4,nt=5,Vo=6,Si=7,Xe=8,br=9,Rt=10,Ee=11,Ai=12,yg=13,xr=14,gt=15,Tr=16,yr=17,Sr=18,ra=19,gm=20,Qt=21,wl=22,Mn=23,He=25,mm=1;var Rn=7,$o=8,Bo=9,Be=10,Ho=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Ho||{});function Zt(t){return Array.isArray(t)&&typeof t[mm]=="object"}function Ot(t){return Array.isArray(t)&&t[mm]===!0}function vm(t){return(t.flags&4)!==0}function ia(t){return t.componentOffset>-1}function _u(t){return(t.flags&1)===1}function Ui(t){return!!t.template}function Ul(t){return(t[S]&512)!==0}var Vl=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function ym(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function sa(){return _m}function _m(t){return t.type.prototype.ngOnChanges&&(t.setInput=zC),WC}sa.ngInherit=!0;function WC(){let t=wm(this),e=t?.current;if(e){let n=t.previous;if(n===bi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function zC(t,e,n,r,i){let s=this.declaredInputs[r],o=wm(t)||qC(t,{previous:bi,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new Vl(l&&l.currentValue,n,c===bi),ym(t,e,i,n)}var Im="__ngSimpleChanges__";function wm(t){return t[Im]||null}function qC(t,e){return t[Im]=e}var _g=null;var ft=function(t,e,n){_g?.(t,e,n)},GC="svg",YC="math";function mt(t){for(;Array.isArray(t);)t=t[xt];return t}function KC(t,e){return mt(e[t])}function rt(t,e){return mt(e[t.index])}function Em(t,e){return t.data[e]}function Iu(t,e){return t[e]}function rn(t,e){let n=e[t];return Zt(n)?n:n[xt]}function wu(t){return(t[S]&128)===128}function QC(t){return Ot(t[we])}function Wo(t,e){return e==null?null:t[e]}function Cm(t){t[yr]=0}function ZC(t){t[S]&1024||(t[S]|=1024,wu(t)&&oa(t))}function JC(t,e){for(;t>0;)e=e[xr],t--;return e}function Ni(t){return!!(t[S]&9216||t[Mn]?.dirty)}function $l(t){t[Rt].changeDetectionScheduler?.notify(7),t[S]&64&&(t[S]|=1024),Ni(t)&&oa(t)}function oa(t){t[Rt].changeDetectionScheduler?.notify(0);let e=Mi(t);for(;e!==null&&!(e[S]&8192||(e[S]|=8192,!wu(e)));)e=Mi(e)}function Dm(t,e){if((t[S]&256)===256)throw new E(911,!1);t[Qt]===null&&(t[Qt]=[]),t[Qt].push(e)}function XC(t,e){if(t[Qt]===null)return;let n=t[Qt].indexOf(e);n!==-1&&t[Qt].splice(n,1)}function Mi(t){let e=t[we];return Ot(e)?e[we]:e}var x={lFrame:Pm(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var bm=!1;function eD(){return x.lFrame.elementDepthCount}function tD(){x.lFrame.elementDepthCount++}function nD(){x.lFrame.elementDepthCount--}function Tm(){return x.bindingsEnabled}function rD(){return x.skipHydrationRootTNode!==null}function iD(t){return x.skipHydrationRootTNode===t}function sD(){x.skipHydrationRootTNode=null}function X(){return x.lFrame.lView}function sn(){return x.lFrame.tView}function Eu(t){return x.lFrame.contextLView=t,t[Xe]}function Cu(t){return x.lFrame.contextLView=null,t}function We(){let t=Sm();for(;t!==null&&t.type===64;)t=t.parent;return t}function Sm(){return x.lFrame.currentTNode}function oD(){let t=x.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Vi(t,e){let n=x.lFrame;n.currentTNode=t,n.isParent=e}function Am(){return x.lFrame.isParent}function aD(){x.lFrame.isParent=!1}function cD(){return x.lFrame.contextLView}function Nm(){return bm}function Ig(t){bm=t}function Du(){let t=x.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function lD(){return x.lFrame.bindingIndex}function uD(t){return x.lFrame.bindingIndex=t}function Mm(){return x.lFrame.bindingIndex++}function dD(t){let e=x.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function fD(){return x.lFrame.inI18n}function hD(t,e){let n=x.lFrame;n.bindingIndex=n.bindingRootIndex=t,Bl(e)}function pD(){return x.lFrame.currentDirectiveIndex}function Bl(t){x.lFrame.currentDirectiveIndex=t}function Rm(t){x.lFrame.currentQueryIndex=t}function gD(t){let e=t[F];return e.type===2?e.declTNode:e.type===1?t[nt]:null}function xm(t,e,n){if(n&R.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&R.Host);)if(i=gD(s),i===null||(s=s[xr],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=x.lFrame=Om();return r.currentTNode=e,r.lView=t,!0}function bu(t){let e=Om(),n=t[F];x.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Om(){let t=x.lFrame,e=t===null?null:t.child;return e===null?Pm(t):e}function Pm(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function km(){let t=x.lFrame;return x.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Lm=km;function Tu(){let t=km();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function mD(t){return(x.lFrame.contextLView=JC(t,x.lFrame.contextLView))[Xe]}function aa(){return x.lFrame.selectedIndex}function xn(t){x.lFrame.selectedIndex=t}function vD(){let t=x.lFrame;return Em(t.tView,t.selectedIndex)}function yD(){return x.lFrame.currentNamespace}var Fm=!0;function Su(){return Fm}function Au(t){Fm=t}function _D(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=_m(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function Nu(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function Ro(t,e,n){jm(t,e,3,n)}function xo(t,e,n,r){(t[S]&3)===n&&jm(t,e,n,r)}function El(t,e){let n=t[S];(n&3)===e&&(n&=16383,n+=1,t[S]=n)}function jm(t,e,n,r){let i=r!==void 0?t[yr]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[yr]+=65536),(a<s||s==-1)&&(ID(t,n,e,c),t[yr]=(t[yr]&4294901760)+c+2),c++}function wg(t,e){ft(4,t,e);let n=$(null);try{e.call(t)}finally{$(n),ft(5,t,e)}}function ID(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[S]>>14<t[yr]>>16&&(t[S]&3)===e&&(t[S]+=16384,wg(a,s)):wg(a,s)}var Er=-1,Ri=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function wD(t){return t instanceof Ri}function ED(t){return(t.flags&8)!==0}function CD(t){return(t.flags&16)!==0}function Um(t){return t!==Er}function zo(t){return t&32767}function DD(t){return t>>16}function qo(t,e){let n=DD(t),r=e;for(;n>0;)r=r[xr],n--;return r}var Hl=!0;function Go(t){let e=Hl;return Hl=t,e}var bD=256,Vm=bD-1,$m=5,TD=0,ht={};function SD(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ci)&&(r=n[Ci]),r==null&&(r=n[Ci]=TD++);let i=r&Vm,s=1<<i;e.data[t+(i>>$m)]|=s}function Bm(t,e){let n=Hm(t,e);if(n!==-1)return n;let r=e[F];r.firstCreatePass&&(t.injectorIndex=e.length,Cl(r.data,t),Cl(e,null),Cl(r.blueprint,null));let i=Mu(t,e),s=t.injectorIndex;if(Um(i)){let o=zo(i),a=qo(i,e),c=a[F].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function Cl(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Hm(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Mu(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Ym(i),r===null)return Er;if(n++,i=i[xr],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Er}function AD(t,e,n){SD(t,e,n)}function Wm(t,e,n){if(n&R.Optional||t!==void 0)return t;fu(e,"NodeInjector")}function zm(t,e,n,r){if(n&R.Optional&&r===void 0&&(r=null),!(n&(R.Self|R.Host))){let i=t[br],s=De(void 0);try{return i?i.get(e,r,n&R.Optional):Zg(e,r,n&R.Optional)}finally{De(s)}}return Wm(r,e,n)}function qm(t,e,n,r=R.Default,i){if(t!==null){if(e[S]&2048&&!(r&R.Self)){let o=OD(t,e,n,r,ht);if(o!==ht)return o}let s=Gm(t,e,n,r,ht);if(s!==ht)return s}return zm(e,n,r,i)}function Gm(t,e,n,r,i){let s=RD(n);if(typeof s=="function"){if(!xm(e,t,r))return r&R.Host?Wm(i,n,r):zm(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&R.Optional))fu(n);else return o}finally{Lm()}}else if(typeof s=="number"){let o=null,a=Hm(t,e),c=Er,l=r&R.Host?e[gt][nt]:null;for((a===-1||r&R.SkipSelf)&&(c=a===-1?Mu(t,e):e[a+8],c===Er||!Cg(r,!1)?a=-1:(o=e[F],a=zo(c),e=qo(c,e)));a!==-1;){let u=e[F];if(Eg(s,a,u.data)){let d=ND(a,e,n,o,r,l);if(d!==ht)return d}c=e[a+8],c!==Er&&Cg(r,e[F].data[a+8]===l)&&Eg(s,a,e)?(o=u,a=zo(c),e=qo(c,e)):a=-1}}return i}function ND(t,e,n,r,i,s){let o=e[F],a=o.data[t+8],c=r==null?ia(a)&&Hl:r!=o&&(a.type&3)!==0,l=i&R.Host&&s===a,u=MD(a,o,n,c,l);return u!==null?xi(e,o,u,a):ht}function MD(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,l=t.directiveEnd,u=s>>20,d=r?a:a+u,f=i?a+u:l;for(let h=d;h<f;h++){let p=o[h];if(h<c&&n===p||h>=c&&p.type===n)return h}if(i){let h=o[c];if(h&&Ui(h)&&h.type===n)return c}return null}function xi(t,e,n,r){let i=t[n],s=e.data;if(wD(i)){let o=i;o.resolving&&sC(iC(s[n]));let a=Go(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?De(o.injectImpl):null,u=xm(t,r,R.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&_D(n,s[n],e)}finally{l!==null&&De(l),Go(a),o.resolving=!1,Lm()}}return i}function RD(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ci)?t[Ci]:void 0;return typeof e=="number"?e>=0?e&Vm:xD:e}function Eg(t,e,n){let r=1<<t;return!!(n[e+(t>>$m)]&r)}function Cg(t,e){return!(t&R.Self)&&!(t&R.Host&&e)}var An=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return qm(this._tNode,this._lView,e,ta(r),n)}};function xD(){return new An(We(),X())}function Ru(t){return ki(()=>{let e=t.prototype.constructor,n=e[ko]||Wl(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[ko]||Wl(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Wl(t){return zg(t)?()=>{let e=Wl($e(t));return e&&e()}:Nn(t)}function OD(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[S]&2048&&!(o[S]&512);){let a=Gm(s,o,n,r|R.Self,ht);if(a!==ht)return a;let c=s.parent;if(!c){let l=o[gm];if(l){let u=l.get(n,ht,r);if(u!==ht)return u}c=Ym(o),o=o[xr]}s=c}return i}function Ym(t){let e=t[F],n=e.type;return n===2?e.declTNode:n===1?t[nt]:null}function Dg(t,e=null,n=null,r){let i=Km(t,e,n,r);return i.resolveInjectorInitializers(),i}function Km(t,e=null,n=null,r,i=new Set){let s=[n||dt,RC(t)];return r=r||(typeof t=="object"?void 0:be(t)),new Ti(s,e||yu(),r||null,i)}var Tn=class Tn{static create(e,n){if(Array.isArray(e))return Dg({name:""},n,e,"");{let r=e.name??"";return Dg({name:r},e.parent,e.providers,r)}}};Tn.THROW_IF_NOT_FOUND=Di,Tn.NULL=new Uo,Tn.\u0275prov=I({token:Tn,providedIn:"any",factory:()=>C(tm)}),Tn.__NG_ELEMENT_ID__=-1;var Se=Tn;var PD=new T("");PD.__NG_ELEMENT_ID__=t=>{let e=We();if(e===null)throw new E(204,!1);if(e.type&2)return e.value;if(t&R.Optional)return null;throw new E(204,!1)};var kD="ngOriginalError";function Dl(t){return t[kD]}var vt=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Dl(e);for(;n&&Dl(n);)n=Dl(n);return n||null}},Qm=new T("",{providedIn:"root",factory:()=>g(vt).handleError.bind(void 0)}),xu=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=LD,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),zl=class extends xu{constructor(e){super(),this._lView=e}onDestroy(e){return Dm(this._lView,e),()=>XC(this._lView,e)}};function LD(){return new zl(X())}function FD(){return ca(We(),X())}function ca(t,e){return new $i(rt(t,e))}var $i=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=FD;let t=e;return t})();var ql=class extends _e{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,pm()&&(this.destroyRef=g(xu,{optional:!0})??void 0)}emit(e){let n=$(null);try{super.next(e)}finally{$(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=bl(s),i&&(i=bl(i)),o&&(o=bl(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof ne&&e.add(a),a}};function bl(t){return e=>{setTimeout(t,void 0,e)}}var Ie=ql;function Zm(t){return(t.flags&128)===128}var Jm=new Map,jD=0;function UD(){return jD++}function VD(t){Jm.set(t[ra],t)}function $D(t){Jm.delete(t[ra])}var bg="__ngContext__";function On(t,e){Zt(e)?(t[bg]=e[ra],VD(e)):t[bg]=e}function Xm(t){return tv(t[Ai])}function ev(t){return tv(t[Je])}function tv(t){for(;t!==null&&!Ot(t);)t=t[Je];return t}var Gl;function nv(t){Gl=t}function BD(){if(Gl!==void 0)return Gl;if(typeof document<"u")return document;throw new E(210,!1)}var Ou=new T("",{providedIn:"root",factory:()=>HD}),HD="ng",Pu=new T(""),yt=new T("",{providedIn:"platform",factory:()=>"unknown"});var ku=new T("",{providedIn:"root",factory:()=>BD().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var WD="h",zD="b";var qD=()=>null;function Lu(t,e,n=!1){return qD(t,e,n)}var rv=!1,GD=new T("",{providedIn:"root",factory:()=>rv});function iv(t){return t instanceof Function?t():t}function YD(t){return(t??g(Se)).get(yt)==="browser"}var kn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(kn||{}),KD;function Fu(t,e){return KD(t,e)}function _r(t,e,n,r,i){if(r!=null){let s,o=!1;Ot(r)?s=r:Zt(r)&&(o=!0,r=r[xt]);let a=mt(r);t===0&&n!==null?i==null?lv(e,n,a):Yo(e,n,a,i||null,!0):t===1&&n!==null?Yo(e,n,a,i||null,!0):t===2?db(e,a,o):t===3&&e.destroyNode(a),s!=null&&hb(e,t,s,n,i)}}function QD(t,e){return t.createText(e)}function ZD(t,e,n){t.setValue(e,n)}function sv(t,e,n){return t.createElement(e,n)}function JD(t,e){ov(t,e),e[xt]=null,e[nt]=null}function XD(t,e,n,r,i,s){r[xt]=i,r[nt]=e,la(t,r,n,1,i,s)}function ov(t,e){e[Rt].changeDetectionScheduler?.notify(8),la(t,e,e[Ee],2,null,null)}function eb(t){let e=t[Ai];if(!e)return Tl(t[F],t);for(;e;){let n=null;if(Zt(e))n=e[Ai];else{let r=e[Be];r&&(n=r)}if(!n){for(;e&&!e[Je]&&e!==t;)Zt(e)&&Tl(e[F],e),e=e[we];e===null&&(e=t),Zt(e)&&Tl(e[F],e),n=e&&e[Je]}e=n}}function tb(t,e,n,r){let i=Be+r,s=n.length;r>0&&(n[i-1][Je]=e),r<s-Be?(e[Je]=n[i],em(n,Be+r,e)):(n.push(e),e[Je]=null),e[we]=n;let o=e[Tr];o!==null&&n!==o&&av(o,e);let a=e[Sr];a!==null&&a.insertView(t),$l(e),e[S]|=128}function av(t,e){let n=t[Bo],r=e[we];if(Zt(r))t[S]|=Ho.HasTransplantedViews;else{let i=r[we][gt];e[gt]!==i&&(t[S]|=Ho.HasTransplantedViews)}n===null?t[Bo]=[e]:n.push(e)}function ju(t,e){let n=t[Bo],r=n.indexOf(e);n.splice(r,1)}function Yl(t,e){if(t.length<=Be)return;let n=Be+e,r=t[n];if(r){let i=r[Tr];i!==null&&i!==t&&ju(i,r),e>0&&(t[n-1][Je]=r[Je]);let s=jo(t,Be+e);JD(r[F],r);let o=s[Sr];o!==null&&o.detachView(s[F]),r[we]=null,r[Je]=null,r[S]&=-129}return r}function cv(t,e){if(!(e[S]&256)){let n=e[Ee];n.destroyNode&&la(t,e,n,3,null,null),eb(e)}}function Tl(t,e){if(e[S]&256)return;let n=$(null);try{e[S]&=-129,e[S]|=256,e[Mn]&&xp(e[Mn]),rb(t,e),nb(t,e),e[F].type===1&&e[Ee].destroy();let r=e[Tr];if(r!==null&&Ot(e[we])){r!==e[we]&&ju(r,e);let i=e[Sr];i!==null&&i.detachView(t)}$D(e)}finally{$(n)}}function nb(t,e){let n=t.cleanup,r=e[Si];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Si]=null);let i=e[Qt];if(i!==null){e[Qt]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function rb(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Ri)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];ft(4,a,c);try{c.call(a)}finally{ft(5,a,c)}}else{ft(4,i,s);try{s.call(i)}finally{ft(5,i,s)}}}}}function ib(t,e,n){return sb(t,e.parent,n)}function sb(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[xt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===pt.None||s===pt.Emulated)return null}return rt(r,n)}}function Yo(t,e,n,r,i){t.insertBefore(e,n,r,i)}function lv(t,e,n){t.appendChild(e,n)}function Tg(t,e,n,r,i){r!==null?Yo(t,e,n,r,i):lv(t,e,n)}function ob(t,e,n,r){t.removeChild(e,n,r)}function Uu(t,e){return t.parentNode(e)}function ab(t,e){return t.nextSibling(e)}function cb(t,e,n){return ub(t,e,n)}function lb(t,e,n){return t.type&40?rt(t,n):null}var ub=lb,Sg;function Vu(t,e,n,r){let i=ib(t,r,e),s=e[Ee],o=r.parent||e[nt],a=cb(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)Tg(s,i,n[c],a,!1);else Tg(s,i,n,a,!1);Sg!==void 0&&Sg(s,r,e,n,i)}function Oo(t,e){if(e!==null){let n=e.type;if(n&3)return rt(e,t);if(n&4)return Kl(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Oo(t,r);{let i=t[e.index];return Ot(i)?Kl(-1,i):mt(i)}}else{if(n&32)return Fu(e,t)()||mt(t[e.index]);{let r=uv(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Mi(t[gt]);return Oo(i,r)}else return Oo(t,e.next)}}}return null}function uv(t,e){if(e!==null){let r=t[gt][nt],i=e.projection;return r.projection[i]}return null}function Kl(t,e){let n=Be+t+1;if(n<e.length){let r=e[n],i=r[F].firstChild;if(i!==null)return Oo(r,i)}return e[Rn]}function db(t,e,n){let r=Uu(t,e);r&&ob(t,r,e,n)}function $u(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],c=n.type;if(o&&e===0&&(a&&On(mt(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)$u(t,e,n.child,r,i,s,!1),_r(e,t,i,a,s);else if(c&32){let l=Fu(n,r),u;for(;u=l();)_r(e,t,i,u,s);_r(e,t,i,a,s)}else c&16?fb(t,e,r,n,i,s):_r(e,t,i,a,s);n=o?n.projectionNext:n.next}}function la(t,e,n,r,i,s){$u(n,r,t.firstChild,e,i,s,!1)}function fb(t,e,n,r,i,s){let o=n[gt],c=o[nt].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];_r(e,t,i,u,s)}else{let l=c,u=o[we];Zm(r)&&(l.flags|=128),$u(t,e,l,u,i,s,!0)}}function hb(t,e,n,r,i){let s=n[Rn],o=mt(n);s!==o&&_r(e,t,r,s,i);for(let a=Be;a<n.length;a++){let c=n[a];la(c[F],c,t,e,r,s)}}function pb(t,e,n){t.setAttribute(e,"style",n)}function dv(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function fv(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Pl(t,e,r),i!==null&&dv(t,e,i),s!==null&&pb(t,e,s)}var Ln={};function de(t=1){hv(sn(),X(),aa()+t,!1)}function hv(t,e,n,r){if(!r)if((e[S]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Ro(e,s,n)}else{let s=t.preOrderHooks;s!==null&&xo(e,s,0,n)}xn(n)}function _t(t,e=R.Default){let n=X();if(n===null)return C(t,e);let r=We();return qm(r,n,$e(t),e)}function pv(){let t="invalid";throw new Error(t)}function gv(t,e,n,r,i,s){let o=$(null);try{let a=null;i&Dr.SignalBased&&(a=e[r][Ap]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Dr.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):ym(e,a,r,s)}finally{$(o)}}function gb(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)xn(~i);else{let s=i,o=n[++r],a=n[++r];hD(o,s);let c=e[s];a(2,c)}}}finally{xn(-1)}}function ua(t,e,n,r,i,s,o,a,c,l,u){let d=e.blueprint.slice();return d[xt]=i,d[S]=r|4|128|8|64,(l!==null||t&&t[S]&2048)&&(d[S]|=2048),Cm(d),d[we]=d[xr]=t,d[Xe]=n,d[Rt]=o||t&&t[Rt],d[Ee]=a||t&&t[Ee],d[br]=c||t&&t[br]||null,d[nt]=s,d[ra]=UD(),d[Vo]=u,d[gm]=l,d[gt]=e.type==2?t[gt]:d,d}function da(t,e,n,r,i){let s=t.data[e];if(s===null)s=mb(t,e,n,r,i),fD()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=oD();s.injectorIndex=o===null?-1:o.injectorIndex}return Vi(s,!0),s}function mb(t,e,n,r,i){let s=Sm(),o=Am(),a=o?s:s&&s.parent,c=t.data[e]=wb(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function mv(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function vv(t,e,n,r,i){let s=aa(),o=r&2;try{xn(-1),o&&e.length>He&&hv(t,e,He,!1),ft(o?2:0,i),n(r,i)}finally{xn(s),ft(o?3:1,i)}}function yv(t,e,n){if(vm(e)){let r=$(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{$(r)}}}function _v(t,e,n){Tm()&&(Ab(t,e,n,rt(n,e)),(n.flags&64)===64&&Dv(t,e,n))}function Iv(t,e,n=rt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function wv(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Bu(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Bu(t,e,n,r,i,s,o,a,c,l,u){let d=He+r,f=d+i,h=vb(d,f),p=typeof l=="function"?l():l;return h[F]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function vb(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ln);return n}function yb(t,e,n,r){let s=r.get(GD,rv)||n===pt.ShadowDom,o=t.selectRootElement(e,s);return _b(o),o}function _b(t){Ib(t)}var Ib=()=>null;function wb(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return rD()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Ag(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=Dr.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?Ng(r,n,l,a,c):Ng(r,n,l,a)}return r}function Ng(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function Eb(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=s[u],f=n?n.get(d):null,h=f?f.inputs:null,p=f?f.outputs:null;c=Ag(0,d.inputs,u,c,h),l=Ag(1,d.outputs,u,l,p);let y=c!==null&&o!==null&&!gu(e)?Fb(c,u,o):null;a.push(y)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function Cb(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Db(t,e,n,r,i,s,o,a){let c=rt(e,n),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(Hu(t,n,u,r,i),ia(e)&&bb(n,e.index)):e.type&3?(r=Cb(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function bb(t,e){let n=rn(e,t);n[S]&16||(n[S]|=64)}function Ev(t,e,n,r){if(Tm()){let i=r===null?null:{"":-1},s=Mb(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&Cv(t,e,n,o,i,a),i&&Rb(n,r,i)}n.mergedAttrs=pu(n.mergedAttrs,n.attrs)}function Cv(t,e,n,r,i,s){for(let l=0;l<r.length;l++)AD(Bm(n,e),t,r[l].type);Ob(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=mv(t,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=pu(n.mergedAttrs,u.hostAttrs),Pb(t,n,e,c,u),xb(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}Eb(t,n,s)}function Tb(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;Sb(o)!=a&&o.push(a),o.push(n,r,s)}}function Sb(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function Ab(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;ia(n)&&kb(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Bm(n,e),On(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],l=xi(e,t,a,n);if(On(l,e),o!==null&&Lb(e,a-i,l,c,n,o),Ui(c)){let u=rn(n.index,e);u[Xe]=xi(e,t,a,n)}}}function Dv(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=pD();try{xn(s);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];Bl(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&Nb(c,l)}}finally{xn(-1),Bl(o)}}function Nb(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Mb(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(EC(e,o.selectors,!1))if(r||(r=[]),Ui(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;Ql(t,e,c)}else r.unshift(o),Ql(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Ql(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Rb(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new E(-301,!1);r.push(e[i],s)}}}function xb(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Ui(e)&&(n[""]=t)}}function Ob(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Pb(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Nn(i.type,!0)),o=new Ri(s,Ui(i),_t);t.blueprint[r]=o,n[r]=o,Tb(t,e,r,mv(t,n,i.hostVars,Ln),i)}function kb(t,e,n){let r=rt(e,t),i=wv(n),s=t[Rt].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=fa(t,ua(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function Lb(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],u=o[a++],d=o[a++];gv(r,n,c,l,u,d)}}function Fb(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function bv(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Tv(t,e){let n=t.contentQueries;if(n!==null){let r=$(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];Rm(s),a.contentQueries(2,e[o],o)}}}finally{$(r)}}}function fa(t,e){return t[Ai]?t[yg][Je]=e:t[Ai]=e,t[yg]=e,e}function Zl(t,e,n){Rm(0);let r=$(null);try{e(t,n)}finally{$(r)}}function jb(t){return t[Si]||(t[Si]=[])}function Ub(t){return t.cleanup||(t.cleanup=[])}function Sv(t,e){let n=t[br],r=n?n.get(vt,null):null;r&&r.handleError(e)}function Hu(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],l=e[o],u=t.data[o];gv(u,l,r,a,c,i)}}function Av(t,e,n){let r=KC(e,t);ZD(t[Ee],r,n)}function Vb(t,e){let n=rn(e,t),r=n[F];$b(r,n);let i=n[xt];i!==null&&n[Vo]===null&&(n[Vo]=Lu(i,n[br])),Wu(r,n,n[Xe])}function $b(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Wu(t,e,n){bu(e);try{let r=t.viewQuery;r!==null&&Zl(1,r,n);let i=t.template;i!==null&&vv(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Sr]?.finishViewCreation(t),t.staticContentQueries&&Tv(t,e),t.staticViewQueries&&Zl(2,t.viewQuery,n);let s=t.components;s!==null&&Bb(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[S]&=-5,Tu()}}function Bb(t,e){for(let n=0;n<e.length;n++)Vb(t,e[n])}function Hb(t,e,n,r){let i=$(null);try{let s=e.tView,a=t[S]&4096?4096:16,c=ua(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[Tr]=l;let u=t[Sr];return u!==null&&(c[Sr]=u.createEmbeddedView(s)),Wu(s,c,n),c}finally{$(i)}}function Mg(t,e){return!e||e.firstChild===null||Zm(t)}function Wb(t,e,n,r=!0){let i=e[F];if(tb(i,e,t,n),r){let o=Kl(n,t),a=e[Ee],c=Uu(a,t[Rn]);c!==null&&XD(i,t[nt],a,e,c,o)}let s=e[Vo];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Ko(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(mt(s)),Ot(s)&&zb(s,r);let o=n.type;if(o&8)Ko(t,e,n.child,r);else if(o&32){let a=Fu(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=uv(e,n);if(Array.isArray(a))r.push(...a);else{let c=Mi(e[gt]);Ko(c[F],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function zb(t,e){for(let n=Be;n<t.length;n++){let r=t[n],i=r[F].firstChild;i!==null&&Ko(r[F],r,i,e)}t[Rn]!==t[xt]&&e.push(t[Rn])}var Nv=[];function qb(t){return t[Mn]??Gb(t)}function Gb(t){let e=Nv.pop()??Object.create(Kb);return e.lView=t,e}function Yb(t){t.lView[Mn]!==t&&(t.lView=null,Nv.push(t))}var Kb=te(_({},Np),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{oa(t.lView)},consumerOnSignalRead(){this.lView[Mn]=this}}),Qb=100;function Mv(t,e=!0,n=0){let r=t[Rt],i=r.rendererFactory,s=!1;s||i.begin?.();try{Zb(t,n)}catch(o){throw e&&Sv(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function Zb(t,e){let n=Nm();try{Ig(!0),Jl(t,e);let r=0;for(;Ni(t);){if(r===Qb)throw new E(103,!1);r++,Jl(t,1)}}finally{Ig(n)}}function Jb(t,e,n,r){let i=e[S];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Rt].inlineEffectRunner?.flush(),bu(e);let a=null,c=null;!s&&Xb(t)&&(c=qb(e),a=Mp(c));try{Cm(e),uD(t.bindingStartIndex),n!==null&&vv(t,e,n,2,r);let l=(i&3)===3;if(!s)if(l){let f=t.preOrderCheckHooks;f!==null&&Ro(e,f,null)}else{let f=t.preOrderHooks;f!==null&&xo(e,f,0,null),El(e,0)}if(o||eT(e),Rv(e,0),t.contentQueries!==null&&Tv(t,e),!s)if(l){let f=t.contentCheckHooks;f!==null&&Ro(e,f)}else{let f=t.contentHooks;f!==null&&xo(e,f,1),El(e,1)}gb(t,e);let u=t.components;u!==null&&Ov(e,u,0);let d=t.viewQuery;if(d!==null&&Zl(2,d,r),!s)if(l){let f=t.viewCheckHooks;f!==null&&Ro(e,f)}else{let f=t.viewHooks;f!==null&&xo(e,f,2),El(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[wl]){for(let f of e[wl])f();e[wl]=null}s||(e[S]&=-73)}catch(l){throw s||oa(e),l}finally{c!==null&&(Rp(c,a),Yb(c)),Tu()}}function Xb(t){return t.type!==2}function Rv(t,e){for(let n=Xm(t);n!==null;n=ev(n))for(let r=Be;r<n.length;r++){let i=n[r];xv(i,e)}}function eT(t){for(let e=Xm(t);e!==null;e=ev(e)){if(!(e[S]&Ho.HasTransplantedViews))continue;let n=e[Bo];for(let r=0;r<n.length;r++){let i=n[r];ZC(i)}}}function tT(t,e,n){let r=rn(e,t);xv(r,n)}function xv(t,e){wu(t)&&Jl(t,e)}function Jl(t,e){let r=t[F],i=t[S],s=t[Mn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Jc(s)),o||=!1,s&&(s.dirty=!1),t[S]&=-9217,o)Jb(r,t,r.template,t[Xe]);else if(i&8192){Rv(t,1);let a=r.components;a!==null&&Ov(t,a,1)}}function Ov(t,e,n){for(let r=0;r<e.length;r++)tT(t,e[r],n)}function zu(t,e){let n=Nm()?64:1088;for(t[Rt].changeDetectionScheduler?.notify(e);t;){t[S]|=n;let r=Mi(t);if(Ul(t)&&!r)return t;t=r}return null}var Pn=class{get rootNodes(){let e=this._lView,n=e[F];return Ko(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Xe]}set context(e){this._lView[Xe]=e}get destroyed(){return(this._lView[S]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[we];if(Ot(e)){let n=e[$o],r=n?n.indexOf(this):-1;r>-1&&(Yl(e,r),jo(n,r))}this._attachedToViewContainer=!1}cv(this._lView[F],this._lView)}onDestroy(e){Dm(this._lView,e)}markForCheck(){zu(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[S]&=-129}reattach(){$l(this._lView),this._lView[S]|=128}detectChanges(){this._lView[S]|=1024,Mv(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new E(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ul(this._lView),n=this._lView[Tr];n!==null&&!e&&ju(n,this._lView),ov(this._lView[F],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new E(902,!1);this._appRef=e;let n=Ul(this._lView),r=this._lView[Tr];r!==null&&!n&&av(r,this._lView),$l(this._lView)}},qu=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=iT;let t=e;return t})(),nT=qu,rT=class extends nT{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=Hb(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Pn(i)}};function iT(){return Pv(We(),X())}function Pv(t,e){return t.type&4?new rT(e,t,ca(t,e)):null}var uV=new RegExp(`^(\\d+)*(${zD}|${WD})*(.*)`);var sT=()=>null;function Rg(t,e){return sT(t,e)}var Ar=class{},Gu=new T("",{providedIn:"root",factory:()=>!1});var kv=new T(""),Xl=class{},Qo=class{};function oT(t){let e=Error(`No component factory found for ${be(t)}.`);return e[aT]=t,e}var aT="ngComponent";var eu=class{resolveComponentFactory(e){throw oT(e)}},nd=class nd{};nd.NULL=new eu;var Nr=nd,Mr=class{},ha=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>cT();let t=e;return t})();function cT(){let t=X(),e=We(),n=rn(e.index,t);return(Zt(n)?n:t)[Ee]}var lT=(()=>{let e=class e{};e.\u0275prov=I({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Sl={};var xg=new Set;function pa(t){xg.has(t)||(xg.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function Lv(t){let e=!0;return setTimeout(()=>{e&&(e=!1,t())}),typeof Sn.requestAnimationFrame=="function"&&Sn.requestAnimationFrame(()=>{e&&(e=!1,t())}),()=>{e=!1}}function Og(t){let e=!0;return queueMicrotask(()=>{e&&t()}),()=>{e=!1}}function Pg(...t){}var q=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ie(!1),this.onMicrotaskEmpty=new Ie(!1),this.onStable=new Ie(!1),this.onError=new Ie(!1),typeof Zone>"u")throw new E(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.callbackScheduled=!1,fT(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new E(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new E(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,uT,Pg,Pg);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},uT={};function Yu(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function dT(t){t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,Zone.root.run(()=>{Lv(()=>{t.callbackScheduled=!1,tu(t),t.isCheckStableRunning=!0,Yu(t),t.isCheckStableRunning=!1})}),tu(t))}function fT(t){let e=()=>{dT(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(hT(a))return n.invokeTask(i,s,o,a);try{return kg(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Lg(t)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return kg(t),n.invoke(i,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!pT(a)&&e(),Lg(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,tu(t),Yu(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function tu(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function kg(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Lg(t){t._nesting--,Yu(t)}var nu=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ie,this.onMicrotaskEmpty=new Ie,this.onStable=new Ie,this.onError=new Ie}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function hT(t){return Fv(t,"__ignore_ng_zone__")}function pT(t){return Fv(t,"__scheduler_tick__")}function Fv(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Ir=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Ir||{}),gT={destroy(){}};function ga(t,e){!e&&BC(ga);let n=e?.injector??g(Se);if(!YD(n))return gT;pa("NgAfterNextRender");let r=n.get(Ku),i=r.handler??=new iu,s=e?.phase??Ir.MixedReadWrite,o=()=>{i.unregister(c),a()},a=n.get(xu).onDestroy(o),c=tt(n,()=>new ru(s,()=>{o(),t()}));return i.register(c),{destroy:o}}var ru=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=g(q),this.errorHandler=g(vt,{optional:!0}),g(Ar,{optional:!0})?.notify(6)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},iu=class{constructor(){this.executingCallbacks=!1,this.buckets={[Ir.EarlyRead]:new Set,[Ir.Write]:new Set,[Ir.MixedReadWrite]:new Set,[Ir.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Ku=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=I({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function su(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=cg(i,a);else if(s==2){let c=a,l=e[++o];r=cg(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Zo=class extends Nr{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Jt(e);return new Rr(n,this.ngModule)}};function Fg(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function mT(t){let e=t.toLowerCase();return e==="svg"?GC:e==="math"?YC:null}var ou=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=ta(r);let i=this.injector.get(e,Sl,r);return i!==Sl||n===Sl?i:this.parentInjector.get(e,n,r)}},Rr=class extends Qo{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=Fg(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Fg(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=TC(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=$(null);try{i=i||this.ngModule;let o=i instanceof Te?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new ou(e,o):e,c=a.get(Mr,null);if(c===null)throw new E(407,!1);let l=a.get(lT,null),u=a.get(Ku,null),d=a.get(Ar,null),f={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:d},h=c.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",y=r?yb(h,r,this.componentDef.encapsulation,a):sv(h,p,mT(p)),w=512;this.componentDef.signals?w|=4096:this.componentDef.onPush||(w|=16);let k=null;y!==null&&(k=Lu(y,a,!0));let Q=Bu(0,null,null,1,0,null,null,null,null,null,null),W=ua(null,Q,null,w,null,null,f,h,a,null,k);bu(W);let le,je;try{let ye=this.componentDef,At,yi=null;ye.findHostDirectiveDefs?(At=[],yi=new Map,ye.findHostDirectiveDefs(ye,At,yi),At.push(ye)):At=[ye];let _i=vT(W,y),Qc=yT(_i,y,ye,At,W,f,h);je=Em(Q,He),y&&wT(h,ye,y,r),n!==void 0&&ET(je,this.ngContentSelectors,n),le=IT(Qc,ye,At,yi,W,[CT]),Wu(Q,W,null)}finally{Tu()}return new au(this.componentType,le,ca(je,W),W,je)}finally{$(s)}}},au=class extends Xl{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Pn(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Hu(s[F],s,i,e,n),this.previousInputValues.set(e,n);let o=rn(this._tNode.index,s);zu(o,1)}}get injector(){return new An(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function vT(t,e){let n=t[F],r=He;return t[r]=e,da(n,r,2,"#host",null)}function yT(t,e,n,r,i,s,o){let a=i[F];_T(r,t,e,o);let c=null;e!==null&&(c=Lu(e,i[br]));let l=s.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=ua(i,wv(n),null,u,i[t.index],t,s,l,null,null,c);return a.firstCreatePass&&Ql(a,t,r.length-1),fa(i,d),i[t.index]=d}function _T(t,e,n,r){for(let i of t)e.mergedAttrs=pu(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(su(e,e.mergedAttrs,!0),n!==null&&fv(r,n,e))}function IT(t,e,n,r,i,s){let o=We(),a=i[F],c=rt(o,i);Cv(a,i,o,n,null,r);for(let u=0;u<n.length;u++){let d=o.directiveStart+u,f=xi(i,a,d,o);On(f,i)}Dv(a,i,o),c&&On(c,i);let l=xi(i,a,o.directiveStart+o.componentOffset,o);if(t[Xe]=i[Xe]=l,s!==null)for(let u of s)u(l,e);return yv(a,o,i),l}function wT(t,e,n,r){if(r)Pl(t,n,["ng-version","18.0.1"]);else{let{attrs:i,classes:s}=SC(e.selectors[0]);i&&Pl(t,n,i),s&&s.length>0&&dv(t,n,s.join(" "))}}function ET(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function CT(){let t=We();Nu(X()[F],t)}var Bi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=DT;let t=e;return t})();function DT(){let t=We();return TT(t,X())}var bT=Bi,jv=class extends bT{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return ca(this._hostTNode,this._hostLView)}get injector(){return new An(this._hostTNode,this._hostLView)}get parentInjector(){let e=Mu(this._hostTNode,this._hostLView);if(Um(e)){let n=qo(e,this._hostLView),r=zo(e),i=n[F].data[r+8];return new An(i,n)}else return new An(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=jg(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Be}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Rg(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,Mg(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!HC(e),a;if(o)a=n;else{let p=n||{};a=p.index,r=p.injector,i=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}let c=o?e:new Rr(Jt(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let y=(o?l:this.parentInjector).get(Te,null);y&&(s=y)}let u=Jt(c.componentType??{}),d=Rg(this._lContainer,u?.id??null),f=d?.firstChild??null,h=c.create(l,i,f,s);return this.insertImpl(h.hostView,a,Mg(this._hostTNode,d)),h}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(QC(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[we],l=new jv(c,c[nt],c[we]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return Wb(o,i,s,r),e.attachToViewContainerRef(),em(Al(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=jg(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Yl(this._lContainer,n);r&&(jo(Al(this._lContainer),n),cv(r[F],r))}detach(e){let n=this._adjustIndex(e,-1),r=Yl(this._lContainer,n);return r&&jo(Al(this._lContainer),n)!=null?new Pn(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function jg(t){return t[$o]}function Al(t){return t[$o]||(t[$o]=[])}function TT(t,e){let n,r=e[t.index];return Ot(r)?n=r:(n=bv(r,e,null,t),e[t.index]=n,fa(e,n)),AT(n,e,t,r),new jv(n,t,e)}function ST(t,e){let n=t[Ee],r=n.createComment(""),i=rt(e,t),s=Uu(n,i);return Yo(n,s,r,ab(n,i),!1),r}var AT=RT,NT=()=>!1;function MT(t,e,n){return NT(t,e,n)}function RT(t,e,n,r){if(t[Rn])return;let i;n.type&8?i=mt(r):i=ST(e,n),t[Rn]=i}var Xt=class{},Oi=class{};var cu=class extends Xt{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Zo(this);let i=cm(e);this._bootstrapComponents=iv(i.bootstrap),this._r3Injector=Km(e,n,[{provide:Xt,useValue:this},{provide:Nr,useValue:this.componentFactoryResolver},...r],be(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},lu=class extends Oi{constructor(e){super(),this.moduleType=e}create(e){return new cu(this.moduleType,e,[])}};var Jo=class extends Xt{constructor(e){super(),this.componentFactoryResolver=new Zo(this),this.instance=null;let n=new Ti([...e.providers,{provide:Xt,useValue:this},{provide:Nr,useValue:this.componentFactoryResolver}],e.parent||yu(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ma(t,e,n=null){return new Jo({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Hi=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new pe(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Uv(t,e,n){return t[e]=n}function Pi(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Vv(t,e,n,r){let i=Pi(t,e,n);return Pi(t,e+1,r)||i}function xT(t){return(t.flags&32)===32}function OT(t,e,n,r,i,s,o,a,c){let l=e.consts,u=da(e,t,4,o||null,a||null);Ev(e,n,u,Wo(l,c)),Nu(e,u);let d=u.tView=Bu(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function PT(t,e,n,r,i,s,o,a,c,l){let u=n+He,d=e.firstCreatePass?OT(u,e,t,r,i,s,o,a,c):e.data[u];Vi(d,!1);let f=kT(e,t,d,n);Su()&&Vu(e,t,f,d),On(f,t);let h=bv(f,t,f,d);return t[u]=h,fa(t,h),MT(h,d,t),_u(d)&&_v(e,t,d),c!=null&&Iv(t,d,l),d}function It(t,e,n,r,i,s,o,a){let c=X(),l=sn(),u=Wo(l.consts,s);return PT(c,l,t,e,n,r,i,u,o,a),It}var kT=LT;function LT(t,e,n,r){return Au(!0),e[Ee].createComment("")}function FT(t,e,n,r){return Pi(t,Mm(),n)?e+Lo(n)+r:Ln}function jT(t,e,n,r,i,s){let o=lD(),a=Vv(t,o,n,i);return dD(2),a?e+Lo(n)+r+Lo(i)+s:Ln}function ze(t,e,n){let r=X(),i=Mm();if(Pi(r,i,e)){let s=sn(),o=vD();Db(s,o,r,t,e,r[Ee],n,!1)}return ze}function Ug(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Hu(t,n,s[o],o,r)}function UT(t,e,n,r,i,s){let o=e.consts,a=Wo(o,i),c=da(e,t,2,r,a);return Ev(e,n,c,Wo(o,s)),c.attrs!==null&&su(c,c.attrs,!1),c.mergedAttrs!==null&&su(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function oe(t,e,n,r){let i=X(),s=sn(),o=He+t,a=i[Ee],c=s.firstCreatePass?UT(o,s,i,e,n,r):s.data[o],l=VT(s,i,c,a,e,t);i[o]=l;let u=_u(c);return Vi(c,!0),fv(a,l,c),!xT(c)&&Su()&&Vu(s,i,l,c),eD()===0&&On(l,i),tD(),u&&(_v(s,i,c),yv(s,c,i)),r!==null&&Iv(i,c),oe}function ee(){let t=We();Am()?aD():(t=t.parent,Vi(t,!1));let e=t;iD(e)&&sD(),nD();let n=sn();return n.firstCreatePass&&(Nu(n,t),vm(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&ED(e)&&Ug(n,e,X(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&CD(e)&&Ug(n,e,X(),e.stylesWithoutHost,!1),ee}function Wi(t,e,n,r){return oe(t,e,n,r),ee(),Wi}var VT=(t,e,n,r,i,s)=>(Au(!0),sv(r,i,yD()));function $v(){return X()}var bn=void 0;function $T(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var BT=["en",[["a","p"],["AM","PM"],bn],[["AM","PM"],bn,bn],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],bn,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],bn,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",bn,"{1} 'at' {0}",bn],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",$T],Nl={};function Qu(t){let e=HT(t),n=Vg(e);if(n)return n;let r=e.split("-")[0];if(n=Vg(r),n)return n;if(r==="en")return BT;throw new E(701,!1)}function Vg(t){return t in Nl||(Nl[t]=Sn.ng&&Sn.ng.common&&Sn.ng.common.locales&&Sn.ng.common.locales[t]),Nl[t]}var Or=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Or||{});function HT(t){return t.toLowerCase().replace(/_/g,"-")}var Xo="en-US";var WT=Xo;function zT(t){typeof t=="string"&&(WT=t.toLowerCase().replace(/_/g,"-"))}var qT=(t,e,n)=>{};function zi(t,e,n,r){let i=X(),s=sn(),o=We();return YT(s,i,i[Ee],o,t,e,r),zi}function GT(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Si],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function YT(t,e,n,r,i,s,o){let a=_u(r),l=t.firstCreatePass&&Ub(t),u=e[Xe],d=jb(e),f=!0;if(r.type&3||o){let y=rt(r,e),w=o?o(y):y,k=d.length,Q=o?le=>o(mt(le[r.index])):r.index;qT(y,i,s);let W=null;if(!o&&a&&(W=GT(t,e,i,r.index)),W!==null){let le=W.__ngLastListenerFn__||W;le.__ngNextListenerFn__=s,W.__ngLastListenerFn__=s,f=!1}else{s=Bg(r,e,u,s);let le=n.listen(w,i,s);d.push(s,le),l&&l.push(i,Q,k,k+1)}}else s=Bg(r,e,u,s);let h=r.outputs,p;if(f&&h!==null&&(p=h[i])){let y=p.length;if(y)for(let w=0;w<y;w+=2){let k=p[w],Q=p[w+1],je=e[k][Q].subscribe(s),ye=d.length;d.push(s,je),l&&l.push(i,r.index,ye,-(ye+1))}}}function $g(t,e,n,r){let i=$(null);try{return ft(6,e,n),n(r)!==!1}catch(s){return Sv(t,s),!1}finally{ft(7,e,n),$(i)}}function Bg(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?rn(t.index,e):e;zu(o,5);let a=$g(e,n,r,s),c=i.__ngNextListenerFn__;for(;c;)a=$g(e,n,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function ke(t=1){return mD(t)}function KT(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function va(t){let e=cD();return Iu(e,He+t)}function ge(t,e=""){let n=X(),r=sn(),i=t+He,s=r.firstCreatePass?da(r,i,1,e,null):r.data[i],o=QT(r,n,s,e,t);n[i]=o,Su()&&Vu(r,n,o,s),Vi(s,!1)}var QT=(t,e,n,r,i)=>(Au(!0),QD(e[Ee],r));function qi(t){return Pt("",t,""),qi}function Pt(t,e,n){let r=X(),i=FT(r,t,e,n);return i!==Ln&&Av(r,aa(),i),Pt}function Zu(t,e,n,r,i){let s=X(),o=jT(s,t,e,n,r,i);return o!==Ln&&Av(s,aa(),o),Zu}var ZT=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=dm(!1,r.type),s=i.length>0?ma([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=I({token:e,providedIn:"environment",factory:()=>new e(C(Te))});let t=e;return t})();function on(t){pa("NgStandalone"),t.getStandaloneInjector=e=>e.get(ZT).getOrCreateStandaloneInjector(t)}function Ju(t,e,n,r){return Hv(X(),Du(),t,e,n,r)}function Bv(t,e){let n=t[e];return n===Ln?void 0:n}function Hv(t,e,n,r,i,s){let o=e+n;return Pi(t,o,i)?Uv(t,o+1,s?r.call(s,i):r(i)):Bv(t,o+1)}function JT(t,e,n,r,i,s,o){let a=e+n;return Vv(t,a,i,s)?Uv(t,a+2,o?r.call(o,i,s):r(i,s)):Bv(t,a+2)}function Pr(t,e){let n=sn(),r,i=t+He;n.firstCreatePass?(r=XT(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=Nn(r.type,!0)),o,a=De(_t);try{let c=Go(!1),l=s();return Go(c),KT(n,X(),i,l),l}finally{De(a)}}function XT(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function ya(t,e,n){let r=t+He,i=X(),s=Iu(i,r);return Wv(i,r)?Hv(i,Du(),e,s.transform,n,s):s.transform(n)}function Xu(t,e,n,r){let i=t+He,s=X(),o=Iu(s,i);return Wv(s,i)?JT(s,Du(),e,o.transform,n,r,o):o.transform(n,r)}function Wv(t,e){return t[F].data[e].pure}function _a(t,e){return Pv(t,e)}var en=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},zv=new en("18.0.1"),Ia=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var qv=new T("");function kr(t){return!!t&&typeof t.then=="function"}function ed(t){return!!t&&typeof t.subscribe=="function"}var wa=new T(""),Gv=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=g(wa,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(kr(o))r.push(o);else if(ed(o)){let a=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ea=new T("");function eS(){Op(()=>{throw new E(600,!1)})}function tS(t){return t.isBoundToModule}var nS=10;function rS(t,e,n){try{let r=n();return kr(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Lr=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=g(Qm),this.afterRenderEffectManager=g(Ku),this.zonelessEnabled=g(Gu),this.externalTestViews=new Set,this.beforeRender=new _e,this.afterTick=new _e,this.componentTypes=[],this.components=[],this.isStable=g(Hi).hasPendingTasks.pipe(b(r=>!r)),this._injector=g(Te)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof Qo;if(!this._injector.get(Gv).done){let h=!s&&am(r),p=!1;throw new E(405,p)}let a;s?a=r:a=this._injector.get(Nr).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=tS(a)?void 0:this._injector.get(Xt),l=i||a.selector,u=a.create(Se.NULL,[],l,c),d=u.location.nativeElement,f=u.injector.get(qv,null);return f?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Ml(this.components,u),f?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new E(101,!1);let i=$(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this._runningTick=!1,$(i),this.afterTick.next()}}detectChangesInAttachedViews(r){let i=null;this._injector.destroyed||(i=this._injector.get(Mr,null,{optional:!0}));let s=0,o=this.afterRenderEffectManager;for(;s<nS;){let a=s===0;if(r||!a){this.beforeRender.next(a);for(let{_lView:c,notifyErrorHandler:l}of this._views)iS(c,l,a,this.zonelessEnabled)}else i?.begin?.(),i?.end?.();if(s++,o.executeInternalCallbacks(),!this.allViews.some(({_lView:c})=>Ni(c))&&(o.execute(),!this.allViews.some(({_lView:c})=>Ni(c))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Ml(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Ea,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Ml(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new E(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Ml(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function iS(t,e,n,r){if(!n&&!Ni(t))return;Mv(t,e,n&&!r?0:1)}var uu=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Ca=(()=>{let e=class e{compileModuleSync(r){return new lu(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=cm(r),o=iv(s.declarations).reduce((a,c)=>{let l=Jt(c);return l&&a.push(new Rr(l)),a},[]);return new uu(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var sS=(()=>{let e=class e{constructor(){this.zone=g(q),this.changeDetectionScheduler=g(Ar),this.applicationRef=g(Lr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Yv({ngZoneFactory:t,ignoreChangesOutsideZone:e}){return t??=()=>new q(Qv()),[{provide:q,useFactory:t},{provide:Cr,multi:!0,useFactory:()=>{let n=g(sS,{optional:!0});return()=>n.initialize()}},{provide:Cr,multi:!0,useFactory:()=>{let n=g(aS);return()=>{n.initialize()}}},{provide:Qm,useFactory:oS},e===!0?{provide:kv,useValue:!0}:[]]}function oS(){let t=g(q),e=g(vt);return n=>t.runOutsideAngular(()=>e.handleError(n))}function Kv(t){let e=t?.ignoreChangesOutsideZone,n=Yv({ngZoneFactory:()=>{let r=Qv(t);return r.shouldCoalesceEventChangeDetection&&pa("NgZone_CoalesceEvent"),new q(r)},ignoreChangesOutsideZone:e});return nn([[],{provide:Gu,useValue:!1},n])}function Qv(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var aS=(()=>{let e=class e{constructor(){this.subscription=new ne,this.initialized=!1,this.zone=g(q),this.pendingTasks=g(Hi)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{q.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{q.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var cS=(()=>{let e=class e{constructor(){this.appRef=g(Lr),this.taskService=g(Hi),this.ngZone=g(q),this.zonelessEnabled=g(Gu),this.disableScheduling=g(kv,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new ne,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof nu||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?Og:Lv;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&q.isInAngularZone())}tick(r){if(this.runningTick||this.appRef.destroyed)return;let i=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(r)},void 0,this.schedulerTickApplyArgs)}catch(s){throw this.taskService.remove(i),s}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Og(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(i)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function lS(){return typeof $localize<"u"&&$localize.locale||Xo}var Da=new T("",{providedIn:"root",factory:()=>g(Da,R.Optional|R.SkipSelf)||lS()});var Zv=new T("");var Po=null;function uS(t=[],e){return Se.create({name:e,providers:[{provide:na,useValue:"platform"},{provide:Zv,useValue:new Set([()=>Po=null])},...t]})}function dS(t=[]){if(Po)return Po;let e=uS(t);return Po=e,eS(),fS(e),e}function fS(t){t.get(Pu,null)?.forEach(n=>n())}var Fr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=hS;let t=e;return t})();function hS(t){return pS(We(),X(),(t&16)===16)}function pS(t,e,n){if(ia(t)&&!n){let r=rn(t.index,e);return new Pn(r,r)}else if(t.type&47){let r=e[gt];return new Pn(r,e)}return null}function Jv(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=dS(r),s=[Yv({}),{provide:Ar,useExisting:cS},...n||[]],a=new Jo({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(q);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(vt,null),u;c.runOutsideAngular(()=>{u=c.onError.subscribe({next:h=>{l.handleError(h)}})});let d=()=>a.destroy(),f=i.get(Zv);return f.add(d),a.onDestroy(()=>{u.unsubscribe(),f.delete(d)}),rS(l,c,()=>{let h=a.get(Gv);return h.runInitializers(),h.donePromise.then(()=>{let p=a.get(Da,Xo);zT(p||Xo);let y=a.get(Lr);return e!==void 0&&y.bootstrap(e),y})})})}catch(e){return Promise.reject(e)}}function td(t){let e=$(null);try{return t()}finally{$(e)}}function Xv(t){let e=Jt(t);if(!e)return null;let n=new Rr(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var sy=null;function Ur(){return sy}function oy(t){sy??=t}var ba=class{};var Ae=new T(""),dd=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>g(_S),providedIn:"platform"});let t=e;return t})(),ay=new T(""),_S=(()=>{let e=class e extends dd{constructor(){super(),this._doc=g(Ae),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ur().getBaseHref(this._doc)}onPopState(r){let i=Ur().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Ur().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function fd(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function ey(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Lt(t){return t&&t[0]!=="?"?"?"+t:t}var Fn=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>g(hd),providedIn:"root"});let t=e;return t})(),cy=new T(""),hd=(()=>{let e=class e extends Fn{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??g(Ae).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return fd(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Lt(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Lt(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Lt(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(C(dd),C(cy,8))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ly=(()=>{let e=class e extends Fn{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=fd(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Lt(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Lt(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(C(dd),C(cy,8))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),Vr=(()=>{let e=class e{constructor(r){this._subject=new Ie,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=ES(ey(ty(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Lt(i))}normalize(r){return e.stripTrailingSlash(wS(this._basePath,ty(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Lt(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Lt(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=Lt,e.joinWithSlash=fd,e.stripTrailingSlash=ey,e.\u0275fac=function(i){return new(i||e)(C(Fn))},e.\u0275prov=I({token:e,factory:()=>IS(),providedIn:"root"});let t=e;return t})();function IS(){return new Vr(C(Fn))}function wS(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function ty(t){return t.replace(/\/index.html$/,"")}function ES(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var uy=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(uy||{});var wt={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function jr(t,e){let n=Qu(t),r=n[Or.NumberSymbols][e];if(typeof r>"u"){if(e===wt.CurrencyDecimal)return n[Or.NumberSymbols][wt.Decimal];if(e===wt.CurrencyGroup)return n[Or.NumberSymbols][wt.Group]}return r}function CS(t,e){return Qu(t)[Or.NumberFormats][e]}var DS=/^(\d+)?\.((\d+)(-(\d+))?)?$/,ny=22,Ta=".",Gi="0",bS=";",TS=",",rd="#";var SS="%";function AS(t,e,n,r,i,s,o=!1){let a="",c=!1;if(!isFinite(t))a=jr(n,wt.Infinity);else{let l=xS(t);o&&(l=RS(l));let u=e.minInt,d=e.minFrac,f=e.maxFrac;if(s){let Q=s.match(DS);if(Q===null)throw new Error(`${s} is not a valid digit info`);let W=Q[1],le=Q[3],je=Q[5];W!=null&&(u=id(W)),le!=null&&(d=id(le)),je!=null?f=id(je):le!=null&&d>f&&(f=d)}OS(l,d,f);let h=l.digits,p=l.integerLen,y=l.exponent,w=[];for(c=h.every(Q=>!Q);p<u;p++)h.unshift(0);for(;p<0;p++)h.unshift(0);p>0?w=h.splice(p,h.length):(w=h,h=[0]);let k=[];for(h.length>=e.lgSize&&k.unshift(h.splice(-e.lgSize,h.length).join(""));h.length>e.gSize;)k.unshift(h.splice(-e.gSize,h.length).join(""));h.length&&k.unshift(h.join("")),a=k.join(jr(n,r)),w.length&&(a+=jr(n,i)+w.join("")),y&&(a+=jr(n,wt.Exponential)+"+"+y)}return t<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function NS(t,e,n){let r=CS(e,uy.Percent),i=MS(r,jr(e,wt.MinusSign));return AS(t,i,e,wt.Group,wt.Decimal,n,!0).replace(new RegExp(SS,"g"),jr(e,wt.PercentSign))}function MS(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(bS),i=r[0],s=r[1],o=i.indexOf(Ta)!==-1?i.split(Ta):[i.substring(0,i.lastIndexOf(Gi)+1),i.substring(i.lastIndexOf(Gi)+1)],a=o[0],c=o[1]||"";n.posPre=a.substring(0,a.indexOf(rd));for(let u=0;u<c.length;u++){let d=c.charAt(u);d===Gi?n.minFrac=n.maxFrac=u+1:d===rd?n.maxFrac=u+1:n.posSuf+=d}let l=a.split(TS);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,s){let u=i.length-n.posPre.length-n.posSuf.length,d=s.indexOf(rd);n.negPre=s.substring(0,d).replace(/'/g,""),n.negSuf=s.slice(d+u).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function RS(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function xS(t){let e=Math.abs(t)+"",n=0,r,i,s,o,a;for((i=e.indexOf(Ta))>-1&&(e=e.replace(Ta,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===Gi;s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===Gi;)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>ny&&(r=r.splice(0,ny-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function OS(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen,s=Math.min(Math.max(e,i),n),o=s+t.integerLen,a=r[o];if(o>0){r.splice(Math.max(t.integerLen,o));for(let d=o;d<r.length;d++)r[d]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let d=1;d<o;d++)r[d]=0}if(a>=5)if(o-1<0){for(let d=0;d>o;d--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let c=s!==0,l=e+t.integerLen,u=r.reduceRight(function(d,f,h,p){return f=f+d,p[h]=f<10?f:f-10,c&&(p[h]===0&&h>=l?p.pop():c=!1),f>=10?1:0},0);u&&(r.unshift(u),t.integerLen++)}function id(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}function dy(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var sd=/\s+/,ry=[],fy=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=ry,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(sd):ry}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(sd):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let s=this.stateMap.get(r);s!==void 0?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],s=r[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(sd).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(i){return new(i||e)(_t($i),_t(ha))},e.\u0275dir=ji({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var Aa=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new od,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){iy("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){iy("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(_t(Bi),_t(qu))},e.\u0275dir=ji({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),od=class{constructor(){this.$implicit=null,this.ngIf=null}};function iy(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${be(e)}'.`)}function hy(t,e){return new E(2100,!1)}var ad=class{createSubscription(e,n){return td(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){td(()=>e.unsubscribe())}},cd=class{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}},PS=new cd,kS=new ad,Na=(()=>{let e=class e{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(kr(r))return PS;if(ed(r))return kS;throw hy(e,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(i){return new(i||e)(_t(Fr,16))},e.\u0275pipe=mu({name:"async",type:e,pure:!1,standalone:!0});let t=e;return t})();var py=(()=>{let e=class e{constructor(r){this._locale=r}transform(r,i,s){if(!LS(r))return null;s||=this._locale;try{let o=FS(r);return NS(o,s,i)}catch(o){throw hy(e,o.message)}}};e.\u0275fac=function(i){return new(i||e)(_t(Da,16))},e.\u0275pipe=mu({name:"percent",type:e,pure:!0,standalone:!0});let t=e;return t})();function LS(t){return!(t==null||t===""||t!==t)}function FS(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new Error(`${t} is not a number`);return t}var Yi=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Fi({type:e}),e.\u0275inj=Li({});let t=e;return t})(),pd="browser",jS="server";function US(t){return t===pd}function gd(t){return t===jS}var gy=(()=>{let e=class e{};e.\u0275prov=I({token:e,providedIn:"root",factory:()=>US(g(yt))?new ld(g(Ae),window):new ud});let t=e;return t})(),ld=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=VS(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function VS(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var ud=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Sa=class{};var yd=class extends ba{constructor(){super(...arguments),this.supportsDOMEvents=!0}},_d=class t extends yd{static makeCurrent(){oy(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=$S();return n==null?null:BS(n)}resetBaseElement(){Ki=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return dy(document.cookie,e)}},Ki=null;function $S(){return Ki=Ki||document.querySelector("base"),Ki?Ki.getAttribute("href"):null}function BS(t){return new URL(t,document.baseURI).pathname}var HS=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),Id=new T(""),Iy=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new E(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(C(Id),C(q))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),Ma=class{constructor(e){this._doc=e}},md="ng-app-id",wy=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=gd(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${md}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(md),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(md,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(C(Ae),C(Ou),C(ku,8),C(yt))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),vd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Ed=/%COMP%/g,Ey="%COMP%",WS=`_nghost-${Ey}`,zS=`_ngcontent-${Ey}`,qS=!0,GS=new T("",{providedIn:"root",factory:()=>qS});function YS(t){return zS.replace(Ed,t)}function KS(t){return WS.replace(Ed,t)}function Cy(t,e){return e.map(n=>n.replace(Ed,t))}var vy=(()=>{let e=class e{constructor(r,i,s,o,a,c,l,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=gd(c),this.defaultRenderer=new Qi(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===pt.ShadowDom&&(i=te(_({},i),{encapsulation:pt.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Ra?s.applyToHost(r):s instanceof Zi&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(i.encapsulation){case pt.Emulated:o=new Ra(l,u,i,this.appId,d,a,c,f);break;case pt.ShadowDom:return new wd(l,u,r,i,a,c,this.nonce,f);default:o=new Zi(l,u,i,d,a,c,f);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(C(Iy),C(wy),C(Ou),C(GS),C(Ae),C(yt),C(q),C(ku))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),Qi=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(vd[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(yy(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(yy(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new E(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=vd[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=vd[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(kn.DashCase|kn.Important)?e.style.setProperty(n,r,i&kn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&kn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Ur().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function yy(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var wd=class extends Qi{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=Cy(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Zi=class extends Qi{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?Cy(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ra=class extends Zi{constructor(e,n,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,n,r,s,o,a,c,l),this.contentAttr=YS(l),this.hostAttr=KS(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},QS=(()=>{let e=class e extends Ma{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(C(Ae))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),_y=["alt","control","meta","shift"],ZS={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},JS={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},XS=(()=>{let e=class e extends Ma{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ur().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),_y.forEach(u=>{let d=i.indexOf(u);d>-1&&(i.splice(d,1),a+=u+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=ZS[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),_y.forEach(a=>{if(a!==s){let c=JS[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(C(Ae))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})();function Dy(t,e){return Jv(_({rootComponent:t},e0(e)))}function e0(t){return{appProviders:[...s0,...t?.providers??[]],platformProviders:i0}}function t0(){_d.makeCurrent()}function n0(){return new vt}function r0(){return nv(document),document}var i0=[{provide:yt,useValue:pd},{provide:Pu,useValue:t0,multi:!0},{provide:Ae,useFactory:r0,deps:[]}];var s0=[{provide:na,useValue:"root"},{provide:vt,useFactory:n0,deps:[]},{provide:Id,useClass:QS,multi:!0,deps:[Ae,q,yt]},{provide:Id,useClass:XS,multi:!0,deps:[Ae]},vy,wy,Iy,{provide:Mr,useExisting:vy},{provide:Sa,useClass:HS,deps:[]},[]];var by=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(C(Ae))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var N="primary",hs=Symbol("RouteTitle"),Sd=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function qr(t){return new Sd(t)}function a0(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function c0(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Et(t[n],e[n]))return!1;return!0}function Et(t,e){let n=t?Ad(t):void 0,r=e?Ad(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Ly(t[i],e[i]))return!1;return!0}function Ad(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Ly(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function Fy(t){return t.length>0?t[t.length-1]:null}function un(t){return pl(t)?t:kr(t)?J(Promise.resolve(t)):D(t)}var l0={exact:Uy,subset:Vy},jy={exact:u0,subset:d0,ignored:()=>!0};function Ty(t,e,n){return l0[n.paths](t.root,e.root,n.matrixParams)&&jy[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function u0(t,e){return Et(t,e)}function Uy(t,e,n){if(!Un(t.segments,e.segments)||!Pa(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!Uy(t.children[r],e.children[r],n))return!1;return!0}function d0(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Ly(t[n],e[n]))}function Vy(t,e,n){return $y(t,e,e.segments,n)}function $y(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Un(i,n)||e.hasChildren()||!Pa(i,n,r))}else if(t.segments.length===n.length){if(!Un(t.segments,n)||!Pa(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!Vy(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Un(t.segments,i)||!Pa(t.segments,i,r)||!t.children[N]?!1:$y(t.children[N],e,s,r)}}function Pa(t,e,n){return e.every((r,i)=>jy[n](t[i].parameters,r.parameters))}var an=class{constructor(e=new z([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=qr(this.queryParams),this._queryParamMap}toString(){return p0.serialize(this)}},z=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ka(this)}},jn=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=qr(this.parameters),this._parameterMap}toString(){return Hy(this)}};function f0(t,e){return Un(t,e)&&t.every((n,r)=>Et(n.parameters,e[r].parameters))}function Un(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function h0(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===N&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==N&&(n=n.concat(e(i,r)))}),n}var ps=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>new Gr,providedIn:"root"});let t=e;return t})(),Gr=class{parse(e){let n=new Md(e);return new an(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Ji(e.root,!0)}`,r=v0(e.queryParams),i=typeof e.fragment=="string"?`#${g0(e.fragment)}`:"";return`${n}${r}${i}`}},p0=new Gr;function ka(t){return t.segments.map(e=>Hy(e)).join("/")}function Ji(t,e){if(!t.hasChildren())return ka(t);if(e){let n=t.children[N]?Ji(t.children[N],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==N&&r.push(`${i}:${Ji(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=h0(t,(r,i)=>i===N?[Ji(t.children[N],!1)]:[`${i}:${Ji(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[N]!=null?`${ka(t)}/${n[0]}`:`${ka(t)}/(${n.join("//")})`}}function By(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xa(t){return By(t).replace(/%3B/gi,";")}function g0(t){return encodeURI(t)}function Nd(t){return By(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function La(t){return decodeURIComponent(t)}function Sy(t){return La(t.replace(/\+/g,"%20"))}function Hy(t){return`${Nd(t.path)}${m0(t.parameters)}`}function m0(t){return Object.entries(t).map(([e,n])=>`;${Nd(e)}=${Nd(n)}`).join("")}function v0(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${xa(n)}=${xa(i)}`).join("&"):`${xa(n)}=${xa(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var y0=/^[^\/()?;#]+/;function Cd(t){let e=t.match(y0);return e?e[0]:""}var _0=/^[^\/()?;=#]+/;function I0(t){let e=t.match(_0);return e?e[0]:""}var w0=/^[^=?&#]+/;function E0(t){let e=t.match(w0);return e?e[0]:""}var C0=/^[^&#]+/;function D0(t){let e=t.match(C0);return e?e[0]:""}var Md=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new z([],{}):new z([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[N]=new z(e,n)),r}parseSegment(){let e=Cd(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new E(4009,!1);return this.capture(e),new jn(La(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=I0(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Cd(this.remaining);i&&(r=i,this.capture(r))}e[La(n)]=La(r)}parseQueryParam(e){let n=E0(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=D0(this.remaining);o&&(r=o,this.capture(r))}let i=Sy(n),s=Sy(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Cd(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new E(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=N);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[N]:new z([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new E(4011,!1)}};function Wy(t){return t.segments.length>0?new z([],{[N]:t}):t}function zy(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=zy(i);if(r===N&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new z(t.segments,e);return b0(n)}function b0(t){if(t.numberOfChildren===1&&t.children[N]){let e=t.children[N];return new z(t.segments.concat(e.segments),e.children)}return t}function is(t){return t instanceof an}function T0(t,e,n=null,r=null){let i=qy(t);return Gy(i,e,n,r)}function qy(t){let e;function n(s){let o={};for(let c of s.children){let l=n(c);o[c.outlet]=l}let a=new z(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=Wy(r);return e??i}function Gy(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Dd(i,i,i,n,r);let s=S0(e);if(s.toRoot())return Dd(i,i,new z([],{}),n,r);let o=A0(s,i,t),a=o.processChildren?ts(o.segmentGroup,o.index,s.commands):Ky(o.segmentGroup,o.index,s.commands);return Dd(i,o.segmentGroup,a,n,r)}function Fa(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function ss(t){return typeof t=="object"&&t!=null&&t.outlets}function Dd(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let o;t===e?o=n:o=Yy(t,e,n);let a=Wy(zy(o));return new an(a,s,i)}function Yy(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=Yy(s,e,n)}),new z(t.segments,r)}var ja=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Fa(r[0]))throw new E(4003,!1);let i=r.find(ss);if(i&&i!==Fy(r))throw new E(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function S0(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new ja(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new ja(n,e,r)}var Hr=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function A0(t,e,n){if(t.isAbsolute)return new Hr(e,!0,0);if(!n)return new Hr(e,!1,NaN);if(n.parent===null)return new Hr(n,!0,0);let r=Fa(t.commands[0])?0:1,i=n.segments.length-1+r;return N0(n,i,t.numberOfDoubleDots)}function N0(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new E(4005,!1);i=r.segments.length}return new Hr(r,!1,i-s)}function M0(t){return ss(t[0])?t[0].outlets:{[N]:t}}function Ky(t,e,n){if(t??=new z([],{}),t.segments.length===0&&t.hasChildren())return ts(t,e,n);let r=R0(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new z(t.segments.slice(0,r.pathIndex),{});return s.children[N]=new z(t.segments.slice(r.pathIndex),t.children),ts(s,0,i)}else return r.match&&i.length===0?new z(t.segments,{}):r.match&&!t.hasChildren()?Rd(t,e,n):r.match?ts(t,0,i):Rd(t,e,n)}function ts(t,e,n){if(n.length===0)return new z(t.segments,{});{let r=M0(n),i={};if(Object.keys(r).some(s=>s!==N)&&t.children[N]&&t.numberOfChildren===1&&t.children[N].segments.length===0){let s=ts(t.children[N],e,n);return new z(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=Ky(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new z(t.segments,i)}}function R0(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(ss(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!Ny(c,l,o))return s;r+=2}else{if(!Ny(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Rd(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(ss(s)){let c=x0(s.outlets);return new z(r,c)}if(i===0&&Fa(n[0])){let c=t.segments[e];r.push(new jn(c.path,Ay(n[0]))),i++;continue}let o=ss(s)?s.outlets[N]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Fa(a)?(r.push(new jn(o,Ay(a))),i+=2):(r.push(new jn(o,{})),i++)}return new z(r,{})}function x0(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Rd(new z([],{}),0,r))}),e}function Ay(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function Ny(t,e,n){return t==n.path&&Et(e,n.parameters)}var ns="imperative",fe=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(fe||{}),qe=class{constructor(e,n){this.id=e,this.url=n}},Yr=class extends qe{constructor(e,n,r="imperative",i=null){super(e,n),this.type=fe.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},jt=class extends qe{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=fe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Fe=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Fe||{}),Ua=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Ua||{}),Ft=class extends qe{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=fe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},cn=class extends qe{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=fe.NavigationSkipped}},os=class extends qe{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=fe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Va=class extends qe{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=fe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xd=class extends qe{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=fe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Od=class extends qe{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=fe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Pd=class extends qe{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=fe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kd=class extends qe{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=fe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ld=class{constructor(e){this.route=e,this.type=fe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Fd=class{constructor(e){this.route=e,this.type=fe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},jd=class{constructor(e){this.snapshot=e,this.type=fe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ud=class{constructor(e){this.snapshot=e,this.type=fe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vd=class{constructor(e){this.snapshot=e,this.type=fe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$d=class{constructor(e){this.snapshot=e,this.type=fe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$a=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=fe.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},as=class{},Kr=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};var Bd=class{constructor(e){this.injector=e,this.outlet=null,this.route=null,this.children=new gs(this.injector),this.attachRef=null}},gs=(()=>{let e=class e{constructor(r){this.parentInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Bd(this.parentInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(C(Te))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ba=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Hd(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Hd(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Wd(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Wd(e,this._root).map(n=>n.value)}};function Hd(t,e){if(t===e.value)return e;for(let n of e.children){let r=Hd(t,n);if(r)return r}return null}function Wd(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Wd(t,n);if(r.length)return r.unshift(e),r}return[]}var Le=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Br(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Ha=class extends Ba{constructor(e,n){super(e),this.snapshot=n,Xd(this,e)}toString(){return this.snapshot.toString()}};function Qy(t){let e=O0(t),n=new pe([new jn("",{})]),r=new pe({}),i=new pe({}),s=new pe({}),o=new pe(""),a=new Vn(n,r,s,o,i,N,t,e.root);return a.snapshot=e.root,new Ha(new Le(a,[]),e)}function O0(t){let e={},n={},r={},i="",s=new Wr([],e,r,i,n,N,t,null,{});return new za("",new Le(s,[]))}var Vn=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(b(l=>l[hs]))??D(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(b(e=>qr(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(b(e=>qr(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Wa(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:_(_({},e.params),t.params),data:_(_({},e.data),t.data),resolve:_(_(_(_({},t.data),e.data),i?.data),t._resolvedData)}:r={params:_({},t.params),data:_({},t.data),resolve:_(_({},t.data),t._resolvedData??{})},i&&Jy(i)&&(r.resolve[hs]=i.title),r}var Wr=class{get title(){return this.data?.[hs]}constructor(e,n,r,i,s,o,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=qr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=qr(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},za=class extends Ba{constructor(e,n){super(n),this.url=e,Xd(this,n)}toString(){return Zy(this._root)}};function Xd(t,e){e.value._routerState=t,e.children.forEach(n=>Xd(t,n))}function Zy(t){let e=t.children.length>0?` { ${t.children.map(Zy).join(", ")} } `:"";return`${t.value}${e}`}function bd(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Et(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Et(e.params,n.params)||t.paramsSubject.next(n.params),c0(e.url,n.url)||t.urlSubject.next(n.url),Et(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function zd(t,e){let n=Et(t.params,e.params)&&f0(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||zd(t.parent,e.parent))}function Jy(t){return typeof t.title=="string"||t.title===null}var ef=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=N,this.activateEvents=new Ie,this.deactivateEvents=new Ie,this.attachEvents=new Ie,this.detachEvents=new Ie,this.parentContexts=g(gs),this.location=g(Bi),this.changeDetector=g(Fr),this.inputBinder=g(Ka,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new E(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new E(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new E(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new E(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new qd(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=ji({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[sa]});let t=e;return t})(),qd=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Vn?this.route:e===gs?this.childContexts:this.parent.get(e,n)}},Ka=new T(""),My=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=Qe([i.queryParams,i.params,i.data]).pipe(Ve(([o,a,c],l)=>(c=_(_(_({},o),a),c),l===0?D(c):Promise.resolve(c)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=Xv(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})();function P0(t,e,n){let r=cs(t,e._root,n?n._root:void 0);return new Ha(r,e)}function cs(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=k0(t,e,n);return new Le(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>cs(t,a)),o}}let r=L0(e.value),i=e.children.map(s=>cs(t,s));return new Le(r,i)}}function k0(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return cs(t,r,i);return cs(t,r)})}function L0(t){return new Vn(new pe(t.url),new pe(t.params),new pe(t.queryParams),new pe(t.fragment),new pe(t.data),t.outlet,t.component,t)}var ls=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},Xy="ngNavigationCancelingError";function qa(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=is(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=e_(!1,Fe.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function e_(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[Xy]=!0,n.cancellationCode=e,n}function F0(t){return t_(t)&&is(t.url)}function t_(t){return!!t&&t[Xy]}var j0=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=tn({type:e,selectors:[["ng-component"]],standalone:!0,features:[on],decls:1,vars:0,template:function(i,s){i&1&&Wi(0,"router-outlet")},dependencies:[ef],encapsulation:2});let t=e;return t})();function U0(t,e){return t.providers&&!t._injector&&(t._injector=ma(t.providers,e,`Route: ${t.path}`)),t._injector??e}function tf(t){let e=t.children&&t.children.map(tf),n=e?te(_({},t),{children:e}):_({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==N&&(n.component=j0),n}function it(t){return t.outlet||N}function V0(t,e){let n=t.filter(r=>it(r)===e);return n.push(...t.filter(r=>it(r)!==e)),n}function ms(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var $0=(t,e,n,r)=>b(i=>(new Gd(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Gd=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),bd(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Br(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Br(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Br(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Br(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new $d(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Ud(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(bd(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),bd(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=ms(i.snapshot);o.attachRef=null,o.route=i,o.injector=a??o.injector,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},Ga=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},zr=class{constructor(e,n){this.component=e,this.route=n}};function B0(t,e,n){let r=t._root,i=e?e._root:null;return Xi(r,i,n,[r.value])}function H0(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Zr(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!qg(t)?t:e.get(t):r}function Xi(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Br(e);return t.children.forEach(o=>{W0(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>rs(a,n.getContext(o),i)),i}function W0(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=z0(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Ga(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Xi(t,e,a?a.children:null,r,i):Xi(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new zr(a.outlet.component,o))}else o&&rs(e,a,i),i.canActivateChecks.push(new Ga(r)),s.component?Xi(t,null,a?a.children:null,r,i):Xi(t,null,n,r,i);return i}function z0(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Un(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Un(t.url,e.url)||!Et(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zd(t,e)||!Et(t.queryParams,e.queryParams);case"paramsChange":default:return!zd(t,e)}}function rs(t,e,n){let r=Br(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?rs(o,e.children.getContext(s),n):rs(o,null,n):rs(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new zr(e.outlet.component,i)):n.canDeactivateChecks.push(new zr(null,i)):n.canDeactivateChecks.push(new zr(null,i))}function vs(t){return typeof t=="function"}function q0(t){return typeof t=="boolean"}function G0(t){return t&&vs(t.canLoad)}function Y0(t){return t&&vs(t.canActivate)}function K0(t){return t&&vs(t.canActivateChild)}function Q0(t){return t&&vs(t.canDeactivate)}function Z0(t){return t&&vs(t.canMatch)}function n_(t){return t instanceof Nt||t?.name==="EmptyError"}var Oa=Symbol("INITIAL_VALUE");function Qr(){return Ve(t=>Qe(t.map(e=>e.pipe(Mt(1),yl(Oa)))).pipe(b(e=>{for(let n of e)if(n!==!0){if(n===Oa)return Oa;if(n===!1||J0(n))return n}return!0}),Ue(e=>e!==Oa),Mt(1)))}function J0(t){return is(t)||t instanceof ls}function X0(t,e){return ie(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?D(te(_({},n),{guardsResult:!0})):eA(o,r,i,t).pipe(ie(a=>a&&q0(a)?tA(r,s,t,e):D(a)),b(a=>te(_({},n),{guardsResult:a})))})}function eA(t,e,n,r){return J(t).pipe(ie(i=>oA(i.component,i.route,n,e,r)),ut(i=>i!==!0,!0))}function tA(t,e,n,r){return J(e).pipe(Dn(i=>gr(rA(i.route.parent,r),nA(i.route,r),sA(t,i.path,n),iA(t,i.route,n))),ut(i=>i!==!0,!0))}function nA(t,e){return t!==null&&e&&e(new Vd(t)),D(!0)}function rA(t,e){return t!==null&&e&&e(new jd(t)),D(!0)}function iA(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return D(!0);let i=r.map(s=>So(()=>{let o=ms(e)??n,a=Zr(s,o),c=Y0(a)?a.canActivate(e,t):tt(o,()=>a(e,t));return un(c).pipe(ut())}));return D(i).pipe(Qr())}function sA(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>H0(o)).filter(o=>o!==null).map(o=>So(()=>{let a=o.guards.map(c=>{let l=ms(o.node)??n,u=Zr(c,l),d=K0(u)?u.canActivateChild(r,t):tt(l,()=>u(r,t));return un(d).pipe(ut())});return D(a).pipe(Qr())}));return D(s).pipe(Qr())}function oA(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return D(!0);let o=s.map(a=>{let c=ms(e)??i,l=Zr(a,c),u=Q0(l)?l.canDeactivate(t,e,n,r):tt(c,()=>l(t,e,n,r));return un(u).pipe(ut())});return D(o).pipe(Qr())}function aA(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return D(!0);let s=i.map(o=>{let a=Zr(o,t),c=G0(a)?a.canLoad(e,n):tt(t,()=>a(e,n));return un(c)});return D(s).pipe(Qr(),r_(r))}function r_(t){return ol(se(e=>{if(typeof e!="boolean")throw qa(t,e)}),b(e=>e===!0))}function cA(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return D(!0);let s=i.map(o=>{let a=Zr(o,t),c=Z0(a)?a.canMatch(e,n):tt(t,()=>a(e,n));return un(c)});return D(s).pipe(Qr(),r_(r))}var us=class{constructor(e){this.segmentGroup=e||null}},ds=class extends Error{constructor(e){super(),this.urlTree=e}};function $r(t){return hr(new us(t))}function lA(t){return hr(new E(4e3,!1))}function uA(t){return hr(e_(!1,Fe.GuardRejected))}var Yd=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return D(r);if(i.numberOfChildren>1||!i.children[N])return lA(`${e.redirectTo}`);i=i.children[N]}}applyRedirectCommands(e,n,r,i,s){if(typeof n!="string"){let a=n,{queryParams:c,fragment:l,routeConfig:u,url:d,outlet:f,params:h,data:p,title:y}=i,w=tt(s,()=>a({params:h,data:p,queryParams:c,fragment:l,routeConfig:u,url:d,outlet:f,title:y}));if(w instanceof an)throw new ds(w);n=w}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new ds(o);return o}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new an(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new z(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new E(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Kd={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function dA(t,e,n,r,i){let s=nf(t,e,n);return s.matched?(r=U0(e,r),cA(r,e,n,i).pipe(b(o=>o===!0?s:_({},Kd)))):D(s)}function nf(t,e,n){if(e.path==="**")return fA(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?_({},Kd):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||a0)(n,t,e);if(!i)return _({},Kd);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?_(_({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function fA(t){return{matched:!0,parameters:t.length>0?Fy(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Ry(t,e,n,r){return n.length>0&&gA(t,n,r)?{segmentGroup:new z(e,pA(r,new z(n,t.children))),slicedSegments:[]}:n.length===0&&mA(t,n,r)?{segmentGroup:new z(t.segments,hA(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new z(t.segments,t.children),slicedSegments:n}}function hA(t,e,n,r){let i={};for(let s of n)if(Qa(t,e,s)&&!r[it(s)]){let o=new z([],{});i[it(s)]=o}return _(_({},r),i)}function pA(t,e){let n={};n[N]=e;for(let r of t)if(r.path===""&&it(r)!==N){let i=new z([],{});n[it(r)]=i}return n}function gA(t,e,n){return n.some(r=>Qa(t,e,r)&&it(r)!==N)}function mA(t,e,n){return n.some(r=>Qa(t,e,r))}function Qa(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function vA(t,e,n,r){return it(t)!==r&&(r===N||!Qa(e,n,t))?!1:nf(e,t,n).matched}function yA(t,e,n){return e.length===0&&!t.children[n]}var Qd=class{};function _A(t,e,n,r,i,s,o="emptyOnly"){return new Zd(t,e,n,r,i,o,s).recognize()}var IA=31,Zd=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Yd(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new E(4002,`'${e.segmentGroup}'`)}recognize(){let e=Ry(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(b(({children:n,rootSnapshot:r})=>{let i=new Le(r,n),s=new za("",i),o=T0(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new Wr([],Object.freeze({}),Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),N,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,N,n).pipe(b(r=>({children:r,rootSnapshot:n})),Gt(r=>{if(r instanceof ds)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof us?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(b(o=>o instanceof Le?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return J(s).pipe(Dn(o=>{let a=r.children[o],c=V0(n,o);return this.processSegmentGroup(e,c,a,o,i)}),vl((o,a)=>(o.push(...a),o)),Yt(null),ml(),ie(o=>{if(o===null)return $r(r);let a=i_(o);return wA(a),D(a)}))}processSegment(e,n,r,i,s,o,a){return J(n).pipe(Dn(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,s,o,a).pipe(Gt(l=>{if(l instanceof us)return D(null);throw l}))),ut(c=>!!c),Gt(c=>{if(n_(c))return yA(r,i,s)?D(new Qd):$r(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,s,o,a,c){return vA(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,c):$r(i):$r(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:f}=nf(n,i,s);if(!c)return $r(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>IA&&(this.allowRedirects=!1));let h=new Wr(s,l,Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,xy(i),it(i),i.component??i._loadedComponent??null,i,Oy(i)),p=Wa(h,a,this.paramsInheritanceStrategy);h.params=Object.freeze(p.params),h.data=Object.freeze(p.data);let y=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,h,e);return this.applyRedirects.lineralizeSegments(i,y).pipe(ie(w=>this.processSegment(e,r,n,w.concat(f),o,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a=dA(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Ve(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ve(({routes:l})=>{let u=r._loadedInjector??e,{parameters:d,consumedSegments:f,remainingSegments:h}=c,p=new Wr(f,d,Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,xy(r),it(r),r.component??r._loadedComponent??null,r,Oy(r)),y=Wa(p,o,this.paramsInheritanceStrategy);p.params=Object.freeze(y.params),p.data=Object.freeze(y.data);let{segmentGroup:w,slicedSegments:k}=Ry(n,f,h,l);if(k.length===0&&w.hasChildren())return this.processChildren(u,l,w,p).pipe(b(W=>new Le(p,W)));if(l.length===0&&k.length===0)return D(new Le(p,[]));let Q=it(r)===s;return this.processSegment(u,l,w,k,Q?N:s,!0,p).pipe(b(W=>new Le(p,W instanceof Le?[W]:[])))}))):$r(n)))}getChildConfig(e,n,r){return n.children?D({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?D({routes:n._loadedRoutes,injector:n._loadedInjector}):aA(e,n,r,this.urlSerializer).pipe(ie(i=>i?this.configLoader.loadChildren(e,n).pipe(se(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):uA(n))):D({routes:[],injector:e})}};function wA(t){t.sort((e,n)=>e.value.outlet===N?-1:n.value.outlet===N?1:e.value.outlet.localeCompare(n.value.outlet))}function EA(t){let e=t.value.routeConfig;return e&&e.path===""}function i_(t){let e=[],n=new Set;for(let r of t){if(!EA(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=i_(r.children);e.push(new Le(r.value,i))}return e.filter(r=>!n.has(r))}function xy(t){return t.data||{}}function Oy(t){return t.resolve||{}}function CA(t,e,n,r,i,s){return ie(o=>_A(t,e,n,r,o.extractedUrl,i,s).pipe(b(({state:a,tree:c})=>te(_({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function DA(t,e){return ie(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return D(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of s_(c))o.add(l);let a=0;return J(o).pipe(Dn(c=>s.has(c)?bA(c,r,t,e):(c.data=Wa(c,c.parent,t).resolve,D(void 0))),se(()=>a++),mr(1),ie(c=>a===o.size?D(n):Pe))})}function s_(t){let e=t.children.map(n=>s_(n)).flat();return[t,...e]}function bA(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!Jy(i)&&(s[hs]=i.title),TA(s,t,e,r).pipe(b(o=>(t._resolvedData=o,t.data=Wa(t,t.parent,n).resolve,null)))}function TA(t,e,n,r){let i=Ad(t);if(i.length===0)return D({});let s={};return J(i).pipe(ie(o=>SA(t[o],e,n,r).pipe(ut(),se(a=>{if(a instanceof ls)throw qa(new Gr,a);s[o]=a}))),mr(1),gl(s),Gt(o=>n_(o)?Pe:hr(o)))}function SA(t,e,n,r){let i=ms(e)??r,s=Zr(t,i),o=s.resolve?s.resolve(e,n):tt(i,()=>s(e,n));return un(o)}function Td(t){return Ve(e=>{let n=t(e);return n?J(n).pipe(b(()=>e)):D(e)})}var o_=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===N);return i}getResolvedTitleForRoute(r){return r.data[hs]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>g(AA),providedIn:"root"});let t=e;return t})(),AA=(()=>{let e=class e extends o_{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(C(by))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ys=new T("",{providedIn:"root",factory:()=>({})}),fs=new T(""),rf=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=g(Ca)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return D(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=un(r.loadComponent()).pipe(b(a_),se(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Ei(()=>{this.componentLoaders.delete(r)})),s=new lr(i,()=>new _e).pipe(cr());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return D({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=NA(i,this.compiler,r,this.onLoadEndListener).pipe(Ei(()=>{this.childrenLoaders.delete(i)})),a=new lr(o,()=>new _e).pipe(cr());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function NA(t,e,n,r){return un(t.loadChildren()).pipe(b(a_),ie(i=>i instanceof Oi||Array.isArray(i)?D(i):J(e.compileModuleAsync(i))),b(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(fs,[],{optional:!0,self:!0}).flat()),{routes:o.map(tf),injector:s}}))}function MA(t){return t&&typeof t=="object"&&"default"in t}function a_(t){return MA(t)?t.default:t}var sf=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>g(RA),providedIn:"root"});let t=e;return t})(),RA=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),c_=new T(""),l_=new T("");function xA(t,e,n){let r=t.get(l_),i=t.get(Ae);return t.get(q).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),OA(t))),{onViewTransitionCreated:c}=r;return c&&tt(t,()=>c({transition:a,from:e,to:n})),o})}function OA(t){return new Promise(e=>{ga(e,{injector:t})})}var PA=new T(""),of=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new _e,this.transitionAbortSubject=new _e,this.configLoader=g(rf),this.environmentInjector=g(Te),this.urlSerializer=g(ps),this.rootContexts=g(gs),this.location=g(Vr),this.inputBindingEnabled=g(Ka,{optional:!0})!==null,this.titleStrategy=g(o_),this.options=g(ys,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=g(sf),this.createViewTransition=g(c_,{optional:!0}),this.navigationErrorHandler=g(PA,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>D(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Ld(s)),i=s=>this.events.next(new Fd(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(te(_(_({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new pe({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:ns,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ue(o=>o.id!==0),b(o=>te(_({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ve(o=>{let a=!1,c=!1;return D(o).pipe(Ve(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Fe.SupersededByNewNavigation),Pe;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?te(_({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&d!=="reload"){let f="";return this.events.next(new cn(l.id,this.urlSerializer.serialize(l.rawUrl),f,Ua.IgnoredSameUrlNavigation)),l.resolve(!1),Pe}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return D(l).pipe(Ve(f=>{let h=this.transitions?.getValue();return this.events.next(new Yr(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),h!==this.transitions?.getValue()?Pe:Promise.resolve(f)}),CA(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),se(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=te(_({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let h=new Va(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(h)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:f,extractedUrl:h,source:p,restoredState:y,extras:w}=l,k=new Yr(f,this.urlSerializer.serialize(h),p,y);this.events.next(k);let Q=Qy(this.rootComponentType).snapshot;return this.currentTransition=o=te(_({},l),{targetSnapshot:Q,urlAfterRedirects:h,extras:te(_({},w),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,D(o)}else{let f="";return this.events.next(new cn(l.id,this.urlSerializer.serialize(l.extractedUrl),f,Ua.IgnoredByUrlHandlingStrategy)),l.resolve(!1),Pe}}),se(l=>{let u=new xd(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),b(l=>(this.currentTransition=o=te(_({},l),{guards:B0(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),X0(this.environmentInjector,l=>this.events.next(l)),se(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw qa(this.urlSerializer,l.guardsResult);let u=new Od(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),Ue(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Fe.GuardRejected),!1)),Td(l=>{if(l.guards.canActivateChecks.length)return D(l).pipe(se(u=>{let d=new Pd(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),Ve(u=>{let d=!1;return D(u).pipe(DA(this.paramsInheritanceStrategy,this.environmentInjector),se({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",Fe.NoDataFromResolver)}}))}),se(u=>{let d=new kd(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),Td(l=>{let u=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(se(h=>{d.component=h}),b(()=>{})));for(let h of d.children)f.push(...u(h));return f};return Qe(u(l.targetSnapshot.root)).pipe(Yt(null),Mt(1))}),Td(()=>this.afterPreactivation()),Ve(()=>{let{currentSnapshot:l,targetSnapshot:u}=o,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?J(d).pipe(b(()=>o)):D(o)}),b(l=>{let u=P0(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=te(_({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),se(()=>{this.events.next(new as)}),$0(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Mt(1),se({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new jt(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),_l(this.transitionAbortSubject.pipe(se(l=>{throw l}))),Ei(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",Fe.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Gt(l=>{if(c=!0,t_(l))this.events.next(new Ft(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),F0(l)?this.events.next(new Kr(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let u=new os(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let d=tt(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(d instanceof ls){let{message:f,cancellationCode:h}=qa(this.urlSerializer,d);this.events.next(new Ft(o.id,this.urlSerializer.serialize(o.extractedUrl),f,h)),this.events.next(new Kr(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(u);let f=r.errorHandler(l);o.resolve(!!f)}}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return Pe}))}))}cancelNavigationTransition(r,i,s){let o=new Ft(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function kA(t){return t!==ns}var LA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>g(FA),providedIn:"root"});let t=e;return t})(),Jd=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},FA=(()=>{let e=class e extends Jd{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Ru(e)))(s||e)}})(),e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),u_=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>g(jA),providedIn:"root"});let t=e;return t})(),jA=(()=>{let e=class e extends u_{constructor(){super(...arguments),this.location=g(Vr),this.urlSerializer=g(ps),this.options=g(ys,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=g(sf),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new an,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Qy(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Yr)this.stateMemento=this.createStateMemento();else if(r instanceof cn)this.rawUrlTree=i.initialUrl;else if(r instanceof Va){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof as?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Ft&&(r.code===Fe.GuardRejected||r.code===Fe.NoDataFromResolver)?this.restoreHistory(i):r instanceof os?this.restoreHistory(i,!0):r instanceof jt&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=_(_({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=_(_({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Ru(e)))(s||e)}})(),e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),es=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(es||{});function d_(t,e){t.events.pipe(Ue(n=>n instanceof jt||n instanceof Ft||n instanceof os||n instanceof cn),b(n=>n instanceof jt||n instanceof cn?es.COMPLETE:(n instanceof Ft?n.code===Fe.Redirect||n.code===Fe.SupersededByNewNavigation:!1)?es.REDIRECTING:es.FAILED),Ue(n=>n!==es.REDIRECTING),Mt(1)).subscribe(()=>{e()})}function UA(t){throw t}var VA={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},$A={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ln=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=g(Ia),this.stateManager=g(u_),this.options=g(ys,{optional:!0})||{},this.pendingTasks=g(Hi),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=g(of),this.urlSerializer=g(ps),this.location=g(Vr),this.urlHandlingStrategy=g(sf),this._events=new _e,this.errorHandler=this.options.errorHandler||UA,this.navigated=!1,this.routeReuseStrategy=g(LA),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=g(fs,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!g(Ka,{optional:!0}),this.eventsSubscription=new ne,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Ft&&i.code!==Fe.Redirect&&i.code!==Fe.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof jt)this.navigated=!0;else if(i instanceof Kr){let a=i.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),l=_({info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||kA(s.source)},a);this.scheduleNavigation(c,ns,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}HA(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ns,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=_({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(tf),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=_(_({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let h=s?s.snapshot:this.routerState.snapshot.root;f=qy(h)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),f=this.currentUrlTree.root}return Gy(f,r,d,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=is(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,ns,null,i)}navigate(r,i={skipLocationChange:!1}){return BA(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=_({},VA):i===!1?s=_({},$A):s=i,is(r))return Ty(this.currentUrlTree,r,s);let o=this.parseUrl(r);return Ty(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((f,h)=>{c=f,l=h});let d=this.pendingTasks.add();return d_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function BA(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new E(4008,!1)}function HA(t){return!(t instanceof as)&&!(t instanceof Kr)}var Ya=class{};var WA=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Ue(r=>r instanceof jt),Dn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=ma(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(c,o.children??o._loadedRoutes))}return J(s).pipe(pr())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=D(null);let o=s.pipe(ie(a=>a===null?D(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return J([o,a]).pipe(pr())}else return o})}};e.\u0275fac=function(i){return new(i||e)(C(ln),C(Ca),C(Te),C(Ya),C(rf))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),f_=new T(""),zA=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=g(Te),a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Yr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof jt?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof cn&&r.code===Ua.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof $a&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>v(this,null,function*(){yield new Promise(s=>{setTimeout(()=>{s()}),ga(()=>{s()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new $a(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){pv()},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})();function h_(t,...e){return nn([{provide:fs,multi:!0,useValue:t},[],{provide:Vn,useFactory:p_,deps:[ln]},{provide:Ea,multi:!0,useFactory:g_},e.map(n=>n.\u0275providers)])}function p_(t){return t.routerState.root}function _s(t,e){return{\u0275kind:t,\u0275providers:e}}function g_(){let t=g(Se);return e=>{let n=t.get(Lr);if(e!==n.components[0])return;let r=t.get(ln),i=t.get(m_);t.get(af)===1&&r.initialNavigation(),t.get(v_,null,R.Optional)?.setUpPreloading(),t.get(f_,null,R.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var m_=new T("",{factory:()=>new _e}),af=new T("",{providedIn:"root",factory:()=>1});function qA(){return _s(2,[{provide:af,useValue:0},{provide:wa,multi:!0,deps:[Se],useFactory:e=>{let n=e.get(ay,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(ln),s=e.get(m_);d_(i,()=>{r(!0)}),e.get(of).afterPreactivation=()=>(r(!0),s.closed?D(void 0):s),i.initialNavigation()}))}}])}function GA(){return _s(3,[{provide:wa,multi:!0,useFactory:()=>{let e=g(ln);return()=>{e.setUpLocationChangeListener()}}},{provide:af,useValue:2}])}var v_=new T("");function YA(t){return _s(0,[{provide:v_,useExisting:WA},{provide:Ya,useExisting:t}])}function KA(){return _s(8,[My,{provide:Ka,useExisting:My}])}function QA(t){let e=[{provide:c_,useValue:xA},{provide:l_,useValue:_({skipNextTransition:!!t?.skipInitialTransition},t)}];return _s(9,e)}var Py=new T("ROUTER_FORROOT_GUARD"),ZA=[Vr,{provide:ps,useClass:Gr},ln,gs,{provide:Vn,useFactory:p_,deps:[ln]},rf,[]],y_=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[ZA,[],{provide:fs,multi:!0,useValue:r},{provide:Py,useFactory:tN,deps:[[ln,new et,new Xg]]},{provide:ys,useValue:i||{}},i?.useHash?XA():eN(),JA(),i?.preloadingStrategy?YA(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?nN(i):[],i?.bindToComponentInputs?KA().\u0275providers:[],i?.enableViewTransitions?QA().\u0275providers:[],rN()]}}static forChild(r){return{ngModule:e,providers:[{provide:fs,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(C(Py,8))},e.\u0275mod=Fi({type:e}),e.\u0275inj=Li({});let t=e;return t})();function JA(){return{provide:f_,useFactory:()=>{let t=g(gy),e=g(q),n=g(ys),r=g(of),i=g(ps);return n.scrollOffset&&t.setOffset(n.scrollOffset),new zA(i,r,t,e,n)}}}function XA(){return{provide:Fn,useClass:ly}}function eN(){return{provide:Fn,useClass:hd}}function tN(t){return"guarded"}function nN(t){return[t.initialNavigation==="disabled"?GA().\u0275providers:[],t.initialNavigation==="enabledBlocking"?qA().\u0275providers:[]]}var ky=new T("");function rN(){return[{provide:ky,useFactory:g_},{provide:Ea,multi:!0,useExisting:ky}]}var lf={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var m=function(t,e){if(!t)throw $n(e)},$n=function(t){return new Error("Firebase Database ("+lf.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var I_=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},iN=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Ja={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4,f=(a&15)<<2|l>>6,h=l&63;c||(h=64,o||(f=64)),r.push(n[u],n[d],n[f],n[h])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(I_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):iN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||d==null)throw new uf;let f=s<<2|a>>4;if(r.push(f),l!==64){let h=a<<4&240|l>>2;if(r.push(h),d!==64){let p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},uf=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},ff=function(t){let e=I_(t);return Ja.encodeByteArray(e,!0)},Is=function(t){return ff(t).replace(/\./g,"")},ws=function(t){try{return Ja.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function w_(t){return E_(void 0,t)}function E_(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!sN(n)||(t[n]=E_(t[n],e[n]));return t}function sN(t){return t!=="__proto__"}function oN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var aN=()=>oN().__FIREBASE_DEFAULTS__,cN=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},lN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&ws(t[1]);return e&&JSON.parse(e)},hf=()=>{try{return aN()||cN()||lN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},C_=t=>{var e,n;return(n=(e=hf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},D_=t=>{let e=C_(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},pf=()=>{var t;return(t=hf())===null||t===void 0?void 0:t.config},b_=t=>{var e;return(e=hf())===null||e===void 0?void 0:e[`_${t}`]};var dn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function T_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Is(JSON.stringify(n)),Is(JSON.stringify(o)),""].join(".")}function st(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Es(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(st())}function S_(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Xa(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Dt(){return lf.NODE_CLIENT===!0||lf.NODE_ADMIN===!0}function A_(){try{return typeof indexedDB=="object"}catch{return!1}}function N_(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var uN="FirebaseError",Ct=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=uN,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ut.prototype.create)}},Ut=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?dN(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ct(i,a,r)}};function dN(t,e){return t.replace(fN,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var fN=/\{\$([^}]+)}/g;function Jr(t){return JSON.parse(t)}function ae(t){return JSON.stringify(t)}var M_=function(t){let e={},n={},r={},i="";try{let s=t.split(".");e=Jr(ws(s[0])||""),n=Jr(ws(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var R_=function(t){let e=M_(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},x_=function(t){let e=M_(t).claims;return typeof e=="object"&&e.admin===!0};function bt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Bn(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function ec(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Cs(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Ds(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(__(s)&&__(o)){if(!Ds(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function __(t){return t!==null&&typeof t=="object"}function bs(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var Za=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){let f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^s&(o^a),u=1518500249):(l=s^o^a,u=1859775393):d<60?(l=s&o|a&(s|o),u=2400959708):(l=s^o^a,u=3395469782);let f=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function O_(t,e){let n=new df(t,e);return n.subscribe.bind(n)}var df=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");hN(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=cf),i.error===void 0&&(i.error=cf),i.complete===void 0&&(i.complete=cf);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function hN(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function cf(){}function tc(t,e){return`${t} failed: ${e} argument `}var P_=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,m(r<t.length,"Surrogate pair missing trail surrogate.");let o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Ts=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var R$=4*60*60*1e3;function ot(t){return t&&t._delegate?t._delegate:t}var Ge=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Hn="[DEFAULT]";var nc=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new dn;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gN(e))try{this.getOrInitializeService({instanceIdentifier:Hn})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Hn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Hn){return this.instances.has(e)}getOptions(e=Hn){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:pN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Hn){return this.component?this.component.multipleInstances?e:Hn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function pN(t){return t===Hn?void 0:t}function gN(t){return t.instantiationMode==="EAGER"}var Ss=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new nc(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var mN=[],G=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(G||{}),vN={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},yN=G.INFO,_N={[G.DEBUG]:"log",[G.VERBOSE]:"log",[G.INFO]:"info",[G.WARN]:"warn",[G.ERROR]:"error"},IN=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=_N[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},fn=class{constructor(e){this.name=e,this._logLevel=yN,this._logHandler=IN,this._userLogHandler=null,mN.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in G))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,G.DEBUG,...e),this._logHandler(this,G.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,G.VERBOSE,...e),this._logHandler(this,G.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,G.INFO,...e),this._logHandler(this,G.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,G.WARN,...e),this._logHandler(this,G.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,G.ERROR,...e),this._logHandler(this,G.ERROR,...e)}};var wN=(t,e)=>e.some(n=>t instanceof n),k_,L_;function EN(){return k_||(k_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CN(){return L_||(L_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var F_=new WeakMap,mf=new WeakMap,j_=new WeakMap,gf=new WeakMap,yf=new WeakMap;function DN(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Tt(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&F_.set(n,t)}).catch(()=>{}),yf.set(e,t),e}function bN(t){if(mf.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});mf.set(t,e)}var vf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return mf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||j_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Tt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function U_(t){vf=t(vf)}function TN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(rc(this),e,...n);return j_.set(r,e.sort?e.sort():[e]),Tt(r)}:CN().includes(t)?function(...e){return t.apply(rc(this),e),Tt(F_.get(this))}:function(...e){return Tt(t.apply(rc(this),e))}}function SN(t){return typeof t=="function"?TN(t):(t instanceof IDBTransaction&&bN(t),wN(t,EN())?new Proxy(t,vf):t)}function Tt(t){if(t instanceof IDBRequest)return DN(t);if(gf.has(t))return gf.get(t);let e=SN(t);return e!==t&&(gf.set(t,e),yf.set(e,t)),e}var rc=t=>yf.get(t);function $_(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=Tt(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Tt(o.result),c.oldVersion,c.newVersion,Tt(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var AN=["get","getKey","getAll","getAllKeys","count"],NN=["put","add","delete","clear"],_f=new Map;function V_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(_f.get(e))return _f.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=NN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||AN.includes(n)))return;let s=function(o,...a){return v(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return _f.set(e,s),s}U_(t=>te(_({},t),{get:(e,n,r)=>V_(e,n)||t.get(e,n,r),has:(e,n)=>!!V_(e,n)||t.has(e,n)}));var wf=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(MN(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function MN(t){let e=t.getComponent();return e?.type==="VERSION"}var Ef="@firebase/app",B_="0.10.5";var Wn=new fn("@firebase/app"),RN="@firebase/app-compat",xN="@firebase/analytics-compat",ON="@firebase/analytics",PN="@firebase/app-check-compat",kN="@firebase/app-check",LN="@firebase/auth",FN="@firebase/auth-compat",jN="@firebase/database",UN="@firebase/database-compat",VN="@firebase/functions",$N="@firebase/functions-compat",BN="@firebase/installations",HN="@firebase/installations-compat",WN="@firebase/messaging",zN="@firebase/messaging-compat",qN="@firebase/performance",GN="@firebase/performance-compat",YN="@firebase/remote-config",KN="@firebase/remote-config-compat",QN="@firebase/storage",ZN="@firebase/storage-compat",JN="@firebase/firestore",XN="@firebase/vertexai-preview",eM="@firebase/firestore-compat",tM="firebase",nM="10.12.2";var Cf="[DEFAULT]",rM={[Ef]:"fire-core",[RN]:"fire-core-compat",[ON]:"fire-analytics",[xN]:"fire-analytics-compat",[kN]:"fire-app-check",[PN]:"fire-app-check-compat",[LN]:"fire-auth",[FN]:"fire-auth-compat",[jN]:"fire-rtdb",[UN]:"fire-rtdb-compat",[VN]:"fire-fn",[$N]:"fire-fn-compat",[BN]:"fire-iid",[HN]:"fire-iid-compat",[WN]:"fire-fcm",[zN]:"fire-fcm-compat",[qN]:"fire-perf",[GN]:"fire-perf-compat",[YN]:"fire-rc",[KN]:"fire-rc-compat",[QN]:"fire-gcs",[ZN]:"fire-gcs-compat",[JN]:"fire-fst",[eM]:"fire-fst-compat",[XN]:"fire-vertex","fire-js":"fire-js",[tM]:"fire-js-all"};var As=new Map,iM=new Map,Df=new Map;function H_(t,e){try{t.container.addComponent(e)}catch(n){Wn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function pn(t){let e=t.name;if(Df.has(e))return Wn.debug(`There were multiple attempts to register component ${e}.`),!1;Df.set(e,t);for(let n of As.values())H_(n,t);for(let n of iM.values())H_(n,t);return!0}function Af(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Xr(t){return t.settings!==void 0}var sM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hn=new Ut("app","Firebase",sM);var bf=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ge("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hn.create("app-deleted",{appName:this._name})}};var ei=nM;function Nf(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Cf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw hn.create("bad-app-name",{appName:String(i)});if(n||(n=pf()),!n)throw hn.create("no-options");let s=As.get(i);if(s){if(Ds(n,s.options)&&Ds(r,s.config))return s;throw hn.create("duplicate-app",{appName:i})}let o=new Ss(i);for(let c of Df.values())o.addComponent(c);let a=new bf(n,r,o);return As.set(i,a),a}function Ms(t=Cf){let e=As.get(t);if(!e&&t===Cf&&pf())return Nf();if(!e)throw hn.create("no-app",{appName:t});return e}function ic(){return Array.from(As.values())}function he(t,e,n){var r;let i=(r=rM[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wn.warn(a.join(" "));return}pn(new Ge(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var oM="firebase-heartbeat-database",aM=1,Ns="firebase-heartbeat-store",If=null;function G_(){return If||(If=$_(oM,aM,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ns)}catch(n){console.warn(n)}}}}).catch(t=>{throw hn.create("idb-open",{originalErrorMessage:t.message})})),If}function cM(t){return v(this,null,function*(){try{let n=(yield G_()).transaction(Ns),r=yield n.objectStore(Ns).get(Y_(t));return yield n.done,r}catch(e){if(e instanceof Ct)Wn.warn(e.message);else{let n=hn.create("idb-get",{originalErrorMessage:e?.message});Wn.warn(n.message)}}})}function W_(t,e){return v(this,null,function*(){try{let r=(yield G_()).transaction(Ns,"readwrite");yield r.objectStore(Ns).put(e,Y_(t)),yield r.done}catch(n){if(n instanceof Ct)Wn.warn(n.message);else{let r=hn.create("idb-set",{originalErrorMessage:n?.message});Wn.warn(r.message)}}})}function Y_(t){return`${t.name}!${t.options.appId}`}var lM=1024,uM=30*24*60*60*1e3,Tf=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Sf(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=z_();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=uM}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return v(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=z_(),{heartbeatsToSend:r,unsentEntries:i}=dM(this._heartbeatsCache.heartbeats),s=Is(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function z_(){return new Date().toISOString().substring(0,10)}function dM(t,e=lM){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),q_(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),q_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Sf=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return A_()?N_().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield cM(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return W_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return W_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function q_(t){return Is(JSON.stringify({version:2,heartbeats:t})).length}function fM(t){pn(new Ge("platform-logger",e=>new wf(e),"PRIVATE")),pn(new Ge("heartbeat",e=>new Tf(e),"PRIVATE")),he(Ef,B_,t),he(Ef,B_,"esm2017"),he("fire-js","")}fM("");var hM="firebase",pM="10.12.2";he(hM,pM,"app");var ni=new en("ANGULARFIRE2_VERSION");function Rf(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var xs=(t,e)=>{let n=e?[e]:ic(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Rs=class{constructor(){return xs(gM)}},gM="app-check";function ti(){}var sc=class{zone;delegate;constructor(e,n=fl){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Mf=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ti,{},ti,ti)),n.pipe(se({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Os=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new sc(Zone.current)),this.insideAngular=n.run(()=>new sc(Zone.current,dl)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(C(q))};static \u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function oc(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function mM(t){return oc().ngZone.runOutsideAngular(()=>t())}function zn(t){return oc().ngZone.run(()=>t())}function vM(t){return yM(oc())(t)}function yM(t){return function(n){return n=n.lift(new Mf(t.ngZone)),n.pipe(qt(t.outsideAngular),zt(t.insideAngular))}}var _M=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),zn(()=>t.apply(void 0,r))},gn=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=zn(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ti,{},ti,ti))),r[s]=_M(r[s],n));let i=mM(()=>t.apply(this,r));if(!e)if(i instanceof j){let s=oc();return i.pipe(qt(s.outsideAngular),zt(s.insideAngular))}else return zn(()=>i);return i instanceof j?i.pipe(vM):i instanceof Promise?zn(()=>new Promise((s,o)=>i.then(a=>zn(()=>s(a)),a=>zn(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:zn(()=>i)};var qn=class{constructor(e){return e}},Ps=class{constructor(){return ic()}};function IM(t){return t&&t.length===1?t[0]:new qn(Ms())}var xf=new T("angularfire2._apps"),wM={provide:qn,useFactory:IM,deps:[[new et,xf]]},EM={provide:Ps,deps:[[new et,xf]]};function CM(t){return(e,n)=>{let r=n.get(yt);he("angularfire",ni.full,"core"),he("angularfire",ni.full,"app"),he("angular",zv.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new qn(i)}}function K_(t,...e){return nn([wM,EM,{provide:xf,useFactory:CM(t),multi:!0,deps:[q,Se,Os,...e]}])}var Q_=gn(Nf,!0);function iI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var sI=iI,oI=new Ut("auth","Firebase",iI());var uc=new fn("@firebase/auth");function DM(t,...e){uc.logLevel<=G.WARN&&uc.warn(`Auth (${ei}): ${t}`,...e)}function cc(t,...e){uc.logLevel<=G.ERROR&&uc.error(`Auth (${ei}): ${t}`,...e)}function Z_(t,...e){throw Wf(t,...e)}function Hf(t,...e){return Wf(t,...e)}function aI(t,e,n){let r=Object.assign(Object.assign({},sI()),{[e]:n});return new Ut("auth","Firebase",r).create(e,{appName:t.name})}function lc(t){return aI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Wf(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return oI.create(t,...e)}function B(t,e,...n){if(!t)throw Wf(e,...n)}function ks(t){let e="INTERNAL ASSERTION FAILED: "+t;throw cc(e),new Error(e)}function dc(t,e){t||ks(e)}function bM(){return J_()==="http:"||J_()==="https:"}function J_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function TM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bM()||S_()||"connection"in navigator)?navigator.onLine:!0}function SM(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Yn=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,dc(n>e,"Short delay should be less than long delay!"),this.isMobile=Es()||Xa()}get(){return TM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function AM(t,e){dc(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var fc=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ks("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ks("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ks("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var NM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var MM=new Yn(3e4,6e4);function cI(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function mc(s,o,a,c){return v(this,arguments,function*(t,e,n,r,i={}){return lI(t,i,()=>v(this,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let d=bs(Object.assign({key:t.config.apiKey},u)).slice(1),f=yield t._getAdditionalHeaders();return f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode),fc.fetch()(uI(t,t.config.apiHost,n,d),Object.assign({method:e,headers:f,referrerPolicy:"no-referrer"},l))}))})}function lI(t,e,n){return v(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},NM),e);try{let i=new kf(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw ac(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ac(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw ac(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw ac(t,"user-disabled",o);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw aI(t,u,l);Z_(t,u)}}catch(i){if(i instanceof Ct)throw i;Z_(t,"network-request-failed",{message:String(i)})}})}function uI(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?AM(t.config,i):`${t.config.apiScheme}://${i}`}var kf=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Hf(this.auth,"network-request-failed")),MM.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function ac(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Hf(t,e,r);return i.customData._tokenResponse=n,i}function RM(t,e){return v(this,null,function*(){return mc(t,"POST","/v1/accounts:delete",e)})}function dI(t,e){return v(this,null,function*(){return mc(t,"POST","/v1/accounts:lookup",e)})}function Ls(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function zf(t,e=!1){return v(this,null,function*(){let n=ot(t),r=yield n.getIdToken(e),i=fI(r);B(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Ls(Of(i.auth_time)),issuedAtTime:Ls(Of(i.iat)),expirationTime:Ls(Of(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Of(t){return Number(t)*1e3}function fI(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return cc("JWT malformed, contained fewer than 3 sections"),null;try{let i=ws(n);return i?JSON.parse(i):(cc("Failed to decode base64 JWT payload"),null)}catch(i){return cc("Caught error parsing JWT payload as JSON",i?.toString()),null}}function X_(t){let e=fI(t);return B(e,"internal-error"),B(typeof e.exp<"u","internal-error"),B(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Lf(t,e,n=!1){return v(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Ct&&xM(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function xM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Ff=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),n)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var js=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ls(this.lastLoginAt),this.creationTime=Ls(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function hc(t){return v(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Lf(t,dI(n,{idToken:r}));B(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?hI(s.providerUserInfo):[],a=OM(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,u=c?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new js(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)})}function qf(t){return v(this,null,function*(){let e=ot(t);yield hc(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function OM(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function hI(t){return t.map(e=>{var{providerId:n}=e,r=hl(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function PM(t,e){return v(this,null,function*(){let n=yield lI(t,{},()=>v(this,null,function*(){let r=bs({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=uI(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",fc.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function kM(t,e){return v(this,null,function*(){return mc(t,"POST","/v2/accounts:revokeToken",cI(t,e))})}var Fs=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){B(e.idToken,"internal-error"),B(typeof e.idToken<"u","internal-error"),B(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):X_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){B(e.length!==0,"internal-error");let n=X_(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return v(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(B(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield PM(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(B(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(B(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(B(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return ks("not implemented")}};function mn(t,e){B(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Us=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=hl(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ff(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new js(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let n=yield Lf(this,this.stsTokenManager.getToken(this.auth,e));return B(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return zf(this,e)}reload(){return qf(this)}_assign(e){this!==e&&(B(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield hc(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(Xr(this.auth.app))return Promise.reject(lc(this.auth));let e=yield this.getIdToken();return yield Lf(this,RM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,l,u;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,y=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,k=(l=n.createdAt)!==null&&l!==void 0?l:void 0,Q=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:W,emailVerified:le,isAnonymous:je,providerData:ye,stsTokenManager:At}=n;B(W&&At,e,"internal-error");let yi=Fs.fromJSON(this.name,At);B(typeof W=="string",e,"internal-error"),mn(d,e.name),mn(f,e.name),B(typeof le=="boolean",e,"internal-error"),B(typeof je=="boolean",e,"internal-error"),mn(h,e.name),mn(p,e.name),mn(y,e.name),mn(w,e.name),mn(k,e.name),mn(Q,e.name);let _i=new t({uid:W,auth:e,email:f,emailVerified:le,displayName:d,isAnonymous:je,photoURL:p,phoneNumber:h,tenantId:y,stsTokenManager:yi,createdAt:k,lastLoginAt:Q});return ye&&Array.isArray(ye)&&(_i.providerData=ye.map(Qc=>Object.assign({},Qc))),w&&(_i._redirectEventId=w),_i}static _fromIdTokenResponse(e,n,r=!1){return v(this,null,function*(){let i=new Fs;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield hc(s),s})}static _fromGetAccountInfoResponse(e,n,r){return v(this,null,function*(){let i=n.users[0];B(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?hI(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Fs;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new js(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var eI=new Map;function Gn(t){dc(t instanceof Function,"Expected a class definition");let e=eI.get(t);return e?(dc(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,eI.set(t,e),e)}var LM=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(n,r){return v(this,null,function*(){this.storage[n]=r})}_get(n){return v(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return v(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),jf=LM;function Pf(t,e,n){return`firebase:${t}:${e}:${n}`}var pc=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Pf(this.userKey,i.apiKey,s),this.fullPersistenceKey=Pf("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Us._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return v(this,null,function*(){if(!n.length)return new t(Gn(jf),e,r);let i=(yield Promise.all(n.map(l=>v(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Gn(jf),o=Pf(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let u=yield l._get(o);if(u){let d=Us._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>v(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function tI(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(VM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(BM(e))return"Blackberry";if(HM(e))return"Webos";if(jM(e))return"Safari";if((e.includes("chrome/")||UM(e))&&!e.includes("edge/"))return"Chrome";if($M(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function FM(t=st()){return/firefox\//i.test(t)}function jM(t=st()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function UM(t=st()){return/crios\//i.test(t)}function VM(t=st()){return/iemobile/i.test(t)}function $M(t=st()){return/android/i.test(t)}function BM(t=st()){return/blackberry/i.test(t)}function HM(t=st()){return/webos/i.test(t)}function pI(t,e=[]){let n;switch(t){case"Browser":n=tI(st());break;case"Worker":n=`${tI(st())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ei}/${r}`}var Uf=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function WM(n){return v(this,arguments,function*(t,e={}){return mc(t,"GET","/v2/passwordPolicy",cI(t,e))})}var zM=6,Vf=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:zM,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var $f=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gc(this),this.idTokenSubscription=new gc(this),this.beforeStateQueue=new Uf(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Gn(n)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield pc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let n=yield dI(this,{idToken:e}),r=yield Us._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var n;if(Xr(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return B(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield hc(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=SM()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(Xr(this.app))return Promise.reject(lc(this));let n=e?ot(e):null;return n&&B(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return v(this,null,function*(){if(!this._deleted)return e&&B(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return Xr(this.app)?Promise.reject(lc(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Xr(this.app)?Promise.reject(lc(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(Gn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield WM(this),n=new Vf(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ut("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield kM(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Gn(e)||this._popupRedirectResolver;B(n,this,"argument-error"),this.redirectPersistenceManager=yield pc.create(this,[Gn(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(B(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return v(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&DM(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function qM(t){return ot(t)}var gc=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=O_(n=>this.observer=n)}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var GM={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function YM(t){GM=t}function KM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function QM(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Gn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var SB=KM("rcb"),AB=new Yn(3e4,6e4);var NB=new Yn(2e3,1e4);var MB=10*60*1e3;var RB=new Yn(3e4,6e4);var xB=new Yn(5e3,15e3);var OB=encodeURIComponent("fac");var nI="@firebase/auth",rI="1.7.4";var Bf=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function ZM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function JM(t){pn(new Ge("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;B(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pI(t)},l=new $f(r,i,s,c);return QM(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),pn(new Ge("auth-internal",e=>{let n=qM(e.getProvider("auth").getImmediate());return(r=>new Bf(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),he(nI,rI,ZM(t)),he(nI,rI,"esm2017")}var XM=5*60,PB=b_("authIdTokenMaxAge")||XM;function eR(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}YM({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=Hf("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",eR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});JM("Browser");var XR="auth";var vc=class{constructor(){return xs(XR)}};var gI="@firebase/database",mI="1.0.5";var Zh="";function ex(t){Zh=t}var eh=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ae(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Jr(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var th=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return bt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var KI=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new eh(e)}}catch{}return new th},Qn=KI("localStorage"),nh=KI("sessionStorage");var si=new fn("@firebase/database"),tx=function(){let t=1;return function(){return t++}}(),QI=function(t){let e=P_(t),n=new Za;n.update(e);let r=n.digest();return Ja.encodeByteArray(r)},no=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=no.apply(null,r):typeof r=="object"?e+=ae(r):e+=r,e+=" "}return e},Jn=null,vI=!0,nx=function(t,e){m(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(si.logLevel=G.VERBOSE,Jn=si.log.bind(si),e&&nh.set("logging_enabled",!0)):typeof t=="function"?Jn=t:(Jn=null,nh.remove("logging_enabled"))},ve=function(...t){if(vI===!0&&(vI=!1,Jn===null&&nh.get("logging_enabled")===!0&&nx(!0)),Jn){let e=no.apply(null,t);Jn(e)}},ro=function(t){return function(...e){ve(t,...e)}},rh=function(...t){let e="FIREBASE INTERNAL ERROR: "+no(...t);si.error(e)},Vt=function(...t){let e=`FIREBASE FATAL ERROR: ${no(...t)}`;throw si.error(e),new Error(e)},Me=function(...t){let e="FIREBASE WARNING: "+no(...t);si.warn(e)},rx=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Me("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ZI=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},ix=function(t){if(Dt()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ci="[MIN_NAME]",Xn="[MAX_NAME]",gi=function(t,e){if(t===e)return 0;if(t===ci||e===Xn)return-1;if(e===ci||t===Xn)return 1;{let n=yI(t),r=yI(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},sx=function(t,e){return t===e?0:t<e?-1:1},Vs=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ae(e))},Jh=function(t){if(typeof t!="object"||t===null)return ae(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=ae(e[r]),n+=":",n+=Jh(t[e[r]]);return n+="}",n},JI=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Re(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var XI=function(t){m(!ZI(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},ox=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},ax=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function cx(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var lx=new RegExp("^-?(0*)\\d{1,10}$"),ux=-2147483648,dx=2147483647,yI=function(t){if(lx.test(t)){let e=Number(t);if(e>=ux&&e<=dx)return e}return null},mi=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw Me("Exception was thrown by user callback.",n),e},Math.floor(0))}},fx=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},zs=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var ih=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Me(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var sh=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(ve("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Me(e)}},qs=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),_c="5",ew="v",tw="s",nw="r",rw="f",iw=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,sw="ls",ow="p",oh="ac",aw="websocket",cw="long_polling";var Ic=class{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Qn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Qn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function hx(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function lw(t,e,n){m(typeof e=="string","typeof type must == string"),m(typeof n=="object","typeof params must == object");let r;if(e===aw)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===cw)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);hx(t)&&(n.ns=t.namespace);let i=[];return Re(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var ah=class{constructor(){this.counters_={}}incrementCounter(e,n=1){bt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return w_(this.counters_)}};var Gf={},Yf={};function Xh(t){let e=t.toString();return Gf[e]||(Gf[e]=new ah),Gf[e]}function px(t,e){let n=t.toString();return Yf[n]||(Yf[n]=e()),Yf[n]}var ch=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&mi(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var _I="start",gx="close",mx="pLPCommand",vx="pRTLPCB",uw="id",dw="pw",fw="ser",yx="cb",_x="seg",Ix="ts",wx="d",Ex="dframe",hw=1870,pw=30,Cx=hw-pw,Dx=25e3,bx=3e4,lh=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ro(e),this.stats_=Xh(n),this.urlFn=c=>(this.appCheckToken&&(c[oh]=this.appCheckToken),lw(n,cw,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new ch(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(bx)),ix(()=>{if(this.isClosed_)return;this.scriptTagHolder=new uh((...s)=>{let[o,a,c,l,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===_I)this.id=a,this.password=c;else if(o===gx)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[_I]="t",r[fw]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[yx]=this.scriptTagHolder.uniqueCallbackIdentifier),r[ew]=_c,this.transportSessionId&&(r[tw]=this.transportSessionId),this.lastSessionId&&(r[sw]=this.lastSessionId),this.applicationId&&(r[ow]=this.applicationId),this.appCheckToken&&(r[oh]=this.appCheckToken),typeof location<"u"&&location.hostname&&iw.test(location.hostname)&&(r[nw]=rw);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return Dt()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!ox()&&!ax()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=ae(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=ff(n),i=JI(r,Cx);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(Dt())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[Ex]="t",r[uw]=e,r[dw]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=ae(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},uh=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Dt())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=tx(),window[mx+this.uniqueCallbackIdentifier]=e,window[vx+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){ve("frame writing exception"),a.stack&&ve(a.stack),ve(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ve("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[uw]=this.myID,e[dw]=this.myPW,e[fw]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+pw+r.length<=hw;){let o=this.pendingSegs.shift();r=r+"&"+_x+i+"="+o.seg+"&"+Ix+i+"="+o.ts+"&"+wx+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(Dx)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){Dt()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{ve("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var Tx=16384,Sx=45e3,wc=null;typeof MozWebSocket<"u"?wc=MozWebSocket:typeof WebSocket<"u"&&(wc=WebSocket);var $s=(()=>{class t{constructor(n,r,i,s,o,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ro(this.connId),this.stats_=Xh(r),this.connURL=t.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[ew]=_c,!Dt()&&typeof location<"u"&&location.hostname&&iw.test(location.hostname)&&(a[nw]=rw),r&&(a[tw]=r),i&&(a[sw]=i),s&&(a[oh]=s),o&&(a[ow]=o),lw(n,aw,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Qn.set("previous_websocket_failure",!0);try{let i;if(Dt()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${_c}/${Zh}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new wc(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&wc!==null&&!t.forceDisallow_}static previouslyFailed(){return Qn.isInMemoryStorage||Qn.get("previous_websocket_failure")===!0}markConnectionHealthy(){Qn.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Jr(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(m(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=ae(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=JI(r,Tx);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Sx))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),Ax=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[lh,$s]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=$s&&$s.isAvailable(),i=r&&!$s.previouslyFailed();if(n.webSocketOnly&&(r||Me("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[$s];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),Nx=6e4,Mx=5e3,Rx=10*1024,xx=100*1024,Kf="t",II="d",Ox="s",wI="r",Px="e",EI="o",CI="a",DI="n",bI="p",kx="h",dh=class{constructor(e,n,r,i,s,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ro("c:"+this.id+":"),this.transportManager_=new Ax(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=zs(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>xx?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Rx?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Kf in e){let n=e[Kf];n===CI?this.upgradeIfSecondaryHealthy_():n===wI?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===EI&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=Vs("t",e),r=Vs("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:bI,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:CI,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:DI,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=Vs("t",e),r=Vs("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=Vs(Kf,e);if(II in e){let r=e[II];if(n===kx){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===DI){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Ox?this.onConnectionShutdown_(r):n===wI?this.onReset_(r):n===Px?rh("Server Error: "+r):n===EI?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):rh("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),_c!==r&&Me("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),zs(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Nx))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):zs(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Mx))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:bI,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Qn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Ec=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var Cc=class{constructor(e){this.allowedEvents_=e,this.listeners_={},m(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){m(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var Dc=class t extends Cc{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Es()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return m(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var TI=32,SI=768,Y=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function H(){return new Y("")}function O(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function yn(t){return t.pieces_.length-t.pieceNum_}function Z(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Y(t.pieces_,e)}function gw(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Lx(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function mw(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function vw(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Y(e,0)}function ce(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Y)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Y(n,0)}function L(t){return t.pieceNum_>=t.pieces_.length}function Ne(t,e){let n=O(t),r=O(e);if(n===null)return e;if(n===r)return Ne(Z(t),Z(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function ep(t,e){if(yn(t)!==yn(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function ct(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(yn(t)>yn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var fh=class{constructor(e,n){this.errorPrefix_=n,this.parts_=mw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Ts(this.parts_[r]);yw(this)}};function Fx(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Ts(e),yw(t)}function jx(t){let e=t.parts_.pop();t.byteLength_-=Ts(e),t.parts_.length>0&&(t.byteLength_-=1)}function yw(t){if(t.byteLength_>SI)throw new Error(t.errorPrefix_+"has a key path longer than "+SI+" bytes ("+t.byteLength_+").");if(t.parts_.length>TI)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+TI+") or object contains a cycle "+Kn(t))}function Kn(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var hh=class t extends Cc{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return m(e==="visible","Unknown event type: "+e),[this.visible_]}};var Bs=1e3,Ux=60*5*1e3,AI=30*1e3,Vx=1.3,$x=3e4,Bx="server_kill",NI=3,tp=(()=>{class t extends Ec{constructor(n,r,i,s,o,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=ro("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Bs,this.maxReconnectDelay_=Ux,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Dt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");hh.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Dc.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(ae(o)),m(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new dn,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),m(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),m(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,u=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&bt(n,"w")){let i=Bn(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Me(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||x_(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=AI)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=R_(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),m(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+ae(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):rh("Unrecognized action received from server: "+ae(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){m(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Bs,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Bs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>$x&&(this.reconnectDelay_=Bs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Vx)}this.onConnectStatus_(!1)}establishConnection_(){return v(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(f){m(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,h]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?ve("getToken() completed but was canceled"):(ve("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,c=new dh(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,p=>{Me(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(Bx)},o))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&Me(f),l())}}})}interrupt(n){ve("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){ve("Resuming connection for reason: "+n),delete this.interruptReasons_[n],ec(this.interruptReasons_)&&(this.reconnectDelay_=Bs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>Jh(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new Y(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){ve("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=NI&&(this.reconnectDelay_=AI,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){ve("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=NI&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";Dt()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+Zh.replace(/\./g,"-")]=1,Es()?n["framework.cordova"]=1:Xa()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=Dc.getInstance().currentlyOnline();return ec(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),P=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var li=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new P(ci,e),i=new P(ci,n);return this.compare(r,i)!==0}minPost(){return P.MIN}};var yc,bc=class extends li{static get __EMPTY_NODE(){return yc}static set __EMPTY_NODE(e){yc=e}compare(e,n){return gi(e.name,n.name)}isDefinedOn(e){throw $n("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return P.MIN}maxPost(){return new P(Xn,yc)}makePost(e,n){return m(typeof e=="string","KeyIndex indexValue must always be a string."),new P(e,yc)}toString(){return".key"}},oi=new bc;var ii=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},at=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??Ye.EMPTY_NODE,this.right=o??Ye.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ye.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return Ye.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),ph=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new at(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Ye=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,at.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,at.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ii(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new ii(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new ii(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new ii(this.root_,null,this.comparator_,!0,e)}};Ye.EMPTY_NODE=new ph;function Hx(t,e){return gi(t.name,e.name)}function np(t,e){return gi(t,e)}var gh;function Wx(t){gh=t}var _w=function(t){return typeof t=="number"?"number:"+XI(t):"string:"+t},Iw=function(t){if(t.isLeafNode()){let e=t.val();m(typeof e=="string"||typeof e=="number"||typeof e=="object"&&bt(e,".sv"),"Priority must be a string or number.")}else m(t===gh||t.isEmpty(),"priority of unexpected type.");m(t===gh||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var MI,ui=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,m(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Iw(this.priorityNode_)}static set __childrenNodeConstructor(n){MI=n}static get __childrenNodeConstructor(){return MI}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return L(n)?this:O(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=O(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(m(i!==".priority"||yn(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Z(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+_w(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=XI(this.value_):n+=this.value_,this.lazyHash_=QI(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(m(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return m(s>=0,"Unknown leaf type: "+r),m(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),ww,Ew;function zx(t){ww=t}function qx(t){Ew=t}var mh=class extends li{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?gi(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return P.MIN}maxPost(){return new P(Xn,new ui("[PRIORITY-POST]",Ew))}makePost(e,n){let r=ww(e);return new P(n,new ui("[PRIORITY-POST]",r))}toString(){return".priority"}},re=new mh;var Gx=Math.log(2),vh=class{constructor(e){let n=s=>parseInt(Math.log(s)/Gx,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Tc=function(t,e,n,r){t.sort(e);let i=function(c,l){let u=l-c,d,f;if(u===0)return null;if(u===1)return d=t[c],f=n?n(d):d,new at(f,d.node,at.BLACK,null,null);{let h=parseInt(u/2,10)+c,p=i(c,h),y=i(h+1,l);return d=t[h],f=n?n(d):d,new at(f,d.node,at.BLACK,p,y)}},s=function(c){let l=null,u=null,d=t.length,f=function(p,y){let w=d-p,k=d;d-=p;let Q=i(w+1,k),W=t[w],le=n?n(W):W;h(new at(le,W.node,y,null,Q))},h=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){let y=c.nextBitIsOne(),w=Math.pow(2,c.count-(p+1));y?f(w,at.BLACK):(f(w,at.BLACK),f(w,at.RED))}return u},o=new vh(t.length),a=s(o);return new Ye(r||e,a)};var Qf,ri={},di=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return m(ri&&re,"ChildrenNode.ts has not been loaded"),Qf=Qf||new t({".priority":ri},{".priority":re}),Qf}get(e){let n=Bn(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Ye?n:null}hasIndex(e){return bt(this.indexSet_,e.toString())}addIndex(e,n){m(e!==oi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(P.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Tc(r,e.getCompare()):a=ri;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let u=Object.assign({},this.indexes_);return u[c]=a,new t(u,l)}addToIndexes(e,n){let r=Cs(this.indexes_,(i,s)=>{let o=Bn(this.indexSet_,s);if(m(o,"Missing index implementation for "+s),i===ri)if(o.isDefinedOn(e.node)){let a=[],c=n.getIterator(P.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),Tc(a,o.getCompare())}else return ri;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new P(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=Cs(this.indexes_,i=>{if(i===ri)return i;{let s=n.get(e.name);return s?i.remove(new P(e.name,s)):i}});return new t(r,this.indexSet_)}};var Hs,M=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Iw(this.priorityNode_),this.children_.isEmpty()&&m(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Hs||(Hs=new t(new Ye(np),null,di.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Hs}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Hs:r}}getChild(n){let r=O(n);return r===null?this:this.getImmediateChild(r).getChild(Z(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(m(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new P(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?Hs:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=O(n);if(i===null)return r;{m(O(n)!==".priority"||yn(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(Z(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(re,(a,c)=>{r[a]=c.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+_w(this.getPriority().val())+":"),this.forEachChild(re,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":QI(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new P(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new P(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new P(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,P.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,P.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===io?-1:0}withIndex(n){if(n===oi||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===oi||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(re),s=r.getIterator(re),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===oi?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),yh=class extends M{constructor(){super(new Ye(np),M.EMPTY_NODE,di.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return M.EMPTY_NODE}isEmpty(){return!1}},io=new yh;Object.defineProperties(P,{MIN:{value:new P(ci,M.EMPTY_NODE)},MAX:{value:new P(Xn,io)}});bc.__EMPTY_NODE=M.EMPTY_NODE;ui.__childrenNodeConstructor=M;Wx(io);qx(io);var Yx=!0;function me(t,e=null){if(t===null)return M.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),m(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new ui(n,me(e))}if(!(t instanceof Array)&&Yx){let n=[],r=!1;if(Re(t,(o,a)=>{if(o.substring(0,1)!=="."){let c=me(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new P(o,c)))}}),n.length===0)return M.EMPTY_NODE;let s=Tc(n,Hx,o=>o.name,np);if(r){let o=Tc(n,re.getCompare());return new M(s,me(e),new di({".priority":o},{".priority":re}))}else return new M(s,me(e),di.Default)}else{let n=M.EMPTY_NODE;return Re(t,(r,i)=>{if(bt(t,r)&&r.substring(0,1)!=="."){let s=me(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(me(e))}}zx(me);var _h=class extends li{constructor(e){super(),this.indexPath_=e,m(!L(e)&&O(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?gi(e.name,n.name):s}makePost(e,n){let r=me(e),i=M.EMPTY_NODE.updateChild(this.indexPath_,r);return new P(n,i)}maxPost(){let e=M.EMPTY_NODE.updateChild(this.indexPath_,io);return new P(Xn,e)}toString(){return mw(this.indexPath_,0).join("/")}};var Ih=class extends li{compare(e,n){let r=e.node.compareTo(n.node);return r===0?gi(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return P.MIN}maxPost(){return P.MAX}makePost(e,n){let r=me(e);return new P(n,r)}toString(){return".value"}},Kx=new Ih;function Cw(t){return{type:"value",snapshotNode:t}}function fi(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Qs(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Zs(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Qx(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var Js=class{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){m(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Qs(n,a)):m(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(fi(n,r)):o.trackChildChange(Zs(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(re,(i,s)=>{n.hasChild(i)||r.trackChildChange(Qs(i,s))}),n.isLeafNode()||n.forEachChild(re,(i,s)=>{if(e.hasChild(i)){let o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Zs(i,s,o))}else r.trackChildChange(fi(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?M.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Sc=class t{constructor(e){this.indexedFilter_=new Js(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new P(n,r))||(r=M.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=M.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(M.EMPTY_NODE);let s=this;return n.forEachChild(re,(o,a)=>{s.matches(new P(o,a))||(i=i.updateImmediateChild(o,M.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var wh=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Sc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new P(n,r))||(r=M.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=M.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=M.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(M.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,M.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){let d=this.index_.getCompare();o=(f,h)=>d(h,f)}else o=this.index_.getCompare();let a=e;m(a.numChildren()===this.limit_,"");let c=new P(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){let d=a.getImmediateChild(n),f=i.getChildAfterChild(this.index_,l,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);let h=f==null?1:o(f,c);if(u&&!r.isEmpty()&&h>=0)return s?.trackChildChange(Zs(n,r,d)),a.updateImmediateChild(n,r);{s?.trackChildChange(Qs(n,d));let y=a.updateImmediateChild(n,M.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(s?.trackChildChange(fi(f.name,f.node)),y.updateImmediateChild(f.name,f.node)):y}}else return r.isEmpty()?e:u&&o(l,c)>=0?(s!=null&&(s.trackChildChange(Qs(l.name,l.node)),s.trackChildChange(fi(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,M.EMPTY_NODE)):e}};var Eh=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=re}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return m(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return m(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ci}hasEnd(){return this.endSet_}getIndexEndValue(){return m(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return m(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Xn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return m(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===re}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function Zx(t){return t.loadsAllData()?new Js(t.getIndex()):t.hasLimit()?new wh(t):new Sc(t)}function RI(t){let e={};if(t.isDefault())return e;let n;if(t.index_===re?n="$priority":t.index_===Kx?n="$value":t.index_===oi?n="$key":(m(t.index_ instanceof _h,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ae(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=ae(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+ae(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=ae(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+ae(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function xI(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==re&&(e.i=t.index_.toString()),e}var Ch=class t extends Ec{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ro("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(m(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let c=RI(e._queryParams);this.restRequest_(s+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(s,d,!1,r),Bn(this.listens_,o)===a){let f;l?l===401?f="permission_denied":f="rest_error:"+l:f="ok",i(f,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=RI(e._queryParams),r=e._path.toString(),i=new dn;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+bs(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Jr(a.responseText)}catch{Me("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Me("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var Dh=class{constructor(){this.rootNode_=M.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function Ac(){return{value:null,children:new Map}}function Dw(t,e,n){if(L(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=O(e);t.children.has(r)||t.children.set(r,Ac());let i=t.children.get(r);e=Z(e),Dw(i,e,n)}}function bh(t,e,n){t.value!==null?n(e,t.value):Jx(t,(r,i)=>{let s=new Y(e.toString()+"/"+r);bh(i,s,n)})}function Jx(t,e){t.children.forEach((n,r)=>{e(r,n)})}var Th=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Re(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var OI=10*1e3,Xx=30*1e3,eO=5*60*1e3,Sh=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Th(e);let r=OI+(Xx-OI)*Math.random();zs(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;Re(e,(i,s)=>{s>0&&bt(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),zs(this.reportStats_.bind(this),Math.floor(Math.random()*2*eO))}};var St=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(St||{});function bw(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function rp(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function ip(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Ah=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=St.ACK_USER_WRITE,this.source=bw()}operationForChild(e){if(L(this.path)){if(this.affectedTree.value!=null)return m(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new Y(e));return new t(H(),n,this.revert)}}else return m(O(this.path)===e,"operationForChild called for unrelated child."),new t(Z(this.path),this.affectedTree,this.revert)}};var Nc=class t{constructor(e,n){this.source=e,this.path=n,this.type=St.LISTEN_COMPLETE}operationForChild(e){return L(this.path)?new t(this.source,H()):new t(this.source,Z(this.path))}};var hi=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=St.OVERWRITE}operationForChild(e){return L(this.path)?new t(this.source,H(),this.snap.getImmediateChild(e)):new t(this.source,Z(this.path),this.snap)}};var Mc=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=St.MERGE}operationForChild(e){if(L(this.path)){let n=this.children.subtree(new Y(e));return n.isEmpty()?null:n.value?new hi(this.source,H(),n.value):new t(this.source,H(),n)}else return m(O(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,Z(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var $t=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(L(e))return this.isFullyInitialized()&&!this.filtered_;let n=O(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var Nh=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function tO(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(Qx(o.childName,o.snapshotNode))}),Ws(t,i,"child_removed",e,r,n),Ws(t,i,"child_added",e,r,n),Ws(t,i,"child_moved",s,r,n),Ws(t,i,"child_changed",e,r,n),Ws(t,i,"value",e,r,n),i}function Ws(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,c)=>rO(t,a,c)),o.forEach(a=>{let c=nO(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function nO(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function rO(t,e,n){if(e.childName==null||n.childName==null)throw $n("Should only compare child_ events.");let r=new P(e.childName,e.snapshotNode),i=new P(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function $c(t,e){return{eventCache:t,serverCache:e}}function Gs(t,e,n,r){return $c(new $t(e,n,r),t.serverCache)}function Tw(t,e,n,r){return $c(t.eventCache,new $t(e,n,r))}function Mh(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function er(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Zf,iO=()=>(Zf||(Zf=new Ye(sx)),Zf),xe=class t{constructor(e,n=iO()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return Re(e,(r,i)=>{n=n.set(new Y(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:H(),value:this.value};if(L(e))return null;{let r=O(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(Z(e),n);return s!=null?{path:ce(new Y(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(L(e))return this;{let n=O(e),r=this.children.get(n);return r!==null?r.subtree(Z(e)):new t(null)}}set(e,n){if(L(e))return new t(n,this.children);{let r=O(e),s=(this.children.get(r)||new t(null)).set(Z(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(L(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=O(e),r=this.children.get(n);if(r){let i=r.remove(Z(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(L(e))return this.value;{let n=O(e),r=this.children.get(n);return r?r.get(Z(e)):null}}setTree(e,n){if(L(e))return n;{let r=O(e),s=(this.children.get(r)||new t(null)).setTree(Z(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(H(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(ce(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,H(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(L(e))return null;{let s=O(e),o=this.children.get(s);return o?o.findOnPath_(Z(e),ce(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,H(),n)}foreachOnPath_(e,n,r){if(L(e))return this;{this.value&&r(n,this.value);let i=O(e),s=this.children.get(i);return s?s.foreachOnPath_(Z(e),ce(n,i),r):new t(null)}}foreach(e){this.foreach_(H(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(ce(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var lt=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new xe(null))}};function Ys(t,e,n){if(L(e))return new lt(new xe(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=Ne(i,e);return s=s.updateChild(o,n),new lt(t.writeTree_.set(i,s))}else{let i=new xe(n),s=t.writeTree_.setTree(e,i);return new lt(s)}}}function PI(t,e,n){let r=t;return Re(n,(i,s)=>{r=Ys(r,ce(e,i),s)}),r}function kI(t,e){if(L(e))return lt.empty();{let n=t.writeTree_.setTree(e,new xe(null));return new lt(n)}}function Rh(t,e){return tr(t,e)!=null}function tr(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ne(n.path,e)):null}function LI(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(re,(r,i)=>{e.push(new P(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new P(r,i.value))}),e}function vn(t,e){if(L(e))return t;{let n=tr(t,e);return n!=null?new lt(new xe(n)):new lt(t.writeTree_.subtree(e))}}function xh(t){return t.writeTree_.isEmpty()}function pi(t,e){return Sw(H(),t.writeTree_,e)}function Sw(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(m(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=Sw(ce(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(ce(t,".priority"),r)),n}}function sp(t,e){return Rw(e,t)}function sO(t,e,n,r,i){m(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Ys(t.visibleWrites,e,n)),t.lastWriteId=r}function oO(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function aO(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);m(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&cO(a,r.path)?i=!1:ct(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return lO(t),!0;if(r.snap)t.visibleWrites=kI(t.visibleWrites,r.path);else{let a=r.children;Re(a,c=>{t.visibleWrites=kI(t.visibleWrites,ce(r.path,c))})}return!0}else return!1}function cO(t,e){if(t.snap)return ct(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&ct(ce(t.path,n),e))return!0;return!1}function lO(t){t.visibleWrites=Aw(t.allWrites,uO,H()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function uO(t){return t.visible}function Aw(t,e,n){let r=lt.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)ct(n,o)?(a=Ne(n,o),r=Ys(r,a,s.snap)):ct(o,n)&&(a=Ne(o,n),r=Ys(r,H(),s.snap.getChild(a)));else if(s.children){if(ct(n,o))a=Ne(n,o),r=PI(r,a,s.children);else if(ct(o,n))if(a=Ne(o,n),L(a))r=PI(r,H(),s.children);else{let c=Bn(s.children,O(a));if(c){let l=c.getChild(Z(a));r=Ys(r,H(),l)}}}else throw $n("WriteRecord should have .snap or .children")}}return r}function Nw(t,e,n,r,i){if(!r&&!i){let s=tr(t.visibleWrites,e);if(s!=null)return s;{let o=vn(t.visibleWrites,e);if(xh(o))return n;if(n==null&&!Rh(o,H()))return null;{let a=n||M.EMPTY_NODE;return pi(o,a)}}}else{let s=vn(t.visibleWrites,e);if(!i&&xh(s))return n;if(!i&&n==null&&!Rh(s,H()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(ct(l.path,e)||ct(e,l.path))},a=Aw(t.allWrites,o,e),c=n||M.EMPTY_NODE;return pi(a,c)}}}function dO(t,e,n){let r=M.EMPTY_NODE,i=tr(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(re,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=vn(t.visibleWrites,e);return n.forEachChild(re,(o,a)=>{let c=pi(vn(s,new Y(o)),a);r=r.updateImmediateChild(o,c)}),LI(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=vn(t.visibleWrites,e);return LI(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function fO(t,e,n,r,i){m(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=ce(e,n);if(Rh(t.visibleWrites,s))return null;{let o=vn(t.visibleWrites,s);return xh(o)?i.getChild(n):pi(o,i.getChild(n))}}function hO(t,e,n,r){let i=ce(e,n),s=tr(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=vn(t.visibleWrites,i);return pi(o,r.getNode().getImmediateChild(n))}else return null}function pO(t,e){return tr(t.visibleWrites,e)}function gO(t,e,n,r,i,s,o){let a,c=vn(t.visibleWrites,e),l=tr(c,H());if(l!=null)a=l;else if(n!=null)a=pi(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=o.getCompare(),f=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),h=f.getNext();for(;h&&u.length<i;)d(h,r)!==0&&u.push(h),h=f.getNext();return u}else return[]}function mO(){return{visibleWrites:lt.empty(),allWrites:[],lastWriteId:-1}}function Rc(t,e,n,r){return Nw(t.writeTree,t.treePath,e,n,r)}function op(t,e){return dO(t.writeTree,t.treePath,e)}function FI(t,e,n,r){return fO(t.writeTree,t.treePath,e,n,r)}function xc(t,e){return pO(t.writeTree,ce(t.treePath,e))}function vO(t,e,n,r,i,s){return gO(t.writeTree,t.treePath,e,n,r,i,s)}function ap(t,e,n){return hO(t.writeTree,t.treePath,e,n)}function Mw(t,e){return Rw(ce(t.treePath,e),t.writeTree)}function Rw(t,e){return{treePath:t,writeTree:e}}var Oh=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;m(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),m(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Zs(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Qs(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,fi(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Zs(r,e.snapshotNode,i.oldSnap));else throw $n("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var Ph=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},xw=new Ph,Xs=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new $t(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ap(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:er(this.viewCache_),s=vO(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function yO(t){return{filter:t}}function _O(t,e){m(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),m(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function IO(t,e,n,r,i){let s=new Oh,o,a;if(n.type===St.OVERWRITE){let l=n;l.source.fromUser?o=kh(t,e,l.path,l.snap,r,i,s):(m(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!L(l.path),o=Oc(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===St.MERGE){let l=n;l.source.fromUser?o=EO(t,e,l.path,l.children,r,i,s):(m(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=Lh(t,e,l.path,l.children,r,i,a,s))}else if(n.type===St.ACK_USER_WRITE){let l=n;l.revert?o=bO(t,e,l.path,r,i,s):o=CO(t,e,l.path,l.affectedTree,r,i,s)}else if(n.type===St.LISTEN_COMPLETE)o=DO(t,e,n.path,r,s);else throw $n("Unknown operation type: "+n.type);let c=s.getChanges();return wO(e,o,c),{viewCache:o,changes:c}}function wO(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Mh(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(Cw(Mh(e)))}}function Ow(t,e,n,r,i,s){let o=e.eventCache;if(xc(r,n)!=null)return e;{let a,c;if(L(n))if(m(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=er(e),u=l instanceof M?l:M.EMPTY_NODE,d=op(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{let l=Rc(r,er(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=O(n);if(l===".priority"){m(yn(n)===1,"Can't have a priority with additional path components");let u=o.getNode();c=e.serverCache.getNode();let d=FI(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{let u=Z(n),d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let f=FI(r,n,o.getNode(),c);f!=null?d=o.getNode().getImmediateChild(l).updateChild(u,f):d=o.getNode().getImmediateChild(l)}else d=ap(r,l,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),l,d,u,i,s):a=o.getNode()}}return Gs(e,a,o.isFullyInitialized()||L(n),t.filter.filtersNodes())}}function Oc(t,e,n,r,i,s,o,a){let c=e.serverCache,l,u=o?t.filter:t.filter.getIndexedFilter();if(L(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let h=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),h,null)}else{let h=O(n);if(!c.isCompleteForPath(n)&&yn(n)>1)return e;let p=Z(n),w=c.getNode().getImmediateChild(h).updateChild(p,r);h===".priority"?l=u.updatePriority(c.getNode(),w):l=u.updateChild(c.getNode(),h,w,p,xw,null)}let d=Tw(e,l,c.isFullyInitialized()||L(n),u.filtersNodes()),f=new Xs(i,d,s);return Ow(t,d,n,i,f,a)}function kh(t,e,n,r,i,s,o){let a=e.eventCache,c,l,u=new Xs(i,e,s);if(L(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Gs(e,l,!0,t.filter.filtersNodes());else{let d=O(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=Gs(e,l,a.isFullyInitialized(),a.isFiltered());else{let f=Z(n),h=a.getNode().getImmediateChild(d),p;if(L(f))p=r;else{let y=u.getCompleteChild(d);y!=null?gw(f)===".priority"&&y.getChild(vw(f)).isEmpty()?p=y:p=y.updateChild(f,r):p=M.EMPTY_NODE}if(h.equals(p))c=e;else{let y=t.filter.updateChild(a.getNode(),d,p,f,u,o);c=Gs(e,y,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function jI(t,e){return t.eventCache.isCompleteForChild(e)}function EO(t,e,n,r,i,s,o){let a=e;return r.foreach((c,l)=>{let u=ce(n,c);jI(e,O(u))&&(a=kh(t,a,u,l,i,s,o))}),r.foreach((c,l)=>{let u=ce(n,c);jI(e,O(u))||(a=kh(t,a,u,l,i,s,o))}),a}function UI(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Lh(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;L(n)?l=r:l=new xe(null).setTree(n,r);let u=e.serverCache.getNode();return l.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){let h=e.serverCache.getNode().getImmediateChild(d),p=UI(t,h,f);c=Oc(t,c,new Y(d),p,i,s,o,a)}}),l.children.inorderTraversal((d,f)=>{let h=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){let p=e.serverCache.getNode().getImmediateChild(d),y=UI(t,p,f);c=Oc(t,c,new Y(d),y,i,s,o,a)}}),c}function CO(t,e,n,r,i,s,o){if(xc(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(L(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Oc(t,e,n,c.getNode().getChild(n),i,s,a,o);if(L(n)){let l=new xe(null);return c.getNode().forEachChild(oi,(u,d)=>{l=l.set(new Y(u),d)}),Lh(t,e,n,l,i,s,a,o)}else return e}else{let l=new xe(null);return r.foreach((u,d)=>{let f=ce(n,u);c.isCompleteForPath(f)&&(l=l.set(u,c.getNode().getChild(f)))}),Lh(t,e,n,l,i,s,a,o)}}function DO(t,e,n,r,i){let s=e.serverCache,o=Tw(e,s.getNode(),s.isFullyInitialized()||L(n),s.isFiltered());return Ow(t,o,n,r,xw,i)}function bO(t,e,n,r,i,s){let o;if(xc(r,n)!=null)return e;{let a=new Xs(r,e,i),c=e.eventCache.getNode(),l;if(L(n)||O(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Rc(r,er(e));else{let d=e.serverCache.getNode();m(d instanceof M,"serverChildren would be complete if leaf node"),u=op(r,d)}u=u,l=t.filter.updateFullNode(c,u,s)}else{let u=O(n),d=ap(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,Z(n),a,s):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,M.EMPTY_NODE,Z(n),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Rc(r,er(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||xc(r,H())!=null,Gs(e,l,o,t.filter.filtersNodes())}}var Fh=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new Js(r.getIndex()),s=Zx(r);this.processor_=yO(s);let o=n.serverCache,a=n.eventCache,c=i.updateFullNode(M.EMPTY_NODE,o.getNode(),null),l=s.updateFullNode(M.EMPTY_NODE,a.getNode(),null),u=new $t(c,o.isFullyInitialized(),i.filtersNodes()),d=new $t(l,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=$c(d,u),this.eventGenerator_=new Nh(this.query_)}get query(){return this.query_}};function TO(t){return t.viewCache_.serverCache.getNode()}function SO(t,e){let n=er(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!L(e)&&!n.getImmediateChild(O(e)).isEmpty())?n.getChild(e):null}function VI(t){return t.eventRegistrations_.length===0}function AO(t,e){t.eventRegistrations_.push(e)}function $I(t,e,n){let r=[];if(n){m(e==null,"A cancel should cancel all event registrations.");let i=t.query._path;t.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){let o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function BI(t,e,n,r){e.type===St.MERGE&&e.source.queryId!==null&&(m(er(t.viewCache_),"We should always have a full cache before handling merges"),m(Mh(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=IO(t.processor_,i,e,n,r);return _O(t.processor_,s.viewCache),m(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,Pw(t,s.changes,s.viewCache.eventCache.getNode(),null)}function NO(t,e){let n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(re,(s,o)=>{r.push(fi(s,o))}),n.isFullyInitialized()&&r.push(Cw(n.getNode())),Pw(t,r,n.getNode(),e)}function Pw(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return tO(t.eventGenerator_,e,n,i)}var Pc,jh=class{constructor(){this.views=new Map}};function MO(t){m(!Pc,"__referenceConstructor has already been defined"),Pc=t}function RO(){return m(Pc,"Reference.ts has not been loaded"),Pc}function xO(t){return t.views.size===0}function cp(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return m(s!=null,"SyncTree gave us an op for an invalid query."),BI(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(BI(o,e,n,r));return s}}function OO(t,e,n,r,i){let s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=Rc(n,i?r:null),c=!1;a?c=!0:r instanceof M?(a=op(n,r),c=!1):(a=M.EMPTY_NODE,c=!1);let l=$c(new $t(a,c,!1),new $t(r,i,!1));return new Fh(e,l)}return o}function PO(t,e,n,r,i,s){let o=OO(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),AO(o,n),NO(o,n)}function kO(t,e,n,r){let i=e._queryIdentifier,s=[],o=[],a=_n(t);if(i==="default")for(let[c,l]of t.views.entries())o=o.concat($I(l,n,r)),VI(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||s.push(l.query));else{let c=t.views.get(i);c&&(o=o.concat($I(c,n,r)),VI(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!_n(t)&&s.push(new(RO())(e._repo,e._path)),{removed:s,events:o}}function kw(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function ai(t,e){let n=null;for(let r of t.views.values())n=n||SO(r,e);return n}function Lw(t,e){if(e._queryParams.loadsAllData())return Bc(t);{let r=e._queryIdentifier;return t.views.get(r)}}function Fw(t,e){return Lw(t,e)!=null}function _n(t){return Bc(t)!=null}function Bc(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var kc;function LO(t){m(!kc,"__referenceConstructor has already been defined"),kc=t}function FO(){return m(kc,"Reference.ts has not been loaded"),kc}var jO=1,Lc=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new xe(null),this.pendingWriteTree_=mO(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function jw(t,e,n,r,i){return sO(t.pendingWriteTree_,e,n,r,i),i?so(t,new hi(bw(),e,n)):[]}function Zn(t,e,n=!1){let r=oO(t.pendingWriteTree_,e);if(aO(t.pendingWriteTree_,e)){let s=new xe(null);return r.snap!=null?s=s.set(H(),!0):Re(r.children,o=>{s=s.set(new Y(o),!0)}),so(t,new Ah(r.path,s,n))}else return[]}function Hc(t,e,n){return so(t,new hi(rp(),e,n))}function UO(t,e,n){let r=xe.fromObject(n);return so(t,new Mc(rp(),e,r))}function VO(t,e){return so(t,new Nc(rp(),e))}function $O(t,e,n){let r=up(t,n);if(r){let i=dp(r),s=i.path,o=i.queryId,a=Ne(s,e),c=new Nc(ip(o),a);return fp(t,s,c)}else return[]}function Uh(t,e,n,r,i=!1){let s=e._path,o=t.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||Fw(o,e))){let c=kO(o,e,n,r);xO(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(f,h)=>_n(h));if(u&&!d){let f=t.syncPointTree_.subtree(s);if(!f.isEmpty()){let h=WO(f);for(let p=0;p<h.length;++p){let y=h[p],w=y.query,k=$w(t,y);t.listenProvider_.startListening(Ks(w),Fc(t,w),k.hashFn,k.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(Ks(e),null):l.forEach(f=>{let h=t.queryToTagMap.get(Wc(f));t.listenProvider_.stopListening(Ks(f),h)}))}zO(t,l)}return a}function BO(t,e,n,r){let i=up(t,r);if(i!=null){let s=dp(i),o=s.path,a=s.queryId,c=Ne(o,e),l=new hi(ip(a),c,n);return fp(t,o,l)}else return[]}function HO(t,e,n,r){let i=up(t,r);if(i){let s=dp(i),o=s.path,a=s.queryId,c=Ne(o,e),l=xe.fromObject(n),u=new Mc(ip(a),c,l);return fp(t,o,u)}else return[]}function HI(t,e,n,r=!1){let i=e._path,s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(f,h)=>{let p=Ne(f,i);s=s||ai(h,p),o=o||_n(h)});let a=t.syncPointTree_.get(i);a?(o=o||_n(a),s=s||ai(a,H())):(a=new jh,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;s!=null?c=!0:(c=!1,s=M.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((h,p)=>{let y=ai(p,H());y&&(s=s.updateImmediateChild(h,y))}));let l=Fw(a,e);if(!l&&!e._queryParams.loadsAllData()){let f=Wc(e);m(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");let h=qO();t.queryToTagMap.set(f,h),t.tagToQueryMap.set(h,f)}let u=sp(t.pendingWriteTree_,i),d=PO(a,e,n,u,s,c);if(!l&&!o&&!r){let f=Lw(a,e);d=d.concat(GO(t,e,f))}return d}function lp(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let c=Ne(o,e),l=ai(a,c);if(l)return l});return Nw(i,e,s,n,!0)}function so(t,e){return Uw(e,t.syncPointTree_,null,sp(t.pendingWriteTree_,H()))}function Uw(t,e,n,r){if(L(t.path))return Vw(t,e,n,r);{let i=e.get(H());n==null&&i!=null&&(n=ai(i,H()));let s=[],o=O(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){let l=n?n.getImmediateChild(o):null,u=Mw(r,o);s=s.concat(Uw(a,c,l,u))}return i&&(s=s.concat(cp(i,t,r,n))),s}}function Vw(t,e,n,r){let i=e.get(H());n==null&&i!=null&&(n=ai(i,H()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=n?n.getImmediateChild(o):null,l=Mw(r,o),u=t.operationForChild(o);u&&(s=s.concat(Vw(u,a,c,l)))}),i&&(s=s.concat(cp(i,t,r,n))),s}function $w(t,e){let n=e.query,r=Fc(t,n);return{hashFn:()=>(TO(e)||M.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?$O(t,n._path,r):VO(t,n._path);{let s=cx(i,n);return Uh(t,n,null,s)}}}}function Fc(t,e){let n=Wc(e);return t.queryToTagMap.get(n)}function Wc(t){return t._path.toString()+"$"+t._queryIdentifier}function up(t,e){return t.tagToQueryMap.get(e)}function dp(t){let e=t.indexOf("$");return m(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Y(t.substr(0,e))}}function fp(t,e,n){let r=t.syncPointTree_.get(e);m(r,"Missing sync point for query tag that we're tracking");let i=sp(t.pendingWriteTree_,e);return cp(r,n,i,null)}function WO(t){return t.fold((e,n,r)=>{if(n&&_n(n))return[Bc(n)];{let i=[];return n&&(i=kw(n)),Re(r,(s,o)=>{i=i.concat(o)}),i}})}function Ks(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(FO())(t._repo,t._path):t}function zO(t,e){for(let n=0;n<e.length;++n){let r=e[n];if(!r._queryParams.loadsAllData()){let i=Wc(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function qO(){return jO++}function GO(t,e,n){let r=e._path,i=Fc(t,e),s=$w(t,n),o=t.listenProvider_.startListening(Ks(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)m(!_n(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!L(l)&&u&&_n(u))return[Bc(u).query];{let f=[];return u&&(f=f.concat(kw(u).map(h=>h.query))),Re(d,(h,p)=>{f=f.concat(p)}),f}});for(let l=0;l<c.length;++l){let u=c[l];t.listenProvider_.stopListening(Ks(u),Fc(t,u))}}return o}var Vh=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},$h=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=ce(this.path_,e);return new t(this.syncTree_,n)}node(){return lp(this.syncTree_,this.path_)}},YO=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},WI=function(t,e,n){if(!t||typeof t!="object")return t;if(m(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return KO(t[".sv"],e,n);if(typeof t[".sv"]=="object")return QO(t[".sv"],e);m(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},KO=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:m(!1,"Unexpected server value: "+t)}},QO=function(t,e,n){t.hasOwnProperty("increment")||m(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&m(!1,"Unexpected increment value: "+r);let i=e.node();if(m(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},ZO=function(t,e,n,r){return hp(e,new $h(n,t),r)},Bw=function(t,e,n){return hp(t,new Vh(e),n)};function hp(t,e,n){let r=t.getPriority().val(),i=WI(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=WI(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new ui(a,me(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new ui(i))),o.forEachChild(re,(a,c)=>{let l=hp(c,e.getImmediateChild(a),n);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var eo=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function pp(t,e){let n=e instanceof Y?e:new Y(e),r=t,i=O(n);for(;i!==null;){let s=Bn(r.node.children,i)||{children:{},childCount:0};r=new eo(i,r,s),n=Z(n),i=O(n)}return r}function vi(t){return t.node.value}function Hw(t,e){t.node.value=e,Bh(t)}function Ww(t){return t.node.childCount>0}function JO(t){return vi(t)===void 0&&!Ww(t)}function zc(t,e){Re(t.node.children,(n,r)=>{e(new eo(n,t,r))})}function zw(t,e,n,r){n&&!r&&e(t),zc(t,i=>{zw(i,e,!0,r)}),n&&r&&e(t)}function XO(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function oo(t){return new Y(t.parent===null?t.name:oo(t.parent)+"/"+t.name)}function Bh(t){t.parent!==null&&eP(t.parent,t.name,t)}function eP(t,e,n){let r=JO(n),i=bt(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Bh(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Bh(t))}var tP=/[\[\].#$\/\u0000-\u001F\u007F]/,nP=/[\[\].#$\u0000-\u001F\u007F]/,Jf=10*1024*1024,qw=function(t){return typeof t=="string"&&t.length!==0&&!tP.test(t)},Gw=function(t){return typeof t=="string"&&t.length!==0&&!nP.test(t)},rP=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Gw(t)};var iP=function(t,e,n,r){r&&e===void 0||gp(tc(t,"value"),e,n)},gp=function(t,e,n){let r=n instanceof Y?new fh(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Kn(r));if(typeof e=="function")throw new Error(t+"contains a function "+Kn(r)+" with contents = "+e.toString());if(ZI(e))throw new Error(t+"contains "+e.toString()+" "+Kn(r));if(typeof e=="string"&&e.length>Jf/3&&Ts(e)>Jf)throw new Error(t+"contains a string greater than "+Jf+" utf8 bytes "+Kn(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Re(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!qw(o)))throw new Error(t+" contains an invalid key ("+o+") "+Kn(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Fx(r,o),gp(t,a,r),jx(r)}),i&&s)throw new Error(t+' contains ".value" child '+Kn(r)+" in addition to actual children.")}};var Yw=function(t,e,n,r){if(!(r&&n===void 0)&&!Gw(n))throw new Error(tc(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},sP=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Yw(t,e,n,r)},oP=function(t,e){if(O(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},aP=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!qw(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!rP(n))throw new Error(tc(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Hh=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function mp(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!ep(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Kw(t,e,n){mp(t,n),Qw(t,r=>ep(r,e))}function Bt(t,e,n){mp(t,n),Qw(t,r=>ct(r,e)||ct(e,r))}function Qw(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(cP(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function cP(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();Jn&&ve("event: "+n.toString()),mi(r)}}}var lP="repo_interrupt",uP=25,Wh=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Hh,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ac(),this.transactionQueueTree_=new eo,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function dP(t,e,n){if(t.stats_=Xh(t.repoInfo_),t.forceRestClient_||fx())t.server_=new Ch(t.repoInfo_,(r,i,s,o)=>{zI(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>qI(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ae(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new tp(t.repoInfo_,e,(r,i,s,o)=>{zI(t,r,i,s,o)},r=>{qI(t,r)},r=>{hP(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=px(t.repoInfo_,()=>new Sh(t.stats_,t.server_)),t.infoData_=new Dh,t.infoSyncTree_=new Lc({startListening:(r,i,s,o)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=Hc(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),yp(t,"connected",!1),t.serverSyncTree_=new Lc({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);Bt(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function fP(t){let n=t.infoData_.getNode(new Y(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function vp(t){return YO({timestamp:fP(t)})}function zI(t,e,n,r,i){t.dataUpdateCount++;let s=new Y(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let c=Cs(n,l=>me(l));o=HO(t.serverSyncTree_,s,c,i)}else{let c=me(n);o=BO(t.serverSyncTree_,s,c,i)}else if(r){let c=Cs(n,l=>me(l));o=UO(t.serverSyncTree_,s,c)}else{let c=me(n);o=Hc(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=qc(t,s)),Bt(t.eventQueue_,a,o)}function qI(t,e){yp(t,"connected",e),e===!1&&gP(t)}function hP(t,e){Re(e,(n,r)=>{yp(t,n,r)})}function yp(t,e,n){let r=new Y("/.info/"+e),i=me(n);t.infoData_.updateSnapshot(r,i);let s=Hc(t.infoSyncTree_,r,i);Bt(t.eventQueue_,r,s)}function Zw(t){return t.nextWriteId_++}function pP(t,e,n,r,i){_p(t,"set",{path:e.toString(),value:n,priority:r});let s=vp(t),o=me(n,r),a=lp(t.serverSyncTree_,e),c=Bw(o,a,s),l=Zw(t),u=jw(t.serverSyncTree_,e,c,l,!0);mp(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(f,h)=>{let p=f==="ok";p||Me("set at "+e+" failed: "+f);let y=Zn(t.serverSyncTree_,l,!p);Bt(t.eventQueue_,e,y),yP(t,i,f,h)});let d=nE(t,e);qc(t,d),Bt(t.eventQueue_,d,[])}function gP(t){_p(t,"onDisconnectEvents");let e=vp(t),n=Ac();bh(t.onDisconnect_,H(),(i,s)=>{let o=ZO(i,s,t.serverSyncTree_,e);Dw(n,i,o)});let r=[];bh(n,H(),(i,s)=>{r=r.concat(Hc(t.serverSyncTree_,i,s));let o=nE(t,i);qc(t,o)}),t.onDisconnect_=Ac(),Bt(t.eventQueue_,H(),r)}function mP(t,e,n){let r;O(e._path)===".info"?r=HI(t.infoSyncTree_,e,n):r=HI(t.serverSyncTree_,e,n),Kw(t.eventQueue_,e._path,r)}function GI(t,e,n){let r;O(e._path)===".info"?r=Uh(t.infoSyncTree_,e,n):r=Uh(t.serverSyncTree_,e,n),Kw(t.eventQueue_,e._path,r)}function vP(t){t.persistentConnection_&&t.persistentConnection_.interrupt(lP)}function _p(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),ve(n,...e)}function yP(t,e,n,r){e&&mi(()=>{if(n==="ok")e(null);else{let i=(n||"error").toUpperCase(),s=i;r&&(s+=": "+r);let o=new Error(s);o.code=i,e(o)}})}function Jw(t,e,n){return lp(t.serverSyncTree_,e,n)||M.EMPTY_NODE}function Ip(t,e=t.transactionQueueTree_){if(e||Gc(t,e),vi(e)){let n=eE(t,e);m(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&_P(t,oo(e),n)}else Ww(e)&&zc(e,n=>{Ip(t,n)})}function _P(t,e,n){let r=n.map(l=>l.currentWriteId),i=Jw(t,e,r),s=i,o=i.hash();for(let l=0;l<n.length;l++){let u=n[l];m(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=Ne(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;t.server_.put(c.toString(),a,l=>{_p(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(Zn(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Gc(t,pp(t.transactionQueueTree_,e)),Ip(t,t.transactionQueueTree_),Bt(t.eventQueue_,e,u);for(let f=0;f<d.length;f++)mi(d[f])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Me("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}qc(t,e)}},o)}function qc(t,e){let n=Xw(t,e),r=oo(n),i=eE(t,n);return IP(t,i,r),r}function IP(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=Ne(n,c.path),u=!1,d;if(m(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(Zn(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=uP)u=!0,d="maxretry",i=i.concat(Zn(t.serverSyncTree_,c.currentWriteId,!0));else{let f=Jw(t,c.path,o);c.currentInputSnapshot=f;let h=e[a].update(f.val());if(h!==void 0){gp("transaction failed: Data returned ",h,c.path);let p=me(h);typeof h=="object"&&h!=null&&bt(h,".priority")||(p=p.updatePriority(f.getPriority()));let w=c.currentWriteId,k=vp(t),Q=Bw(p,f,k);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=Q,c.currentWriteId=Zw(t),o.splice(o.indexOf(w),1),i=i.concat(jw(t.serverSyncTree_,c.path,Q,c.currentWriteId,c.applyLocally)),i=i.concat(Zn(t.serverSyncTree_,w,!0))}else u=!0,d="nodata",i=i.concat(Zn(t.serverSyncTree_,c.currentWriteId,!0))}Bt(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Gc(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)mi(r[a]);Ip(t,t.transactionQueueTree_)}function Xw(t,e){let n,r=t.transactionQueueTree_;for(n=O(e);n!==null&&vi(r)===void 0;)r=pp(r,n),e=Z(e),n=O(e);return r}function eE(t,e){let n=[];return tE(t,e,n),n.sort((r,i)=>r.order-i.order),n}function tE(t,e,n){let r=vi(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);zc(e,i=>{tE(t,i,n)})}function Gc(t,e){let n=vi(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,Hw(e,n.length>0?n:void 0)}zc(e,r=>{Gc(t,r)})}function nE(t,e){let n=oo(Xw(t,e)),r=pp(t.transactionQueueTree_,e);return XO(r,i=>{Xf(t,i)}),Xf(t,r),zw(r,i=>{Xf(t,i)}),n}function Xf(t,e){let n=vi(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(m(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(m(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Zn(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Hw(e,void 0):n.length=s+1,Bt(t.eventQueue_,oo(e),i);for(let o=0;o<r.length;o++)mi(r[o])}}function wP(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function EP(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Me(`Invalid query segment '${n}' in query '${t}'`)}return e}var YI=function(t,e){let n=CP(t),r=n.namespace;n.domain==="firebase.com"&&Vt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Vt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||rx();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Ic(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Y(n.pathString)}},CP=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=wP(t.substring(u,d)));let f=EP(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let h=e.slice(0,l);if(h.toLowerCase()==="localhost")n="localhost";else if(h.split(".").length<=2)n=h;else{let p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var jc=class{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ae(this.snapshot.exportVal())}},Uc=class{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var zh=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return m(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var qh=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return L(this._path)?null:gw(this._path)}get ref(){return new Ht(this._repo,this._path)}get _queryIdentifier(){let e=xI(this._queryParams),n=Jh(e);return n==="{}"?"default":n}get _queryObject(){return xI(this._queryParams)}isEqual(e){if(e=ot(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=ep(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+Lx(this._path)}};var Ht=class t extends qh{constructor(e,n){super(e,n,new Eh,!1)}get parent(){let e=vw(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Vc=class t{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new Y(e),r=to(this.ref,e);return new t(this._node.getChild(n),r,re)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new t(i,to(this.ref,r),re)))}hasChild(e){let n=new Y(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function rE(t,e){return t=ot(t),t._checkNotDeleted("ref"),e!==void 0?to(t._root,e):t._root}function to(t,e){return t=ot(t),O(t._path)===null?sP("child","path",e,!1):Yw("child","path",e,!1),new Ht(t._repo,ce(t._path,e))}function iE(t,e){t=ot(t),oP("set",t._path),iP("set",e,t._path,!1);let n=new dn;return pP(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}var Gh=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let r=n._queryParams.getIndex();return new jc("value",this,new Vc(e.snapshotNode,new Ht(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Uc(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Yh=class t{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Uc(this,e,n):null}createEvent(e,n){m(e.childName!=null,"Child events should have a childName.");let r=to(new Ht(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new jc(e.type,this,new Vc(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function DP(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){let c=n,l=(u,d)=>{GI(t._repo,t,a),c(u,d)};l.userCallback=n.userCallback,l.context=n.context,n=l}let o=new zh(n,s||void 0),a=e==="value"?new Gh(o):new Yh(e,o);return mP(t._repo,t,a),()=>GI(t._repo,t,a)}function sE(t,e,n,r){return DP(t,"value",e,n,r)}MO(Ht);LO(Ht);var bP="FIREBASE_DATABASE_EMULATOR_HOST",Kh={},TP=!1;function SP(t,e,n,r){t.repoInfo_=new Ic(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function AP(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Vt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ve("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=YI(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[bP]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=YI(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let u=i&&c?new qs(qs.OWNER):new sh(t.name,t.options,e);aP("Invalid Firebase Database URL",o),L(o.path)||Vt("Database URL must point to the root of a Firebase Database (not including a child path).");let d=MP(a,t,u,new ih(t.name,n));return new Qh(d,t)}function NP(t,e){let n=Kh[e];(!n||n[t.key]!==t)&&Vt(`Database ${e}(${t.repoInfo_}) has already been deleted.`),vP(t),delete n[t.key]}function MP(t,e,n,r){let i=Kh[e.name];i||(i={},Kh[e.name]=i);let s=i[t.toURLString()];return s&&Vt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Wh(t,TP,n,r),i[t.toURLString()]=s,s}var Qh=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(dP(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ht(this._repo,H())),this._rootInternal}_delete(){return this._rootInternal!==null&&(NP(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Vt("Cannot call "+e+" on a deleted database.")}};function oE(t=Ms(),e){let n=Af(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=D_("database");r&&aE(n,...r)}return n}function aE(t,e,n,r={}){t=ot(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Vt("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Vt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new qs(qs.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:T_(r.mockUserToken,t.app.options.projectId);s=new qs(o)}SP(i,e,n,s)}function RP(t){ex(ei),pn(new Ge("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return AP(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),he(gI,mI,t),he(gI,mI,"esm2017")}tp.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};tp.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};RP();var nr=class{constructor(e){return e}},cE="database",wp=class{constructor(){return xs(cE)}};var Ep=new T("angularfire2.database-instances");function xP(t,e){let n=Rf(cE,t,e);return n&&new nr(n)}function OP(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new nr(r)}}var PP={provide:wp,deps:[[new et,Ep]]},kP={provide:nr,useFactory:xP,deps:[[new et,Ep],qn]};function lE(t,...e){return he("angularfire",ni.full,"rtdb"),nn([kP,PP,{provide:Ep,useFactory:OP(t),multi:!0,deps:[q,Se,Os,Ps,[new et,vc],[new et,Rs],...e]}])}var uE=gn(oE,!0);var dE=gn(sE,!0);var Yc=gn(rE,!0);var Cp=gn(iE,!0);var fE={apiKey:"AIzaSyATS3nUxmfjwf83Zo4AEq1TeM6SiLIxs94",authDomain:"qstar-app.firebaseapp.com",databaseURL:"https://qstar-app-default-rtdb.europe-west1.firebasedatabase.app",projectId:"qstar-app",storageBucket:"qstar-app.appspot.com",messagingSenderId:"232376159453",appId:"1:232376159453:web:91b6d0576bff13990f1f34"};var Dp="QSTAR_APP_ID";function FP(t=8){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",r=e.length;for(let i=0;i<t;i++)n+=e.charAt(Math.floor(Math.random()*r));return n}var hE=(()=>{let e=class e{constructor(){this.id=null,Dp in localStorage||(localStorage[Dp]=FP()),this.id=localStorage[Dp]}getId(){return this.id}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Kc=(()=>{let e=class e{constructor(r){this.db=r,this.identityService=g(hE),this.data$=this.getData(),this.questionId$=this.data$.pipe(b(i=>(i?.survey.state||"-").split("-")[0]||null)),this.state$=this.data$.pipe(b(i=>(i?.survey.state||"-").split("-")[1]||null)),this.question$=Qe([this.data$,this.questionId$]).pipe(b(([i,s])=>{if(i&&s){if(i.survey.questions.hasOwnProperty(s))return i.survey.questions[s];console.warn("Missing",s,"in",i.survey.questions)}return null})),this.active$=this.data$.pipe(b(i=>i?.survey.active||null)),this.votes$=this.data$.pipe(b(i=>i?.survey.votes||null))}getData(){return new j(r=>{let i=Yc(this.db,"/");return{unsubscribe:dE(i,o=>{o.exists()?r.next(o.val()):(console.log("No data available"),r.next(null))})}})}ping(){let r=this.identityService.getId(),i=Yc(this.db,`survey/active/${r}`);return J(Cp(i,Date.now()))}vote(r,i){let s=this.identityService.getId(),o=Yc(this.db,`survey/votes/${s}-${r}`);return J(Cp(o,i))}};e.\u0275fac=function(i){return new(i||e)(C(nr))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var pE=t=>({active:t});function jP(t,e){if(t&1){let n=$v();oe(0,"div")(1,"h1"),ge(2),ee(),oe(3,"button",2),zi("click",function(){let i=Eu(n).ngIf,s=ke();return Cu(s.setActive(i.questionId,"A"))}),ge(4,"A is human"),ee(),oe(5,"button",2),zi("click",function(){let i=Eu(n).ngIf,s=ke();return Cu(s.setActive(i.questionId,"B"))}),ge(6,"B is human"),ee()()}if(t&2){let n=e.ngIf,r=ke();de(2),qi(n.question==null?null:n.question.question),de(),ze("disabled",n.state!=="voting")("ngClass",Ju(5,pE,r.activeButton==="A")),de(2),ze("disabled",n.state!=="voting")("ngClass",Ju(7,pE,r.activeButton==="B"))}}function UP(t,e){t&1&&(oe(0,"p"),ge(1,"Loading..."),ee())}var gE=(()=>{let e=class e{constructor(){this.firebaseService=g(Kc),this.data$=Qe([this.firebaseService.question$,this.firebaseService.questionId$,this.firebaseService.state$]).pipe(b(([r,i,s])=>({question:r,questionId:i,state:s}))),this.activeButton=null}setActive(r,i){r&&(this.activeButton=i,this.firebaseService.vote(r,i))}ngOnInit(){this.startPinging()}ngOnDestroy(){this.stopPinging()}startPinging(){this.pingInterval=setInterval(()=>{this.firebaseService.ping()},1e3)}stopPinging(){this.pingInterval&&clearInterval(this.pingInterval)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=tn({type:e,selectors:[["app-vote"]],standalone:!0,features:[on],decls:4,vars:4,consts:[["loading",""],[4,"ngIf","ngIfElse"],[3,"click","disabled","ngClass"]],template:function(i,s){if(i&1&&(It(0,jP,7,9,"div",1),Pr(1,"async"),It(2,UP,2,0,"ng-template",null,0,_a)),i&2){let o=va(3);ze("ngIf",ya(1,2,s.data$))("ngIfElse",o)}},dependencies:[Yi,fy,Aa,Na],styles:[".active[_ngcontent-%COMP%]{background:#000;color:#fff}"]});let t=e;return t})();function VP(t,e){if(t&1&&(oe(0,"div",8),ge(1),Pr(2,"percent"),ee()),t&2){let n=ke().ngIf,r=ke();de(),Pt(" ",Xu(2,1,r.getFraction(n.questionId,"A"),"1.0")," ")}}function $P(t,e){if(t&1&&(oe(0,"div",9),ge(1),ee()),t&2){let n=ke().ngIf;de(),Pt(" ",n.question==null?null:n.question.identityA," ")}}function BP(t,e){if(t&1&&(oe(0,"div",8),ge(1),Pr(2,"percent"),ee()),t&2){let n=ke().ngIf,r=ke();de(),Pt(" ",Xu(2,1,r.getFraction(n.questionId,"B"),"1.0")," ")}}function HP(t,e){if(t&1&&(oe(0,"div",9),ge(1),ee()),t&2){let n=ke().ngIf;de(),Pt(" ",n.question==null?null:n.question.identityB," ")}}function WP(t,e){if(t&1&&(oe(0,"div"),ge(1),ee()),t&2){let n=ke().ngIf,r=ke();de(),Zu(" Answered: ",r.getNumAnswered(n.questionId)," / ",r.numOnline," ")}}function zP(t,e){if(t&1&&(oe(0,"div")(1,"h1"),ge(2),ee(),oe(3,"ul",2)(4,"li",3)(5,"div")(6,"span",4),ge(7,"Answer A:"),ee(),ge(8),ee(),It(9,VP,3,4,"div",5)(10,$P,2,1,"div",6),ee(),oe(11,"li",3)(12,"div")(13,"span",4),ge(14,"Answer B:"),ee(),ge(15),ee(),It(16,BP,3,4,"div",5)(17,HP,2,1,"div",6),ee()(),It(18,WP,2,2,"div",7),ee()),t&2){let n=e.ngIf;de(2),qi(n.question==null?null:n.question.question),de(6),Pt(" ",n.question==null?null:n.question.answerA," "),de(),ze("ngIf",n.state==="stats"||n.state==="id"),de(),ze("ngIf",n.state==="id"),de(5),Pt(" ",n.question==null?null:n.question.answerB," "),de(),ze("ngIf",n.state==="stats"||n.state==="id"),de(),ze("ngIf",n.state==="id"),de(),ze("ngIf",n.state==="voting")}}function qP(t,e){t&1&&(oe(0,"p"),ge(1,"Loading..."),ee())}var mE=(()=>{let e=class e{getNumAnswered(r){if(!r)return 0;let i=this.votes.get(r);return i?[...i.values()].reduce((s,o)=>s+o,0):0}getFraction(r,i){if(!r)return;let s=this.votes.get(r);if(!s)return;let o=[...s.entries()].filter(([c,l])=>c===i).map(([c,l])=>l).reduce((c,l)=>c+l,0),a=[...s.values()].reduce((c,l)=>c+l,0);return o/a}constructor(){this.firebaseService=g(Kc),this.data$=Qe([this.firebaseService.state$,this.firebaseService.questionId$,this.firebaseService.question$]).pipe(b(([r,i,s])=>({state:r,questionId:i,question:s}))),this.numOnline=0,this.activeIds=new Set,this.votes=new Map,this.firebaseService.active$.subscribe(r=>{if(!r)return;let i=Date.now(),s=new Set;for(let[o,a]of Object.entries(r))i-a<5*1e3&&s.add(o);this.numOnline=s.size}),this.firebaseService.votes$.subscribe(r=>{if(!r)return;let i=new Map;for(let[s,o]of Object.entries(r)){let[a,c]=s.split("-",2);i.has(c)||i.set(c,new Map);let l=i.get(c);l.has(o)||l.set(o,0),l.set(o,l.get(o)+1)}this.votes.clear();for(let[s,o]of i.entries())this.votes.set(s,o)})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=tn({type:e,selectors:[["app-results"]],standalone:!0,features:[on],decls:4,vars:4,consts:[["loading",""],[4,"ngIf","ngIfElse"],[1,"answers"],[1,"answer"],[1,"ab"],["class","percentage",4,"ngIf"],["class","id",4,"ngIf"],[4,"ngIf"],[1,"percentage"],[1,"id"]],template:function(i,s){if(i&1&&(It(0,zP,19,8,"div",1),Pr(1,"async"),It(2,qP,2,0,"ng-template",null,0,_a)),i&2){let o=va(3);ze("ngIf",ya(1,2,s.data$))("ngIfElse",o)}},dependencies:[Yi,Aa,Na,py],styles:[".ab[_ngcontent-%COMP%]{text-decoration:underline}"]});let t=e;return t})();var vE=[{path:"",redirectTo:"vote",pathMatch:"full"},{path:"vote",component:gE},{path:"results",component:mE}];var yE={providers:[Kv({eventCoalescing:!0}),h_(vE),K_(()=>Q_(fE)),lE(()=>uE())]};var _E=(()=>{let e=class e{constructor(){this.title="qstar-app"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=tn({type:e,selectors:[["app-root"]],standalone:!0,features:[on],decls:2,vars:0,consts:[[1,"container"]],template:function(i,s){i&1&&(oe(0,"div",0),Wi(1,"router-outlet"),ee())},dependencies:[ef,y_],styles:[".container[_ngcontent-%COMP%]{display:flex;gap:1rem}"]});let t=e;return t})();Dy(_E,yE).catch(t=>console.error(t));
