var GE=Object.defineProperty,YE=Object.defineProperties;var KE=Object.getOwnPropertyDescriptors;var qp=Object.getOwnPropertySymbols;var QE=Object.prototype.hasOwnProperty,ZE=Object.prototype.propertyIsEnumerable;var Gp=(t,e,n)=>e in t?GE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_=(t,e)=>{for(var n in e||={})QE.call(e,n)&&Gp(t,n,e[n]);if(qp)for(var n of qp(e))ZE.call(e,n)&&Gp(t,n,e[n]);return t},ie=(t,e)=>YE(t,KE(e));var y=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(l){i(l)}},o=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});var Yp=null;var dl=1,Kp=Symbol("SIGNAL");function B(t){let e=Yp;return Yp=t,e}var Qp={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function JE(t){if(!(pl(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===dl)){if(!t.producerMustRecompute(t)&&!fl(t)){t.dirty=!1,t.lastCleanEpoch=dl;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=dl}}function Zp(t){return t&&(t.nextProducerIndex=0),B(t)}function Jp(t,e){if(B(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(pl(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)hl(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function fl(t){Io(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(JE(n),r!==n.version))return!0}return!1}function Xp(t){if(Io(t),pl(t))for(let e=0;e<t.producerNode.length;e++)hl(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function hl(t,e){if(XE(t),Io(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)hl(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Io(i),i.producerIndexOfThis[r]=e}}function pl(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Io(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function XE(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function eC(){throw new Error}var tC=eC;function eg(t){tC=t}function A(t){return typeof t=="function"}function dr(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var wo=dr(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Tn(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var se=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(A(r))try{r()}catch(s){e=s instanceof wo?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{tg(s)}catch(o){e=e??[],o instanceof wo?e=[...e,...o.errors]:e.push(o)}}if(e)throw new wo(e)}}add(e){var n;if(e&&e!==this)if(this.closed)tg(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Tn(n,e)}remove(e){let{_finalizers:n}=this;n&&Tn(n,e),e instanceof t&&e._removeParent(this)}};se.EMPTY=(()=>{let t=new se;return t.closed=!0,t})();var gl=se.EMPTY;function Eo(t){return t instanceof se||t&&"closed"in t&&A(t.remove)&&A(t.add)&&A(t.unsubscribe)}function tg(t){A(t)?t():t.unsubscribe()}var et={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var fr={setTimeout(t,e,...n){let{delegate:r}=fr;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=fr;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Co(t){fr.setTimeout(()=>{let{onUnhandledError:e}=et;if(e)e(t);else throw t})}function Ri(){}var ng=ml("C",void 0,void 0);function rg(t){return ml("E",void 0,t)}function ig(t){return ml("N",t,void 0)}function ml(t,e,n){return{kind:t,value:e,error:n}}var An=null;function hr(t){if(et.useDeprecatedSynchronousErrorHandling){let e=!An;if(e&&(An={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=An;if(An=null,n)throw r}}else t()}function sg(t){et.useDeprecatedSynchronousErrorHandling&&An&&(An.errorThrown=!0,An.error=t)}var Nn=class extends se{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Eo(e)&&e.add(this)):this.destination=iC}static create(e,n,r){return new pr(e,n,r)}next(e){this.isStopped?yl(ig(e),this):this._next(e)}error(e){this.isStopped?yl(rg(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?yl(ng,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},nC=Function.prototype.bind;function vl(t,e){return nC.call(t,e)}var _l=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Do(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Do(r)}else Do(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Do(n)}}},pr=class extends Nn{constructor(e,n,r){super();let i;if(A(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&et.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&vl(e.next,s),error:e.error&&vl(e.error,s),complete:e.complete&&vl(e.complete,s)}):i=e}this.destination=new _l(i)}};function Do(t){et.useDeprecatedSynchronousErrorHandling?sg(t):Co(t)}function rC(t){throw t}function yl(t,e){let{onStoppedNotification:n}=et;n&&fr.setTimeout(()=>n(t,e))}var iC={closed:!0,next:Ri,error:rC,complete:Ri};var gr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ke(t){return t}function Il(...t){return wl(t)}function wl(t){return t.length===0?ke:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var U=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=oC(n)?n:new pr(n,r,i);return hr(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=og(r),new r((i,s)=>{let o=new pr({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[gr](){return this}pipe(...n){return wl(n)(this)}toPromise(n){return n=og(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function og(t){var e;return(e=t??et.Promise)!==null&&e!==void 0?e:Promise}function sC(t){return t&&A(t.next)&&A(t.error)&&A(t.complete)}function oC(t){return t&&t instanceof Nn||sC(t)&&Eo(t)}function El(t){return A(t?.lift)}function V(t){return e=>{if(El(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function $(t,e,n,r,i){return new Cl(t,e,n,r,i)}var Cl=class extends Nn{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function mr(){return V((t,e)=>{let n=null;t._refCount++;let r=$(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var vr=class extends U{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,El(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new se;let n=this.getSubject();e.add(this.source.subscribe($(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=se.EMPTY)}return e}refCount(){return mr()(this)}};var ag=dr(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var we=(()=>{class t extends U{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new bo(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new ag}next(n){hr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){hr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){hr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?gl:(this.currentObservers=null,s.push(n),new se(()=>{this.currentObservers=null,Tn(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new U;return n.source=this,n}}return t.create=(e,n)=>new bo(e,n),t})(),bo=class extends we{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:gl}};var ge=class extends we{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Dl={now(){return(Dl.delegate||Date).now()},delegate:void 0};var So=class extends se{constructor(e,n){super()}schedule(e,n=0){return this}};var xi={setInterval(t,e,...n){let{delegate:r}=xi;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=xi;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var yr=class extends So{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return xi.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&xi.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Tn(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var _r=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};_r.now=Dl.now;var Ir=class extends _r{constructor(e,n=_r.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var bl=new Ir(yr);var To=class extends yr{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Ao=class extends Ir{};var Sl=new Ao(To);var Le=new U(t=>t.complete());function cg(t){return t&&A(t.schedule)}function lg(t){return t[t.length-1]}function ug(t){return A(lg(t))?t.pop():void 0}function Kt(t){return cg(lg(t))?t.pop():void 0}function Tl(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function fg(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function dg(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Mn(t){return this instanceof Mn?(this.v=t,this):new Mn(t)}function hg(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(f){r[f]&&(i[f]=function(h){return new Promise(function(p,v){s.push([f,h,p,v])>1||a(f,h)})})}function a(f,h){try{c(r[f](h))}catch(p){d(s[0][3],p)}}function c(f){f.value instanceof Mn?Promise.resolve(f.value.v).then(l,u):d(s[0][2],f)}function l(f){a("next",f)}function u(f){a("throw",f)}function d(f,h){f(h),s.shift(),s.length&&a(s[0][0],s[0][1])}}function pg(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof dg=="function"?dg(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var No=t=>t&&typeof t.length=="number"&&typeof t!="function";function Mo(t){return A(t?.then)}function Ro(t){return A(t[gr])}function xo(t){return Symbol.asyncIterator&&A(t?.[Symbol.asyncIterator])}function Oo(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function aC(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Po=aC();function ko(t){return A(t?.[Po])}function Lo(t){return hg(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Mn(n.read());if(i)return yield Mn(void 0);yield yield Mn(r)}}finally{n.releaseLock()}})}function Fo(t){return A(t?.getReader)}function fe(t){if(t instanceof U)return t;if(t!=null){if(Ro(t))return cC(t);if(No(t))return lC(t);if(Mo(t))return uC(t);if(xo(t))return gg(t);if(ko(t))return dC(t);if(Fo(t))return fC(t)}throw Oo(t)}function cC(t){return new U(e=>{let n=t[gr]();if(A(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function lC(t){return new U(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function uC(t){return new U(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Co)})}function dC(t){return new U(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function gg(t){return new U(e=>{hC(t,e).catch(n=>e.error(n))})}function fC(t){return gg(Lo(t))}function hC(t,e){var n,r,i,s;return fg(this,void 0,void 0,function*(){try{for(n=pg(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function be(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Qt(t,e=0){return V((n,r)=>{n.subscribe($(r,i=>be(r,t,()=>r.next(i),e),()=>be(r,t,()=>r.complete(),e),i=>be(r,t,()=>r.error(i),e)))})}function Zt(t,e=0){return V((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function mg(t,e){return fe(t).pipe(Zt(e),Qt(e))}function vg(t,e){return fe(t).pipe(Zt(e),Qt(e))}function yg(t,e){return new U(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function _g(t,e){return new U(n=>{let r;return be(n,e,()=>{r=t[Po](),be(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>A(r?.return)&&r.return()})}function jo(t,e){if(!t)throw new Error("Iterable cannot be null");return new U(n=>{be(n,e,()=>{let r=t[Symbol.asyncIterator]();be(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Ig(t,e){return jo(Lo(t),e)}function wg(t,e){if(t!=null){if(Ro(t))return mg(t,e);if(No(t))return yg(t,e);if(Mo(t))return vg(t,e);if(xo(t))return jo(t,e);if(ko(t))return _g(t,e);if(Fo(t))return Ig(t,e)}throw Oo(t)}function te(t,e){return e?wg(t,e):fe(t)}function b(...t){let e=Kt(t);return te(t,e)}function wr(t,e){let n=A(t)?t:()=>t,r=i=>i.error(n());return new U(e?i=>e.schedule(r,0,i):r)}function Al(t){return!!t&&(t instanceof U||A(t.lift)&&A(t.subscribe))}var Ot=dr(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function E(t,e){return V((n,r)=>{let i=0;n.subscribe($(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:pC}=Array;function gC(t,e){return pC(e)?t(...e):t(e)}function Eg(t){return E(e=>gC(t,e))}var{isArray:mC}=Array,{getPrototypeOf:vC,prototype:yC,keys:_C}=Object;function Cg(t){if(t.length===1){let e=t[0];if(mC(e))return{args:e,keys:null};if(IC(e)){let n=_C(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function IC(t){return t&&typeof t=="object"&&vC(t)===yC}function Dg(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Be(...t){let e=Kt(t),n=ug(t),{args:r,keys:i}=Cg(t);if(r.length===0)return te([],e);let s=new U(wC(r,e,i?o=>Dg(i,o):ke));return n?s.pipe(Eg(n)):s}function wC(t,e,n=ke){return r=>{bg(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)bg(e,()=>{let l=te(t[c],e),u=!1;l.subscribe($(r,d=>{s[c]=d,u||(u=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function bg(t,e,n){t?be(n,t,e):e()}function Sg(t,e,n,r,i,s,o,a){let c=[],l=0,u=0,d=!1,f=()=>{d&&!c.length&&!l&&e.complete()},h=v=>l<r?p(v):c.push(v),p=v=>{s&&e.next(v),l++;let w=!1;fe(n(v,u++)).subscribe($(e,k=>{i?.(k),s?h(k):e.next(k)},()=>{w=!0},void 0,()=>{if(w)try{for(l--;c.length&&l<r;){let k=c.shift();o?be(e,o,()=>p(k)):p(k)}f()}catch(k){e.error(k)}}))};return t.subscribe($(e,h,()=>{d=!0,f()})),()=>{a?.()}}function ae(t,e,n=1/0){return A(e)?ae((r,i)=>E((s,o)=>e(r,s,i,o))(fe(t(r,i))),n):(typeof e=="number"&&(n=e),V((r,i)=>Sg(r,i,t,n)))}function Er(t=1/0){return ae(ke,t)}function Tg(){return Er(1)}function Cr(...t){return Tg()(te(t,Kt(t)))}function Uo(t){return new U(e=>{fe(t()).subscribe(e)})}function He(t,e){return V((n,r)=>{let i=0;n.subscribe($(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Jt(t){return V((e,n)=>{let r=null,i=!1,s;r=e.subscribe($(n,void 0,void 0,o=>{s=fe(t(o,Jt(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function Ag(t,e,n,r,i){return(s,o)=>{let a=n,c=e,l=0;s.subscribe($(o,u=>{let d=l++;c=a?t(c,u,d):(a=!0,u),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function Rn(t,e){return A(e)?ae(t,e,1):ae(t,1)}function Xt(t){return V((e,n)=>{let r=!1;e.subscribe($(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Pt(t){return t<=0?()=>Le:V((e,n)=>{let r=0;e.subscribe($(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Nl(t){return E(()=>t)}function Vo(t=EC){return V((e,n)=>{let r=!1;e.subscribe($(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function EC(){return new Ot}function Oi(t){return V((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function gt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?He((i,s)=>t(i,s,r)):ke,Pt(1),n?Xt(e):Vo(()=>new Ot))}function Dr(t){return t<=0?()=>Le:V((e,n)=>{let r=[];e.subscribe($(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Ml(t,e){let n=arguments.length>=2;return r=>r.pipe(t?He((i,s)=>t(i,s,r)):ke,Dr(1),n?Xt(e):Vo(()=>new Ot))}function Rl(t,e){return V(Ag(t,e,arguments.length>=2,!0))}function xl(...t){let e=Kt(t);return V((n,r)=>{(e?Cr(t,n,e):Cr(t,n)).subscribe(r)})}function We(t,e){return V((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe($(r,c=>{i?.unsubscribe();let l=0,u=s++;fe(t(c,u)).subscribe(i=$(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Ol(t){return V((e,n)=>{fe(t).subscribe($(n,()=>n.complete(),Ri)),!n.closed&&e.subscribe(n)})}function ce(t,e,n){let r=A(t)||e||n?{next:t,error:e,complete:n}:t;return r?V((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe($(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):ke}var CC="https://g.co/ng/security#xss",C=class extends Error{constructor(e,n){super(Ou(e,n)),this.code=e}};function Ou(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function qi(t){return{toString:t}.toString()}var $o="__parameters__";function DC(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function um(t,e,n){return qi(()=>{let r=DC(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,u){let d=c.hasOwnProperty($o)?c[$o]:Object.defineProperty(c,$o,{value:[]})[$o];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Pn=globalThis;function J(t){for(let e in t)if(t[e]===J)return e;throw Error("Could not find renamed property on target object.")}function Te(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Te).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Yl(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var bC=J({__forward_ref__:J});function dm(t){return t.__forward_ref__=dm,t.toString=function(){return Te(this())},t}function ze(t){return fm(t)?t():t}function fm(t){return typeof t=="function"&&t.hasOwnProperty(bC)&&t.__forward_ref__===dm}function I(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Gi(t){return{providers:t.providers||[],imports:t.imports||[]}}function pa(t){return Ng(t,pm)||Ng(t,gm)}function hm(t){return pa(t)!==null}function Ng(t,e){return t.hasOwnProperty(e)?t[e]:null}function SC(t){let e=t&&(t[pm]||t[gm]);return e||null}function Mg(t){return t&&(t.hasOwnProperty(Rg)||t.hasOwnProperty(TC))?t[Rg]:null}var pm=J({\u0275prov:J}),Rg=J({\u0275inj:J}),gm=J({ngInjectableDef:J}),TC=J({ngInjectorDef:J}),S=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=I({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function mm(t){return t&&!!t.\u0275providers}var AC=J({\u0275cmp:J}),NC=J({\u0275dir:J}),MC=J({\u0275pipe:J}),RC=J({\u0275mod:J}),Yo=J({\u0275fac:J}),Pi=J({__NG_ELEMENT_ID__:J}),xg=J({__NG_ENV_ID__:J});function Ko(t){return typeof t=="string"?t:t==null?"":String(t)}function xC(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Ko(t)}function OC(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new C(-200,t)}function Pu(t,e){throw new C(-201,!1)}var R=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(R||{}),Kl;function vm(){return Kl}function Se(t){let e=Kl;return Kl=t,e}function ym(t,e,n){let r=pa(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&R.Optional)return null;if(e!==void 0)return e;Pu(t,"Injector")}var PC={},ki=PC,Ql="__NG_DI_FLAG__",Qo="ngTempTokenPath",kC="ngTokenPath",LC=/\n/gm,FC="\u0275",Og="__source",Nr;function jC(){return Nr}function en(t){let e=Nr;return Nr=t,e}function UC(t,e=R.Default){if(Nr===void 0)throw new C(-203,!1);return Nr===null?ym(t,void 0,e):Nr.get(t,e&R.Optional?null:void 0,e)}function D(t,e=R.Default){return(vm()||UC)(ze(t),e)}function m(t,e=R.Default){return D(t,ga(e))}function ga(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Zl(t){let e=[];for(let n=0;n<t.length;n++){let r=ze(t[n]);if(Array.isArray(r)){if(r.length===0)throw new C(900,!1);let i,s=R.Default;for(let o=0;o<r.length;o++){let a=r[o],c=VC(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(D(i,s))}else e.push(D(r))}return e}function _m(t,e){return t[Ql]=e,t.prototype[Ql]=e,t}function VC(t){return t[Ql]}function $C(t,e,n,r){let i=t[Qo];throw e[Og]&&i.unshift(e[Og]),t.message=BC(`
`+t.message,i,n,r),t[kC]=i,t[Qo]=null,t}function BC(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==FC?t.slice(2):t;let i=Te(e);if(Array.isArray(e))i=e.map(Te).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Te(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(LC,`
  `)}`}var st=_m(um("Optional"),8);var Im=_m(um("SkipSelf"),4);function Ln(t,e){let n=t.hasOwnProperty(Yo);return n?t[Yo]:null}function ku(t,e){t.forEach(n=>Array.isArray(n)?ku(n,e):e(n))}function wm(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Zo(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function HC(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function Lu(t,e,n){let r=Yi(t,e);return r>=0?t[r|1]=n:(r=~r,HC(t,r,e,n)),r}function Pl(t,e){let n=Yi(t,e);if(n>=0)return t[n|1]}function Yi(t,e){return WC(t,e,1)}function WC(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var Li={},Fe=[],Rr=new S(""),Em=new S("",-1),Cm=new S(""),Jo=class{get(e,n=ki){if(n===ki){let r=new Error(`NullInjectorError: No provider for ${Te(e)}!`);throw r.name="NullInjectorError",r}return n}},Dm=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Dm||{}),yt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(yt||{}),xr=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(xr||{});function zC(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Jl(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];GC(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function qC(t){return t===3||t===4||t===6}function GC(t){return t.charCodeAt(0)===64}function Fu(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Pg(t,n,i,null,e[++r]):Pg(t,n,i,null,null))}}return t}function Pg(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var bm="ng-template";function YC(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&zC(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(ju(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function ju(t){return t.type===4&&t.value!==bm}function KC(t,e,n){let r=t.type===4&&!n?bm:t.value;return e===r}function QC(t,e,n){let r=4,i=t.attrs,s=i!==null?XC(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!tt(r)&&!tt(c))return!1;if(o&&tt(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!KC(t,c,n)||c===""&&e.length===1){if(tt(r))return!1;o=!0}}else if(r&8){if(i===null||!YC(t,i,c,n)){if(tt(r))return!1;o=!0}}else{let l=e[++a],u=ZC(c,i,ju(t),n);if(u===-1){if(tt(r))return!1;o=!0;continue}if(l!==""){let d;if(u>s?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(tt(r))return!1;o=!0}}}}return tt(r)||o}function tt(t){return(t&1)===0}function ZC(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return eD(e,t)}function JC(t,e,n=!1){for(let r=0;r<e.length;r++)if(QC(t,e[r],n))return!0;return!1}function XC(t){for(let e=0;e<t.length;e++){let n=t[e];if(qC(n))return e}return t.length}function eD(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function kg(t,e){return t?":not("+e.trim()+")":e}function tD(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!tt(o)&&(e+=kg(s,i),i=""),r=o,s=s||!tt(r);n++}return i!==""&&(e+=kg(s,i)),e}function nD(t){return t.map(tD).join(",")}function rD(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!tt(i))break;i=s}r++}return{attrs:e,classes:n}}function an(t){return qi(()=>{let e=Mm(t),n=ie(_({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Dm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||yt.Emulated,styles:t.styles||Fe,_:null,schemas:t.schemas||null,tView:null,id:""});Rm(n);let r=t.dependencies;return n.directiveDefs=Fg(r,!1),n.pipeDefs=Fg(r,!0),n.id=oD(n),n})}function iD(t){return rn(t)||Sm(t)}function sD(t){return t!==null}function Ki(t){return qi(()=>({type:t.type,bootstrap:t.bootstrap||Fe,declarations:t.declarations||Fe,imports:t.imports||Fe,exports:t.exports||Fe,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Lg(t,e){if(t==null)return Li;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=xr.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==xr.None?[r,a]:r,e[s]=o):n[s]=r}return n}function Qi(t){return qi(()=>{let e=Mm(t);return Rm(e),e})}function Uu(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function rn(t){return t[AC]||null}function Sm(t){return t[NC]||null}function Tm(t){return t[MC]||null}function Am(t){let e=rn(t)||Sm(t)||Tm(t);return e!==null?e.standalone:!1}function Nm(t,e){let n=t[RC]||null;if(!n&&e===!0)throw new Error(`Type ${Te(t)} does not have '\u0275mod' property.`);return n}function Mm(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Li,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Fe,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Lg(t.inputs,e),outputs:Lg(t.outputs),debugInfo:null}}function Rm(t){t.features?.forEach(e=>e(t))}function Fg(t,e){if(!t)return null;let n=e?Tm:iD;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(sD)}function oD(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function cn(t){return{\u0275providers:t}}function aD(...t){return{\u0275providers:xm(!0,t),\u0275fromNgModule:!0}}function xm(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return ku(e,o=>{let a=o;Xl(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Om(i,s),n}function Om(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Vu(i,s=>{e(s,r)})}}function Xl(t,e,n,r){if(t=ze(t),!t)return!1;let i=null,s=Mg(t),o=!s&&rn(t);if(!s&&!o){let c=t.ngModule;if(s=Mg(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)Xl(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{ku(s.imports,u=>{Xl(u,e,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&Om(l,e)}if(!a){let l=Ln(i)||(()=>new i);e({provide:i,useFactory:l,deps:Fe},i),e({provide:Cm,useValue:i,multi:!0},i),e({provide:Rr,useValue:()=>D(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=t;Vu(c,u=>{e(u,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Vu(t,e){for(let n of t)mm(n)&&(n=n.\u0275providers),Array.isArray(n)?Vu(n,e):e(n)}var cD=J({provide:String,useValue:J});function Pm(t){return t!==null&&typeof t=="object"&&cD in t}function lD(t){return!!(t&&t.useExisting)}function uD(t){return!!(t&&t.useFactory)}function eu(t){return typeof t=="function"}var ma=new S(""),Ho={},dD={},kl;function $u(){return kl===void 0&&(kl=new Jo),kl}var Ae=class{},Fi=class extends Ae{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,nu(e,o=>this.processProvider(o)),this.records.set(Em,br(void 0,this)),i.has("environment")&&this.records.set(Ae,br(void 0,this));let s=this.records.get(ma);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Cm,Fe,R.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=B(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),B(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=en(this),r=Se(void 0),i;try{return e()}finally{en(n),Se(r)}}get(e,n=ki,r=R.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(xg))return e[xg](this);r=ga(r);let i,s=en(this),o=Se(void 0);try{if(!(r&R.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=vD(e)&&pa(e);l&&this.injectableDefInScope(l)?c=br(tu(e),Ho):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&R.Self?$u():this.parent;return n=r&R.Optional&&n===ki?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Qo]=a[Qo]||[]).unshift(Te(e)),s)throw a;return $C(a,e,"R3InjectorError",this.source)}else throw a}finally{Se(o),en(s)}}resolveInjectorInitializers(){let e=B(null),n=en(this),r=Se(void 0),i;try{let s=this.get(Rr,Fe,R.Self);for(let o of s)o()}finally{en(n),Se(r),B(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Te(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new C(205,!1)}processProvider(e){e=ze(e);let n=eu(e)?e:ze(e&&e.provide),r=hD(e);if(!eu(e)&&e.multi===!0){let i=this.records.get(n);i||(i=br(void 0,Ho,!0),i.factory=()=>Zl(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=B(null);try{return n.value===Ho&&(n.value=dD,n.value=n.factory()),typeof n.value=="object"&&n.value&&mD(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{B(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=ze(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function tu(t){let e=pa(t),n=e!==null?e.factory:Ln(t);if(n!==null)return n;if(t instanceof S)throw new C(204,!1);if(t instanceof Function)return fD(t);throw new C(204,!1)}function fD(t){if(t.length>0)throw new C(204,!1);let n=SC(t);return n!==null?()=>n.factory(t):()=>new t}function hD(t){if(Pm(t))return br(void 0,t.useValue);{let e=pD(t);return br(e,Ho)}}function pD(t,e,n){let r;if(eu(t)){let i=ze(t);return Ln(i)||tu(i)}else if(Pm(t))r=()=>ze(t.useValue);else if(uD(t))r=()=>t.useFactory(...Zl(t.deps||[]));else if(lD(t))r=()=>D(ze(t.useExisting));else{let i=ze(t&&(t.useClass||t.provide));if(gD(t))r=()=>new i(...Zl(t.deps));else return Ln(i)||tu(i)}return r}function br(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function gD(t){return!!t.deps}function mD(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function vD(t){return typeof t=="function"||typeof t=="object"&&t instanceof S}function nu(t,e){for(let n of t)Array.isArray(n)?nu(n,e):n&&mm(n)?nu(n.\u0275providers,e):e(n)}function ot(t,e){t instanceof Fi&&t.assertNotDestroyed();let n,r=en(t),i=Se(void 0);try{return e()}finally{en(r),Se(i)}}function km(){return vm()!==void 0||jC()!=null}function yD(t){if(!km())throw new C(-203,!1)}function _D(t){return typeof t=="function"}var Ft=0,j=1,T=2,Ce=3,rt=4,at=5,Xo=6,ji=7,it=8,Or=9,kt=10,ve=11,Ui=12,jg=13,Br=14,_t=15,Pr=16,Sr=17,kr=18,va=19,Lm=20,tn=21,Ll=22,Fn=23,Ge=25,Fm=1;var jn=7,ea=8,ta=9,qe=10,na=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(na||{});function nn(t){return Array.isArray(t)&&typeof t[Fm]=="object"}function jt(t){return Array.isArray(t)&&t[Fm]===!0}function jm(t){return(t.flags&4)!==0}function ya(t){return t.componentOffset>-1}function Bu(t){return(t.flags&1)===1}function Zi(t){return!!t.template}function ru(t){return(t[T]&512)!==0}var iu=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Um(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function _a(){return Vm}function Vm(t){return t.type.prototype.ngOnChanges&&(t.setInput=wD),ID}_a.ngInherit=!0;function ID(){let t=Bm(this),e=t?.current;if(e){let n=t.previous;if(n===Li)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function wD(t,e,n,r,i){let s=this.declaredInputs[r],o=Bm(t)||ED(t,{previous:Li,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new iu(l&&l.currentValue,n,c===Li),Um(t,e,i,n)}var $m="__ngSimpleChanges__";function Bm(t){return t[$m]||null}function ED(t,e){return t[$m]=e}var Ug=null;var mt=function(t,e,n){Ug?.(t,e,n)},CD="svg",DD="math";function It(t){for(;Array.isArray(t);)t=t[Ft];return t}function Hm(t,e){return It(e[t])}function ct(t,e){return It(e[t.index])}function Wm(t,e){return t.data[e]}function Hu(t,e){return t[e]}function ln(t,e){let n=e[t];return nn(n)?n:n[Ft]}function Wu(t){return(t[T]&128)===128}function bD(t){return jt(t[Ce])}function ra(t,e){return e==null?null:t[e]}function zm(t){t[Sr]=0}function SD(t){t[T]&1024||(t[T]|=1024,Wu(t)&&Ia(t))}function TD(t,e){for(;t>0;)e=e[Br],t--;return e}function Vi(t){return!!(t[T]&9216||t[Fn]?.dirty)}function su(t){t[kt].changeDetectionScheduler?.notify(7),t[T]&64&&(t[T]|=1024),Vi(t)&&Ia(t)}function Ia(t){t[kt].changeDetectionScheduler?.notify(0);let e=$i(t);for(;e!==null&&!(e[T]&8192||(e[T]|=8192,!Wu(e)));)e=$i(e)}function qm(t,e){if((t[T]&256)===256)throw new C(911,!1);t[tn]===null&&(t[tn]=[]),t[tn].push(e)}function AD(t,e){if(t[tn]===null)return;let n=t[tn].indexOf(e);n!==-1&&t[tn].splice(n,1)}function $i(t){let e=t[Ce];return jt(e)?e[Ce]:e}var x={lFrame:rv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Gm=!1;function ND(){return x.lFrame.elementDepthCount}function MD(){x.lFrame.elementDepthCount++}function RD(){x.lFrame.elementDepthCount--}function Ym(){return x.bindingsEnabled}function xD(){return x.skipHydrationRootTNode!==null}function OD(t){return x.skipHydrationRootTNode===t}function PD(){x.skipHydrationRootTNode=null}function ne(){return x.lFrame.lView}function Ut(){return x.lFrame.tView}function Hr(t){return x.lFrame.contextLView=t,t[it]}function Wr(t){return x.lFrame.contextLView=null,t}function Ye(){let t=Km();for(;t!==null&&t.type===64;)t=t.parent;return t}function Km(){return x.lFrame.currentTNode}function kD(){let t=x.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ji(t,e){let n=x.lFrame;n.currentTNode=t,n.isParent=e}function Qm(){return x.lFrame.isParent}function LD(){x.lFrame.isParent=!1}function FD(){return x.lFrame.contextLView}function Zm(){return Gm}function Vg(t){Gm=t}function zu(){let t=x.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function jD(){return x.lFrame.bindingIndex}function UD(t){return x.lFrame.bindingIndex=t}function Jm(){return x.lFrame.bindingIndex++}function Xm(t){let e=x.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function VD(){return x.lFrame.inI18n}function $D(t,e){let n=x.lFrame;n.bindingIndex=n.bindingRootIndex=t,ou(e)}function BD(){return x.lFrame.currentDirectiveIndex}function ou(t){x.lFrame.currentDirectiveIndex=t}function HD(t){let e=x.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function ev(t){x.lFrame.currentQueryIndex=t}function WD(t){let e=t[j];return e.type===2?e.declTNode:e.type===1?t[at]:null}function tv(t,e,n){if(n&R.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&R.Host);)if(i=WD(s),i===null||(s=s[Br],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=x.lFrame=nv();return r.currentTNode=e,r.lView=t,!0}function qu(t){let e=nv(),n=t[j];x.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function nv(){let t=x.lFrame,e=t===null?null:t.child;return e===null?rv(t):e}function rv(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function iv(){let t=x.lFrame;return x.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var sv=iv;function Gu(){let t=iv();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function zD(t){return(x.lFrame.contextLView=TD(t,x.lFrame.contextLView))[it]}function Hn(){return x.lFrame.selectedIndex}function Un(t){x.lFrame.selectedIndex=t}function qD(){let t=x.lFrame;return Wm(t.tView,t.selectedIndex)}function GD(){return x.lFrame.currentNamespace}var ov=!0;function Yu(){return ov}function Ku(t){ov=t}function YD(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=Vm(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function Qu(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function Wo(t,e,n){av(t,e,3,n)}function zo(t,e,n,r){(t[T]&3)===n&&av(t,e,n,r)}function Fl(t,e){let n=t[T];(n&3)===e&&(n&=16383,n+=1,t[T]=n)}function av(t,e,n,r){let i=r!==void 0?t[Sr]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Sr]+=65536),(a<s||s==-1)&&(KD(t,n,e,c),t[Sr]=(t[Sr]&4294901760)+c+2),c++}function $g(t,e){mt(4,t,e);let n=B(null);try{e.call(t)}finally{B(n),mt(5,t,e)}}function KD(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[T]>>14<t[Sr]>>16&&(t[T]&3)===e&&(t[T]+=16384,$g(a,s)):$g(a,s)}var Mr=-1,Bi=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function QD(t){return t instanceof Bi}function ZD(t){return(t.flags&8)!==0}function JD(t){return(t.flags&16)!==0}function cv(t){return t!==Mr}function ia(t){return t&32767}function XD(t){return t>>16}function sa(t,e){let n=XD(t),r=e;for(;n>0;)r=r[Br],n--;return r}var au=!0;function oa(t){let e=au;return au=t,e}var eb=256,lv=eb-1,uv=5,tb=0,vt={};function nb(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Pi)&&(r=n[Pi]),r==null&&(r=n[Pi]=tb++);let i=r&lv,s=1<<i;e.data[t+(i>>uv)]|=s}function dv(t,e){let n=fv(t,e);if(n!==-1)return n;let r=e[j];r.firstCreatePass&&(t.injectorIndex=e.length,jl(r.data,t),jl(e,null),jl(r.blueprint,null));let i=Zu(t,e),s=t.injectorIndex;if(cv(i)){let o=ia(i),a=sa(i,e),c=a[j].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function jl(t,e){t.push(0,0,0,0,0,0,0,0,e)}function fv(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Zu(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=vv(i),r===null)return Mr;if(n++,i=i[Br],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Mr}function rb(t,e,n){nb(t,e,n)}function hv(t,e,n){if(n&R.Optional||t!==void 0)return t;Pu(e,"NodeInjector")}function pv(t,e,n,r){if(n&R.Optional&&r===void 0&&(r=null),!(n&(R.Self|R.Host))){let i=t[Or],s=Se(void 0);try{return i?i.get(e,r,n&R.Optional):ym(e,r,n&R.Optional)}finally{Se(s)}}return hv(r,e,n)}function gv(t,e,n,r=R.Default,i){if(t!==null){if(e[T]&2048&&!(r&R.Self)){let o=cb(t,e,n,r,vt);if(o!==vt)return o}let s=mv(t,e,n,r,vt);if(s!==vt)return s}return pv(e,n,r,i)}function mv(t,e,n,r,i){let s=ob(n);if(typeof s=="function"){if(!tv(e,t,r))return r&R.Host?hv(i,n,r):pv(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&R.Optional))Pu(n);else return o}finally{sv()}}else if(typeof s=="number"){let o=null,a=fv(t,e),c=Mr,l=r&R.Host?e[_t][at]:null;for((a===-1||r&R.SkipSelf)&&(c=a===-1?Zu(t,e):e[a+8],c===Mr||!Hg(r,!1)?a=-1:(o=e[j],a=ia(c),e=sa(c,e)));a!==-1;){let u=e[j];if(Bg(s,a,u.data)){let d=ib(a,e,n,o,r,l);if(d!==vt)return d}c=e[a+8],c!==Mr&&Hg(r,e[j].data[a+8]===l)&&Bg(s,a,e)?(o=u,a=ia(c),e=sa(c,e)):a=-1}}return i}function ib(t,e,n,r,i,s){let o=e[j],a=o.data[t+8],c=r==null?ya(a)&&au:r!=o&&(a.type&3)!==0,l=i&R.Host&&s===a,u=sb(a,o,n,c,l);return u!==null?Hi(e,o,u,a):vt}function sb(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,l=t.directiveEnd,u=s>>20,d=r?a:a+u,f=i?a+u:l;for(let h=d;h<f;h++){let p=o[h];if(h<c&&n===p||h>=c&&p.type===n)return h}if(i){let h=o[c];if(h&&Zi(h)&&h.type===n)return c}return null}function Hi(t,e,n,r){let i=t[n],s=e.data;if(QD(i)){let o=i;o.resolving&&OC(xC(s[n]));let a=oa(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?Se(o.injectImpl):null,u=tv(t,r,R.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&YD(n,s[n],e)}finally{l!==null&&Se(l),oa(a),o.resolving=!1,sv()}}return i}function ob(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Pi)?t[Pi]:void 0;return typeof e=="number"?e>=0?e&lv:ab:e}function Bg(t,e,n){let r=1<<t;return!!(n[e+(t>>uv)]&r)}function Hg(t,e){return!(t&R.Self)&&!(t&R.Host&&e)}var kn=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return gv(this._tNode,this._lView,e,ga(r),n)}};function ab(){return new kn(Ye(),ne())}function Ju(t){return qi(()=>{let e=t.prototype.constructor,n=e[Yo]||cu(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Yo]||cu(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function cu(t){return fm(t)?()=>{let e=cu(ze(t));return e&&e()}:Ln(t)}function cb(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[T]&2048&&!(o[T]&512);){let a=mv(s,o,n,r|R.Self,vt);if(a!==vt)return a;let c=s.parent;if(!c){let l=o[Lm];if(l){let u=l.get(n,vt,r);if(u!==vt)return u}c=vv(o),o=o[Br]}s=c}return i}function vv(t){let e=t[j],n=e.type;return n===2?e.declTNode:n===1?t[at]:null}function Wg(t,e=null,n=null,r){let i=yv(t,e,n,r);return i.resolveInjectorInitializers(),i}function yv(t,e=null,n=null,r,i=new Set){let s=[n||Fe,aD(t)];return r=r||(typeof t=="object"?void 0:Te(t)),new Fi(s,e||$u(),r||null,i)}var On=class On{static create(e,n){if(Array.isArray(e))return Wg({name:""},n,e,"");{let r=e.name??"";return Wg({name:r},e.parent,e.providers,r)}}};On.THROW_IF_NOT_FOUND=ki,On.NULL=new Jo,On.\u0275prov=I({token:On,providedIn:"any",factory:()=>D(Em)}),On.__NG_ELEMENT_ID__=-1;var Ne=On;var lb=new S("");lb.__NG_ELEMENT_ID__=t=>{let e=Ye();if(e===null)throw new C(204,!1);if(e.type&2)return e.value;if(t&R.Optional)return null;throw new C(204,!1)};var ub="ngOriginalError";function Ul(t){return t[ub]}var wt=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Ul(e);for(;n&&Ul(n);)n=Ul(n);return n||null}},_v=new S("",{providedIn:"root",factory:()=>m(wt).handleError.bind(void 0)}),Xu=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=db,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),lu=class extends Xu{constructor(e){super(),this._lView=e}onDestroy(e){return qm(this._lView,e),()=>AD(this._lView,e)}};function db(){return new lu(ne())}function fb(){return wa(Ye(),ne())}function wa(t,e){return new Xi(ct(t,e))}var Xi=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=fb;let t=e;return t})();var uu=class extends we{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,km()&&(this.destroyRef=m(Xu,{optional:!0})??void 0)}emit(e){let n=B(null);try{super.next(e)}finally{B(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=Vl(s),i&&(i=Vl(i)),o&&(o=Vl(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof se&&e.add(a),a}};function Vl(t){return e=>{setTimeout(t,void 0,e)}}var Ee=uu;function Iv(t){return(t.flags&128)===128}var wv=new Map,hb=0;function pb(){return hb++}function gb(t){wv.set(t[va],t)}function mb(t){wv.delete(t[va])}var zg="__ngContext__";function Vn(t,e){nn(e)?(t[zg]=e[va],gb(e)):t[zg]=e}function Ev(t){return Dv(t[Ui])}function Cv(t){return Dv(t[rt])}function Dv(t){for(;t!==null&&!jt(t);)t=t[rt];return t}var du;function bv(t){du=t}function vb(){if(du!==void 0)return du;if(typeof document<"u")return document;throw new C(210,!1)}var ed=new S("",{providedIn:"root",factory:()=>yb}),yb="ng",td=new S(""),Et=new S("",{providedIn:"platform",factory:()=>"unknown"});var nd=new S("",{providedIn:"root",factory:()=>vb().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var _b="h",Ib="b";var wb=()=>null;function rd(t,e,n=!1){return wb(t,e,n)}var Sv=!1,Eb=new S("",{providedIn:"root",factory:()=>Sv});var fu=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${CC})`}};function id(t){return t instanceof fu?t.changingThisBreaksApplicationSecurity:t}function Tv(t){return t instanceof Function?t():t}function Cb(t){return(t??m(Ne)).get(Et)==="browser"}var Lt=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Lt||{}),Db;function sd(t,e){return Db(t,e)}function Tr(t,e,n,r,i){if(r!=null){let s,o=!1;jt(r)?s=r:nn(r)&&(o=!0,r=r[Ft]);let a=It(r);t===0&&n!==null?i==null?xv(e,n,a):aa(e,n,a,i||null,!0):t===1&&n!==null?aa(e,n,a,i||null,!0):t===2?Vb(e,a,o):t===3&&e.destroyNode(a),s!=null&&Bb(e,t,s,n,i)}}function bb(t,e){return t.createText(e)}function Sb(t,e,n){t.setValue(e,n)}function Av(t,e,n){return t.createElement(e,n)}function Tb(t,e){Nv(t,e),e[Ft]=null,e[at]=null}function Ab(t,e,n,r,i,s){r[Ft]=i,r[at]=e,Ea(t,r,n,1,i,s)}function Nv(t,e){e[kt].changeDetectionScheduler?.notify(8),Ea(t,e,e[ve],2,null,null)}function Nb(t){let e=t[Ui];if(!e)return $l(t[j],t);for(;e;){let n=null;if(nn(e))n=e[Ui];else{let r=e[qe];r&&(n=r)}if(!n){for(;e&&!e[rt]&&e!==t;)nn(e)&&$l(e[j],e),e=e[Ce];e===null&&(e=t),nn(e)&&$l(e[j],e),n=e&&e[rt]}e=n}}function Mb(t,e,n,r){let i=qe+r,s=n.length;r>0&&(n[i-1][rt]=e),r<s-qe?(e[rt]=n[i],wm(n,qe+r,e)):(n.push(e),e[rt]=null),e[Ce]=n;let o=e[Pr];o!==null&&n!==o&&Mv(o,e);let a=e[kr];a!==null&&a.insertView(t),su(e),e[T]|=128}function Mv(t,e){let n=t[ta],r=e[Ce];if(nn(r))t[T]|=na.HasTransplantedViews;else{let i=r[Ce][_t];e[_t]!==i&&(t[T]|=na.HasTransplantedViews)}n===null?t[ta]=[e]:n.push(e)}function od(t,e){let n=t[ta],r=n.indexOf(e);n.splice(r,1)}function hu(t,e){if(t.length<=qe)return;let n=qe+e,r=t[n];if(r){let i=r[Pr];i!==null&&i!==t&&od(i,r),e>0&&(t[n-1][rt]=r[rt]);let s=Zo(t,qe+e);Tb(r[j],r);let o=s[kr];o!==null&&o.detachView(s[j]),r[Ce]=null,r[rt]=null,r[T]&=-129}return r}function Rv(t,e){if(!(e[T]&256)){let n=e[ve];n.destroyNode&&Ea(t,e,n,3,null,null),Nb(e)}}function $l(t,e){if(e[T]&256)return;let n=B(null);try{e[T]&=-129,e[T]|=256,e[Fn]&&Xp(e[Fn]),xb(t,e),Rb(t,e),e[j].type===1&&e[ve].destroy();let r=e[Pr];if(r!==null&&jt(e[Ce])){r!==e[Ce]&&od(r,e);let i=e[kr];i!==null&&i.detachView(t)}mb(e)}finally{B(n)}}function Rb(t,e){let n=t.cleanup,r=e[ji];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[ji]=null);let i=e[tn];if(i!==null){e[tn]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function xb(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Bi)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];mt(4,a,c);try{c.call(a)}finally{mt(5,a,c)}}else{mt(4,i,s);try{s.call(i)}finally{mt(5,i,s)}}}}}function Ob(t,e,n){return Pb(t,e.parent,n)}function Pb(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Ft];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===yt.None||s===yt.Emulated)return null}return ct(r,n)}}function aa(t,e,n,r,i){t.insertBefore(e,n,r,i)}function xv(t,e,n){t.appendChild(e,n)}function qg(t,e,n,r,i){r!==null?aa(t,e,n,r,i):xv(t,e,n)}function kb(t,e,n,r){t.removeChild(e,n,r)}function ad(t,e){return t.parentNode(e)}function Lb(t,e){return t.nextSibling(e)}function Fb(t,e,n){return Ub(t,e,n)}function jb(t,e,n){return t.type&40?ct(t,n):null}var Ub=jb,Gg;function cd(t,e,n,r){let i=Ob(t,r,e),s=e[ve],o=r.parent||e[at],a=Fb(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)qg(s,i,n[c],a,!1);else qg(s,i,n,a,!1);Gg!==void 0&&Gg(s,r,e,n,i)}function qo(t,e){if(e!==null){let n=e.type;if(n&3)return ct(e,t);if(n&4)return pu(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return qo(t,r);{let i=t[e.index];return jt(i)?pu(-1,i):It(i)}}else{if(n&32)return sd(e,t)()||It(t[e.index]);{let r=Ov(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=$i(t[_t]);return qo(i,r)}else return qo(t,e.next)}}}return null}function Ov(t,e){if(e!==null){let r=t[_t][at],i=e.projection;return r.projection[i]}return null}function pu(t,e){let n=qe+t+1;if(n<e.length){let r=e[n],i=r[j].firstChild;if(i!==null)return qo(r,i)}return e[jn]}function Vb(t,e,n){let r=ad(t,e);r&&kb(t,r,e,n)}function ld(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],c=n.type;if(o&&e===0&&(a&&Vn(It(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)ld(t,e,n.child,r,i,s,!1),Tr(e,t,i,a,s);else if(c&32){let l=sd(n,r),u;for(;u=l();)Tr(e,t,i,u,s);Tr(e,t,i,a,s)}else c&16?$b(t,e,r,n,i,s):Tr(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Ea(t,e,n,r,i,s){ld(n,r,t.firstChild,e,i,s,!1)}function $b(t,e,n,r,i,s){let o=n[_t],c=o[at].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Tr(e,t,i,u,s)}else{let l=c,u=o[Ce];Iv(r)&&(l.flags|=128),ld(t,e,l,u,i,s,!0)}}function Bb(t,e,n,r,i){let s=n[jn],o=It(n);s!==o&&Tr(e,t,r,s,i);for(let a=qe;a<n.length;a++){let c=n[a];Ea(c[j],c,t,e,r,s)}}function Hb(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Lt.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Lt.Important),t.setStyle(n,r,i,s))}}function Wb(t,e,n){t.setAttribute(e,"style",n)}function Pv(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function kv(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Jl(t,e,r),i!==null&&Pv(t,e,i),s!==null&&Wb(t,e,s)}var Ct={};function re(t=1){Lv(Ut(),ne(),Hn()+t,!1)}function Lv(t,e,n,r){if(!r)if((e[T]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Wo(e,s,n)}else{let s=t.preOrderHooks;s!==null&&zo(e,s,0,n)}Un(n)}function ye(t,e=R.Default){let n=ne();if(n===null)return D(t,e);let r=Ye();return gv(r,n,ze(t),e)}function Fv(){let t="invalid";throw new Error(t)}function jv(t,e,n,r,i,s){let o=B(null);try{let a=null;i&xr.SignalBased&&(a=e[r][Kp]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&xr.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):Um(e,a,r,s)}finally{B(o)}}function zb(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Un(~i);else{let s=i,o=n[++r],a=n[++r];$D(o,s);let c=e[s];a(2,c)}}}finally{Un(-1)}}function Ca(t,e,n,r,i,s,o,a,c,l,u){let d=e.blueprint.slice();return d[Ft]=i,d[T]=r|4|128|8|64,(l!==null||t&&t[T]&2048)&&(d[T]|=2048),zm(d),d[Ce]=d[Br]=t,d[it]=n,d[kt]=o||t&&t[kt],d[ve]=a||t&&t[ve],d[Or]=c||t&&t[Or]||null,d[at]=s,d[va]=pb(),d[Xo]=u,d[Lm]=l,d[_t]=e.type==2?t[_t]:d,d}function Da(t,e,n,r,i){let s=t.data[e];if(s===null)s=qb(t,e,n,r,i),VD()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=kD();s.injectorIndex=o===null?-1:o.injectorIndex}return Ji(s,!0),s}function qb(t,e,n,r,i){let s=Km(),o=Qm(),a=o?s:s&&s.parent,c=t.data[e]=Zb(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function Uv(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Vv(t,e,n,r,i){let s=Hn(),o=r&2;try{Un(-1),o&&e.length>Ge&&Lv(t,e,Ge,!1),mt(o?2:0,i),n(r,i)}finally{Un(s),mt(o?3:1,i)}}function $v(t,e,n){if(jm(e)){let r=B(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{B(r)}}}function Bv(t,e,n){Ym()&&(iS(t,e,n,ct(n,e)),(n.flags&64)===64&&Gv(t,e,n))}function Hv(t,e,n=ct){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function Wv(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=ud(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function ud(t,e,n,r,i,s,o,a,c,l,u){let d=Ge+r,f=d+i,h=Gb(d,f),p=typeof l=="function"?l():l;return h[j]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function Gb(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ct);return n}function Yb(t,e,n,r){let s=r.get(Eb,Sv)||n===yt.ShadowDom,o=t.selectRootElement(e,s);return Kb(o),o}function Kb(t){Qb(t)}var Qb=()=>null;function Zb(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return xD()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Yg(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=xr.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?Kg(r,n,l,a,c):Kg(r,n,l,a)}return r}function Kg(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function Jb(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=s[u],f=n?n.get(d):null,h=f?f.inputs:null,p=f?f.outputs:null;c=Yg(0,d.inputs,u,c,h),l=Yg(1,d.outputs,u,l,p);let v=c!==null&&o!==null&&!ju(e)?hS(c,u,o):null;a.push(v)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function Xb(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function eS(t,e,n,r,i,s,o,a){let c=ct(e,n),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(dd(t,n,u,r,i),ya(e)&&tS(n,e.index)):e.type&3?(r=Xb(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function tS(t,e){let n=ln(e,t);n[T]&16||(n[T]|=64)}function zv(t,e,n,r){if(Ym()){let i=r===null?null:{"":-1},s=oS(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&qv(t,e,n,o,i,a),i&&aS(n,r,i)}n.mergedAttrs=Fu(n.mergedAttrs,n.attrs)}function qv(t,e,n,r,i,s){for(let l=0;l<r.length;l++)rb(dv(n,e),t,r[l].type);lS(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=Uv(t,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=Fu(n.mergedAttrs,u.hostAttrs),uS(t,n,e,c,u),cS(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}Jb(t,n,s)}function nS(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;rS(o)!=a&&o.push(a),o.push(n,r,s)}}function rS(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function iS(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;ya(n)&&dS(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||dv(n,e),Vn(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],l=Hi(e,t,a,n);if(Vn(l,e),o!==null&&fS(e,a-i,l,c,n,o),Zi(c)){let u=ln(n.index,e);u[it]=Hi(e,t,a,n)}}}function Gv(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=BD();try{Un(s);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];ou(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&sS(c,l)}}finally{Un(-1),ou(o)}}function sS(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function oS(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(JC(e,o.selectors,!1))if(r||(r=[]),Zi(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;gu(t,e,c)}else r.unshift(o),gu(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function gu(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function aS(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new C(-301,!1);r.push(e[i],s)}}}function cS(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Zi(e)&&(n[""]=t)}}function lS(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function uS(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Ln(i.type,!0)),o=new Bi(s,Zi(i),ye);t.blueprint[r]=o,n[r]=o,nS(t,e,r,Uv(t,n,i.hostVars,Ct),i)}function dS(t,e,n){let r=ct(e,t),i=Wv(n),s=t[kt].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=ba(t,Ca(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function fS(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],u=o[a++],d=o[a++];jv(r,n,c,l,u,d)}}function hS(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function Yv(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Kv(t,e){let n=t.contentQueries;if(n!==null){let r=B(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];ev(s),a.contentQueries(2,e[o],o)}}}finally{B(r)}}}function ba(t,e){return t[Ui]?t[jg][rt]=e:t[Ui]=e,t[jg]=e,e}function mu(t,e,n){ev(0);let r=B(null);try{e(t,n)}finally{B(r)}}function pS(t){return t[ji]||(t[ji]=[])}function gS(t){return t.cleanup||(t.cleanup=[])}function Qv(t,e){let n=t[Or],r=n?n.get(wt,null):null;r&&r.handleError(e)}function dd(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],l=e[o],u=t.data[o];jv(u,l,r,a,c,i)}}function Zv(t,e,n){let r=Hm(e,t);Sb(t[ve],r,n)}function mS(t,e){let n=ln(e,t),r=n[j];vS(r,n);let i=n[Ft];i!==null&&n[Xo]===null&&(n[Xo]=rd(i,n[Or])),fd(r,n,n[it])}function vS(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function fd(t,e,n){qu(e);try{let r=t.viewQuery;r!==null&&mu(1,r,n);let i=t.template;i!==null&&Vv(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[kr]?.finishViewCreation(t),t.staticContentQueries&&Kv(t,e),t.staticViewQueries&&mu(2,t.viewQuery,n);let s=t.components;s!==null&&yS(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[T]&=-5,Gu()}}function yS(t,e){for(let n=0;n<e.length;n++)mS(t,e[n])}function _S(t,e,n,r){let i=B(null);try{let s=e.tView,a=t[T]&4096?4096:16,c=Ca(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[Pr]=l;let u=t[kr];return u!==null&&(c[kr]=u.createEmbeddedView(s)),fd(s,c,n),c}finally{B(i)}}function Qg(t,e){return!e||e.firstChild===null||Iv(t)}function IS(t,e,n,r=!0){let i=e[j];if(Mb(i,e,t,n),r){let o=pu(n,t),a=e[ve],c=ad(a,t[jn]);c!==null&&Ab(i,t[at],a,e,c,o)}let s=e[Xo];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function ca(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(It(s)),jt(s)&&wS(s,r);let o=n.type;if(o&8)ca(t,e,n.child,r);else if(o&32){let a=sd(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=Ov(e,n);if(Array.isArray(a))r.push(...a);else{let c=$i(e[_t]);ca(c[j],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function wS(t,e){for(let n=qe;n<t.length;n++){let r=t[n],i=r[j].firstChild;i!==null&&ca(r[j],r,i,e)}t[jn]!==t[Ft]&&e.push(t[jn])}var Jv=[];function ES(t){return t[Fn]??CS(t)}function CS(t){let e=Jv.pop()??Object.create(bS);return e.lView=t,e}function DS(t){t.lView[Fn]!==t&&(t.lView=null,Jv.push(t))}var bS=ie(_({},Qp),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Ia(t.lView)},consumerOnSignalRead(){this.lView[Fn]=this}}),SS=100;function Xv(t,e=!0,n=0){let r=t[kt],i=r.rendererFactory,s=!1;s||i.begin?.();try{TS(t,n)}catch(o){throw e&&Qv(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function TS(t,e){let n=Zm();try{Vg(!0),vu(t,e);let r=0;for(;Vi(t);){if(r===SS)throw new C(103,!1);r++,vu(t,1)}}finally{Vg(n)}}function AS(t,e,n,r){let i=e[T];if((i&256)===256)return;let s=!1,o=!1;!s&&e[kt].inlineEffectRunner?.flush(),qu(e);let a=null,c=null;!s&&NS(t)&&(c=ES(e),a=Zp(c));try{zm(e),UD(t.bindingStartIndex),n!==null&&Vv(t,e,n,2,r);let l=(i&3)===3;if(!s)if(l){let f=t.preOrderCheckHooks;f!==null&&Wo(e,f,null)}else{let f=t.preOrderHooks;f!==null&&zo(e,f,0,null),Fl(e,0)}if(o||MS(e),ey(e,0),t.contentQueries!==null&&Kv(t,e),!s)if(l){let f=t.contentCheckHooks;f!==null&&Wo(e,f)}else{let f=t.contentHooks;f!==null&&zo(e,f,1),Fl(e,1)}zb(t,e);let u=t.components;u!==null&&ny(e,u,0);let d=t.viewQuery;if(d!==null&&mu(2,d,r),!s)if(l){let f=t.viewCheckHooks;f!==null&&Wo(e,f)}else{let f=t.viewHooks;f!==null&&zo(e,f,2),Fl(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Ll]){for(let f of e[Ll])f();e[Ll]=null}s||(e[T]&=-73)}catch(l){throw s||Ia(e),l}finally{c!==null&&(Jp(c,a),DS(c)),Gu()}}function NS(t){return t.type!==2}function ey(t,e){for(let n=Ev(t);n!==null;n=Cv(n))for(let r=qe;r<n.length;r++){let i=n[r];ty(i,e)}}function MS(t){for(let e=Ev(t);e!==null;e=Cv(e)){if(!(e[T]&na.HasTransplantedViews))continue;let n=e[ta];for(let r=0;r<n.length;r++){let i=n[r];SD(i)}}}function RS(t,e,n){let r=ln(e,t);ty(r,n)}function ty(t,e){Wu(t)&&vu(t,e)}function vu(t,e){let r=t[j],i=t[T],s=t[Fn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&fl(s)),o||=!1,s&&(s.dirty=!1),t[T]&=-9217,o)AS(r,t,r.template,t[it]);else if(i&8192){ey(t,1);let a=r.components;a!==null&&ny(t,a,1)}}function ny(t,e,n){for(let r=0;r<e.length;r++)RS(t,e[r],n)}function hd(t,e){let n=Zm()?64:1088;for(t[kt].changeDetectionScheduler?.notify(e);t;){t[T]|=n;let r=$i(t);if(ru(t)&&!r)return t;t=r}return null}var $n=class{get rootNodes(){let e=this._lView,n=e[j];return ca(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[it]}set context(e){this._lView[it]=e}get destroyed(){return(this._lView[T]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ce];if(jt(e)){let n=e[ea],r=n?n.indexOf(this):-1;r>-1&&(hu(e,r),Zo(n,r))}this._attachedToViewContainer=!1}Rv(this._lView[j],this._lView)}onDestroy(e){qm(this._lView,e)}markForCheck(){hd(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[T]&=-129}reattach(){su(this._lView),this._lView[T]|=128}detectChanges(){this._lView[T]|=1024,Xv(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new C(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ru(this._lView),n=this._lView[Pr];n!==null&&!e&&od(n,this._lView),Nv(this._lView[j],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new C(902,!1);this._appRef=e;let n=ru(this._lView),r=this._lView[Pr];r!==null&&!n&&Mv(r,this._lView),su(this._lView)}},pd=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=PS;let t=e;return t})(),xS=pd,OS=class extends xS{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=_S(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new $n(i)}};function PS(){return ry(Ye(),ne())}function ry(t,e){return t.type&4?new OS(e,t,wa(t,e)):null}var p$=new RegExp(`^(\\d+)*(${Ib}|${_b})*(.*)`);var kS=()=>null;function Zg(t,e){return kS(t,e)}var Lr=class{},gd=new S("",{providedIn:"root",factory:()=>!1});var iy=new S(""),yu=class{},la=class{};function LS(t){let e=Error(`No component factory found for ${Te(t)}.`);return e[FS]=t,e}var FS="ngComponent";var _u=class{resolveComponentFactory(e){throw LS(e)}},Dd=class Dd{};Dd.NULL=new _u;var Fr=Dd,jr=class{},Sa=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>jS();let t=e;return t})();function jS(){let t=ne(),e=Ye(),n=ln(e.index,t);return(nn(n)?n:t)[ve]}var US=(()=>{let e=class e{};e.\u0275prov=I({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Bl={};var Jg=new Set;function Ta(t){Jg.has(t)||(Jg.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function sy(t){let e=!0;return setTimeout(()=>{e&&(e=!1,t())}),typeof Pn.requestAnimationFrame=="function"&&Pn.requestAnimationFrame(()=>{e&&(e=!1,t())}),()=>{e=!1}}function Xg(t){let e=!0;return queueMicrotask(()=>{e&&t()}),()=>{e=!1}}function em(...t){}var K=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ee(!1),this.onMicrotaskEmpty=new Ee(!1),this.onStable=new Ee(!1),this.onError=new Ee(!1),typeof Zone>"u")throw new C(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.callbackScheduled=!1,BS(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new C(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new C(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,VS,em,em);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},VS={};function md(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function $S(t){t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,Zone.root.run(()=>{sy(()=>{t.callbackScheduled=!1,Iu(t),t.isCheckStableRunning=!0,md(t),t.isCheckStableRunning=!1})}),Iu(t))}function BS(t){let e=()=>{$S(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(HS(a))return n.invokeTask(i,s,o,a);try{return tm(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),nm(t)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return tm(t),n.invoke(i,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!WS(a)&&e(),nm(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Iu(t),md(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Iu(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function tm(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function nm(t){t._nesting--,md(t)}var wu=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ee,this.onMicrotaskEmpty=new Ee,this.onStable=new Ee,this.onError=new Ee}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function HS(t){return oy(t,"__ignore_ng_zone__")}function WS(t){return oy(t,"__scheduler_tick__")}function oy(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Ar=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Ar||{}),zS={destroy(){}};function Aa(t,e){!e&&yD(Aa);let n=e?.injector??m(Ne);if(!Cb(n))return zS;Ta("NgAfterNextRender");let r=n.get(vd),i=r.handler??=new Cu,s=e?.phase??Ar.MixedReadWrite,o=()=>{i.unregister(c),a()},a=n.get(Xu).onDestroy(o),c=ot(n,()=>new Eu(s,()=>{o(),t()}));return i.register(c),{destroy:o}}var Eu=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=m(K),this.errorHandler=m(wt,{optional:!0}),m(Lr,{optional:!0})?.notify(6)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},Cu=class{constructor(){this.executingCallbacks=!1,this.buckets={[Ar.EarlyRead]:new Set,[Ar.Write]:new Set,[Ar.MixedReadWrite]:new Set,[Ar.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},vd=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=I({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Du(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Yl(i,a);else if(s==2){let c=a,l=e[++o];r=Yl(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var ua=class extends Fr{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=rn(e);return new Ur(n,this.ngModule)}};function rm(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function qS(t){let e=t.toLowerCase();return e==="svg"?CD:e==="math"?DD:null}var bu=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=ga(r);let i=this.injector.get(e,Bl,r);return i!==Bl||n===Bl?i:this.parentInjector.get(e,n,r)}},Ur=class extends la{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=rm(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return rm(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=nD(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=B(null);try{i=i||this.ngModule;let o=i instanceof Ae?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new bu(e,o):e,c=a.get(jr,null);if(c===null)throw new C(407,!1);let l=a.get(US,null),u=a.get(vd,null),d=a.get(Lr,null),f={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:d},h=c.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",v=r?Yb(h,r,this.componentDef.encapsulation,a):Av(h,p,qS(p)),w=512;this.componentDef.signals?w|=4096:this.componentDef.onPush||(w|=16);let k=null;v!==null&&(k=rd(v,a,!0));let X=ud(0,null,null,1,0,null,null,null,null,null,null),G=Ca(null,X,null,w,null,null,f,h,a,null,k);qu(G);let de,$e;try{let Ie=this.componentDef,xt,Ni=null;Ie.findHostDirectiveDefs?(xt=[],Ni=new Map,Ie.findHostDirectiveDefs(Ie,xt,Ni),xt.push(Ie)):xt=[Ie];let Mi=GS(G,v),ul=YS(Mi,v,Ie,xt,G,f,h);$e=Wm(X,Ge),v&&ZS(h,Ie,v,r),n!==void 0&&JS($e,this.ngContentSelectors,n),de=QS(ul,Ie,xt,Ni,G,[XS]),fd(X,G,null)}finally{Gu()}return new Su(this.componentType,de,wa($e,G),G,$e)}finally{B(s)}}},Su=class extends yu{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new $n(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;dd(s[j],s,i,e,n),this.previousInputValues.set(e,n);let o=ln(this._tNode.index,s);hd(o,1)}}get injector(){return new kn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function GS(t,e){let n=t[j],r=Ge;return t[r]=e,Da(n,r,2,"#host",null)}function YS(t,e,n,r,i,s,o){let a=i[j];KS(r,t,e,o);let c=null;e!==null&&(c=rd(e,i[Or]));let l=s.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=Ca(i,Wv(n),null,u,i[t.index],t,s,l,null,null,c);return a.firstCreatePass&&gu(a,t,r.length-1),ba(i,d),i[t.index]=d}function KS(t,e,n,r){for(let i of t)e.mergedAttrs=Fu(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Du(e,e.mergedAttrs,!0),n!==null&&kv(r,n,e))}function QS(t,e,n,r,i,s){let o=Ye(),a=i[j],c=ct(o,i);qv(a,i,o,n,null,r);for(let u=0;u<n.length;u++){let d=o.directiveStart+u,f=Hi(i,a,d,o);Vn(f,i)}Gv(a,i,o),c&&Vn(c,i);let l=Hi(i,a,o.directiveStart+o.componentOffset,o);if(t[it]=i[it]=l,s!==null)for(let u of s)u(l,e);return $v(a,o,i),l}function ZS(t,e,n,r){if(r)Jl(t,n,["ng-version","18.0.1"]);else{let{attrs:i,classes:s}=rD(e.selectors[0]);i&&Jl(t,n,i),s&&s.length>0&&Pv(t,n,s.join(" "))}}function JS(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function XS(){let t=Ye();Qu(ne()[j],t)}var es=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=eT;let t=e;return t})();function eT(){let t=Ye();return nT(t,ne())}var tT=es,ay=class extends tT{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return wa(this._hostTNode,this._hostLView)}get injector(){return new kn(this._hostTNode,this._hostLView)}get parentInjector(){let e=Zu(this._hostTNode,this._hostLView);if(cv(e)){let n=sa(e,this._hostLView),r=ia(e),i=n[j].data[r+8];return new kn(i,n)}else return new kn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=im(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-qe}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Zg(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,Qg(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!_D(e),a;if(o)a=n;else{let p=n||{};a=p.index,r=p.injector,i=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}let c=o?e:new Ur(rn(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let v=(o?l:this.parentInjector).get(Ae,null);v&&(s=v)}let u=rn(c.componentType??{}),d=Zg(this._lContainer,u?.id??null),f=d?.firstChild??null,h=c.create(l,i,f,s);return this.insertImpl(h.hostView,a,Qg(this._hostTNode,d)),h}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(bD(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Ce],l=new ay(c,c[at],c[Ce]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return IS(o,i,s,r),e.attachToViewContainerRef(),wm(Hl(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=im(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=hu(this._lContainer,n);r&&(Zo(Hl(this._lContainer),n),Rv(r[j],r))}detach(e){let n=this._adjustIndex(e,-1),r=hu(this._lContainer,n);return r&&Zo(Hl(this._lContainer),n)!=null?new $n(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function im(t){return t[ea]}function Hl(t){return t[ea]||(t[ea]=[])}function nT(t,e){let n,r=e[t.index];return jt(r)?n=r:(n=Yv(r,e,null,t),e[t.index]=n,ba(e,n)),iT(n,e,t,r),new ay(n,t,e)}function rT(t,e){let n=t[ve],r=n.createComment(""),i=ct(e,t),s=ad(n,i);return aa(n,s,r,Lb(n,i),!1),r}var iT=aT,sT=()=>!1;function oT(t,e,n){return sT(t,e,n)}function aT(t,e,n,r){if(t[jn])return;let i;n.type&8?i=It(r):i=rT(e,n),t[jn]=i}var sn=class{},Wi=class{};var Tu=class extends sn{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ua(this);let i=Nm(e);this._bootstrapComponents=Tv(i.bootstrap),this._r3Injector=yv(e,n,[{provide:sn,useValue:this},{provide:Fr,useValue:this.componentFactoryResolver},...r],Te(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Au=class extends Wi{constructor(e){super(),this.moduleType=e}create(e){return new Tu(this.moduleType,e,[])}};var da=class extends sn{constructor(e){super(),this.componentFactoryResolver=new ua(this),this.instance=null;let n=new Fi([...e.providers,{provide:sn,useValue:this},{provide:Fr,useValue:this.componentFactoryResolver}],e.parent||$u(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Na(t,e,n=null){return new da({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var ts=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ge(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function cy(t,e,n){return t[e]=n}function Vr(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function ly(t,e,n,r){let i=Vr(t,e,n);return Vr(t,e+1,r)||i}function cT(t){return(t.flags&32)===32}function lT(t,e,n,r,i,s,o,a,c){let l=e.consts,u=Da(e,t,4,o||null,a||null);zv(e,n,u,ra(l,c)),Qu(e,u);let d=u.tView=ud(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function uT(t,e,n,r,i,s,o,a,c,l){let u=n+Ge,d=e.firstCreatePass?lT(u,e,t,r,i,s,o,a,c):e.data[u];Ji(d,!1);let f=dT(e,t,d,n);Yu()&&cd(e,t,f,d),Vn(f,t);let h=Yv(f,t,f,d);return t[u]=h,ba(t,h),oT(h,d,t),Bu(d)&&Bv(e,t,d),c!=null&&Hv(t,d,l),d}function Ke(t,e,n,r,i,s,o,a){let c=ne(),l=Ut(),u=ra(l.consts,s);return uT(c,l,t,e,n,r,i,u,o,a),Ke}var dT=fT;function fT(t,e,n,r){return Ku(!0),e[ve].createComment("")}function hT(t,e,n,r){return Vr(t,Jm(),n)?e+Ko(n)+r:Ct}function pT(t,e,n,r,i,s){let o=jD(),a=ly(t,o,n,i);return Xm(2),a?e+Ko(n)+r+Ko(i)+s:Ct}function Bo(t,e){return t<<17|e<<2}function Bn(t){return t>>17&32767}function gT(t){return(t&2)==2}function mT(t,e){return t&131071|e<<17}function Nu(t){return t|2}function $r(t){return(t&131068)>>2}function Wl(t,e){return t&-131069|e<<2}function vT(t){return(t&1)===1}function Mu(t){return t|1}function yT(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Bn(o),c=$r(o);t[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||Yi(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let f=Bn(t[a+1]);t[r+1]=Bo(f,a),f!==0&&(t[f+1]=Wl(t[f+1],r)),t[a+1]=mT(t[a+1],r)}else t[r+1]=Bo(a,0),a!==0&&(t[a+1]=Wl(t[a+1],r)),a=r;else t[r+1]=Bo(c,0),a===0?a=r:t[c+1]=Wl(t[c+1],r),c=r;l&&(t[r+1]=Nu(t[r+1])),sm(t,u,r,!0),sm(t,u,r,!1),_T(e,u,t,r,s),o=Bo(a,c),s?e.classBindings=o:e.styleBindings=o}function _T(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&Yi(s,e)>=0&&(n[r+1]=Mu(n[r+1]))}function sm(t,e,n,r){let i=t[n+1],s=e===null,o=r?Bn(i):$r(i),a=!1;for(;o!==0&&(a===!1||s);){let c=t[o],l=t[o+1];IT(c,e)&&(a=!0,t[o+1]=r?Mu(l):Nu(l)),o=r?Bn(l):$r(l)}a&&(t[n+1]=r?Nu(i):Mu(i))}function IT(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Yi(t,e)>=0:!1}var nt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function wT(t){return t.substring(nt.key,nt.keyEnd)}function ET(t){return CT(t),uy(t,dy(t,0,nt.textEnd))}function uy(t,e){let n=nt.textEnd;return n===e?-1:(e=nt.keyEnd=DT(t,nt.key=e,n),dy(t,e,n))}function CT(t){nt.key=0,nt.keyEnd=0,nt.value=0,nt.valueEnd=0,nt.textEnd=t.length}function dy(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function DT(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function Qe(t,e,n){let r=ne(),i=Jm();if(Vr(r,i,e)){let s=Ut(),o=qD();eS(s,o,r,t,e,r[ve],n,!1)}return Qe}function Ru(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";dd(t,n,s[o],o,r)}function ns(t){ST(OT,bT,t,!0)}function bT(t,e){for(let n=ET(e);n>=0;n=uy(e,n))Lu(t,wT(e),!0)}function ST(t,e,n,r){let i=Ut(),s=Xm(2);i.firstUpdatePass&&TT(i,null,s,r);let o=ne();if(n!==Ct&&Vr(o,s,n)){let a=i.data[Hn()];if(hy(a,r)&&!fy(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(n=Yl(c,n||"")),Ru(i,a,o,n,r)}else PT(i,a,o,o[ve],o[s+1],o[s+1]=xT(t,e,n),r,s)}}function fy(t,e){return e>=t.expandoStartIndex}function TT(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[Hn()],o=fy(t,n);hy(s,r)&&e===null&&!o&&(e=!1),e=AT(i,s,e,r),yT(i,s,e,n,o,r)}}function AT(t,e,n,r){let i=HD(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=zl(null,t,e,n,r),n=zi(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=zl(i,t,e,n,r),s===null){let c=NT(t,e,r);c!==void 0&&Array.isArray(c)&&(c=zl(null,t,e,c[1],r),c=zi(c,e.attrs,r),MT(t,e,r,c))}else s=RT(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function NT(t,e,n){let r=n?e.classBindings:e.styleBindings;if($r(r)!==0)return t[Bn(r)]}function MT(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Bn(i)]=r}function RT(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=zi(r,o,n)}return zi(r,e.attrs,n)}function zl(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=zi(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function zi(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Lu(t,o,n?!0:e[++s]))}return t===void 0?null:t}function xT(t,e,n){if(n==null||n==="")return Fe;let r=[],i=id(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)t(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&t(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function OT(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&Lu(t,r,n)}function PT(t,e,n,r,i,s,o,a){i===Ct&&(i=Fe);let c=0,l=0,u=0<i.length?i[0]:null,d=0<s.length?s[0]:null;for(;u!==null||d!==null;){let f=c<i.length?i[c+1]:void 0,h=l<s.length?s[l+1]:void 0,p=null,v;u===d?(c+=2,l+=2,f!==h&&(p=d,v=h)):d===null||u!==null&&u<d?(c+=2,p=u):(l+=2,p=d,v=h),p!==null&&kT(t,e,n,r,p,v,o,a),u=c<i.length?i[c]:null,d=l<s.length?s[l]:null}}function kT(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],u=vT(l)?om(c,e,n,i,$r(l),o):void 0;if(!fa(u)){fa(s)||gT(l)&&(s=om(c,null,n,i,a,o));let d=Hm(Hn(),n);Hb(r,o,d,i,s)}}function om(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,f=n[i+1];f===Ct&&(f=d?Fe:void 0);let h=d?Pl(f,r):u===r?f:void 0;if(l&&!fa(h)&&(h=Pl(c,r)),fa(h)&&(a=h,o))return a;let p=t[i+1];i=o?Bn(p):$r(p)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Pl(c,r))}return a}function fa(t){return t!==void 0}function hy(t,e){return(t.flags&(e?8:16))!==0}function LT(t,e,n,r,i,s){let o=e.consts,a=ra(o,i),c=Da(e,t,2,r,a);return zv(e,n,c,ra(o,s)),c.attrs!==null&&Du(c,c.attrs,!1),c.mergedAttrs!==null&&Du(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function W(t,e,n,r){let i=ne(),s=Ut(),o=Ge+t,a=i[ve],c=s.firstCreatePass?LT(o,s,i,e,n,r):s.data[o],l=FT(s,i,c,a,e,t);i[o]=l;let u=Bu(c);return Ji(c,!0),kv(a,l,c),!cT(c)&&Yu()&&cd(s,i,l,c),ND()===0&&Vn(l,i),MD(),u&&(Bv(s,i,c),$v(s,c,i)),r!==null&&Hv(i,c),W}function L(){let t=Ye();Qm()?LD():(t=t.parent,Ji(t,!1));let e=t;OD(e)&&PD(),RD();let n=Ut();return n.firstCreatePass&&(Qu(n,t),jm(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&ZD(e)&&Ru(n,e,ne(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&JD(e)&&Ru(n,e,ne(),e.stylesWithoutHost,!1),L}function rs(t,e,n,r){return W(t,e,n,r),L(),rs}var FT=(t,e,n,r,i,s)=>(Ku(!0),Av(r,i,GD()));function Ma(){return ne()}var xn=void 0;function jT(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var UT=["en",[["a","p"],["AM","PM"],xn],[["AM","PM"],xn,xn],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],xn,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],xn,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",xn,"{1} 'at' {0}",xn],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",jT],ql={};function yd(t){let e=VT(t),n=am(e);if(n)return n;let r=e.split("-")[0];if(n=am(r),n)return n;if(r==="en")return UT;throw new C(701,!1)}function am(t){return t in ql||(ql[t]=Pn.ng&&Pn.ng.common&&Pn.ng.common.locales&&Pn.ng.common.locales[t]),ql[t]}var zr=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(zr||{});function VT(t){return t.toLowerCase().replace(/_/g,"-")}var ha="en-US";var $T=ha;function BT(t){typeof t=="string"&&($T=t.toLowerCase().replace(/_/g,"-"))}var HT=(t,e,n)=>{};function un(t,e,n,r){let i=ne(),s=Ut(),o=Ye();return zT(s,i,i[ve],o,t,e,r),un}function WT(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[ji],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function zT(t,e,n,r,i,s,o){let a=Bu(r),l=t.firstCreatePass&&gS(t),u=e[it],d=pS(e),f=!0;if(r.type&3||o){let v=ct(r,e),w=o?o(v):v,k=d.length,X=o?de=>o(It(de[r.index])):r.index;HT(v,i,s);let G=null;if(!o&&a&&(G=WT(t,e,i,r.index)),G!==null){let de=G.__ngLastListenerFn__||G;de.__ngNextListenerFn__=s,G.__ngLastListenerFn__=s,f=!1}else{s=lm(r,e,u,s);let de=n.listen(w,i,s);d.push(s,de),l&&l.push(i,X,k,k+1)}}else s=lm(r,e,u,s);let h=r.outputs,p;if(f&&h!==null&&(p=h[i])){let v=p.length;if(v)for(let w=0;w<v;w+=2){let k=p[w],X=p[w+1],$e=e[k][X].subscribe(s),Ie=d.length;d.push(s,$e),l&&l.push(i,r.index,Ie,-(Ie+1))}}}function cm(t,e,n,r){let i=B(null);try{return mt(6,e,n),n(r)!==!1}catch(s){return Qv(t,s),!1}finally{mt(7,e,n),B(i)}}function lm(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?ln(t.index,e):e;hd(o,5);let a=cm(e,n,r,s),c=i.__ngNextListenerFn__;for(;c;)a=cm(e,n,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function De(t=1){return zD(t)}function qT(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function dn(t){let e=FD();return Hu(e,Ge+t)}function H(t,e=""){let n=ne(),r=Ut(),i=t+Ge,s=r.firstCreatePass?Da(r,i,1,e,null):r.data[i],o=GT(r,n,s,e,t);n[i]=o,Yu()&&cd(r,n,o,s),Ji(s,!1)}var GT=(t,e,n,r,i)=>(Ku(!0),bb(e[ve],r));function _d(t){return je("",t,""),_d}function je(t,e,n){let r=ne(),i=hT(r,t,e,n);return i!==Ct&&Zv(r,Hn(),i),je}function Wn(t,e,n,r,i){let s=ne(),o=pT(s,t,e,n,r,i);return o!==Ct&&Zv(s,Hn(),o),Wn}var YT=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=xm(!1,r.type),s=i.length>0?Na([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=I({token:e,providedIn:"environment",factory:()=>new e(D(Ae))});let t=e;return t})();function fn(t){Ta("NgStandalone"),t.getStandaloneInjector=e=>e.get(YT).getOrCreateStandaloneInjector(t)}function Id(t,e,n,r){return gy(ne(),zu(),t,e,n,r)}function py(t,e){let n=t[e];return n===Ct?void 0:n}function gy(t,e,n,r,i,s){let o=e+n;return Vr(t,o,i)?cy(t,o+1,s?r.call(s,i):r(i)):py(t,o+1)}function KT(t,e,n,r,i,s,o){let a=e+n;return ly(t,a,i,s)?cy(t,a+2,o?r.call(o,i,s):r(i,s)):py(t,a+2)}function qr(t,e){let n=Ut(),r,i=t+Ge;n.firstCreatePass?(r=QT(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=Ln(r.type,!0)),o,a=Se(ye);try{let c=oa(!1),l=s();return oa(c),qT(n,ne(),i,l),l}finally{Se(a)}}function QT(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function Ra(t,e,n){let r=t+Ge,i=ne(),s=Hu(i,r);return my(i,r)?gy(i,zu(),e,s.transform,n,s):s.transform(n)}function wd(t,e,n,r){let i=t+Ge,s=ne(),o=Hu(s,i);return my(s,i)?KT(s,zu(),e,o.transform,n,r,o):o.transform(n,r)}function my(t,e){return t[j].data[e].pure}function hn(t,e){return ry(t,e)}var on=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},vy=new on("18.0.1"),xa=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var yy=new S("");function Gr(t){return!!t&&typeof t.then=="function"}function Ed(t){return!!t&&typeof t.subscribe=="function"}var Oa=new S(""),_y=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=m(Oa,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Gr(o))r.push(o);else if(Ed(o)){let a=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Pa=new S("");function ZT(){eg(()=>{throw new C(600,!1)})}function JT(t){return t.isBoundToModule}var XT=10;function e0(t,e,n){try{let r=n();return Gr(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Yr=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=m(_v),this.afterRenderEffectManager=m(vd),this.zonelessEnabled=m(gd),this.externalTestViews=new Set,this.beforeRender=new we,this.afterTick=new we,this.componentTypes=[],this.components=[],this.isStable=m(ts).hasPendingTasks.pipe(E(r=>!r)),this._injector=m(Ae)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof la;if(!this._injector.get(_y).done){let h=!s&&Am(r),p=!1;throw new C(405,p)}let a;s?a=r:a=this._injector.get(Fr).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=JT(a)?void 0:this._injector.get(sn),l=i||a.selector,u=a.create(Ne.NULL,[],l,c),d=u.location.nativeElement,f=u.injector.get(yy,null);return f?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Gl(this.components,u),f?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new C(101,!1);let i=B(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this._runningTick=!1,B(i),this.afterTick.next()}}detectChangesInAttachedViews(r){let i=null;this._injector.destroyed||(i=this._injector.get(jr,null,{optional:!0}));let s=0,o=this.afterRenderEffectManager;for(;s<XT;){let a=s===0;if(r||!a){this.beforeRender.next(a);for(let{_lView:c,notifyErrorHandler:l}of this._views)t0(c,l,a,this.zonelessEnabled)}else i?.begin?.(),i?.end?.();if(s++,o.executeInternalCallbacks(),!this.allViews.some(({_lView:c})=>Vi(c))&&(o.execute(),!this.allViews.some(({_lView:c})=>Vi(c))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Gl(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Pa,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Gl(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new C(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Gl(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function t0(t,e,n,r){if(!n&&!Vi(t))return;Xv(t,e,n&&!r?0:1)}var xu=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},ka=(()=>{let e=class e{compileModuleSync(r){return new Au(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=Nm(r),o=Tv(s.declarations).reduce((a,c)=>{let l=rn(c);return l&&a.push(new Ur(l)),a},[]);return new xu(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var n0=(()=>{let e=class e{constructor(){this.zone=m(K),this.changeDetectionScheduler=m(Lr),this.applicationRef=m(Yr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Iy({ngZoneFactory:t,ignoreChangesOutsideZone:e}){return t??=()=>new K(Ey()),[{provide:K,useFactory:t},{provide:Rr,multi:!0,useFactory:()=>{let n=m(n0,{optional:!0});return()=>n.initialize()}},{provide:Rr,multi:!0,useFactory:()=>{let n=m(i0);return()=>{n.initialize()}}},{provide:_v,useFactory:r0},e===!0?{provide:iy,useValue:!0}:[]]}function r0(){let t=m(K),e=m(wt);return n=>t.runOutsideAngular(()=>e.handleError(n))}function wy(t){let e=t?.ignoreChangesOutsideZone,n=Iy({ngZoneFactory:()=>{let r=Ey(t);return r.shouldCoalesceEventChangeDetection&&Ta("NgZone_CoalesceEvent"),new K(r)},ignoreChangesOutsideZone:e});return cn([[],{provide:gd,useValue:!1},n])}function Ey(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var i0=(()=>{let e=class e{constructor(){this.subscription=new se,this.initialized=!1,this.zone=m(K),this.pendingTasks=m(ts)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{K.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{K.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var s0=(()=>{let e=class e{constructor(){this.appRef=m(Yr),this.taskService=m(ts),this.ngZone=m(K),this.zonelessEnabled=m(gd),this.disableScheduling=m(iy,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new se,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof wu||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?Xg:sy;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&K.isInAngularZone())}tick(r){if(this.runningTick||this.appRef.destroyed)return;let i=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(r)},void 0,this.schedulerTickApplyArgs)}catch(s){throw this.taskService.remove(i),s}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Xg(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(i)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function o0(){return typeof $localize<"u"&&$localize.locale||ha}var La=new S("",{providedIn:"root",factory:()=>m(La,R.Optional|R.SkipSelf)||o0()});var Cy=new S("");var Go=null;function a0(t=[],e){return Ne.create({name:e,providers:[{provide:ma,useValue:"platform"},{provide:Cy,useValue:new Set([()=>Go=null])},...t]})}function c0(t=[]){if(Go)return Go;let e=a0(t);return Go=e,ZT(),l0(e),e}function l0(t){t.get(td,null)?.forEach(n=>n())}var Kr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=u0;let t=e;return t})();function u0(t){return d0(Ye(),ne(),(t&16)===16)}function d0(t,e,n){if(ya(t)&&!n){let r=ln(t.index,e);return new $n(r,r)}else if(t.type&47){let r=e[_t];return new $n(r,e)}return null}function Dy(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=c0(r),s=[Iy({}),{provide:Lr,useExisting:s0},...n||[]],a=new da({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(K);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(wt,null),u;c.runOutsideAngular(()=>{u=c.onError.subscribe({next:h=>{l.handleError(h)}})});let d=()=>a.destroy(),f=i.get(Cy);return f.add(d),a.onDestroy(()=>{u.unsubscribe(),f.delete(d)}),e0(l,c,()=>{let h=a.get(_y);return h.runInitializers(),h.donePromise.then(()=>{let p=a.get(La,ha);BT(p||ha);let v=a.get(Yr);return e!==void 0&&v.bootstrap(e),v})})})}catch(e){return Promise.reject(e)}}function Cd(t){let e=B(null);try{return t()}finally{B(e)}}function by(t){let e=rn(t);if(!e)return null;let n=new Ur(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Ry=null;function Zr(){return Ry}function xy(t){Ry??=t}var Fa=class{};var Me=new S(""),Od=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>m(g0),providedIn:"platform"});let t=e;return t})(),Oy=new S(""),g0=(()=>{let e=class e extends Od{constructor(){super(),this._doc=m(Me),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Zr().getBaseHref(this._doc)}onPopState(r){let i=Zr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Zr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Pd(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function Sy(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function $t(t){return t&&t[0]!=="?"?"?"+t:t}var zn=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>m(kd),providedIn:"root"});let t=e;return t})(),Py=new S(""),kd=(()=>{let e=class e extends zn{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??m(Me).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Pd(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+$t(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+$t(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+$t(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(D(Od),D(Py,8))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ky=(()=>{let e=class e extends zn{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=Pd(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+$t(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+$t(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(D(Od),D(Py,8))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),Jr=(()=>{let e=class e{constructor(r){this._subject=new Ee,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=y0(Sy(Ty(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+$t(i))}normalize(r){return e.stripTrailingSlash(v0(this._basePath,Ty(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+$t(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+$t(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=$t,e.joinWithSlash=Pd,e.stripTrailingSlash=Sy,e.\u0275fac=function(i){return new(i||e)(D(zn))},e.\u0275prov=I({token:e,factory:()=>m0(),providedIn:"root"});let t=e;return t})();function m0(){return new Jr(D(zn))}function v0(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function Ty(t){return t.replace(/\/index.html$/,"")}function y0(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var Ly=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(Ly||{});var Dt={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Qr(t,e){let n=yd(t),r=n[zr.NumberSymbols][e];if(typeof r>"u"){if(e===Dt.CurrencyDecimal)return n[zr.NumberSymbols][Dt.Decimal];if(e===Dt.CurrencyGroup)return n[zr.NumberSymbols][Dt.Group]}return r}function _0(t,e){return yd(t)[zr.NumberFormats][e]}var I0=/^(\d+)?\.((\d+)(-(\d+))?)?$/,Ay=22,ja=".",is="0",w0=";",E0=",",bd="#";var C0="%";function D0(t,e,n,r,i,s,o=!1){let a="",c=!1;if(!isFinite(t))a=Qr(n,Dt.Infinity);else{let l=A0(t);o&&(l=T0(l));let u=e.minInt,d=e.minFrac,f=e.maxFrac;if(s){let X=s.match(I0);if(X===null)throw new Error(`${s} is not a valid digit info`);let G=X[1],de=X[3],$e=X[5];G!=null&&(u=Sd(G)),de!=null&&(d=Sd(de)),$e!=null?f=Sd($e):de!=null&&d>f&&(f=d)}N0(l,d,f);let h=l.digits,p=l.integerLen,v=l.exponent,w=[];for(c=h.every(X=>!X);p<u;p++)h.unshift(0);for(;p<0;p++)h.unshift(0);p>0?w=h.splice(p,h.length):(w=h,h=[0]);let k=[];for(h.length>=e.lgSize&&k.unshift(h.splice(-e.lgSize,h.length).join(""));h.length>e.gSize;)k.unshift(h.splice(-e.gSize,h.length).join(""));h.length&&k.unshift(h.join("")),a=k.join(Qr(n,r)),w.length&&(a+=Qr(n,i)+w.join("")),v&&(a+=Qr(n,Dt.Exponential)+"+"+v)}return t<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function b0(t,e,n){let r=_0(e,Ly.Percent),i=S0(r,Qr(e,Dt.MinusSign));return D0(t,i,e,Dt.Group,Dt.Decimal,n,!0).replace(new RegExp(C0,"g"),Qr(e,Dt.PercentSign))}function S0(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(w0),i=r[0],s=r[1],o=i.indexOf(ja)!==-1?i.split(ja):[i.substring(0,i.lastIndexOf(is)+1),i.substring(i.lastIndexOf(is)+1)],a=o[0],c=o[1]||"";n.posPre=a.substring(0,a.indexOf(bd));for(let u=0;u<c.length;u++){let d=c.charAt(u);d===is?n.minFrac=n.maxFrac=u+1:d===bd?n.maxFrac=u+1:n.posSuf+=d}let l=a.split(E0);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,s){let u=i.length-n.posPre.length-n.posSuf.length,d=s.indexOf(bd);n.negPre=s.substring(0,d).replace(/'/g,""),n.negSuf=s.slice(d+u).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function T0(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function A0(t){let e=Math.abs(t)+"",n=0,r,i,s,o,a;for((i=e.indexOf(ja))>-1&&(e=e.replace(ja,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===is;s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===is;)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>Ay&&(r=r.splice(0,Ay-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function N0(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen,s=Math.min(Math.max(e,i),n),o=s+t.integerLen,a=r[o];if(o>0){r.splice(Math.max(t.integerLen,o));for(let d=o;d<r.length;d++)r[d]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let d=1;d<o;d++)r[d]=0}if(a>=5)if(o-1<0){for(let d=0;d>o;d--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let c=s!==0,l=e+t.integerLen,u=r.reduceRight(function(d,f,h,p){return f=f+d,p[h]=f<10?f:f-10,c&&(p[h]===0&&h>=l?p.pop():c=!1),f>=10?1:0},0);u&&(r.unshift(u),t.integerLen++)}function Sd(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}function Fy(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Td=/\s+/,Ny=[],jy=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=Ny,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(Td):Ny}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(Td):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let s=this.stateMap.get(r);s!==void 0?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],s=r[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(Td).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(i){return new(i||e)(ye(Xi),ye(Sa))},e.\u0275dir=Qi({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var Va=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Ad,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){My("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){My("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(ye(es),ye(pd))},e.\u0275dir=Qi({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Ad=class{constructor(){this.$implicit=null,this.ngIf=null}};function My(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Te(e)}'.`)}function Uy(t,e){return new C(2100,!1)}var Nd=class{createSubscription(e,n){return Cd(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){Cd(()=>e.unsubscribe())}},Md=class{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}},M0=new Md,R0=new Nd,$a=(()=>{let e=class e{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(Gr(r))return M0;if(Ed(r))return R0;throw Uy(e,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(i){return new(i||e)(ye(Kr,16))},e.\u0275pipe=Uu({name:"async",type:e,pure:!1,standalone:!0});let t=e;return t})();var Vy=(()=>{let e=class e{constructor(r){this._locale=r}transform(r,i,s){if(!x0(r))return null;s||=this._locale;try{let o=O0(r);return b0(o,s,i)}catch(o){throw Uy(e,o.message)}}};e.\u0275fac=function(i){return new(i||e)(ye(La,16))},e.\u0275pipe=Uu({name:"percent",type:e,pure:!0,standalone:!0});let t=e;return t})();function x0(t){return!(t==null||t===""||t!==t)}function O0(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new Error(`${t} is not a number`);return t}var ss=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ki({type:e}),e.\u0275inj=Gi({});let t=e;return t})(),Ld="browser",P0="server";function k0(t){return t===Ld}function Fd(t){return t===P0}var $y=(()=>{let e=class e{};e.\u0275prov=I({token:e,providedIn:"root",factory:()=>k0(m(Et))?new Rd(m(Me),window):new xd});let t=e;return t})(),Rd=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=L0(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function L0(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var xd=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Ua=class{};var Vd=class extends Fa{constructor(){super(...arguments),this.supportsDOMEvents=!0}},$d=class t extends Vd{static makeCurrent(){xy(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=F0();return n==null?null:j0(n)}resetBaseElement(){os=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Fy(document.cookie,e)}},os=null;function F0(){return os=os||document.querySelector("base"),os?os.getAttribute("href"):null}function j0(t){return new URL(t,document.baseURI).pathname}var U0=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),Bd=new S(""),qy=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new C(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(D(Bd),D(K))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),Ba=class{constructor(e){this._doc=e}},jd="ng-app-id",Gy=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Fd(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${jd}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(jd),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(jd,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(D(Me),D(ed),D(nd,8),D(Et))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),Ud={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Wd=/%COMP%/g,Yy="%COMP%",V0=`_nghost-${Yy}`,$0=`_ngcontent-${Yy}`,B0=!0,H0=new S("",{providedIn:"root",factory:()=>B0});function W0(t){return $0.replace(Wd,t)}function z0(t){return V0.replace(Wd,t)}function Ky(t,e){return e.map(n=>n.replace(Wd,t))}var Hy=(()=>{let e=class e{constructor(r,i,s,o,a,c,l,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Fd(c),this.defaultRenderer=new as(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===yt.ShadowDom&&(i=ie(_({},i),{encapsulation:yt.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Ha?s.applyToHost(r):s instanceof cs&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(i.encapsulation){case yt.Emulated:o=new Ha(l,u,i,this.appId,d,a,c,f);break;case yt.ShadowDom:return new Hd(l,u,r,i,a,c,this.nonce,f);default:o=new cs(l,u,i,d,a,c,f);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(D(qy),D(Gy),D(ed),D(H0),D(Me),D(Et),D(K),D(nd))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),as=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Ud[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Wy(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Wy(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new C(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=Ud[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Ud[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Lt.DashCase|Lt.Important)?e.style.setProperty(n,r,i&Lt.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Lt.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Zr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function Wy(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Hd=class extends as{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=Ky(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},cs=class extends as{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?Ky(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ha=class extends cs{constructor(e,n,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,n,r,s,o,a,c,l),this.contentAttr=W0(l),this.hostAttr=z0(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},q0=(()=>{let e=class e extends Ba{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(D(Me))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),zy=["alt","control","meta","shift"],G0={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Y0={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},K0=(()=>{let e=class e extends Ba{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Zr().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),zy.forEach(u=>{let d=i.indexOf(u);d>-1&&(i.splice(d,1),a+=u+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=G0[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),zy.forEach(a=>{if(a!==s){let c=Y0[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(D(Me))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})();function Qy(t,e){return Dy(_({rootComponent:t},Q0(e)))}function Q0(t){return{appProviders:[...tA,...t?.providers??[]],platformProviders:eA}}function Z0(){$d.makeCurrent()}function J0(){return new wt}function X0(){return bv(document),document}var eA=[{provide:Et,useValue:Ld},{provide:td,useValue:Z0,multi:!0},{provide:Me,useFactory:X0,deps:[]}];var tA=[{provide:ma,useValue:"root"},{provide:wt,useFactory:J0,deps:[]},{provide:Bd,useClass:q0,multi:!0,deps:[Me,K,Et]},{provide:Bd,useClass:K0,multi:!0,deps:[Me]},Hy,Gy,qy,{provide:jr,useExisting:Hy},{provide:Ua,useClass:U0,deps:[]},[]];var Wa=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(D(Me))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var N="primary",Ds=Symbol("RouteTitle"),Kd=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ii(t){return new Kd(t)}function nA(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function rA(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!bt(t[n],e[n]))return!1;return!0}function bt(t,e){let n=t?Qd(t):void 0,r=e?Qd(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!c_(t[i],e[i]))return!1;return!0}function Qd(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function c_(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function l_(t){return t.length>0?t[t.length-1]:null}function vn(t){return Al(t)?t:Gr(t)?te(Promise.resolve(t)):b(t)}var iA={exact:d_,subset:f_},u_={exact:sA,subset:oA,ignored:()=>!0};function Jy(t,e,n){return iA[n.paths](t.root,e.root,n.matrixParams)&&u_[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function sA(t,e){return bt(t,e)}function d_(t,e,n){if(!Gn(t.segments,e.segments)||!Ga(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!d_(t.children[r],e.children[r],n))return!1;return!0}function oA(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>c_(t[n],e[n]))}function f_(t,e,n){return h_(t,e,e.segments,n)}function h_(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Gn(i,n)||e.hasChildren()||!Ga(i,n,r))}else if(t.segments.length===n.length){if(!Gn(t.segments,n)||!Ga(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!f_(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Gn(t.segments,i)||!Ga(t.segments,i,r)||!t.children[N]?!1:h_(t.children[N],e,s,r)}}function Ga(t,e,n){return e.every((r,i)=>u_[n](t[i].parameters,r.parameters))}var pn=class{constructor(e=new Y([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ii(this.queryParams),this._queryParamMap}toString(){return lA.serialize(this)}},Y=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ya(this)}},qn=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ii(this.parameters),this._parameterMap}toString(){return g_(this)}};function aA(t,e){return Gn(t,e)&&t.every((n,r)=>bt(n.parameters,e[r].parameters))}function Gn(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function cA(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===N&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==N&&(n=n.concat(e(i,r)))}),n}var bs=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>new si,providedIn:"root"});let t=e;return t})(),si=class{parse(e){let n=new Jd(e);return new pn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${ls(e.root,!0)}`,r=fA(e.queryParams),i=typeof e.fragment=="string"?`#${uA(e.fragment)}`:"";return`${n}${r}${i}`}},lA=new si;function Ya(t){return t.segments.map(e=>g_(e)).join("/")}function ls(t,e){if(!t.hasChildren())return Ya(t);if(e){let n=t.children[N]?ls(t.children[N],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==N&&r.push(`${i}:${ls(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=cA(t,(r,i)=>i===N?[ls(t.children[N],!1)]:[`${i}:${ls(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[N]!=null?`${Ya(t)}/${n[0]}`:`${Ya(t)}/(${n.join("//")})`}}function p_(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function za(t){return p_(t).replace(/%3B/gi,";")}function uA(t){return encodeURI(t)}function Zd(t){return p_(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ka(t){return decodeURIComponent(t)}function Xy(t){return Ka(t.replace(/\+/g,"%20"))}function g_(t){return`${Zd(t.path)}${dA(t.parameters)}`}function dA(t){return Object.entries(t).map(([e,n])=>`;${Zd(e)}=${Zd(n)}`).join("")}function fA(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${za(n)}=${za(i)}`).join("&"):`${za(n)}=${za(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var hA=/^[^\/()?;#]+/;function zd(t){let e=t.match(hA);return e?e[0]:""}var pA=/^[^\/()?;=#]+/;function gA(t){let e=t.match(pA);return e?e[0]:""}var mA=/^[^=?&#]+/;function vA(t){let e=t.match(mA);return e?e[0]:""}var yA=/^[^&#]+/;function _A(t){let e=t.match(yA);return e?e[0]:""}var Jd=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Y([],{}):new Y([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[N]=new Y(e,n)),r}parseSegment(){let e=zd(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new C(4009,!1);return this.capture(e),new qn(Ka(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=gA(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=zd(this.remaining);i&&(r=i,this.capture(r))}e[Ka(n)]=Ka(r)}parseQueryParam(e){let n=vA(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=_A(this.remaining);o&&(r=o,this.capture(r))}let i=Xy(n),s=Xy(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=zd(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new C(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=N);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[N]:new Y([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new C(4011,!1)}};function m_(t){return t.segments.length>0?new Y([],{[N]:t}):t}function v_(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=v_(i);if(r===N&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new Y(t.segments,e);return IA(n)}function IA(t){if(t.numberOfChildren===1&&t.children[N]){let e=t.children[N];return new Y(t.segments.concat(e.segments),e.children)}return t}function gs(t){return t instanceof pn}function wA(t,e,n=null,r=null){let i=y_(t);return __(i,e,n,r)}function y_(t){let e;function n(s){let o={};for(let c of s.children){let l=n(c);o[c.outlet]=l}let a=new Y(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=m_(r);return e??i}function __(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return qd(i,i,i,n,r);let s=EA(e);if(s.toRoot())return qd(i,i,new Y([],{}),n,r);let o=CA(s,i,t),a=o.processChildren?fs(o.segmentGroup,o.index,s.commands):w_(o.segmentGroup,o.index,s.commands);return qd(i,o.segmentGroup,a,n,r)}function Qa(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function ms(t){return typeof t=="object"&&t!=null&&t.outlets}function qd(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let o;t===e?o=n:o=I_(t,e,n);let a=m_(v_(o));return new pn(a,s,i)}function I_(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=I_(s,e,n)}),new Y(t.segments,r)}var Za=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Qa(r[0]))throw new C(4003,!1);let i=r.find(ms);if(i&&i!==l_(r))throw new C(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function EA(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Za(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Za(n,e,r)}var ti=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function CA(t,e,n){if(t.isAbsolute)return new ti(e,!0,0);if(!n)return new ti(e,!1,NaN);if(n.parent===null)return new ti(n,!0,0);let r=Qa(t.commands[0])?0:1,i=n.segments.length-1+r;return DA(n,i,t.numberOfDoubleDots)}function DA(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new C(4005,!1);i=r.segments.length}return new ti(r,!1,i-s)}function bA(t){return ms(t[0])?t[0].outlets:{[N]:t}}function w_(t,e,n){if(t??=new Y([],{}),t.segments.length===0&&t.hasChildren())return fs(t,e,n);let r=SA(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new Y(t.segments.slice(0,r.pathIndex),{});return s.children[N]=new Y(t.segments.slice(r.pathIndex),t.children),fs(s,0,i)}else return r.match&&i.length===0?new Y(t.segments,{}):r.match&&!t.hasChildren()?Xd(t,e,n):r.match?fs(t,0,i):Xd(t,e,n)}function fs(t,e,n){if(n.length===0)return new Y(t.segments,{});{let r=bA(n),i={};if(Object.keys(r).some(s=>s!==N)&&t.children[N]&&t.numberOfChildren===1&&t.children[N].segments.length===0){let s=fs(t.children[N],e,n);return new Y(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=w_(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Y(t.segments,i)}}function SA(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(ms(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!t_(c,l,o))return s;r+=2}else{if(!t_(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Xd(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(ms(s)){let c=TA(s.outlets);return new Y(r,c)}if(i===0&&Qa(n[0])){let c=t.segments[e];r.push(new qn(c.path,e_(n[0]))),i++;continue}let o=ms(s)?s.outlets[N]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Qa(a)?(r.push(new qn(o,e_(a))),i+=2):(r.push(new qn(o,{})),i++)}return new Y(r,{})}function TA(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Xd(new Y([],{}),0,r))}),e}function e_(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function t_(t,e,n){return t==n.path&&bt(e,n.parameters)}var hs="imperative",he=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(he||{}),Ze=class{constructor(e,n){this.id=e,this.url=n}},gn=class extends Ze{constructor(e,n,r="imperative",i=null){super(e,n),this.type=he.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ht=class extends Ze{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=he.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ve=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Ve||{}),Ja=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Ja||{}),Bt=class extends Ze{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=he.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},mn=class extends Ze{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=he.NavigationSkipped}},vs=class extends Ze{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=he.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Xa=class extends Ze{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=he.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ef=class extends Ze{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=he.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},tf=class extends Ze{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=he.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},nf=class extends Ze{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=he.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rf=class extends Ze{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=he.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sf=class{constructor(e){this.route=e,this.type=he.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},of=class{constructor(e){this.route=e,this.type=he.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},af=class{constructor(e){this.snapshot=e,this.type=he.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},cf=class{constructor(e){this.snapshot=e,this.type=he.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},lf=class{constructor(e){this.snapshot=e,this.type=he.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},uf=class{constructor(e){this.snapshot=e,this.type=he.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ec=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=he.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},ys=class{},oi=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};var df=class{constructor(e){this.injector=e,this.outlet=null,this.route=null,this.children=new Ss(this.injector),this.attachRef=null}},Ss=(()=>{let e=class e{constructor(r){this.parentInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new df(this.parentInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(D(Ae))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),tc=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=ff(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=ff(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=hf(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return hf(e,this._root).map(n=>n.value)}};function ff(t,e){if(t===e.value)return e;for(let n of e.children){let r=ff(t,n);if(r)return r}return null}function hf(t,e){if(t===e.value)return[e];for(let n of e.children){let r=hf(t,n);if(r.length)return r.unshift(e),r}return[]}var Ue=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function ei(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var nc=class extends tc{constructor(e,n){super(e),this.snapshot=n,Ef(this,e)}toString(){return this.snapshot.toString()}};function E_(t){let e=AA(t),n=new ge([new qn("",{})]),r=new ge({}),i=new ge({}),s=new ge({}),o=new ge(""),a=new Yn(n,r,s,o,i,N,t,e.root);return a.snapshot=e.root,new nc(new Ue(a,[]),e)}function AA(t){let e={},n={},r={},i="",s=new ni([],e,r,i,n,N,t,null,{});return new ic("",new Ue(s,[]))}var Yn=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(E(l=>l[Ds]))??b(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(E(e=>ii(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(E(e=>ii(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function rc(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:_(_({},e.params),t.params),data:_(_({},e.data),t.data),resolve:_(_(_(_({},t.data),e.data),i?.data),t._resolvedData)}:r={params:_({},t.params),data:_({},t.data),resolve:_(_({},t.data),t._resolvedData??{})},i&&D_(i)&&(r.resolve[Ds]=i.title),r}var ni=class{get title(){return this.data?.[Ds]}constructor(e,n,r,i,s,o,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ii(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ii(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},ic=class extends tc{constructor(e,n){super(n),this.url=e,Ef(this,n)}toString(){return C_(this._root)}};function Ef(t,e){e.value._routerState=t,e.children.forEach(n=>Ef(t,n))}function C_(t){let e=t.children.length>0?` { ${t.children.map(C_).join(", ")} } `:"";return`${t.value}${e}`}function Gd(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,bt(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),bt(e.params,n.params)||t.paramsSubject.next(n.params),rA(e.url,n.url)||t.urlSubject.next(n.url),bt(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function pf(t,e){let n=bt(t.params,e.params)&&aA(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||pf(t.parent,e.parent))}function D_(t){return typeof t.title=="string"||t.title===null}var Cf=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=N,this.activateEvents=new Ee,this.deactivateEvents=new Ee,this.attachEvents=new Ee,this.detachEvents=new Ee,this.parentContexts=m(Ss),this.location=m(es),this.changeDetector=m(Kr),this.inputBinder=m(cc,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new C(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new C(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new C(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new C(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new gf(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Qi({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[_a]});let t=e;return t})(),gf=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Yn?this.route:e===Ss?this.childContexts:this.parent.get(e,n)}},cc=new S(""),n_=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=Be([i.queryParams,i.params,i.data]).pipe(We(([o,a,c],l)=>(c=_(_(_({},o),a),c),l===0?b(c):Promise.resolve(c)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=by(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})();function NA(t,e,n){let r=_s(t,e._root,n?n._root:void 0);return new nc(r,e)}function _s(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=MA(t,e,n);return new Ue(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>_s(t,a)),o}}let r=RA(e.value),i=e.children.map(s=>_s(t,s));return new Ue(r,i)}}function MA(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return _s(t,r,i);return _s(t,r)})}function RA(t){return new Yn(new ge(t.url),new ge(t.params),new ge(t.queryParams),new ge(t.fragment),new ge(t.data),t.outlet,t.component,t)}var Is=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},b_="ngNavigationCancelingError";function sc(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=gs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=S_(!1,Ve.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function S_(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[b_]=!0,n.cancellationCode=e,n}function xA(t){return T_(t)&&gs(t.url)}function T_(t){return!!t&&t[b_]}var OA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=an({type:e,selectors:[["ng-component"]],standalone:!0,features:[fn],decls:1,vars:0,template:function(i,s){i&1&&rs(0,"router-outlet")},dependencies:[Cf],encapsulation:2});let t=e;return t})();function PA(t,e){return t.providers&&!t._injector&&(t._injector=Na(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Df(t){let e=t.children&&t.children.map(Df),n=e?ie(_({},t),{children:e}):_({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==N&&(n.component=OA),n}function lt(t){return t.outlet||N}function kA(t,e){let n=t.filter(r=>lt(r)===e);return n.push(...t.filter(r=>lt(r)!==e)),n}function Ts(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var LA=(t,e,n,r)=>E(i=>(new mf(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),mf=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Gd(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=ei(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=ei(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=ei(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=ei(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new uf(s.value.snapshot))}),e.children.length&&this.forwardEvent(new cf(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(Gd(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Gd(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=Ts(i.snapshot);o.attachRef=null,o.route=i,o.injector=a??o.injector,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},oc=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ri=class{constructor(e,n){this.component=e,this.route=n}};function FA(t,e,n){let r=t._root,i=e?e._root:null;return us(r,i,n,[r.value])}function jA(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ci(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!hm(t)?t:e.get(t):r}function us(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=ei(e);return t.children.forEach(o=>{UA(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>ps(a,n.getContext(o),i)),i}function UA(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=VA(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new oc(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?us(t,e,a?a.children:null,r,i):us(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ri(a.outlet.component,o))}else o&&ps(e,a,i),i.canActivateChecks.push(new oc(r)),s.component?us(t,null,a?a.children:null,r,i):us(t,null,n,r,i);return i}function VA(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Gn(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Gn(t.url,e.url)||!bt(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!pf(t,e)||!bt(t.queryParams,e.queryParams);case"paramsChange":default:return!pf(t,e)}}function ps(t,e,n){let r=ei(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?ps(o,e.children.getContext(s),n):ps(o,null,n):ps(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ri(e.outlet.component,i)):n.canDeactivateChecks.push(new ri(null,i)):n.canDeactivateChecks.push(new ri(null,i))}function As(t){return typeof t=="function"}function $A(t){return typeof t=="boolean"}function BA(t){return t&&As(t.canLoad)}function HA(t){return t&&As(t.canActivate)}function WA(t){return t&&As(t.canActivateChild)}function zA(t){return t&&As(t.canDeactivate)}function qA(t){return t&&As(t.canMatch)}function A_(t){return t instanceof Ot||t?.name==="EmptyError"}var qa=Symbol("INITIAL_VALUE");function ai(){return We(t=>Be(t.map(e=>e.pipe(Pt(1),xl(qa)))).pipe(E(e=>{for(let n of e)if(n!==!0){if(n===qa)return qa;if(n===!1||GA(n))return n}return!0}),He(e=>e!==qa),Pt(1)))}function GA(t){return gs(t)||t instanceof Is}function YA(t,e){return ae(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?b(ie(_({},n),{guardsResult:!0})):KA(o,r,i,t).pipe(ae(a=>a&&$A(a)?QA(r,s,t,e):b(a)),E(a=>ie(_({},n),{guardsResult:a})))})}function KA(t,e,n,r){return te(t).pipe(ae(i=>tN(i.component,i.route,n,e,r)),gt(i=>i!==!0,!0))}function QA(t,e,n,r){return te(e).pipe(Rn(i=>Cr(JA(i.route.parent,r),ZA(i.route,r),eN(t,i.path,n),XA(t,i.route,n))),gt(i=>i!==!0,!0))}function ZA(t,e){return t!==null&&e&&e(new lf(t)),b(!0)}function JA(t,e){return t!==null&&e&&e(new af(t)),b(!0)}function XA(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return b(!0);let i=r.map(s=>Uo(()=>{let o=Ts(e)??n,a=ci(s,o),c=HA(a)?a.canActivate(e,t):ot(o,()=>a(e,t));return vn(c).pipe(gt())}));return b(i).pipe(ai())}function eN(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>jA(o)).filter(o=>o!==null).map(o=>Uo(()=>{let a=o.guards.map(c=>{let l=Ts(o.node)??n,u=ci(c,l),d=WA(u)?u.canActivateChild(r,t):ot(l,()=>u(r,t));return vn(d).pipe(gt())});return b(a).pipe(ai())}));return b(s).pipe(ai())}function tN(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return b(!0);let o=s.map(a=>{let c=Ts(e)??i,l=ci(a,c),u=zA(l)?l.canDeactivate(t,e,n,r):ot(c,()=>l(t,e,n,r));return vn(u).pipe(gt())});return b(o).pipe(ai())}function nN(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return b(!0);let s=i.map(o=>{let a=ci(o,t),c=BA(a)?a.canLoad(e,n):ot(t,()=>a(e,n));return vn(c)});return b(s).pipe(ai(),N_(r))}function N_(t){return Il(ce(e=>{if(typeof e!="boolean")throw sc(t,e)}),E(e=>e===!0))}function rN(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return b(!0);let s=i.map(o=>{let a=ci(o,t),c=qA(a)?a.canMatch(e,n):ot(t,()=>a(e,n));return vn(c)});return b(s).pipe(ai(),N_(r))}var ws=class{constructor(e){this.segmentGroup=e||null}},Es=class extends Error{constructor(e){super(),this.urlTree=e}};function Xr(t){return wr(new ws(t))}function iN(t){return wr(new C(4e3,!1))}function sN(t){return wr(S_(!1,Ve.GuardRejected))}var vf=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return b(r);if(i.numberOfChildren>1||!i.children[N])return iN(`${e.redirectTo}`);i=i.children[N]}}applyRedirectCommands(e,n,r,i,s){if(typeof n!="string"){let a=n,{queryParams:c,fragment:l,routeConfig:u,url:d,outlet:f,params:h,data:p,title:v}=i,w=ot(s,()=>a({params:h,data:p,queryParams:c,fragment:l,routeConfig:u,url:d,outlet:f,title:v}));if(w instanceof pn)throw new Es(w);n=w}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new Es(o);return o}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new pn(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Y(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new C(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},yf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function oN(t,e,n,r,i){let s=bf(t,e,n);return s.matched?(r=PA(e,r),rN(r,e,n,i).pipe(E(o=>o===!0?s:_({},yf)))):b(s)}function bf(t,e,n){if(e.path==="**")return aN(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?_({},yf):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||nA)(n,t,e);if(!i)return _({},yf);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?_(_({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function aN(t){return{matched:!0,parameters:t.length>0?l_(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function r_(t,e,n,r){return n.length>0&&uN(t,n,r)?{segmentGroup:new Y(e,lN(r,new Y(n,t.children))),slicedSegments:[]}:n.length===0&&dN(t,n,r)?{segmentGroup:new Y(t.segments,cN(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Y(t.segments,t.children),slicedSegments:n}}function cN(t,e,n,r){let i={};for(let s of n)if(lc(t,e,s)&&!r[lt(s)]){let o=new Y([],{});i[lt(s)]=o}return _(_({},r),i)}function lN(t,e){let n={};n[N]=e;for(let r of t)if(r.path===""&&lt(r)!==N){let i=new Y([],{});n[lt(r)]=i}return n}function uN(t,e,n){return n.some(r=>lc(t,e,r)&&lt(r)!==N)}function dN(t,e,n){return n.some(r=>lc(t,e,r))}function lc(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function fN(t,e,n,r){return lt(t)!==r&&(r===N||!lc(e,n,t))?!1:bf(e,t,n).matched}function hN(t,e,n){return e.length===0&&!t.children[n]}var _f=class{};function pN(t,e,n,r,i,s,o="emptyOnly"){return new If(t,e,n,r,i,o,s).recognize()}var gN=31,If=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new vf(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new C(4002,`'${e.segmentGroup}'`)}recognize(){let e=r_(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(E(({children:n,rootSnapshot:r})=>{let i=new Ue(r,n),s=new ic("",i),o=wA(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new ni([],Object.freeze({}),Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),N,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,N,n).pipe(E(r=>({children:r,rootSnapshot:n})),Jt(r=>{if(r instanceof Es)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ws?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(E(o=>o instanceof Ue?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return te(s).pipe(Rn(o=>{let a=r.children[o],c=kA(n,o);return this.processSegmentGroup(e,c,a,o,i)}),Rl((o,a)=>(o.push(...a),o)),Xt(null),Ml(),ae(o=>{if(o===null)return Xr(r);let a=M_(o);return mN(a),b(a)}))}processSegment(e,n,r,i,s,o,a){return te(n).pipe(Rn(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,s,o,a).pipe(Jt(l=>{if(l instanceof ws)return b(null);throw l}))),gt(c=>!!c),Jt(c=>{if(A_(c))return hN(r,i,s)?b(new _f):Xr(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,s,o,a,c){return fN(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,c):Xr(i):Xr(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:f}=bf(n,i,s);if(!c)return Xr(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>gN&&(this.allowRedirects=!1));let h=new ni(s,l,Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,i_(i),lt(i),i.component??i._loadedComponent??null,i,s_(i)),p=rc(h,a,this.paramsInheritanceStrategy);h.params=Object.freeze(p.params),h.data=Object.freeze(p.data);let v=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,h,e);return this.applyRedirects.lineralizeSegments(i,v).pipe(ae(w=>this.processSegment(e,r,n,w.concat(f),o,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a=oN(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(We(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(We(({routes:l})=>{let u=r._loadedInjector??e,{parameters:d,consumedSegments:f,remainingSegments:h}=c,p=new ni(f,d,Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,i_(r),lt(r),r.component??r._loadedComponent??null,r,s_(r)),v=rc(p,o,this.paramsInheritanceStrategy);p.params=Object.freeze(v.params),p.data=Object.freeze(v.data);let{segmentGroup:w,slicedSegments:k}=r_(n,f,h,l);if(k.length===0&&w.hasChildren())return this.processChildren(u,l,w,p).pipe(E(G=>new Ue(p,G)));if(l.length===0&&k.length===0)return b(new Ue(p,[]));let X=lt(r)===s;return this.processSegment(u,l,w,k,X?N:s,!0,p).pipe(E(G=>new Ue(p,G instanceof Ue?[G]:[])))}))):Xr(n)))}getChildConfig(e,n,r){return n.children?b({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?b({routes:n._loadedRoutes,injector:n._loadedInjector}):nN(e,n,r,this.urlSerializer).pipe(ae(i=>i?this.configLoader.loadChildren(e,n).pipe(ce(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):sN(n))):b({routes:[],injector:e})}};function mN(t){t.sort((e,n)=>e.value.outlet===N?-1:n.value.outlet===N?1:e.value.outlet.localeCompare(n.value.outlet))}function vN(t){let e=t.value.routeConfig;return e&&e.path===""}function M_(t){let e=[],n=new Set;for(let r of t){if(!vN(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=M_(r.children);e.push(new Ue(r.value,i))}return e.filter(r=>!n.has(r))}function i_(t){return t.data||{}}function s_(t){return t.resolve||{}}function yN(t,e,n,r,i,s){return ae(o=>pN(t,e,n,r,o.extractedUrl,i,s).pipe(E(({state:a,tree:c})=>ie(_({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function _N(t,e){return ae(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return b(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of R_(c))o.add(l);let a=0;return te(o).pipe(Rn(c=>s.has(c)?IN(c,r,t,e):(c.data=rc(c,c.parent,t).resolve,b(void 0))),ce(()=>a++),Dr(1),ae(c=>a===o.size?b(n):Le))})}function R_(t){let e=t.children.map(n=>R_(n)).flat();return[t,...e]}function IN(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!D_(i)&&(s[Ds]=i.title),wN(s,t,e,r).pipe(E(o=>(t._resolvedData=o,t.data=rc(t,t.parent,n).resolve,null)))}function wN(t,e,n,r){let i=Qd(t);if(i.length===0)return b({});let s={};return te(i).pipe(ae(o=>EN(t[o],e,n,r).pipe(gt(),ce(a=>{if(a instanceof Is)throw sc(new si,a);s[o]=a}))),Dr(1),Nl(s),Jt(o=>A_(o)?Le:wr(o)))}function EN(t,e,n,r){let i=Ts(e)??r,s=ci(t,i),o=s.resolve?s.resolve(e,n):ot(i,()=>s(e,n));return vn(o)}function Yd(t){return We(e=>{let n=t(e);return n?te(n).pipe(E(()=>e)):b(e)})}var x_=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===N);return i}getResolvedTitleForRoute(r){return r.data[Ds]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>m(CN),providedIn:"root"});let t=e;return t})(),CN=(()=>{let e=class e extends x_{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(D(Wa))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ns=new S("",{providedIn:"root",factory:()=>({})}),Cs=new S(""),Sf=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=m(ka)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return b(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=vn(r.loadComponent()).pipe(E(O_),ce(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Oi(()=>{this.componentLoaders.delete(r)})),s=new vr(i,()=>new we).pipe(mr());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return b({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=DN(i,this.compiler,r,this.onLoadEndListener).pipe(Oi(()=>{this.childrenLoaders.delete(i)})),a=new vr(o,()=>new we).pipe(mr());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function DN(t,e,n,r){return vn(t.loadChildren()).pipe(E(O_),ae(i=>i instanceof Wi||Array.isArray(i)?b(i):te(e.compileModuleAsync(i))),E(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Cs,[],{optional:!0,self:!0}).flat()),{routes:o.map(Df),injector:s}}))}function bN(t){return t&&typeof t=="object"&&"default"in t}function O_(t){return bN(t)?t.default:t}var Tf=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>m(SN),providedIn:"root"});let t=e;return t})(),SN=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),P_=new S(""),k_=new S("");function TN(t,e,n){let r=t.get(k_),i=t.get(Me);return t.get(K).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),AN(t))),{onViewTransitionCreated:c}=r;return c&&ot(t,()=>c({transition:a,from:e,to:n})),o})}function AN(t){return new Promise(e=>{Aa(e,{injector:t})})}var NN=new S(""),Af=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new we,this.transitionAbortSubject=new we,this.configLoader=m(Sf),this.environmentInjector=m(Ae),this.urlSerializer=m(bs),this.rootContexts=m(Ss),this.location=m(Jr),this.inputBindingEnabled=m(cc,{optional:!0})!==null,this.titleStrategy=m(x_),this.options=m(Ns,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=m(Tf),this.createViewTransition=m(P_,{optional:!0}),this.navigationErrorHandler=m(NN,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>b(void 0),this.rootComponentType=null;let r=s=>this.events.next(new sf(s)),i=s=>this.events.next(new of(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(ie(_(_({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new ge({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:hs,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(He(o=>o.id!==0),E(o=>ie(_({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),We(o=>{let a=!1,c=!1;return b(o).pipe(We(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Ve.SupersededByNewNavigation),Le;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?ie(_({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&d!=="reload"){let f="";return this.events.next(new mn(l.id,this.urlSerializer.serialize(l.rawUrl),f,Ja.IgnoredSameUrlNavigation)),l.resolve(!1),Le}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return b(l).pipe(We(f=>{let h=this.transitions?.getValue();return this.events.next(new gn(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),h!==this.transitions?.getValue()?Le:Promise.resolve(f)}),yN(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),ce(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=ie(_({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let h=new Xa(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(h)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:f,extractedUrl:h,source:p,restoredState:v,extras:w}=l,k=new gn(f,this.urlSerializer.serialize(h),p,v);this.events.next(k);let X=E_(this.rootComponentType).snapshot;return this.currentTransition=o=ie(_({},l),{targetSnapshot:X,urlAfterRedirects:h,extras:ie(_({},w),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,b(o)}else{let f="";return this.events.next(new mn(l.id,this.urlSerializer.serialize(l.extractedUrl),f,Ja.IgnoredByUrlHandlingStrategy)),l.resolve(!1),Le}}),ce(l=>{let u=new ef(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),E(l=>(this.currentTransition=o=ie(_({},l),{guards:FA(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),YA(this.environmentInjector,l=>this.events.next(l)),ce(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw sc(this.urlSerializer,l.guardsResult);let u=new tf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),He(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Ve.GuardRejected),!1)),Yd(l=>{if(l.guards.canActivateChecks.length)return b(l).pipe(ce(u=>{let d=new nf(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),We(u=>{let d=!1;return b(u).pipe(_N(this.paramsInheritanceStrategy,this.environmentInjector),ce({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",Ve.NoDataFromResolver)}}))}),ce(u=>{let d=new rf(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),Yd(l=>{let u=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(ce(h=>{d.component=h}),E(()=>{})));for(let h of d.children)f.push(...u(h));return f};return Be(u(l.targetSnapshot.root)).pipe(Xt(null),Pt(1))}),Yd(()=>this.afterPreactivation()),We(()=>{let{currentSnapshot:l,targetSnapshot:u}=o,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?te(d).pipe(E(()=>o)):b(o)}),E(l=>{let u=NA(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=ie(_({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),ce(()=>{this.events.next(new ys)}),LA(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Pt(1),ce({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ht(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Ol(this.transitionAbortSubject.pipe(ce(l=>{throw l}))),Oi(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",Ve.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Jt(l=>{if(c=!0,T_(l))this.events.next(new Bt(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),xA(l)?this.events.next(new oi(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let u=new vs(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let d=ot(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(d instanceof Is){let{message:f,cancellationCode:h}=sc(this.urlSerializer,d);this.events.next(new Bt(o.id,this.urlSerializer.serialize(o.extractedUrl),f,h)),this.events.next(new oi(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(u);let f=r.errorHandler(l);o.resolve(!!f)}}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return Le}))}))}cancelNavigationTransition(r,i,s){let o=new Bt(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function MN(t){return t!==hs}var RN=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>m(xN),providedIn:"root"});let t=e;return t})(),wf=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},xN=(()=>{let e=class e extends wf{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Ju(e)))(s||e)}})(),e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),L_=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>m(ON),providedIn:"root"});let t=e;return t})(),ON=(()=>{let e=class e extends L_{constructor(){super(...arguments),this.location=m(Jr),this.urlSerializer=m(bs),this.options=m(Ns,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=m(Tf),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new pn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=E_(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof gn)this.stateMemento=this.createStateMemento();else if(r instanceof mn)this.rawUrlTree=i.initialUrl;else if(r instanceof Xa){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof ys?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Bt&&(r.code===Ve.GuardRejected||r.code===Ve.NoDataFromResolver)?this.restoreHistory(i):r instanceof vs?this.restoreHistory(i,!0):r instanceof Ht&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=_(_({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=_(_({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Ju(e)))(s||e)}})(),e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ds=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(ds||{});function F_(t,e){t.events.pipe(He(n=>n instanceof Ht||n instanceof Bt||n instanceof vs||n instanceof mn),E(n=>n instanceof Ht||n instanceof mn?ds.COMPLETE:(n instanceof Bt?n.code===Ve.Redirect||n.code===Ve.SupersededByNewNavigation:!1)?ds.REDIRECTING:ds.FAILED),He(n=>n!==ds.REDIRECTING),Pt(1)).subscribe(()=>{e()})}function PN(t){throw t}var kN={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},LN={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},St=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=m(xa),this.stateManager=m(L_),this.options=m(Ns,{optional:!0})||{},this.pendingTasks=m(ts),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=m(Af),this.urlSerializer=m(bs),this.location=m(Jr),this.urlHandlingStrategy=m(Tf),this._events=new we,this.errorHandler=this.options.errorHandler||PN,this.navigated=!1,this.routeReuseStrategy=m(RN),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=m(Cs,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!m(cc,{optional:!0}),this.eventsSubscription=new se,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Bt&&i.code!==Ve.Redirect&&i.code!==Ve.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Ht)this.navigated=!0;else if(i instanceof oi){let a=i.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),l=_({info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||MN(s.source)},a);this.scheduleNavigation(c,hs,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}jN(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),hs,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=_({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Df),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=_(_({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let h=s?s.snapshot:this.routerState.snapshot.root;f=y_(h)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),f=this.currentUrlTree.root}return __(f,r,d,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=gs(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,hs,null,i)}navigate(r,i={skipLocationChange:!1}){return FN(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=_({},kN):i===!1?s=_({},LN):s=i,gs(r))return Jy(this.currentUrlTree,r,s);let o=this.parseUrl(r);return Jy(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((f,h)=>{c=f,l=h});let d=this.pendingTasks.add();return F_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function FN(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new C(4008,!1)}function jN(t){return!(t instanceof ys)&&!(t instanceof oi)}var ac=class{};var UN=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(He(r=>r instanceof Ht),Rn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=Na(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(c,o.children??o._loadedRoutes))}return te(s).pipe(Er())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=b(null);let o=s.pipe(ae(a=>a===null?b(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return te([o,a]).pipe(Er())}else return o})}};e.\u0275fac=function(i){return new(i||e)(D(St),D(ka),D(Ae),D(ac),D(Sf))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),j_=new S(""),VN=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=m(Ae),a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof gn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Ht?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof mn&&r.code===Ja.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof ec&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>y(this,null,function*(){yield new Promise(s=>{setTimeout(()=>{s()}),Aa(()=>{s()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new ec(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){Fv()},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})();function U_(t,...e){return cn([{provide:Cs,multi:!0,useValue:t},[],{provide:Yn,useFactory:V_,deps:[St]},{provide:Pa,multi:!0,useFactory:$_},e.map(n=>n.\u0275providers)])}function V_(t){return t.routerState.root}function Ms(t,e){return{\u0275kind:t,\u0275providers:e}}function $_(){let t=m(Ne);return e=>{let n=t.get(Yr);if(e!==n.components[0])return;let r=t.get(St),i=t.get(B_);t.get(Nf)===1&&r.initialNavigation(),t.get(H_,null,R.Optional)?.setUpPreloading(),t.get(j_,null,R.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var B_=new S("",{factory:()=>new we}),Nf=new S("",{providedIn:"root",factory:()=>1});function $N(){return Ms(2,[{provide:Nf,useValue:0},{provide:Oa,multi:!0,deps:[Ne],useFactory:e=>{let n=e.get(Oy,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(St),s=e.get(B_);F_(i,()=>{r(!0)}),e.get(Af).afterPreactivation=()=>(r(!0),s.closed?b(void 0):s),i.initialNavigation()}))}}])}function BN(){return Ms(3,[{provide:Oa,multi:!0,useFactory:()=>{let e=m(St);return()=>{e.setUpLocationChangeListener()}}},{provide:Nf,useValue:2}])}var H_=new S("");function HN(t){return Ms(0,[{provide:H_,useExisting:UN},{provide:ac,useExisting:t}])}function WN(){return Ms(8,[n_,{provide:cc,useExisting:n_}])}function zN(t){let e=[{provide:P_,useValue:TN},{provide:k_,useValue:_({skipNextTransition:!!t?.skipInitialTransition},t)}];return Ms(9,e)}var o_=new S("ROUTER_FORROOT_GUARD"),qN=[Jr,{provide:bs,useClass:si},St,Ss,{provide:Yn,useFactory:V_,deps:[St]},Sf,[]],W_=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[qN,[],{provide:Cs,multi:!0,useValue:r},{provide:o_,useFactory:QN,deps:[[St,new st,new Im]]},{provide:Ns,useValue:i||{}},i?.useHash?YN():KN(),GN(),i?.preloadingStrategy?HN(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?ZN(i):[],i?.bindToComponentInputs?WN().\u0275providers:[],i?.enableViewTransitions?zN().\u0275providers:[],JN()]}}static forChild(r){return{ngModule:e,providers:[{provide:Cs,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(D(o_,8))},e.\u0275mod=Ki({type:e}),e.\u0275inj=Gi({});let t=e;return t})();function GN(){return{provide:j_,useFactory:()=>{let t=m($y),e=m(K),n=m(Ns),r=m(Af),i=m(bs);return n.scrollOffset&&t.setOffset(n.scrollOffset),new VN(i,r,t,e,n)}}}function YN(){return{provide:zn,useClass:ky}}function KN(){return{provide:zn,useClass:kd}}function QN(t){return"guarded"}function ZN(t){return[t.initialNavigation==="disabled"?BN().\u0275providers:[],t.initialNavigation==="enabledBlocking"?$N().\u0275providers:[]]}var a_=new S("");function JN(){return[{provide:a_,useFactory:$_},{provide:Pa,multi:!0,useExisting:a_}]}var Rf={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var g=function(t,e){if(!t)throw Kn(e)},Kn=function(t){return new Error("Firebase Database ("+Rf.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var q_=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},eM=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},dc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4,f=(a&15)<<2|l>>6,h=l&63;c||(h=64,o||(f=64)),r.push(n[u],n[d],n[f],n[h])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(q_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):eM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||d==null)throw new xf;let f=s<<2|a>>4;if(r.push(f),l!==64){let h=a<<4&240|l>>2;if(r.push(h),d!==64){let p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},xf=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Pf=function(t){let e=q_(t);return dc.encodeByteArray(e,!0)},Rs=function(t){return Pf(t).replace(/\./g,"")},xs=function(t){try{return dc.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function G_(t){return Y_(void 0,t)}function Y_(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!tM(n)||(t[n]=Y_(t[n],e[n]));return t}function tM(t){return t!=="__proto__"}function nM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var rM=()=>nM().__FIREBASE_DEFAULTS__,iM=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},sM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&xs(t[1]);return e&&JSON.parse(e)},kf=()=>{try{return rM()||iM()||sM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},K_=t=>{var e,n;return(n=(e=kf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Q_=t=>{let e=K_(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Lf=()=>{var t;return(t=kf())===null||t===void 0?void 0:t.config},Z_=t=>{var e;return(e=kf())===null||e===void 0?void 0:e[`_${t}`]};var yn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function J_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Rs(JSON.stringify(n)),Rs(JSON.stringify(o)),""].join(".")}function ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Os(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ut())}function X_(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function fc(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function At(){return Rf.NODE_CLIENT===!0||Rf.NODE_ADMIN===!0}function eI(){try{return typeof indexedDB=="object"}catch{return!1}}function tI(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var oM="FirebaseError",Tt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=oM,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wt.prototype.create)}},Wt=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?aM(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Tt(i,a,r)}};function aM(t,e){return t.replace(cM,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var cM=/\{\$([^}]+)}/g;function li(t){return JSON.parse(t)}function le(t){return JSON.stringify(t)}var nI=function(t){let e={},n={},r={},i="";try{let s=t.split(".");e=li(xs(s[0])||""),n=li(xs(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var rI=function(t){let e=nI(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},iI=function(t){let e=nI(t).claims;return typeof e=="object"&&e.admin===!0};function Nt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Qn(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function hc(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ps(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function ks(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(z_(s)&&z_(o)){if(!ks(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function z_(t){return t!==null&&typeof t=="object"}function Ls(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var uc=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){let f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^s&(o^a),u=1518500249):(l=s^o^a,u=1859775393):d<60?(l=s&o|a&(s|o),u=2400959708):(l=s^o^a,u=3395469782);let f=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function sI(t,e){let n=new Of(t,e);return n.subscribe.bind(n)}var Of=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");lM(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Mf),i.error===void 0&&(i.error=Mf),i.complete===void 0&&(i.complete=Mf);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function lM(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Mf(){}function pc(t,e){return`${t} failed: ${e} argument `}var oI=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,g(r<t.length,"Surrogate pair missing trail surrogate.");let o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Fs=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var PB=4*60*60*1e3;function dt(t){return t&&t._delegate?t._delegate:t}var Je=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Zn="[DEFAULT]";var gc=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new yn;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dM(e))try{this.getOrInitializeService({instanceIdentifier:Zn})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Zn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return y(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Zn){return this.instances.has(e)}getOptions(e=Zn){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:uM(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Zn){return this.component?this.component.multipleInstances?e:Zn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function uM(t){return t===Zn?void 0:t}function dM(t){return t.instantiationMode==="EAGER"}var js=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new gc(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var fM=[],Q=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(Q||{}),hM={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},pM=Q.INFO,gM={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},mM=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=gM[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},_n=class{constructor(e){this.name=e,this._logLevel=pM,this._logHandler=mM,this._userLogHandler=null,fM.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Q))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...e),this._logHandler(this,Q.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...e),this._logHandler(this,Q.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...e),this._logHandler(this,Q.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...e),this._logHandler(this,Q.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...e),this._logHandler(this,Q.ERROR,...e)}};var vM=(t,e)=>e.some(n=>t instanceof n),aI,cI;function yM(){return aI||(aI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _M(){return cI||(cI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var lI=new WeakMap,jf=new WeakMap,uI=new WeakMap,Ff=new WeakMap,Vf=new WeakMap;function IM(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Mt(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&lI.set(n,t)}).catch(()=>{}),Vf.set(e,t),e}function wM(t){if(jf.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});jf.set(t,e)}var Uf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return jf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||uI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function dI(t){Uf=t(Uf)}function EM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(mc(this),e,...n);return uI.set(r,e.sort?e.sort():[e]),Mt(r)}:_M().includes(t)?function(...e){return t.apply(mc(this),e),Mt(lI.get(this))}:function(...e){return Mt(t.apply(mc(this),e))}}function CM(t){return typeof t=="function"?EM(t):(t instanceof IDBTransaction&&wM(t),vM(t,yM())?new Proxy(t,Uf):t)}function Mt(t){if(t instanceof IDBRequest)return IM(t);if(Ff.has(t))return Ff.get(t);let e=CM(t);return e!==t&&(Ff.set(t,e),Vf.set(e,t)),e}var mc=t=>Vf.get(t);function hI(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=Mt(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Mt(o.result),c.oldVersion,c.newVersion,Mt(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var DM=["get","getKey","getAll","getAllKeys","count"],bM=["put","add","delete","clear"],$f=new Map;function fI(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($f.get(e))return $f.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=bM.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||DM.includes(n)))return;let s=function(o,...a){return y(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return $f.set(e,s),s}dI(t=>ie(_({},t),{get:(e,n,r)=>fI(e,n)||t.get(e,n,r),has:(e,n)=>!!fI(e,n)||t.has(e,n)}));var Hf=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(SM(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function SM(t){let e=t.getComponent();return e?.type==="VERSION"}var Wf="@firebase/app",pI="0.10.5";var Jn=new _n("@firebase/app"),TM="@firebase/app-compat",AM="@firebase/analytics-compat",NM="@firebase/analytics",MM="@firebase/app-check-compat",RM="@firebase/app-check",xM="@firebase/auth",OM="@firebase/auth-compat",PM="@firebase/database",kM="@firebase/database-compat",LM="@firebase/functions",FM="@firebase/functions-compat",jM="@firebase/installations",UM="@firebase/installations-compat",VM="@firebase/messaging",$M="@firebase/messaging-compat",BM="@firebase/performance",HM="@firebase/performance-compat",WM="@firebase/remote-config",zM="@firebase/remote-config-compat",qM="@firebase/storage",GM="@firebase/storage-compat",YM="@firebase/firestore",KM="@firebase/vertexai-preview",QM="@firebase/firestore-compat",ZM="firebase",JM="10.12.2";var zf="[DEFAULT]",XM={[Wf]:"fire-core",[TM]:"fire-core-compat",[NM]:"fire-analytics",[AM]:"fire-analytics-compat",[RM]:"fire-app-check",[MM]:"fire-app-check-compat",[xM]:"fire-auth",[OM]:"fire-auth-compat",[PM]:"fire-rtdb",[kM]:"fire-rtdb-compat",[LM]:"fire-fn",[FM]:"fire-fn-compat",[jM]:"fire-iid",[UM]:"fire-iid-compat",[VM]:"fire-fcm",[$M]:"fire-fcm-compat",[BM]:"fire-perf",[HM]:"fire-perf-compat",[WM]:"fire-rc",[zM]:"fire-rc-compat",[qM]:"fire-gcs",[GM]:"fire-gcs-compat",[YM]:"fire-fst",[QM]:"fire-fst-compat",[KM]:"fire-vertex","fire-js":"fire-js",[ZM]:"fire-js-all"};var Us=new Map,eR=new Map,qf=new Map;function gI(t,e){try{t.container.addComponent(e)}catch(n){Jn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function wn(t){let e=t.name;if(qf.has(e))return Jn.debug(`There were multiple attempts to register component ${e}.`),!1;qf.set(e,t);for(let n of Us.values())gI(n,t);for(let n of eR.values())gI(n,t);return!0}function Qf(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ui(t){return t.settings!==void 0}var tR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},In=new Wt("app","Firebase",tR);var Gf=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Je("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw In.create("app-deleted",{appName:this._name})}};var di=JM;function Zf(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:zf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw In.create("bad-app-name",{appName:String(i)});if(n||(n=Lf()),!n)throw In.create("no-options");let s=Us.get(i);if(s){if(ks(n,s.options)&&ks(r,s.config))return s;throw In.create("duplicate-app",{appName:i})}let o=new js(i);for(let c of qf.values())o.addComponent(c);let a=new Gf(n,r,o);return Us.set(i,a),a}function $s(t=zf){let e=Us.get(t);if(!e&&t===zf&&Lf())return Zf();if(!e)throw In.create("no-app",{appName:t});return e}function vc(){return Array.from(Us.values())}function pe(t,e,n){var r;let i=(r=XM[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Jn.warn(a.join(" "));return}wn(new Je(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var nR="firebase-heartbeat-database",rR=1,Vs="firebase-heartbeat-store",Bf=null;function _I(){return Bf||(Bf=hI(nR,rR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Vs)}catch(n){console.warn(n)}}}}).catch(t=>{throw In.create("idb-open",{originalErrorMessage:t.message})})),Bf}function iR(t){return y(this,null,function*(){try{let n=(yield _I()).transaction(Vs),r=yield n.objectStore(Vs).get(II(t));return yield n.done,r}catch(e){if(e instanceof Tt)Jn.warn(e.message);else{let n=In.create("idb-get",{originalErrorMessage:e?.message});Jn.warn(n.message)}}})}function mI(t,e){return y(this,null,function*(){try{let r=(yield _I()).transaction(Vs,"readwrite");yield r.objectStore(Vs).put(e,II(t)),yield r.done}catch(n){if(n instanceof Tt)Jn.warn(n.message);else{let r=In.create("idb-set",{originalErrorMessage:n?.message});Jn.warn(r.message)}}})}function II(t){return`${t.name}!${t.options.appId}`}var sR=1024,oR=30*24*60*60*1e3,Yf=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Kf(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return y(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=vI();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=oR}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return y(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=vI(),{heartbeatsToSend:r,unsentEntries:i}=aR(this._heartbeatsCache.heartbeats),s=Rs(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function vI(){return new Date().toISOString().substring(0,10)}function aR(t,e=sR){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),yI(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),yI(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Kf=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return y(this,null,function*(){return eI()?tI().then(()=>!0).catch(()=>!1):!1})}read(){return y(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield iR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return y(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return mI(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return y(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return mI(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function yI(t){return Rs(JSON.stringify({version:2,heartbeats:t})).length}function cR(t){wn(new Je("platform-logger",e=>new Hf(e),"PRIVATE")),wn(new Je("heartbeat",e=>new Yf(e),"PRIVATE")),pe(Wf,pI,t),pe(Wf,pI,"esm2017"),pe("fire-js","")}cR("");var lR="firebase",uR="10.12.2";pe(lR,uR,"app");var hi=new on("ANGULARFIRE2_VERSION");function Xf(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Hs=(t,e)=>{let n=e?[e]:vc(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Bs=class{constructor(){return Hs(dR)}},dR="app-check";function fi(){}var yc=class{zone;delegate;constructor(e,n=Sl){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Jf=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",fi,{},fi,fi)),n.pipe(ce({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Ws=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new yc(Zone.current)),this.insideAngular=n.run(()=>new yc(Zone.current,bl)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(D(K))};static \u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function _c(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function fR(t){return _c().ngZone.runOutsideAngular(()=>t())}function Xn(t){return _c().ngZone.run(()=>t())}function hR(t){return pR(_c())(t)}function pR(t){return function(n){return n=n.lift(new Jf(t.ngZone)),n.pipe(Zt(t.outsideAngular),Qt(t.insideAngular))}}var gR=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Xn(()=>t.apply(void 0,r))},En=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=Xn(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",fi,{},fi,fi))),r[s]=gR(r[s],n));let i=fR(()=>t.apply(this,r));if(!e)if(i instanceof U){let s=_c();return i.pipe(Zt(s.outsideAngular),Qt(s.insideAngular))}else return Xn(()=>i);return i instanceof U?i.pipe(hR):i instanceof Promise?Xn(()=>new Promise((s,o)=>i.then(a=>Xn(()=>s(a)),a=>Xn(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Xn(()=>i)};var er=class{constructor(e){return e}},zs=class{constructor(){return vc()}};function mR(t){return t&&t.length===1?t[0]:new er($s())}var eh=new S("angularfire2._apps"),vR={provide:er,useFactory:mR,deps:[[new st,eh]]},yR={provide:zs,deps:[[new st,eh]]};function _R(t){return(e,n)=>{let r=n.get(Et);pe("angularfire",hi.full,"core"),pe("angularfire",hi.full,"app"),pe("angular",vy.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new er(i)}}function wI(t,...e){return cn([vR,yR,{provide:eh,useFactory:_R(t),multi:!0,deps:[K,Ne,Ws,...e]}])}var EI=En(Zf,!0);function MI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var RI=MI,xI=new Wt("auth","Firebase",MI());var Cc=new _n("@firebase/auth");function IR(t,...e){Cc.logLevel<=Q.WARN&&Cc.warn(`Auth (${di}): ${t}`,...e)}function wc(t,...e){Cc.logLevel<=Q.ERROR&&Cc.error(`Auth (${di}): ${t}`,...e)}function CI(t,...e){throw fh(t,...e)}function dh(t,...e){return fh(t,...e)}function OI(t,e,n){let r=Object.assign(Object.assign({},RI()),{[e]:n});return new Wt("auth","Firebase",r).create(e,{appName:t.name})}function Ec(t){return OI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fh(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return xI.create(t,...e)}function z(t,e,...n){if(!t)throw fh(e,...n)}function qs(t){let e="INTERNAL ASSERTION FAILED: "+t;throw wc(e),new Error(e)}function Dc(t,e){t||qs(e)}function wR(){return DI()==="http:"||DI()==="https:"}function DI(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function ER(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wR()||X_()||"connection"in navigator)?navigator.onLine:!0}function CR(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var nr=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Dc(n>e,"Short delay should be less than long delay!"),this.isMobile=Os()||fc()}get(){return ER()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function DR(t,e){Dc(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var bc=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var bR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var SR=new nr(3e4,6e4);function PI(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Nc(s,o,a,c){return y(this,arguments,function*(t,e,n,r,i={}){return kI(t,i,()=>y(this,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let d=Ls(Object.assign({key:t.config.apiKey},u)).slice(1),f=yield t._getAdditionalHeaders();return f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode),bc.fetch()(LI(t,t.config.apiHost,n,d),Object.assign({method:e,headers:f,referrerPolicy:"no-referrer"},l))}))})}function kI(t,e,n){return y(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},bR),e);try{let i=new rh(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Ic(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ic(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Ic(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Ic(t,"user-disabled",o);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw OI(t,u,l);CI(t,u)}}catch(i){if(i instanceof Tt)throw i;CI(t,"network-request-failed",{message:String(i)})}})}function LI(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?DR(t.config,i):`${t.config.apiScheme}://${i}`}var rh=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(dh(this.auth,"network-request-failed")),SR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Ic(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=dh(t,e,r);return i.customData._tokenResponse=n,i}function TR(t,e){return y(this,null,function*(){return Nc(t,"POST","/v1/accounts:delete",e)})}function FI(t,e){return y(this,null,function*(){return Nc(t,"POST","/v1/accounts:lookup",e)})}function Gs(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function hh(t,e=!1){return y(this,null,function*(){let n=dt(t),r=yield n.getIdToken(e),i=jI(r);z(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Gs(th(i.auth_time)),issuedAtTime:Gs(th(i.iat)),expirationTime:Gs(th(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function th(t){return Number(t)*1e3}function jI(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return wc("JWT malformed, contained fewer than 3 sections"),null;try{let i=xs(n);return i?JSON.parse(i):(wc("Failed to decode base64 JWT payload"),null)}catch(i){return wc("Caught error parsing JWT payload as JSON",i?.toString()),null}}function bI(t){let e=jI(t);return z(e,"internal-error"),z(typeof e.exp<"u","internal-error"),z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function ih(t,e,n=!1){return y(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Tt&&AR(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function AR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var sh=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>y(this,null,function*(){yield this.iteration()}),n)}iteration(){return y(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ks=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gs(this.lastLoginAt),this.creationTime=Gs(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Sc(t){return y(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield ih(t,FI(n,{idToken:r}));z(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?UI(s.providerUserInfo):[],a=NR(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,u=c?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ks(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)})}function ph(t){return y(this,null,function*(){let e=dt(t);yield Sc(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function NR(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function UI(t){return t.map(e=>{var{providerId:n}=e,r=Tl(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function MR(t,e){return y(this,null,function*(){let n=yield kI(t,{},()=>y(this,null,function*(){let r=Ls({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=LI(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",bc.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function RR(t,e){return y(this,null,function*(){return Nc(t,"POST","/v2/accounts:revokeToken",PI(t,e))})}var Ys=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){z(e.idToken,"internal-error"),z(typeof e.idToken<"u","internal-error"),z(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):bI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){z(e.length!==0,"internal-error");let n=bI(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return y(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return y(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield MR(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(z(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(z(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(z(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return qs("not implemented")}};function Cn(t,e){z(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Qs=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Tl(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ks(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return y(this,null,function*(){let n=yield ih(this,this.stsTokenManager.getToken(this.auth,e));return z(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return hh(this,e)}reload(){return ph(this)}_assign(e){this!==e&&(z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return y(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Sc(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return y(this,null,function*(){if(ui(this.auth.app))return Promise.reject(Ec(this.auth));let e=yield this.getIdToken();return yield ih(this,TR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,l,u;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,k=(l=n.createdAt)!==null&&l!==void 0?l:void 0,X=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:G,emailVerified:de,isAnonymous:$e,providerData:Ie,stsTokenManager:xt}=n;z(G&&xt,e,"internal-error");let Ni=Ys.fromJSON(this.name,xt);z(typeof G=="string",e,"internal-error"),Cn(d,e.name),Cn(f,e.name),z(typeof de=="boolean",e,"internal-error"),z(typeof $e=="boolean",e,"internal-error"),Cn(h,e.name),Cn(p,e.name),Cn(v,e.name),Cn(w,e.name),Cn(k,e.name),Cn(X,e.name);let Mi=new t({uid:G,auth:e,email:f,emailVerified:de,displayName:d,isAnonymous:$e,photoURL:p,phoneNumber:h,tenantId:v,stsTokenManager:Ni,createdAt:k,lastLoginAt:X});return Ie&&Array.isArray(Ie)&&(Mi.providerData=Ie.map(ul=>Object.assign({},ul))),w&&(Mi._redirectEventId=w),Mi}static _fromIdTokenResponse(e,n,r=!1){return y(this,null,function*(){let i=new Ys;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Sc(s),s})}static _fromGetAccountInfoResponse(e,n,r){return y(this,null,function*(){let i=n.users[0];z(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?UI(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Ys;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ks(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var SI=new Map;function tr(t){Dc(t instanceof Function,"Expected a class definition");let e=SI.get(t);return e?(Dc(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,SI.set(t,e),e)}var xR=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return y(this,null,function*(){return!0})}_set(n,r){return y(this,null,function*(){this.storage[n]=r})}_get(n){return y(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return y(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),oh=xR;function nh(t,e,n){return`firebase:${t}:${e}:${n}`}var Tc=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=nh(this.userKey,i.apiKey,s),this.fullPersistenceKey=nh("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return y(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Qs._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return y(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return y(this,null,function*(){if(!n.length)return new t(tr(oh),e,r);let i=(yield Promise.all(n.map(l=>y(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||tr(oh),o=nh(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let u=yield l._get(o);if(u){let d=Qs._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>y(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function TI(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(OR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jR(e))return"Blackberry";if(UR(e))return"Webos";if(PR(e))return"Safari";if((e.includes("chrome/")||kR(e))&&!e.includes("edge/"))return"Chrome";if(FR(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function OR(t=ut()){return/firefox\//i.test(t)}function PR(t=ut()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kR(t=ut()){return/crios\//i.test(t)}function LR(t=ut()){return/iemobile/i.test(t)}function FR(t=ut()){return/android/i.test(t)}function jR(t=ut()){return/blackberry/i.test(t)}function UR(t=ut()){return/webos/i.test(t)}function VI(t,e=[]){let n;switch(t){case"Browser":n=TI(ut());break;case"Worker":n=`${TI(ut())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${di}/${r}`}var ah=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return y(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function VR(n){return y(this,arguments,function*(t,e={}){return Nc(t,"GET","/v2/passwordPolicy",PI(t,e))})}var $R=6,ch=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:$R,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var lh=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ac(this),this.idTokenSubscription=new Ac(this),this.beforeStateQueue=new ah(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=tr(n)),this._initializationPromise=this.queue(()=>y(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Tc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return y(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return y(this,null,function*(){try{let n=yield FI(this,{idToken:e}),r=yield Qs._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return y(this,null,function*(){var n;if(ui(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return z(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return y(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return y(this,null,function*(){try{yield Sc(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=CR()}_delete(){return y(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return y(this,null,function*(){if(ui(this.app))return Promise.reject(Ec(this));let n=e?dt(e):null;return n&&z(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return y(this,null,function*(){if(!this._deleted)return e&&z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>y(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return y(this,null,function*(){return ui(this.app)?Promise.reject(Ec(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return ui(this.app)?Promise.reject(Ec(this)):this.queue(()=>y(this,null,function*(){yield this.assertedPersistence.setPersistence(tr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return y(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return y(this,null,function*(){let e=yield VR(this),n=new ch(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Wt("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return y(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield RR(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return y(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return y(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&tr(e)||this._popupRedirectResolver;z(n,this,"argument-error"),this.redirectPersistenceManager=yield Tc.create(this,[tr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return y(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>y(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return y(this,null,function*(){if(e===this.currentUser)return this.queue(()=>y(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(z(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return y(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=VI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return y(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return y(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&IR(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function BR(t){return dt(t)}var Ac=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=sI(n=>this.observer=n)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var HR={loadJS(){return y(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function WR(t){HR=t}function zR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function qR(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(tr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var MH=zR("rcb"),RH=new nr(3e4,6e4);var xH=new nr(2e3,1e4);var OH=10*60*1e3;var PH=new nr(3e4,6e4);var kH=new nr(5e3,15e3);var LH=encodeURIComponent("fac");var AI="@firebase/auth",NI="1.7.4";var uh=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return y(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function GR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function YR(t){wn(new Je("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;z(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:VI(t)},l=new lh(r,i,s,c);return qR(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),wn(new Je("auth-internal",e=>{let n=BR(e.getProvider("auth").getImmediate());return(r=>new uh(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),pe(AI,NI,GR(t)),pe(AI,NI,"esm2017")}var KR=5*60,FH=Z_("authIdTokenMaxAge")||KR;function QR(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}WR({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=dh("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",QR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});YR("Browser");var Kx="auth";var Mc=class{constructor(){return Hs(Kx)}};var $I="@firebase/database",BI="1.0.5";var _p="";function Qx(t){_p=t}var Eh=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),le(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:li(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var Ch=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Nt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var ww=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Eh(e)}}catch{}return new Ch},ir=ww("localStorage"),Dh=ww("sessionStorage");var mi=new _n("@firebase/database"),Zx=function(){let t=1;return function(){return t++}}(),Ew=function(t){let e=oI(t),n=new uc;n.update(e);let r=n.digest();return dc.encodeByteArray(r)},po=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=po.apply(null,r):typeof r=="object"?e+=le(r):e+=r,e+=" "}return e},or=null,HI=!0,Jx=function(t,e){g(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(mi.logLevel=Q.VERBOSE,or=mi.log.bind(mi),e&&Dh.set("logging_enabled",!0)):typeof t=="function"?or=t:(or=null,Dh.remove("logging_enabled"))},_e=function(...t){if(HI===!0&&(HI=!1,or===null&&Dh.get("logging_enabled")===!0&&Jx(!0)),or){let e=po.apply(null,t);or(e)}},go=function(t){return function(...e){_e(t,...e)}},bh=function(...t){let e="FIREBASE INTERNAL ERROR: "+po(...t);mi.error(e)},zt=function(...t){let e=`FIREBASE FATAL ERROR: ${po(...t)}`;throw mi.error(e),new Error(e)},xe=function(...t){let e="FIREBASE WARNING: "+po(...t);mi.warn(e)},Xx=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&xe("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Cw=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},eO=function(t){if(At()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},_i="[MIN_NAME]",ar="[MAX_NAME]",Si=function(t,e){if(t===e)return 0;if(t===_i||e===ar)return-1;if(e===_i||t===ar)return 1;{let n=WI(t),r=WI(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},tO=function(t,e){return t===e?0:t<e?-1:1},Zs=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+le(e))},Ip=function(t){if(typeof t!="object"||t===null)return le(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=le(e[r]),n+=":",n+=Ip(t[e[r]]);return n+="}",n},Dw=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Oe(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var bw=function(t){g(!Cw(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},nO=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},rO=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function iO(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var sO=new RegExp("^-?(0*)\\d{1,10}$"),oO=-2147483648,aO=2147483647,WI=function(t){if(sO.test(t)){let e=Number(t);if(e>=oO&&e<=aO)return e}return null},Ti=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw xe("Exception was thrown by user callback.",n),e},Math.floor(0))}},cO=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},no=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var Sh=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){xe(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Th=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(_e("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',xe(e)}},ro=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),xc="5",Sw="v",Tw="s",Aw="r",Nw="f",Mw=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Rw="ls",xw="p",Ah="ac",Ow="websocket",Pw="long_polling";var Oc=class{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ir.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ir.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function lO(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function kw(t,e,n){g(typeof e=="string","typeof type must == string"),g(typeof n=="object","typeof params must == object");let r;if(e===Ow)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Pw)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);lO(t)&&(n.ns=t.namespace);let i=[];return Oe(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var Nh=class{constructor(){this.counters_={}}incrementCounter(e,n=1){Nt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return G_(this.counters_)}};var gh={},mh={};function wp(t){let e=t.toString();return gh[e]||(gh[e]=new Nh),gh[e]}function uO(t,e){let n=t.toString();return mh[n]||(mh[n]=e()),mh[n]}var Mh=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ti(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var zI="start",dO="close",fO="pLPCommand",hO="pRTLPCB",Lw="id",Fw="pw",jw="ser",pO="cb",gO="seg",mO="ts",vO="d",yO="dframe",Uw=1870,Vw=30,_O=Uw-Vw,IO=25e3,wO=3e4,Rh=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=go(e),this.stats_=wp(n),this.urlFn=c=>(this.appCheckToken&&(c[Ah]=this.appCheckToken),kw(n,Pw,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Mh(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(wO)),eO(()=>{if(this.isClosed_)return;this.scriptTagHolder=new xh((...s)=>{let[o,a,c,l,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===zI)this.id=a,this.password=c;else if(o===dO)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[zI]="t",r[jw]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[pO]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Sw]=xc,this.transportSessionId&&(r[Tw]=this.transportSessionId),this.lastSessionId&&(r[Rw]=this.lastSessionId),this.applicationId&&(r[xw]=this.applicationId),this.appCheckToken&&(r[Ah]=this.appCheckToken),typeof location<"u"&&location.hostname&&Mw.test(location.hostname)&&(r[Aw]=Nw);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return At()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!nO()&&!rO()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=le(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=Pf(n),i=Dw(r,_O);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(At())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[yO]="t",r[Lw]=e,r[Fw]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=le(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},xh=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,At())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=Zx(),window[fO+this.uniqueCallbackIdentifier]=e,window[hO+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){_e("frame writing exception"),a.stack&&_e(a.stack),_e(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||_e("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[Lw]=this.myID,e[Fw]=this.myPW,e[jw]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Vw+r.length<=Uw;){let o=this.pendingSegs.shift();r=r+"&"+gO+i+"="+o.seg+"&"+mO+i+"="+o.ts+"&"+vO+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(IO)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){At()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{_e("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var EO=16384,CO=45e3,Pc=null;typeof MozWebSocket<"u"?Pc=MozWebSocket:typeof WebSocket<"u"&&(Pc=WebSocket);var Js=(()=>{class t{constructor(n,r,i,s,o,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=go(this.connId),this.stats_=wp(r),this.connURL=t.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[Sw]=xc,!At()&&typeof location<"u"&&location.hostname&&Mw.test(location.hostname)&&(a[Aw]=Nw),r&&(a[Tw]=r),i&&(a[Rw]=i),s&&(a[Ah]=s),o&&(a[xw]=o),kw(n,Ow,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ir.set("previous_websocket_failure",!0);try{let i;if(At()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${xc}/${_p}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Pc(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&Pc!==null&&!t.forceDisallow_}static previouslyFailed(){return ir.isInMemoryStorage||ir.get("previous_websocket_failure")===!0}markConnectionHealthy(){ir.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=li(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(g(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=le(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=Dw(r,EO);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(CO))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),DO=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[Rh,Js]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=Js&&Js.isAvailable(),i=r&&!Js.previouslyFailed();if(n.webSocketOnly&&(r||xe("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Js];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),bO=6e4,SO=5e3,TO=10*1024,AO=100*1024,vh="t",qI="d",NO="s",GI="r",MO="e",YI="o",KI="a",QI="n",ZI="p",RO="h",Oh=class{constructor(e,n,r,i,s,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=go("c:"+this.id+":"),this.transportManager_=new DO(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=no(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>AO?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>TO?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(vh in e){let n=e[vh];n===KI?this.upgradeIfSecondaryHealthy_():n===GI?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===YI&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=Zs("t",e),r=Zs("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:ZI,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:KI,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:QI,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=Zs("t",e),r=Zs("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=Zs(vh,e);if(qI in e){let r=e[qI];if(n===RO){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===QI){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===NO?this.onConnectionShutdown_(r):n===GI?this.onReset_(r):n===MO?bh("Server Error: "+r):n===YI?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):bh("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),xc!==r&&xe("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),no(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(bO))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):no(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(SO))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:ZI,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ir.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var kc=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var Lc=class{constructor(e){this.allowedEvents_=e,this.listeners_={},g(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){g(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var Fc=class t extends Lc{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Os()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return g(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var JI=32,XI=768,Z=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function q(){return new Z("")}function O(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function bn(t){return t.pieces_.length-t.pieceNum_}function ee(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Z(t.pieces_,e)}function $w(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function xO(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Bw(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Hw(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Z(e,0)}function ue(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Z)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Z(n,0)}function F(t){return t.pieceNum_>=t.pieces_.length}function Re(t,e){let n=O(t),r=O(e);if(n===null)return e;if(n===r)return Re(ee(t),ee(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Ep(t,e){if(bn(t)!==bn(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function ht(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(bn(t)>bn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var Ph=class{constructor(e,n){this.errorPrefix_=n,this.parts_=Bw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Fs(this.parts_[r]);Ww(this)}};function OO(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Fs(e),Ww(t)}function PO(t){let e=t.parts_.pop();t.byteLength_-=Fs(e),t.parts_.length>0&&(t.byteLength_-=1)}function Ww(t){if(t.byteLength_>XI)throw new Error(t.errorPrefix_+"has a key path longer than "+XI+" bytes ("+t.byteLength_+").");if(t.parts_.length>JI)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+JI+") or object contains a cycle "+rr(t))}function rr(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var kh=class t extends Lc{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return g(e==="visible","Unknown event type: "+e),[this.visible_]}};var Xs=1e3,kO=60*5*1e3,ew=30*1e3,LO=1.3,FO=3e4,jO="server_kill",tw=3,Cp=(()=>{class t extends kc{constructor(n,r,i,s,o,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=go("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Xs,this.maxReconnectDelay_=kO,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!At())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");kh.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Fc.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(le(o)),g(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new yn,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),g(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),g(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,u=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&Nt(n,"w")){let i=Qn(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();xe(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||iI(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ew)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=rI(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),g(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+le(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):bh("Unrecognized action received from server: "+le(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){g(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Xs,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Xs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>FO&&(this.reconnectDelay_=Xs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*LO)}this.onConnectStatus_(!1)}establishConnection_(){return y(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(f){g(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,h]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?_e("getToken() completed but was canceled"):(_e("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,c=new Oh(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,p=>{xe(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(jO)},o))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&xe(f),l())}}})}interrupt(n){_e("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){_e("Resuming connection for reason: "+n),delete this.interruptReasons_[n],hc(this.interruptReasons_)&&(this.reconnectDelay_=Xs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>Ip(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new Z(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){_e("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=tw&&(this.reconnectDelay_=ew,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){_e("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=tw&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";At()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+_p.replace(/\./g,"-")]=1,Os()?n["framework.cordova"]=1:fc()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=Fc.getInstance().currentlyOnline();return hc(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),P=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var Ii=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new P(_i,e),i=new P(_i,n);return this.compare(r,i)!==0}minPost(){return P.MIN}};var Rc,jc=class extends Ii{static get __EMPTY_NODE(){return Rc}static set __EMPTY_NODE(e){Rc=e}compare(e,n){return Si(e.name,n.name)}isDefinedOn(e){throw Kn("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return P.MIN}maxPost(){return new P(ar,Rc)}makePost(e,n){return g(typeof e=="string","KeyIndex indexValue must always be a string."),new P(e,Rc)}toString(){return".key"}},vi=new jc;var gi=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},ft=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??Xe.EMPTY_NODE,this.right=o??Xe.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Xe.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return Xe.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),Lh=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new ft(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Xe=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ft.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ft.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new gi(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new gi(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new gi(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new gi(this.root_,null,this.comparator_,!0,e)}};Xe.EMPTY_NODE=new Lh;function UO(t,e){return Si(t.name,e.name)}function Dp(t,e){return Si(t,e)}var Fh;function VO(t){Fh=t}var zw=function(t){return typeof t=="number"?"number:"+bw(t):"string:"+t},qw=function(t){if(t.isLeafNode()){let e=t.val();g(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Nt(e,".sv"),"Priority must be a string or number.")}else g(t===Fh||t.isEmpty(),"priority of unexpected type.");g(t===Fh||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var nw,wi=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,g(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),qw(this.priorityNode_)}static set __childrenNodeConstructor(n){nw=n}static get __childrenNodeConstructor(){return nw}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return F(n)?this:O(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=O(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(g(i!==".priority"||bn(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(ee(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+zw(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=bw(this.value_):n+=this.value_,this.lazyHash_=Ew(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(g(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return g(s>=0,"Unknown leaf type: "+r),g(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),Gw,Yw;function $O(t){Gw=t}function BO(t){Yw=t}var jh=class extends Ii{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Si(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return P.MIN}maxPost(){return new P(ar,new wi("[PRIORITY-POST]",Yw))}makePost(e,n){let r=Gw(e);return new P(n,new wi("[PRIORITY-POST]",r))}toString(){return".priority"}},oe=new jh;var HO=Math.log(2),Uh=class{constructor(e){let n=s=>parseInt(Math.log(s)/HO,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Uc=function(t,e,n,r){t.sort(e);let i=function(c,l){let u=l-c,d,f;if(u===0)return null;if(u===1)return d=t[c],f=n?n(d):d,new ft(f,d.node,ft.BLACK,null,null);{let h=parseInt(u/2,10)+c,p=i(c,h),v=i(h+1,l);return d=t[h],f=n?n(d):d,new ft(f,d.node,ft.BLACK,p,v)}},s=function(c){let l=null,u=null,d=t.length,f=function(p,v){let w=d-p,k=d;d-=p;let X=i(w+1,k),G=t[w],de=n?n(G):G;h(new ft(de,G.node,v,null,X))},h=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){let v=c.nextBitIsOne(),w=Math.pow(2,c.count-(p+1));v?f(w,ft.BLACK):(f(w,ft.BLACK),f(w,ft.RED))}return u},o=new Uh(t.length),a=s(o);return new Xe(r||e,a)};var yh,pi={},Ei=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return g(pi&&oe,"ChildrenNode.ts has not been loaded"),yh=yh||new t({".priority":pi},{".priority":oe}),yh}get(e){let n=Qn(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Xe?n:null}hasIndex(e){return Nt(this.indexSet_,e.toString())}addIndex(e,n){g(e!==vi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(P.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Uc(r,e.getCompare()):a=pi;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let u=Object.assign({},this.indexes_);return u[c]=a,new t(u,l)}addToIndexes(e,n){let r=Ps(this.indexes_,(i,s)=>{let o=Qn(this.indexSet_,s);if(g(o,"Missing index implementation for "+s),i===pi)if(o.isDefinedOn(e.node)){let a=[],c=n.getIterator(P.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),Uc(a,o.getCompare())}else return pi;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new P(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=Ps(this.indexes_,i=>{if(i===pi)return i;{let s=n.get(e.name);return s?i.remove(new P(e.name,s)):i}});return new t(r,this.indexSet_)}};var eo,M=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&qw(this.priorityNode_),this.children_.isEmpty()&&g(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return eo||(eo=new t(new Xe(Dp),null,Ei.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||eo}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?eo:r}}getChild(n){let r=O(n);return r===null?this:this.getImmediateChild(r).getChild(ee(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(g(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new P(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?eo:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=O(n);if(i===null)return r;{g(O(n)!==".priority"||bn(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(ee(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(oe,(a,c)=>{r[a]=c.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+zw(this.getPriority().val())+":"),this.forEachChild(oe,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":Ew(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new P(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new P(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new P(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,P.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,P.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===mo?-1:0}withIndex(n){if(n===vi||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===vi||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(oe),s=r.getIterator(oe),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===vi?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),Vh=class extends M{constructor(){super(new Xe(Dp),M.EMPTY_NODE,Ei.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return M.EMPTY_NODE}isEmpty(){return!1}},mo=new Vh;Object.defineProperties(P,{MIN:{value:new P(_i,M.EMPTY_NODE)},MAX:{value:new P(ar,mo)}});jc.__EMPTY_NODE=M.EMPTY_NODE;wi.__childrenNodeConstructor=M;VO(mo);BO(mo);var WO=!0;function me(t,e=null){if(t===null)return M.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),g(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new wi(n,me(e))}if(!(t instanceof Array)&&WO){let n=[],r=!1;if(Oe(t,(o,a)=>{if(o.substring(0,1)!=="."){let c=me(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new P(o,c)))}}),n.length===0)return M.EMPTY_NODE;let s=Uc(n,UO,o=>o.name,Dp);if(r){let o=Uc(n,oe.getCompare());return new M(s,me(e),new Ei({".priority":o},{".priority":oe}))}else return new M(s,me(e),Ei.Default)}else{let n=M.EMPTY_NODE;return Oe(t,(r,i)=>{if(Nt(t,r)&&r.substring(0,1)!=="."){let s=me(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(me(e))}}$O(me);var $h=class extends Ii{constructor(e){super(),this.indexPath_=e,g(!F(e)&&O(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Si(e.name,n.name):s}makePost(e,n){let r=me(e),i=M.EMPTY_NODE.updateChild(this.indexPath_,r);return new P(n,i)}maxPost(){let e=M.EMPTY_NODE.updateChild(this.indexPath_,mo);return new P(ar,e)}toString(){return Bw(this.indexPath_,0).join("/")}};var Bh=class extends Ii{compare(e,n){let r=e.node.compareTo(n.node);return r===0?Si(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return P.MIN}maxPost(){return P.MAX}makePost(e,n){let r=me(e);return new P(n,r)}toString(){return".value"}},zO=new Bh;function Kw(t){return{type:"value",snapshotNode:t}}function Ci(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ao(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function co(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function qO(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var lo=class{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){g(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(ao(n,a)):g(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Ci(n,r)):o.trackChildChange(co(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(oe,(i,s)=>{n.hasChild(i)||r.trackChildChange(ao(i,s))}),n.isLeafNode()||n.forEachChild(oe,(i,s)=>{if(e.hasChild(i)){let o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(co(i,s,o))}else r.trackChildChange(Ci(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?M.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Vc=class t{constructor(e){this.indexedFilter_=new lo(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new P(n,r))||(r=M.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=M.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(M.EMPTY_NODE);let s=this;return n.forEachChild(oe,(o,a)=>{s.matches(new P(o,a))||(i=i.updateImmediateChild(o,M.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var Hh=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Vc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new P(n,r))||(r=M.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=M.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=M.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(M.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,M.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){let d=this.index_.getCompare();o=(f,h)=>d(h,f)}else o=this.index_.getCompare();let a=e;g(a.numChildren()===this.limit_,"");let c=new P(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){let d=a.getImmediateChild(n),f=i.getChildAfterChild(this.index_,l,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);let h=f==null?1:o(f,c);if(u&&!r.isEmpty()&&h>=0)return s?.trackChildChange(co(n,r,d)),a.updateImmediateChild(n,r);{s?.trackChildChange(ao(n,d));let v=a.updateImmediateChild(n,M.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(s?.trackChildChange(Ci(f.name,f.node)),v.updateImmediateChild(f.name,f.node)):v}}else return r.isEmpty()?e:u&&o(l,c)>=0?(s!=null&&(s.trackChildChange(ao(l.name,l.node)),s.trackChildChange(Ci(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,M.EMPTY_NODE)):e}};var Wh=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=oe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return g(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return g(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:_i}hasEnd(){return this.endSet_}getIndexEndValue(){return g(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return g(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ar}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return g(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===oe}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function GO(t){return t.loadsAllData()?new lo(t.getIndex()):t.hasLimit()?new Hh(t):new Vc(t)}function rw(t){let e={};if(t.isDefault())return e;let n;if(t.index_===oe?n="$priority":t.index_===zO?n="$value":t.index_===vi?n="$key":(g(t.index_ instanceof $h,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=le(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=le(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+le(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=le(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+le(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function iw(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==oe&&(e.i=t.index_.toString()),e}var zh=class t extends kc{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=go("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(g(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let c=rw(e._queryParams);this.restRequest_(s+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(s,d,!1,r),Qn(this.listens_,o)===a){let f;l?l===401?f="permission_denied":f="rest_error:"+l:f="ok",i(f,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=rw(e._queryParams),r=e._path.toString(),i=new yn;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ls(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=li(a.responseText)}catch{xe("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&xe("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var qh=class{constructor(){this.rootNode_=M.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function $c(){return{value:null,children:new Map}}function Qw(t,e,n){if(F(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=O(e);t.children.has(r)||t.children.set(r,$c());let i=t.children.get(r);e=ee(e),Qw(i,e,n)}}function Gh(t,e,n){t.value!==null?n(e,t.value):YO(t,(r,i)=>{let s=new Z(e.toString()+"/"+r);Gh(i,s,n)})}function YO(t,e){t.children.forEach((n,r)=>{e(r,n)})}var Yh=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Oe(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var sw=10*1e3,KO=30*1e3,QO=5*60*1e3,Kh=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Yh(e);let r=sw+(KO-sw)*Math.random();no(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;Oe(e,(i,s)=>{s>0&&Nt(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),no(this.reportStats_.bind(this),Math.floor(Math.random()*2*QO))}};var Rt=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Rt||{});function Zw(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function bp(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Sp(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Qh=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Rt.ACK_USER_WRITE,this.source=Zw()}operationForChild(e){if(F(this.path)){if(this.affectedTree.value!=null)return g(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new Z(e));return new t(q(),n,this.revert)}}else return g(O(this.path)===e,"operationForChild called for unrelated child."),new t(ee(this.path),this.affectedTree,this.revert)}};var Bc=class t{constructor(e,n){this.source=e,this.path=n,this.type=Rt.LISTEN_COMPLETE}operationForChild(e){return F(this.path)?new t(this.source,q()):new t(this.source,ee(this.path))}};var Di=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Rt.OVERWRITE}operationForChild(e){return F(this.path)?new t(this.source,q(),this.snap.getImmediateChild(e)):new t(this.source,ee(this.path),this.snap)}};var Hc=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Rt.MERGE}operationForChild(e){if(F(this.path)){let n=this.children.subtree(new Z(e));return n.isEmpty()?null:n.value?new Di(this.source,q(),n.value):new t(this.source,q(),n)}else return g(O(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,ee(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var qt=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(F(e))return this.isFullyInitialized()&&!this.filtered_;let n=O(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var Zh=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function ZO(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(qO(o.childName,o.snapshotNode))}),to(t,i,"child_removed",e,r,n),to(t,i,"child_added",e,r,n),to(t,i,"child_moved",s,r,n),to(t,i,"child_changed",e,r,n),to(t,i,"value",e,r,n),i}function to(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,c)=>XO(t,a,c)),o.forEach(a=>{let c=JO(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function JO(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function XO(t,e,n){if(e.childName==null||n.childName==null)throw Kn("Should only compare child_ events.");let r=new P(e.childName,e.snapshotNode),i=new P(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function el(t,e){return{eventCache:t,serverCache:e}}function io(t,e,n,r){return el(new qt(e,n,r),t.serverCache)}function Jw(t,e,n,r){return el(t.eventCache,new qt(e,n,r))}function Jh(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function cr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var _h,eP=()=>(_h||(_h=new Xe(tO)),_h),Pe=class t{constructor(e,n=eP()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return Oe(e,(r,i)=>{n=n.set(new Z(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:q(),value:this.value};if(F(e))return null;{let r=O(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(ee(e),n);return s!=null?{path:ue(new Z(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(F(e))return this;{let n=O(e),r=this.children.get(n);return r!==null?r.subtree(ee(e)):new t(null)}}set(e,n){if(F(e))return new t(n,this.children);{let r=O(e),s=(this.children.get(r)||new t(null)).set(ee(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(F(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=O(e),r=this.children.get(n);if(r){let i=r.remove(ee(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(F(e))return this.value;{let n=O(e),r=this.children.get(n);return r?r.get(ee(e)):null}}setTree(e,n){if(F(e))return n;{let r=O(e),s=(this.children.get(r)||new t(null)).setTree(ee(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(q(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(ue(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,q(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(F(e))return null;{let s=O(e),o=this.children.get(s);return o?o.findOnPath_(ee(e),ue(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,q(),n)}foreachOnPath_(e,n,r){if(F(e))return this;{this.value&&r(n,this.value);let i=O(e),s=this.children.get(i);return s?s.foreachOnPath_(ee(e),ue(n,i),r):new t(null)}}foreach(e){this.foreach_(q(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(ue(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var pt=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new Pe(null))}};function so(t,e,n){if(F(e))return new pt(new Pe(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=Re(i,e);return s=s.updateChild(o,n),new pt(t.writeTree_.set(i,s))}else{let i=new Pe(n),s=t.writeTree_.setTree(e,i);return new pt(s)}}}function ow(t,e,n){let r=t;return Oe(n,(i,s)=>{r=so(r,ue(e,i),s)}),r}function aw(t,e){if(F(e))return pt.empty();{let n=t.writeTree_.setTree(e,new Pe(null));return new pt(n)}}function Xh(t,e){return lr(t,e)!=null}function lr(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Re(n.path,e)):null}function cw(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(oe,(r,i)=>{e.push(new P(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new P(r,i.value))}),e}function Dn(t,e){if(F(e))return t;{let n=lr(t,e);return n!=null?new pt(new Pe(n)):new pt(t.writeTree_.subtree(e))}}function ep(t){return t.writeTree_.isEmpty()}function bi(t,e){return Xw(q(),t.writeTree_,e)}function Xw(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(g(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=Xw(ue(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(ue(t,".priority"),r)),n}}function Tp(t,e){return rE(e,t)}function tP(t,e,n,r,i){g(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=so(t.visibleWrites,e,n)),t.lastWriteId=r}function nP(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function rP(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);g(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&iP(a,r.path)?i=!1:ht(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return sP(t),!0;if(r.snap)t.visibleWrites=aw(t.visibleWrites,r.path);else{let a=r.children;Oe(a,c=>{t.visibleWrites=aw(t.visibleWrites,ue(r.path,c))})}return!0}else return!1}function iP(t,e){if(t.snap)return ht(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&ht(ue(t.path,n),e))return!0;return!1}function sP(t){t.visibleWrites=eE(t.allWrites,oP,q()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function oP(t){return t.visible}function eE(t,e,n){let r=pt.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)ht(n,o)?(a=Re(n,o),r=so(r,a,s.snap)):ht(o,n)&&(a=Re(o,n),r=so(r,q(),s.snap.getChild(a)));else if(s.children){if(ht(n,o))a=Re(n,o),r=ow(r,a,s.children);else if(ht(o,n))if(a=Re(o,n),F(a))r=ow(r,q(),s.children);else{let c=Qn(s.children,O(a));if(c){let l=c.getChild(ee(a));r=so(r,q(),l)}}}else throw Kn("WriteRecord should have .snap or .children")}}return r}function tE(t,e,n,r,i){if(!r&&!i){let s=lr(t.visibleWrites,e);if(s!=null)return s;{let o=Dn(t.visibleWrites,e);if(ep(o))return n;if(n==null&&!Xh(o,q()))return null;{let a=n||M.EMPTY_NODE;return bi(o,a)}}}else{let s=Dn(t.visibleWrites,e);if(!i&&ep(s))return n;if(!i&&n==null&&!Xh(s,q()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(ht(l.path,e)||ht(e,l.path))},a=eE(t.allWrites,o,e),c=n||M.EMPTY_NODE;return bi(a,c)}}}function aP(t,e,n){let r=M.EMPTY_NODE,i=lr(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(oe,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=Dn(t.visibleWrites,e);return n.forEachChild(oe,(o,a)=>{let c=bi(Dn(s,new Z(o)),a);r=r.updateImmediateChild(o,c)}),cw(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=Dn(t.visibleWrites,e);return cw(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function cP(t,e,n,r,i){g(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=ue(e,n);if(Xh(t.visibleWrites,s))return null;{let o=Dn(t.visibleWrites,s);return ep(o)?i.getChild(n):bi(o,i.getChild(n))}}function lP(t,e,n,r){let i=ue(e,n),s=lr(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=Dn(t.visibleWrites,i);return bi(o,r.getNode().getImmediateChild(n))}else return null}function uP(t,e){return lr(t.visibleWrites,e)}function dP(t,e,n,r,i,s,o){let a,c=Dn(t.visibleWrites,e),l=lr(c,q());if(l!=null)a=l;else if(n!=null)a=bi(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=o.getCompare(),f=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),h=f.getNext();for(;h&&u.length<i;)d(h,r)!==0&&u.push(h),h=f.getNext();return u}else return[]}function fP(){return{visibleWrites:pt.empty(),allWrites:[],lastWriteId:-1}}function Wc(t,e,n,r){return tE(t.writeTree,t.treePath,e,n,r)}function Ap(t,e){return aP(t.writeTree,t.treePath,e)}function lw(t,e,n,r){return cP(t.writeTree,t.treePath,e,n,r)}function zc(t,e){return uP(t.writeTree,ue(t.treePath,e))}function hP(t,e,n,r,i,s){return dP(t.writeTree,t.treePath,e,n,r,i,s)}function Np(t,e,n){return lP(t.writeTree,t.treePath,e,n)}function nE(t,e){return rE(ue(t.treePath,e),t.writeTree)}function rE(t,e){return{treePath:t,writeTree:e}}var tp=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;g(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),g(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,co(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,ao(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Ci(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,co(r,e.snapshotNode,i.oldSnap));else throw Kn("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var np=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},iE=new np,uo=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new qt(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Np(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:cr(this.viewCache_),s=hP(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function pP(t){return{filter:t}}function gP(t,e){g(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),g(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function mP(t,e,n,r,i){let s=new tp,o,a;if(n.type===Rt.OVERWRITE){let l=n;l.source.fromUser?o=rp(t,e,l.path,l.snap,r,i,s):(g(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!F(l.path),o=qc(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===Rt.MERGE){let l=n;l.source.fromUser?o=yP(t,e,l.path,l.children,r,i,s):(g(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=ip(t,e,l.path,l.children,r,i,a,s))}else if(n.type===Rt.ACK_USER_WRITE){let l=n;l.revert?o=wP(t,e,l.path,r,i,s):o=_P(t,e,l.path,l.affectedTree,r,i,s)}else if(n.type===Rt.LISTEN_COMPLETE)o=IP(t,e,n.path,r,s);else throw Kn("Unknown operation type: "+n.type);let c=s.getChanges();return vP(e,o,c),{viewCache:o,changes:c}}function vP(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Jh(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(Kw(Jh(e)))}}function sE(t,e,n,r,i,s){let o=e.eventCache;if(zc(r,n)!=null)return e;{let a,c;if(F(n))if(g(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=cr(e),u=l instanceof M?l:M.EMPTY_NODE,d=Ap(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{let l=Wc(r,cr(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=O(n);if(l===".priority"){g(bn(n)===1,"Can't have a priority with additional path components");let u=o.getNode();c=e.serverCache.getNode();let d=lw(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{let u=ee(n),d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let f=lw(r,n,o.getNode(),c);f!=null?d=o.getNode().getImmediateChild(l).updateChild(u,f):d=o.getNode().getImmediateChild(l)}else d=Np(r,l,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),l,d,u,i,s):a=o.getNode()}}return io(e,a,o.isFullyInitialized()||F(n),t.filter.filtersNodes())}}function qc(t,e,n,r,i,s,o,a){let c=e.serverCache,l,u=o?t.filter:t.filter.getIndexedFilter();if(F(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let h=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),h,null)}else{let h=O(n);if(!c.isCompleteForPath(n)&&bn(n)>1)return e;let p=ee(n),w=c.getNode().getImmediateChild(h).updateChild(p,r);h===".priority"?l=u.updatePriority(c.getNode(),w):l=u.updateChild(c.getNode(),h,w,p,iE,null)}let d=Jw(e,l,c.isFullyInitialized()||F(n),u.filtersNodes()),f=new uo(i,d,s);return sE(t,d,n,i,f,a)}function rp(t,e,n,r,i,s,o){let a=e.eventCache,c,l,u=new uo(i,e,s);if(F(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=io(e,l,!0,t.filter.filtersNodes());else{let d=O(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=io(e,l,a.isFullyInitialized(),a.isFiltered());else{let f=ee(n),h=a.getNode().getImmediateChild(d),p;if(F(f))p=r;else{let v=u.getCompleteChild(d);v!=null?$w(f)===".priority"&&v.getChild(Hw(f)).isEmpty()?p=v:p=v.updateChild(f,r):p=M.EMPTY_NODE}if(h.equals(p))c=e;else{let v=t.filter.updateChild(a.getNode(),d,p,f,u,o);c=io(e,v,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function uw(t,e){return t.eventCache.isCompleteForChild(e)}function yP(t,e,n,r,i,s,o){let a=e;return r.foreach((c,l)=>{let u=ue(n,c);uw(e,O(u))&&(a=rp(t,a,u,l,i,s,o))}),r.foreach((c,l)=>{let u=ue(n,c);uw(e,O(u))||(a=rp(t,a,u,l,i,s,o))}),a}function dw(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function ip(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;F(n)?l=r:l=new Pe(null).setTree(n,r);let u=e.serverCache.getNode();return l.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){let h=e.serverCache.getNode().getImmediateChild(d),p=dw(t,h,f);c=qc(t,c,new Z(d),p,i,s,o,a)}}),l.children.inorderTraversal((d,f)=>{let h=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){let p=e.serverCache.getNode().getImmediateChild(d),v=dw(t,p,f);c=qc(t,c,new Z(d),v,i,s,o,a)}}),c}function _P(t,e,n,r,i,s,o){if(zc(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(F(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return qc(t,e,n,c.getNode().getChild(n),i,s,a,o);if(F(n)){let l=new Pe(null);return c.getNode().forEachChild(vi,(u,d)=>{l=l.set(new Z(u),d)}),ip(t,e,n,l,i,s,a,o)}else return e}else{let l=new Pe(null);return r.foreach((u,d)=>{let f=ue(n,u);c.isCompleteForPath(f)&&(l=l.set(u,c.getNode().getChild(f)))}),ip(t,e,n,l,i,s,a,o)}}function IP(t,e,n,r,i){let s=e.serverCache,o=Jw(e,s.getNode(),s.isFullyInitialized()||F(n),s.isFiltered());return sE(t,o,n,r,iE,i)}function wP(t,e,n,r,i,s){let o;if(zc(r,n)!=null)return e;{let a=new uo(r,e,i),c=e.eventCache.getNode(),l;if(F(n)||O(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Wc(r,cr(e));else{let d=e.serverCache.getNode();g(d instanceof M,"serverChildren would be complete if leaf node"),u=Ap(r,d)}u=u,l=t.filter.updateFullNode(c,u,s)}else{let u=O(n),d=Np(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,ee(n),a,s):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,M.EMPTY_NODE,ee(n),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Wc(r,cr(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||zc(r,q())!=null,io(e,l,o,t.filter.filtersNodes())}}var sp=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new lo(r.getIndex()),s=GO(r);this.processor_=pP(s);let o=n.serverCache,a=n.eventCache,c=i.updateFullNode(M.EMPTY_NODE,o.getNode(),null),l=s.updateFullNode(M.EMPTY_NODE,a.getNode(),null),u=new qt(c,o.isFullyInitialized(),i.filtersNodes()),d=new qt(l,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=el(d,u),this.eventGenerator_=new Zh(this.query_)}get query(){return this.query_}};function EP(t){return t.viewCache_.serverCache.getNode()}function CP(t,e){let n=cr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!F(e)&&!n.getImmediateChild(O(e)).isEmpty())?n.getChild(e):null}function fw(t){return t.eventRegistrations_.length===0}function DP(t,e){t.eventRegistrations_.push(e)}function hw(t,e,n){let r=[];if(n){g(e==null,"A cancel should cancel all event registrations.");let i=t.query._path;t.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){let o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function pw(t,e,n,r){e.type===Rt.MERGE&&e.source.queryId!==null&&(g(cr(t.viewCache_),"We should always have a full cache before handling merges"),g(Jh(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=mP(t.processor_,i,e,n,r);return gP(t.processor_,s.viewCache),g(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,oE(t,s.changes,s.viewCache.eventCache.getNode(),null)}function bP(t,e){let n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(oe,(s,o)=>{r.push(Ci(s,o))}),n.isFullyInitialized()&&r.push(Kw(n.getNode())),oE(t,r,n.getNode(),e)}function oE(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return ZO(t.eventGenerator_,e,n,i)}var Gc,op=class{constructor(){this.views=new Map}};function SP(t){g(!Gc,"__referenceConstructor has already been defined"),Gc=t}function TP(){return g(Gc,"Reference.ts has not been loaded"),Gc}function AP(t){return t.views.size===0}function Mp(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return g(s!=null,"SyncTree gave us an op for an invalid query."),pw(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(pw(o,e,n,r));return s}}function NP(t,e,n,r,i){let s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=Wc(n,i?r:null),c=!1;a?c=!0:r instanceof M?(a=Ap(n,r),c=!1):(a=M.EMPTY_NODE,c=!1);let l=el(new qt(a,c,!1),new qt(r,i,!1));return new sp(e,l)}return o}function MP(t,e,n,r,i,s){let o=NP(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),DP(o,n),bP(o,n)}function RP(t,e,n,r){let i=e._queryIdentifier,s=[],o=[],a=Sn(t);if(i==="default")for(let[c,l]of t.views.entries())o=o.concat(hw(l,n,r)),fw(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||s.push(l.query));else{let c=t.views.get(i);c&&(o=o.concat(hw(c,n,r)),fw(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!Sn(t)&&s.push(new(TP())(e._repo,e._path)),{removed:s,events:o}}function aE(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function yi(t,e){let n=null;for(let r of t.views.values())n=n||CP(r,e);return n}function cE(t,e){if(e._queryParams.loadsAllData())return tl(t);{let r=e._queryIdentifier;return t.views.get(r)}}function lE(t,e){return cE(t,e)!=null}function Sn(t){return tl(t)!=null}function tl(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var Yc;function xP(t){g(!Yc,"__referenceConstructor has already been defined"),Yc=t}function OP(){return g(Yc,"Reference.ts has not been loaded"),Yc}var PP=1,Kc=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Pe(null),this.pendingWriteTree_=fP(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function uE(t,e,n,r,i){return tP(t.pendingWriteTree_,e,n,r,i),i?vo(t,new Di(Zw(),e,n)):[]}function sr(t,e,n=!1){let r=nP(t.pendingWriteTree_,e);if(rP(t.pendingWriteTree_,e)){let s=new Pe(null);return r.snap!=null?s=s.set(q(),!0):Oe(r.children,o=>{s=s.set(new Z(o),!0)}),vo(t,new Qh(r.path,s,n))}else return[]}function nl(t,e,n){return vo(t,new Di(bp(),e,n))}function kP(t,e,n){let r=Pe.fromObject(n);return vo(t,new Hc(bp(),e,r))}function LP(t,e){return vo(t,new Bc(bp(),e))}function FP(t,e,n){let r=xp(t,n);if(r){let i=Op(r),s=i.path,o=i.queryId,a=Re(s,e),c=new Bc(Sp(o),a);return Pp(t,s,c)}else return[]}function ap(t,e,n,r,i=!1){let s=e._path,o=t.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||lE(o,e))){let c=RP(o,e,n,r);AP(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(f,h)=>Sn(h));if(u&&!d){let f=t.syncPointTree_.subtree(s);if(!f.isEmpty()){let h=VP(f);for(let p=0;p<h.length;++p){let v=h[p],w=v.query,k=hE(t,v);t.listenProvider_.startListening(oo(w),Qc(t,w),k.hashFn,k.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(oo(e),null):l.forEach(f=>{let h=t.queryToTagMap.get(rl(f));t.listenProvider_.stopListening(oo(f),h)}))}$P(t,l)}return a}function jP(t,e,n,r){let i=xp(t,r);if(i!=null){let s=Op(i),o=s.path,a=s.queryId,c=Re(o,e),l=new Di(Sp(a),c,n);return Pp(t,o,l)}else return[]}function UP(t,e,n,r){let i=xp(t,r);if(i){let s=Op(i),o=s.path,a=s.queryId,c=Re(o,e),l=Pe.fromObject(n),u=new Hc(Sp(a),c,l);return Pp(t,o,u)}else return[]}function gw(t,e,n,r=!1){let i=e._path,s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(f,h)=>{let p=Re(f,i);s=s||yi(h,p),o=o||Sn(h)});let a=t.syncPointTree_.get(i);a?(o=o||Sn(a),s=s||yi(a,q())):(a=new op,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;s!=null?c=!0:(c=!1,s=M.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((h,p)=>{let v=yi(p,q());v&&(s=s.updateImmediateChild(h,v))}));let l=lE(a,e);if(!l&&!e._queryParams.loadsAllData()){let f=rl(e);g(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");let h=BP();t.queryToTagMap.set(f,h),t.tagToQueryMap.set(h,f)}let u=Tp(t.pendingWriteTree_,i),d=MP(a,e,n,u,s,c);if(!l&&!o&&!r){let f=cE(a,e);d=d.concat(HP(t,e,f))}return d}function Rp(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let c=Re(o,e),l=yi(a,c);if(l)return l});return tE(i,e,s,n,!0)}function vo(t,e){return dE(e,t.syncPointTree_,null,Tp(t.pendingWriteTree_,q()))}function dE(t,e,n,r){if(F(t.path))return fE(t,e,n,r);{let i=e.get(q());n==null&&i!=null&&(n=yi(i,q()));let s=[],o=O(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){let l=n?n.getImmediateChild(o):null,u=nE(r,o);s=s.concat(dE(a,c,l,u))}return i&&(s=s.concat(Mp(i,t,r,n))),s}}function fE(t,e,n,r){let i=e.get(q());n==null&&i!=null&&(n=yi(i,q()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=n?n.getImmediateChild(o):null,l=nE(r,o),u=t.operationForChild(o);u&&(s=s.concat(fE(u,a,c,l)))}),i&&(s=s.concat(Mp(i,t,r,n))),s}function hE(t,e){let n=e.query,r=Qc(t,n);return{hashFn:()=>(EP(e)||M.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?FP(t,n._path,r):LP(t,n._path);{let s=iO(i,n);return ap(t,n,null,s)}}}}function Qc(t,e){let n=rl(e);return t.queryToTagMap.get(n)}function rl(t){return t._path.toString()+"$"+t._queryIdentifier}function xp(t,e){return t.tagToQueryMap.get(e)}function Op(t){let e=t.indexOf("$");return g(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Z(t.substr(0,e))}}function Pp(t,e,n){let r=t.syncPointTree_.get(e);g(r,"Missing sync point for query tag that we're tracking");let i=Tp(t.pendingWriteTree_,e);return Mp(r,n,i,null)}function VP(t){return t.fold((e,n,r)=>{if(n&&Sn(n))return[tl(n)];{let i=[];return n&&(i=aE(n)),Oe(r,(s,o)=>{i=i.concat(o)}),i}})}function oo(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(OP())(t._repo,t._path):t}function $P(t,e){for(let n=0;n<e.length;++n){let r=e[n];if(!r._queryParams.loadsAllData()){let i=rl(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function BP(){return PP++}function HP(t,e,n){let r=e._path,i=Qc(t,e),s=hE(t,n),o=t.listenProvider_.startListening(oo(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)g(!Sn(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!F(l)&&u&&Sn(u))return[tl(u).query];{let f=[];return u&&(f=f.concat(aE(u).map(h=>h.query))),Oe(d,(h,p)=>{f=f.concat(p)}),f}});for(let l=0;l<c.length;++l){let u=c[l];t.listenProvider_.stopListening(oo(u),Qc(t,u))}}return o}var cp=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},lp=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=ue(this.path_,e);return new t(this.syncTree_,n)}node(){return Rp(this.syncTree_,this.path_)}},WP=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},mw=function(t,e,n){if(!t||typeof t!="object")return t;if(g(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return zP(t[".sv"],e,n);if(typeof t[".sv"]=="object")return qP(t[".sv"],e);g(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},zP=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:g(!1,"Unexpected server value: "+t)}},qP=function(t,e,n){t.hasOwnProperty("increment")||g(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&g(!1,"Unexpected increment value: "+r);let i=e.node();if(g(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},GP=function(t,e,n,r){return kp(e,new lp(n,t),r)},pE=function(t,e,n){return kp(t,new cp(e),n)};function kp(t,e,n){let r=t.getPriority().val(),i=mw(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=mw(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new wi(a,me(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new wi(i))),o.forEachChild(oe,(a,c)=>{let l=kp(c,e.getImmediateChild(a),n);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var fo=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function Lp(t,e){let n=e instanceof Z?e:new Z(e),r=t,i=O(n);for(;i!==null;){let s=Qn(r.node.children,i)||{children:{},childCount:0};r=new fo(i,r,s),n=ee(n),i=O(n)}return r}function Ai(t){return t.node.value}function gE(t,e){t.node.value=e,up(t)}function mE(t){return t.node.childCount>0}function YP(t){return Ai(t)===void 0&&!mE(t)}function il(t,e){Oe(t.node.children,(n,r)=>{e(new fo(n,t,r))})}function vE(t,e,n,r){n&&!r&&e(t),il(t,i=>{vE(i,e,!0,r)}),n&&r&&e(t)}function KP(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function yo(t){return new Z(t.parent===null?t.name:yo(t.parent)+"/"+t.name)}function up(t){t.parent!==null&&QP(t.parent,t.name,t)}function QP(t,e,n){let r=YP(n),i=Nt(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,up(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,up(t))}var ZP=/[\[\].#$\/\u0000-\u001F\u007F]/,JP=/[\[\].#$\u0000-\u001F\u007F]/,Ih=10*1024*1024,yE=function(t){return typeof t=="string"&&t.length!==0&&!ZP.test(t)},_E=function(t){return typeof t=="string"&&t.length!==0&&!JP.test(t)},XP=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),_E(t)};var ek=function(t,e,n,r){r&&e===void 0||Fp(pc(t,"value"),e,n)},Fp=function(t,e,n){let r=n instanceof Z?new Ph(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+rr(r));if(typeof e=="function")throw new Error(t+"contains a function "+rr(r)+" with contents = "+e.toString());if(Cw(e))throw new Error(t+"contains "+e.toString()+" "+rr(r));if(typeof e=="string"&&e.length>Ih/3&&Fs(e)>Ih)throw new Error(t+"contains a string greater than "+Ih+" utf8 bytes "+rr(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Oe(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!yE(o)))throw new Error(t+" contains an invalid key ("+o+") "+rr(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);OO(r,o),Fp(t,a,r),PO(r)}),i&&s)throw new Error(t+' contains ".value" child '+rr(r)+" in addition to actual children.")}};var IE=function(t,e,n,r){if(!(r&&n===void 0)&&!_E(n))throw new Error(pc(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},tk=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),IE(t,e,n,r)},nk=function(t,e){if(O(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},rk=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!yE(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!XP(n))throw new Error(pc(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var dp=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function jp(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!Ep(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function wE(t,e,n){jp(t,n),EE(t,r=>Ep(r,e))}function Gt(t,e,n){jp(t,n),EE(t,r=>ht(r,e)||ht(e,r))}function EE(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(ik(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function ik(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();or&&_e("event: "+n.toString()),Ti(r)}}}var sk="repo_interrupt",ok=25,fp=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new dp,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=$c(),this.transactionQueueTree_=new fo,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function ak(t,e,n){if(t.stats_=wp(t.repoInfo_),t.forceRestClient_||cO())t.server_=new zh(t.repoInfo_,(r,i,s,o)=>{vw(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>yw(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{le(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Cp(t.repoInfo_,e,(r,i,s,o)=>{vw(t,r,i,s,o)},r=>{yw(t,r)},r=>{lk(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=uO(t.repoInfo_,()=>new Kh(t.stats_,t.server_)),t.infoData_=new qh,t.infoSyncTree_=new Kc({startListening:(r,i,s,o)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=nl(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Vp(t,"connected",!1),t.serverSyncTree_=new Kc({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);Gt(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function ck(t){let n=t.infoData_.getNode(new Z(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Up(t){return WP({timestamp:ck(t)})}function vw(t,e,n,r,i){t.dataUpdateCount++;let s=new Z(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let c=Ps(n,l=>me(l));o=UP(t.serverSyncTree_,s,c,i)}else{let c=me(n);o=jP(t.serverSyncTree_,s,c,i)}else if(r){let c=Ps(n,l=>me(l));o=kP(t.serverSyncTree_,s,c)}else{let c=me(n);o=nl(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=sl(t,s)),Gt(t.eventQueue_,a,o)}function yw(t,e){Vp(t,"connected",e),e===!1&&dk(t)}function lk(t,e){Oe(e,(n,r)=>{Vp(t,n,r)})}function Vp(t,e,n){let r=new Z("/.info/"+e),i=me(n);t.infoData_.updateSnapshot(r,i);let s=nl(t.infoSyncTree_,r,i);Gt(t.eventQueue_,r,s)}function CE(t){return t.nextWriteId_++}function uk(t,e,n,r,i){$p(t,"set",{path:e.toString(),value:n,priority:r});let s=Up(t),o=me(n,r),a=Rp(t.serverSyncTree_,e),c=pE(o,a,s),l=CE(t),u=uE(t.serverSyncTree_,e,c,l,!0);jp(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(f,h)=>{let p=f==="ok";p||xe("set at "+e+" failed: "+f);let v=sr(t.serverSyncTree_,l,!p);Gt(t.eventQueue_,e,v),pk(t,i,f,h)});let d=AE(t,e);sl(t,d),Gt(t.eventQueue_,d,[])}function dk(t){$p(t,"onDisconnectEvents");let e=Up(t),n=$c();Gh(t.onDisconnect_,q(),(i,s)=>{let o=GP(i,s,t.serverSyncTree_,e);Qw(n,i,o)});let r=[];Gh(n,q(),(i,s)=>{r=r.concat(nl(t.serverSyncTree_,i,s));let o=AE(t,i);sl(t,o)}),t.onDisconnect_=$c(),Gt(t.eventQueue_,q(),r)}function fk(t,e,n){let r;O(e._path)===".info"?r=gw(t.infoSyncTree_,e,n):r=gw(t.serverSyncTree_,e,n),wE(t.eventQueue_,e._path,r)}function _w(t,e,n){let r;O(e._path)===".info"?r=ap(t.infoSyncTree_,e,n):r=ap(t.serverSyncTree_,e,n),wE(t.eventQueue_,e._path,r)}function hk(t){t.persistentConnection_&&t.persistentConnection_.interrupt(sk)}function $p(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),_e(n,...e)}function pk(t,e,n,r){e&&Ti(()=>{if(n==="ok")e(null);else{let i=(n||"error").toUpperCase(),s=i;r&&(s+=": "+r);let o=new Error(s);o.code=i,e(o)}})}function DE(t,e,n){return Rp(t.serverSyncTree_,e,n)||M.EMPTY_NODE}function Bp(t,e=t.transactionQueueTree_){if(e||ol(t,e),Ai(e)){let n=SE(t,e);g(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&gk(t,yo(e),n)}else mE(e)&&il(e,n=>{Bp(t,n)})}function gk(t,e,n){let r=n.map(l=>l.currentWriteId),i=DE(t,e,r),s=i,o=i.hash();for(let l=0;l<n.length;l++){let u=n[l];g(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=Re(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;t.server_.put(c.toString(),a,l=>{$p(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(sr(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();ol(t,Lp(t.transactionQueueTree_,e)),Bp(t,t.transactionQueueTree_),Gt(t.eventQueue_,e,u);for(let f=0;f<d.length;f++)Ti(d[f])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{xe("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}sl(t,e)}},o)}function sl(t,e){let n=bE(t,e),r=yo(n),i=SE(t,n);return mk(t,i,r),r}function mk(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=Re(n,c.path),u=!1,d;if(g(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(sr(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=ok)u=!0,d="maxretry",i=i.concat(sr(t.serverSyncTree_,c.currentWriteId,!0));else{let f=DE(t,c.path,o);c.currentInputSnapshot=f;let h=e[a].update(f.val());if(h!==void 0){Fp("transaction failed: Data returned ",h,c.path);let p=me(h);typeof h=="object"&&h!=null&&Nt(h,".priority")||(p=p.updatePriority(f.getPriority()));let w=c.currentWriteId,k=Up(t),X=pE(p,f,k);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=X,c.currentWriteId=CE(t),o.splice(o.indexOf(w),1),i=i.concat(uE(t.serverSyncTree_,c.path,X,c.currentWriteId,c.applyLocally)),i=i.concat(sr(t.serverSyncTree_,w,!0))}else u=!0,d="nodata",i=i.concat(sr(t.serverSyncTree_,c.currentWriteId,!0))}Gt(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}ol(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Ti(r[a]);Bp(t,t.transactionQueueTree_)}function bE(t,e){let n,r=t.transactionQueueTree_;for(n=O(e);n!==null&&Ai(r)===void 0;)r=Lp(r,n),e=ee(e),n=O(e);return r}function SE(t,e){let n=[];return TE(t,e,n),n.sort((r,i)=>r.order-i.order),n}function TE(t,e,n){let r=Ai(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);il(e,i=>{TE(t,i,n)})}function ol(t,e){let n=Ai(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,gE(e,n.length>0?n:void 0)}il(e,r=>{ol(t,r)})}function AE(t,e){let n=yo(bE(t,e)),r=Lp(t.transactionQueueTree_,e);return KP(r,i=>{wh(t,i)}),wh(t,r),vE(r,i=>{wh(t,i)}),n}function wh(t,e){let n=Ai(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(g(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(g(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(sr(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?gE(e,void 0):n.length=s+1,Gt(t.eventQueue_,yo(e),i);for(let o=0;o<r.length;o++)Ti(r[o])}}function vk(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function yk(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):xe(`Invalid query segment '${n}' in query '${t}'`)}return e}var Iw=function(t,e){let n=_k(t),r=n.namespace;n.domain==="firebase.com"&&zt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&zt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Xx();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Oc(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Z(n.pathString)}},_k=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=vk(t.substring(u,d)));let f=yk(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let h=e.slice(0,l);if(h.toLowerCase()==="localhost")n="localhost";else if(h.split(".").length<=2)n=h;else{let p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var Zc=class{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+le(this.snapshot.exportVal())}},Jc=class{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var hp=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return g(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var pp=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return F(this._path)?null:$w(this._path)}get ref(){return new Yt(this._repo,this._path)}get _queryIdentifier(){let e=iw(this._queryParams),n=Ip(e);return n==="{}"?"default":n}get _queryObject(){return iw(this._queryParams)}isEqual(e){if(e=dt(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=Ep(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+xO(this._path)}};var Yt=class t extends pp{constructor(e,n){super(e,n,new Wh,!1)}get parent(){let e=Hw(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Xc=class t{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new Z(e),r=ho(this.ref,e);return new t(this._node.getChild(n),r,oe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new t(i,ho(this.ref,r),oe)))}hasChild(e){let n=new Z(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function NE(t,e){return t=dt(t),t._checkNotDeleted("ref"),e!==void 0?ho(t._root,e):t._root}function ho(t,e){return t=dt(t),O(t._path)===null?tk("child","path",e,!1):IE("child","path",e,!1),new Yt(t._repo,ue(t._path,e))}function ME(t,e){t=dt(t),nk("set",t._path),ek("set",e,t._path,!1);let n=new yn;return uk(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}var gp=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let r=n._queryParams.getIndex();return new Zc("value",this,new Xc(e.snapshotNode,new Yt(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Jc(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},mp=class t{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Jc(this,e,n):null}createEvent(e,n){g(e.childName!=null,"Child events should have a childName.");let r=ho(new Yt(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new Zc(e.type,this,new Xc(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function Ik(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){let c=n,l=(u,d)=>{_w(t._repo,t,a),c(u,d)};l.userCallback=n.userCallback,l.context=n.context,n=l}let o=new hp(n,s||void 0),a=e==="value"?new gp(o):new mp(e,o);return fk(t._repo,t,a),()=>_w(t._repo,t,a)}function RE(t,e,n,r){return Ik(t,"value",e,n,r)}SP(Yt);xP(Yt);var wk="FIREBASE_DATABASE_EMULATOR_HOST",vp={},Ek=!1;function Ck(t,e,n,r){t.repoInfo_=new Oc(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function Dk(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||zt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_e("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Iw(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[wk]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=Iw(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let u=i&&c?new ro(ro.OWNER):new Th(t.name,t.options,e);rk("Invalid Firebase Database URL",o),F(o.path)||zt("Database URL must point to the root of a Firebase Database (not including a child path).");let d=Sk(a,t,u,new Sh(t.name,n));return new yp(d,t)}function bk(t,e){let n=vp[e];(!n||n[t.key]!==t)&&zt(`Database ${e}(${t.repoInfo_}) has already been deleted.`),hk(t),delete n[t.key]}function Sk(t,e,n,r){let i=vp[e.name];i||(i={},vp[e.name]=i);let s=i[t.toURLString()];return s&&zt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new fp(t,Ek,n,r),i[t.toURLString()]=s,s}var yp=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(ak(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Yt(this._repo,q())),this._rootInternal}_delete(){return this._rootInternal!==null&&(bk(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&zt("Cannot call "+e+" on a deleted database.")}};function xE(t=$s(),e){let n=Qf(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=Q_("database");r&&OE(n,...r)}return n}function OE(t,e,n,r={}){t=dt(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&zt("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&zt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new ro(ro.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:J_(r.mockUserToken,t.app.options.projectId);s=new ro(o)}Ck(i,e,n,s)}function Tk(t){Qx(di),wn(new Je("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return Dk(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),pe($I,BI,t),pe($I,BI,"esm2017")}Cp.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Cp.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Tk();var ur=class{constructor(e){return e}},PE="database",Hp=class{constructor(){return Hs(PE)}};var Wp=new S("angularfire2.database-instances");function Ak(t,e){let n=Xf(PE,t,e);return n&&new ur(n)}function Nk(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ur(r)}}var Mk={provide:Hp,deps:[[new st,Wp]]},Rk={provide:ur,useFactory:Ak,deps:[[new st,Wp],er]};function kE(t,...e){return pe("angularfire",hi.full,"rtdb"),cn([Rk,Mk,{provide:Wp,useFactory:Nk(t),multi:!0,deps:[K,Ne,Ws,zs,[new st,Mc],[new st,Bs],...e]}])}var LE=En(xE,!0);var FE=En(RE,!0);var _o=En(NE,!0);var al=En(ME,!0);var jE={apiKey:"AIzaSyATS3nUxmfjwf83Zo4AEq1TeM6SiLIxs94",authDomain:"qstar-app.firebaseapp.com",databaseURL:"https://qstar-app-default-rtdb.europe-west1.firebasedatabase.app",projectId:"qstar-app",storageBucket:"qstar-app.appspot.com",messagingSenderId:"232376159453",appId:"1:232376159453:web:91b6d0576bff13990f1f34"};var zp="QSTAR_APP_ID";function Ok(t=8){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",r=e.length;for(let i=0;i<t;i++)n+=e.charAt(Math.floor(Math.random()*r));return n}var cl=(()=>{let e=class e{constructor(){this.id=null,zp in localStorage||(localStorage[zp]=Ok()),this.id=localStorage[zp]}getId(){return this.id}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ll=(()=>{let e=class e{constructor(r){this.db=r,this.identityService=m(cl),this.data$=this.getData(),this.questionId$=this.data$.pipe(E(i=>(i?.survey.state||"-").split("-")[0]||null)),this.questionIds$=this.data$.pipe(E(i=>{let s=Object.keys(i?.survey.questions||{});return s.sort(),s})),this.state$=this.data$.pipe(E(i=>(i?.survey.state||"-").split("-")[1]||null)),this.question$=Be([this.data$,this.questionId$]).pipe(E(([i,s])=>{if(i&&s){if(i.survey.questions.hasOwnProperty(s))return i.survey.questions[s];console.warn("Missing",s,"in",i.survey.questions)}return null})),this.active$=this.data$.pipe(E(i=>i?.survey.active||null)),this.votes$=this.data$.pipe(E(i=>i?.survey.votes||null))}getData(){return new U(r=>{let i=_o(this.db,"/");return{unsubscribe:FE(i,o=>{o.exists()?r.next(o.val()):(console.log("No data available"),r.next(null))})}})}ping(){let r=this.identityService.getId(),i=_o(this.db,`survey/active/${r}`);return te(al(i,Date.now()))}vote(r,i){let s=this.identityService.getId(),o=_o(this.db,`survey/votes/${s}-${r}`);return te(al(o,i))}setState(r,i){let s=_o(this.db,"survey/state");return te(al(s,`${r}-${i}`))}getVote(r){return Be([this.questionId$,this.votes$]).pipe(E(([i,s])=>{if(!i||!s)return null;let o=`${r}-${i}`;return s[o]||null}))}};e.\u0275fac=function(i){return new(i||e)(D(ur))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var UE=t=>({active:t});function Lk(t,e){t&1&&(W(0,"div",12),H(1,"(Voting ended, please watch screen)"),L())}function Fk(t,e){if(t&1){let n=Ma();W(0,"div")(1,"h2"),H(2),L(),W(3,"ul",6)(4,"li",7)(5,"div")(6,"span",8),H(7,"Answer A:"),L(),H(8),L()(),W(9,"li",7)(10,"div")(11,"span",8),H(12,"Answer B:"),L(),H(13),L()()(),W(14,"div",9)(15,"button",10),un("click",function(){Hr(n);let i=De().ngIf,s=De();return Wr(s.setActive(i.questionId,"A"))}),H(16,"A is human"),L(),W(17,"button",10),un("click",function(){Hr(n);let i=De().ngIf,s=De();return Wr(s.setActive(i.questionId,"B"))}),H(18,"B is human"),L()(),Ke(19,Lk,2,0,"div",11),L()}if(t&2){let n=De().ngIf;re(2),Wn("#",n.questionId," ",n.question==null?null:n.question.question,""),re(6),je(" ",n.question==null?null:n.question.answerA," "),re(5),je(" ",n.question==null?null:n.question.answerB," "),re(2),Qe("disabled",n.state!=="voting")("ngClass",Id(9,UE,n.activeAnswer==="A")),re(2),Qe("disabled",n.state!=="voting")("ngClass",Id(11,UE,n.activeAnswer==="B")),re(2),Qe("ngIf",n.state!=="voting")}}function jk(t,e){t&1&&(W(0,"div")(1,"h2"),H(2,"All questions answered"),L(),W(3,"p"),H(4,"Thank you for your votes!"),L()())}function Uk(t,e){t&1&&(W(0,"h2"),H(1,"Please wait"),L(),W(2,"p"),H(3,"We're currently working on activating the first question in the system. The question will be shown in this screen as soon as it's ready."),L())}function Vk(t,e){if(t&1&&Ke(0,jk,5,0,"div",5)(1,Uk,4,0,"ng-template",null,2,hn),t&2){let n=dn(2),r=De().ngIf;Qe("ngIf",r.state==="id")("ngIfElse",n)}}function $k(t,e){if(t&1&&(W(0,"article",4),Ke(1,Fk,20,13,"div",5)(2,Vk,3,2,"ng-template",null,1,hn),L()),t&2){let n=e.ngIf,r=dn(3);re(),Qe("ngIf",n.questionId)("ngIfElse",r)}}function Bk(t,e){t&1&&(W(0,"p"),H(1,"Loading..."),L())}var VE=(()=>{let e=class e{constructor(r,i){this.firebaseService=r,this.identityService=i,this.activeAnswer$=this.firebaseService.getVote(this.identityService.getId()),this.data$=Be([this.firebaseService.question$,this.firebaseService.questionId$,this.firebaseService.state$,this.activeAnswer$]).pipe(E(([s,o,a,c])=>({question:s,questionId:o,state:a,activeAnswer:c})))}setActive(r,i){r&&this.firebaseService.vote(r,i)}ngOnInit(){this.startPinging()}ngOnDestroy(){this.stopPinging()}startPinging(){this.pingInterval=setInterval(()=>{this.firebaseService.ping()},1e3)}stopPinging(){this.pingInterval&&clearInterval(this.pingInterval)}};e.\u0275fac=function(i){return new(i||e)(ye(ll),ye(cl))},e.\u0275cmp=an({type:e,selectors:[["app-vote"]],standalone:!0,features:[fn],decls:4,vars:4,consts:[["loading",""],["noquestion",""],["waiting",""],["class","page",4,"ngIf","ngIfElse"],[1,"page"],[4,"ngIf","ngIfElse"],[1,"answers"],[1,"answer"],[1,"ab"],[1,"buttons"],[3,"click","disabled","ngClass"],["class","status",4,"ngIf"],[1,"status"]],template:function(i,s){if(i&1&&(Ke(0,$k,4,2,"article",3),qr(1,"async"),Ke(2,Bk,2,0,"ng-template",null,0,hn)),i&2){let o=dn(3);Qe("ngIf",Ra(1,2,s.data$))("ngIfElse",o)}},dependencies:[ss,jy,Va,$a],styles:[".page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:3rem}.answers[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:2rem}.answers[_ngcontent-%COMP%]   .ab[_ngcontent-%COMP%]{text-decoration:underline}.buttons[_ngcontent-%COMP%]{display:flex;gap:1rem;width:90%;margin:3em auto}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;height:3rem;color:var(--fg);background:transparent;font-weight:700;border:1px solid var(--fg)}.buttons[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:var(--bg4)}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{border:0}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:not(.active){color:var(--fg-dim)}.status[_ngcontent-%COMP%]{text-align:center;color:var(--fg-dim)}"]});let t=e;return t})();function Hk(t,e){if(t&1&&(W(0,"div",9)(1,"span"),H(2),L(),H(3," \u2014 "),W(4,"span"),H(5),L()()),t&2){let n=De().ngIf,r=De();re(2),Wn(" Question ",n.questionIndex+1,"/",n.questionNum,""),re(3),_d(r.formatState(n.state))}}function Wk(t,e){if(t&1&&H(0),t&2){let n=De().ngIf;je(" ",n.state==="id"?"RCTT Results":"RCTT Welcome"," ")}}function zk(t,e){if(t&1&&(W(0,"div")(1,"h2"),H(2),L(),W(3,"ul",10)(4,"li",11)(5,"div",12),H(6),qr(7,"percent"),L(),W(8,"div",13)(9,"span",14),H(10,"Answer A:"),L(),H(11),L(),W(12,"div",15),H(13),L()(),W(14,"li",11)(15,"div",12),H(16),qr(17,"percent"),L(),W(18,"div",13)(19,"span",14),H(20,"Answer B:"),L(),H(21),L(),W(22,"div",15),H(23),L()()(),W(24,"div",16),H(25),L()()),t&2){let n=De().ngIf,r=De();re(2),Wn("#",n.questionId," ",n.question==null?null:n.question.question,""),re(3),ns(n.state==="stats"||n.state==="id"?"":"hidden"),re(),je(" ",wd(7,18,r.getFraction(n.questionId,"A"),"1.0")," "),re(5),je(" ",n.question==null?null:n.question.answerA," "),re(),ns(n.state==="id"?"":"hidden"),re(),je(" ",r.formatIdentity(n.question==null?null:n.question.identityA)," "),re(2),ns(n.state==="stats"||n.state==="id"?"":"hidden"),re(),je(" ",wd(17,21,r.getFraction(n.questionId,"B"),"1.0")," "),re(5),je(" ",n.question==null?null:n.question.answerB," "),re(),ns(n.state==="id"?"":"hidden"),re(),je(" ",r.formatIdentity(n.question==null?null:n.question.identityB)," "),re(2),Wn(" Collected votes: ",r.getNumAnswered(n.questionId)," / ",r.numOnline," ")}}function qk(t,e){}function Gk(t,e){if(t&1){let n=Ma();W(0,"article",4)(1,"div",5)(2,"button",6),un("click",function(){let i=Hr(n).ngIf,s=De();return Wr(s.prev(i.questionId,i.state))}),H(3,"<<"),L(),Ke(4,Hk,6,3,"div",7)(5,Wk,1,1,"ng-template",null,1,hn),W(7,"button",6),un("click",function(){let i=Hr(n).ngIf,s=De();return Wr(s.next(i.questionId,i.state))}),H(8,">>"),L()(),Ke(9,zk,26,24,"div",8)(10,qk,0,0,"ng-template",null,2,hn),L()}if(t&2){let n=e.ngIf,r=dn(6),i=dn(11);re(4),Qe("ngIf",n.questionId)("ngIfElse",r),re(5),Qe("ngIf",n.questionId)("ngIfElse",i)}}function Yk(t,e){t&1&&(W(0,"p"),H(1,"Loading..."),L())}var $E=5,Kk=3600,BE=(()=>{let e=class e{getNumAnswered(r){if(!r)return 0;let i=this.votes.get(r);return i?[...i.values()].reduce((s,o)=>s+o,0):0}getFraction(r,i){if(!r)return;let s=this.votes.get(r);if(!s)return;let o=[...s.entries()].filter(([c,l])=>c===i).map(([c,l])=>l).reduce((c,l)=>c+l,0),a=[...s.values()].reduce((c,l)=>c+l,0);return o/a}constructor(){this.firebaseService=m(ll),this.data$=Be([this.firebaseService.state$,this.firebaseService.questionId$,this.firebaseService.questionIds$,this.firebaseService.question$]).pipe(E(([r,i,s,o])=>({state:r,questionId:i,question:o,questionIndex:s?.indexOf(i||""),questionNum:s.length}))),this.numOnline=0,this.lastPingSecsAgo=new Map,this.votes=new Map,this.questionIds=null,this.firebaseService.active$.subscribe(r=>{if(!r)return;let i=Date.now(),s=new Set;for(let[o,a]of Object.entries(r)){let c=i-a;this.lastPingSecsAgo.set(o,c/1e3),c<$E*1e3&&s.add(o)}this.numOnline=s.size}),this.firebaseService.votes$.subscribe(r=>{if(!r)return;let i=new Map;for(let[s,o]of Object.entries(r)){let[a,c]=s.split("-",2);if((this.lastPingSecsAgo.get(a)||$E)>=Kk)continue;i.has(c)||i.set(c,new Map);let u=i.get(c);u.has(o)||u.set(o,0),u.set(o,u.get(o)+1)}this.votes.clear();for(let[s,o]of i.entries())this.votes.set(s,o)}),this.firebaseService.questionIds$.subscribe(r=>{this.questionIds=r})}formatState(r){return r?{voting:"Voting (1/3)",stats:"Show Results (2/3)",id:"Reveal Identities (3/3)"}[r]:""}formatIdentity(r){return r?r?.startsWith("Human")?"Human":r:null}questionIdsStates(){let r=["-voting"];for(let i of this.questionIds||[])r.push(`${i}-voting`),r.push(`${i}-stats`),r.push(`${i}-id`);return r.push("-id"),r}prevNext(r,i,s){let o=this.questionIdsStates(),a=o.indexOf(`${r||""}-${i}`);console.log("idx",a,r,i,o),a===-1?a=0:a=a+s;let c=o[a%o.length];console.log("nextIdState",c);let[l,u]=c.split("-");this.firebaseService.setState(l,u)}prev(r,i){this.prevNext(r,i,-1)}next(r,i){this.prevNext(r,i,1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=an({type:e,selectors:[["app-results"]],standalone:!0,features:[fn],decls:4,vars:4,consts:[["loading",""],["specialstate",""],["noquestion",""],["class","page",4,"ngIf","ngIfElse"],[1,"page"],[1,"buttons"],[3,"click"],["class","state",4,"ngIf","ngIfElse"],[4,"ngIf","ngIfElse"],[1,"state"],[1,"answers"],[1,"answer"],[1,"percentage"],[1,"text"],[1,"ab"],[1,"id"],[1,"status"]],template:function(i,s){if(i&1&&(Ke(0,Gk,12,4,"article",3),qr(1,"async"),Ke(2,Yk,2,0,"ng-template",null,0,hn)),i&2){let o=dn(3);Qe("ngIf",Ra(1,2,s.data$))("ngIfElse",o)}},dependencies:[ss,Va,$a,Vy],styles:[".page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:3rem}h2[_ngcontent-%COMP%]{font-size:2vw}.buttons[_ngcontent-%COMP%]{display:flex;gap:2rem;margin:0 auto;padding-top:3rem;align-items:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:1rem 2rem;color:var(--fg);background:transparent;font-weight:700;border:1px solid var(--fg)}.buttons[_ngcontent-%COMP%]   .state[_ngcontent-%COMP%]{width:20rem;text-align:center}.answers[_ngcontent-%COMP%]{font-size:1.5vw;list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:2rem}.answers[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]{display:flex;gap:3rem}.answers[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]   .percentage[_ngcontent-%COMP%]{width:10%;text-align:right;font-weight:lighter;font-size:1.5em}.answers[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]   .percentage.hidden[_ngcontent-%COMP%]{opacity:0}.answers[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:70%}.answers[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{width:20%;font-size:1.5em;font-weight:700}.answers[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]   .id.hidden[_ngcontent-%COMP%]{opacity:0}.answers[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]   .ab[_ngcontent-%COMP%]{text-decoration:underline}.status[_ngcontent-%COMP%]{font-size:1.5em;margin-top:3em}"]});let t=e;return t})();var HE=[{path:"",component:VE},{path:"results",component:BE}];var WE={providers:[wy({eventCoalescing:!0}),U_(HE),wI(()=>EI(jE)),kE(()=>LE())]};var zE="0.0.2";var qE=(()=>{let e=class e{constructor(r,i){this.router=r,this.titleService=i,this.title=`QSTAR Research App v${zE}`}ngOnInit(){this.titleService.setTitle(this.title),this.router.events.subscribe(r=>{if(r instanceof gn){let s=new URL(r.url,window.location.origin).searchParams.get("goto");s&&this.router.navigate([`/${s}`])}})}};e.\u0275fac=function(i){return new(i||e)(ye(St),ye(Wa))},e.\u0275cmp=an({type:e,selectors:[["app-root"]],standalone:!0,features:[fn],decls:2,vars:0,consts:[[1,"container"]],template:function(i,s){i&1&&(W(0,"div",0),rs(1,"router-outlet"),L())},dependencies:[Cf,W_]});let t=e;return t})();Qy(qE,WE).catch(t=>console.error(t));
