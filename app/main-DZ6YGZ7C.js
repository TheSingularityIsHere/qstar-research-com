var aC=Object.defineProperty,cC=Object.defineProperties;var lC=Object.getOwnPropertyDescriptors;var tg=Object.getOwnPropertySymbols;var uC=Object.prototype.hasOwnProperty,dC=Object.prototype.propertyIsEnumerable;var ng=(t,e,n)=>e in t?aC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_=(t,e)=>{for(var n in e||={})uC.call(e,n)&&ng(t,n,e[n]);if(tg)for(var n of tg(e))dC.call(e,n)&&ng(t,n,e[n]);return t},ne=(t,e)=>cC(t,lC(e));var y=(t,e,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(t,e)).next())});var rg=null;var gl=1,ig=Symbol("SIGNAL");function q(t){let e=rg;return rg=t,e}var og={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function fC(t){if(!(yl(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===gl)){if(!t.producerMustRecompute(t)&&!ml(t)){t.dirty=!1,t.lastCleanEpoch=gl;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=gl}}function sg(t){return t&&(t.nextProducerIndex=0),q(t)}function ag(t,e){if(q(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(yl(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)vl(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function ml(t){Es(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(fC(n),r!==n.version))return!0}return!1}function cg(t){if(Es(t),yl(t))for(let e=0;e<t.producerNode.length;e++)vl(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function vl(t,e){if(hC(t),Es(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)vl(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Es(i),i.producerIndexOfThis[r]=e}}function yl(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Es(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function hC(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function pC(){throw new Error}var gC=pC;function lg(t){gC=t}function R(t){return typeof t=="function"}function hr(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Cs=hr(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Nn(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var oe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(R(r))try{r()}catch(o){e=o instanceof Cs?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{ug(o)}catch(s){e=e??[],s instanceof Cs?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Cs(e)}}add(e){var n;if(e&&e!==this)if(this.closed)ug(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Nn(n,e)}remove(e){let{_finalizers:n}=this;n&&Nn(n,e),e instanceof t&&e._removeParent(this)}};oe.EMPTY=(()=>{let t=new oe;return t.closed=!0,t})();var _l=oe.EMPTY;function Ds(t){return t instanceof oe||t&&"closed"in t&&R(t.remove)&&R(t.add)&&R(t.unsubscribe)}function ug(t){R(t)?t():t.unsubscribe()}var tt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var pr={setTimeout(t,e,...n){let{delegate:r}=pr;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=pr;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function bs(t){pr.setTimeout(()=>{let{onUnhandledError:e}=tt;if(e)e(t);else throw t})}function Pi(){}var dg=Il("C",void 0,void 0);function fg(t){return Il("E",void 0,t)}function hg(t){return Il("N",t,void 0)}function Il(t,e,n){return{kind:t,value:e,error:n}}var Rn=null;function gr(t){if(tt.useDeprecatedSynchronousErrorHandling){let e=!Rn;if(e&&(Rn={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Rn;if(Rn=null,n)throw r}}else t()}function pg(t){tt.useDeprecatedSynchronousErrorHandling&&Rn&&(Rn.errorThrown=!0,Rn.error=t)}var xn=class extends oe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ds(e)&&e.add(this)):this.destination=yC}static create(e,n,r){return new mr(e,n,r)}next(e){this.isStopped?El(hg(e),this):this._next(e)}error(e){this.isStopped?El(fg(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?El(dg,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},mC=Function.prototype.bind;function wl(t,e){return mC.call(t,e)}var Cl=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Ss(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Ss(r)}else Ss(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ss(n)}}},mr=class extends xn{constructor(e,n,r){super();let i;if(R(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&tt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&wl(e.next,o),error:e.error&&wl(e.error,o),complete:e.complete&&wl(e.complete,o)}):i=e}this.destination=new Cl(i)}};function Ss(t){tt.useDeprecatedSynchronousErrorHandling?pg(t):bs(t)}function vC(t){throw t}function El(t,e){let{onStoppedNotification:n}=tt;n&&pr.setTimeout(()=>n(t,e))}var yC={closed:!0,next:Pi,error:vC,complete:Pi};var vr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function je(t){return t}function Dl(...t){return bl(t)}function bl(t){return t.length===0?je:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var H=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=IC(n)?n:new mr(n,r,i);return gr(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=gg(r),new r((i,o)=>{let s=new mr({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[vr](){return this}pipe(...n){return bl(n)(this)}toPromise(n){return n=gg(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function gg(t){var e;return(e=t??tt.Promise)!==null&&e!==void 0?e:Promise}function _C(t){return t&&R(t.next)&&R(t.error)&&R(t.complete)}function IC(t){return t&&t instanceof xn||_C(t)&&Ds(t)}function Sl(t){return R(t?.lift)}function W(t){return e=>{if(Sl(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function z(t,e,n,r,i){return new Tl(t,e,n,r,i)}var Tl=class extends xn{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function yr(){return W((t,e)=>{let n=null;t._refCount++;let r=z(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var _r=class extends H{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Sl(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new oe;let n=this.getSubject();e.add(this.source.subscribe(z(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=oe.EMPTY)}return e}refCount(){return yr()(this)}};var mg=hr(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var De=(()=>{class t extends H{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Ts(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new mg}next(n){gr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){gr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){gr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?_l:(this.currentObservers=null,o.push(n),new oe(()=>{this.currentObservers=null,Nn(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new H;return n.source=this,n}}return t.create=(e,n)=>new Ts(e,n),t})(),Ts=class extends De{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:_l}};var me=class extends De{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Al={now(){return(Al.delegate||Date).now()},delegate:void 0};var As=class extends oe{constructor(e,n){super()}schedule(e,n=0){return this}};var ki={setInterval(t,e,...n){let{delegate:r}=ki;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=ki;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Ir=class extends As{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return ki.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&ki.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Nn(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var wr=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};wr.now=Al.now;var Er=class extends wr{constructor(e,n=wr.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Ml=new Er(Ir);var Ms=class extends Ir{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Ns=class extends Er{};var Nl=new Ns(Ms);var Ue=new H(t=>t.complete());function vg(t){return t&&R(t.schedule)}function yg(t){return t[t.length-1]}function _g(t){return R(yg(t))?t.pop():void 0}function Zt(t){return vg(yg(t))?t.pop():void 0}function Rl(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function wg(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function Ig(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function On(t){return this instanceof On?(this.v=t,this):new On(t)}function Eg(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(f){r[f]&&(i[f]=function(h){return new Promise(function(p,v){o.push([f,h,p,v])>1||a(f,h)})})}function a(f,h){try{c(r[f](h))}catch(p){d(o[0][3],p)}}function c(f){f.value instanceof On?Promise.resolve(f.value.v).then(l,u):d(o[0][2],f)}function l(f){a("next",f)}function u(f){a("throw",f)}function d(f,h){f(h),o.shift(),o.length&&a(o[0][0],o[0][1])}}function Cg(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Ig=="function"?Ig(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var Rs=t=>t&&typeof t.length=="number"&&typeof t!="function";function xs(t){return R(t?.then)}function Os(t){return R(t[vr])}function Ps(t){return Symbol.asyncIterator&&R(t?.[Symbol.asyncIterator])}function ks(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function wC(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ls=wC();function Fs(t){return R(t?.[Ls])}function js(t){return Eg(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield On(n.read());if(i)return yield On(void 0);yield yield On(r)}}finally{n.releaseLock()}})}function Us(t){return R(t?.getReader)}function he(t){if(t instanceof H)return t;if(t!=null){if(Os(t))return EC(t);if(Rs(t))return CC(t);if(xs(t))return DC(t);if(Ps(t))return Dg(t);if(Fs(t))return bC(t);if(Us(t))return SC(t)}throw ks(t)}function EC(t){return new H(e=>{let n=t[vr]();if(R(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function CC(t){return new H(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function DC(t){return new H(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,bs)})}function bC(t){return new H(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Dg(t){return new H(e=>{TC(t,e).catch(n=>e.error(n))})}function SC(t){return Dg(js(t))}function TC(t,e){var n,r,i,o;return wg(this,void 0,void 0,function*(){try{for(n=Cg(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Ae(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Jt(t,e=0){return W((n,r)=>{n.subscribe(z(r,i=>Ae(r,t,()=>r.next(i),e),()=>Ae(r,t,()=>r.complete(),e),i=>Ae(r,t,()=>r.error(i),e)))})}function Xt(t,e=0){return W((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function bg(t,e){return he(t).pipe(Xt(e),Jt(e))}function Sg(t,e){return he(t).pipe(Xt(e),Jt(e))}function Tg(t,e){return new H(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Ag(t,e){return new H(n=>{let r;return Ae(n,e,()=>{r=t[Ls](),Ae(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>R(r?.return)&&r.return()})}function Vs(t,e){if(!t)throw new Error("Iterable cannot be null");return new H(n=>{Ae(n,e,()=>{let r=t[Symbol.asyncIterator]();Ae(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Mg(t,e){return Vs(js(t),e)}function Ng(t,e){if(t!=null){if(Os(t))return bg(t,e);if(Rs(t))return Tg(t,e);if(xs(t))return Sg(t,e);if(Ps(t))return Vs(t,e);if(Fs(t))return Ag(t,e);if(Us(t))return Mg(t,e)}throw ks(t)}function re(t,e){return e?Ng(t,e):he(t)}function T(...t){let e=Zt(t);return re(t,e)}function Cr(t,e){let n=R(t)?t:()=>t,r=i=>i.error(n());return new H(e?i=>e.schedule(r,0,i):r)}function xl(t){return!!t&&(t instanceof H||R(t.lift)&&R(t.subscribe))}var Pt=hr(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function E(t,e){return W((n,r)=>{let i=0;n.subscribe(z(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:AC}=Array;function MC(t,e){return AC(e)?t(...e):t(e)}function Rg(t){return E(e=>MC(t,e))}var{isArray:NC}=Array,{getPrototypeOf:RC,prototype:xC,keys:OC}=Object;function xg(t){if(t.length===1){let e=t[0];if(NC(e))return{args:e,keys:null};if(PC(e)){let n=OC(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function PC(t){return t&&typeof t=="object"&&RC(t)===xC}function Og(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Ve(...t){let e=Zt(t),n=_g(t),{args:r,keys:i}=xg(t);if(r.length===0)return re([],e);let o=new H(kC(r,e,i?s=>Og(i,s):je));return n?o.pipe(Rg(n)):o}function kC(t,e,n=je){return r=>{Pg(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)Pg(e,()=>{let l=re(t[c],e),u=!1;l.subscribe(z(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Pg(t,e,n){t?Ae(n,t,e):e()}function kg(t,e,n,r,i,o,s,a){let c=[],l=0,u=0,d=!1,f=()=>{d&&!c.length&&!l&&e.complete()},h=v=>l<r?p(v):c.push(v),p=v=>{o&&e.next(v),l++;let I=!1;he(n(v,u++)).subscribe(z(e,P=>{i?.(P),o?h(P):e.next(P)},()=>{I=!0},void 0,()=>{if(I)try{for(l--;c.length&&l<r;){let P=c.shift();s?Ae(e,s,()=>p(P)):p(P)}f()}catch(P){e.error(P)}}))};return t.subscribe(z(e,h,()=>{d=!0,f()})),()=>{a?.()}}function ce(t,e,n=1/0){return R(e)?ce((r,i)=>E((o,s)=>e(r,o,i,s))(he(t(r,i))),n):(typeof e=="number"&&(n=e),W((r,i)=>kg(r,i,t,n)))}function Dr(t=1/0){return ce(je,t)}function Lg(){return Dr(1)}function br(...t){return Lg()(re(t,Zt(t)))}function $s(t){return new H(e=>{he(t()).subscribe(e)})}function ze(t,e){return W((n,r)=>{let i=0;n.subscribe(z(r,o=>t.call(e,o,i++)&&r.next(o)))})}function en(t){return W((e,n)=>{let r=null,i=!1,o;r=e.subscribe(z(n,void 0,void 0,s=>{o=he(t(s,en(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Fg(t,e,n,r,i){return(o,s)=>{let a=n,c=e,l=0;o.subscribe(z(s,u=>{let d=l++;c=a?t(c,u,d):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Pn(t,e){return R(e)?ce(t,e,1):ce(t,1)}function tn(t){return W((e,n)=>{let r=!1;e.subscribe(z(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function kt(t){return t<=0?()=>Ue:W((e,n)=>{let r=0;e.subscribe(z(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Ol(t){return E(()=>t)}function Bs(t=LC){return W((e,n)=>{let r=!1;e.subscribe(z(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function LC(){return new Pt}function Li(t){return W((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function gt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?ze((i,o)=>t(i,o,r)):je,kt(1),n?tn(e):Bs(()=>new Pt))}function Sr(t){return t<=0?()=>Ue:W((e,n)=>{let r=[];e.subscribe(z(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Pl(t,e){let n=arguments.length>=2;return r=>r.pipe(t?ze((i,o)=>t(i,o,r)):je,Sr(1),n?tn(e):Bs(()=>new Pt))}function kl(t,e){return W(Fg(t,e,arguments.length>=2,!0))}function Ll(...t){let e=Zt(t);return W((n,r)=>{(e?br(t,n,e):br(t,n)).subscribe(r)})}function qe(t,e){return W((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(z(r,c=>{i?.unsubscribe();let l=0,u=o++;he(t(c,u)).subscribe(i=z(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Fl(t){return W((e,n)=>{he(t).subscribe(z(n,()=>n.complete(),Pi)),!n.closed&&e.subscribe(n)})}function le(t,e,n){let r=R(t)||e||n?{next:t,error:e,complete:n}:t;return r?W((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(z(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):je}var FC="https://g.co/ng/security#xss",D=class extends Error{constructor(e,n){super($u(e,n)),this.code=e}};function $u(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Ki(t){return{toString:t}.toString()}var Hs="__parameters__";function jC(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function wm(t,e,n){return Ki(()=>{let r=jC(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,u){let d=c.hasOwnProperty(Hs)?c[Hs]:Object.defineProperty(c,Hs,{value:[]})[Hs];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Fn=globalThis;function ee(t){for(let e in t)if(t[e]===ee)return e;throw Error("Could not find renamed property on target object.")}function Ne(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Ne).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Jl(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var UC=ee({__forward_ref__:ee});function Em(t){return t.__forward_ref__=Em,t.toString=function(){return Ne(this())},t}function Ge(t){return Cm(t)?t():t}function Cm(t){return typeof t=="function"&&t.hasOwnProperty(UC)&&t.__forward_ref__===Em}function w(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Qi(t){return{providers:t.providers||[],imports:t.imports||[]}}function va(t){return jg(t,bm)||jg(t,Sm)}function Dm(t){return va(t)!==null}function jg(t,e){return t.hasOwnProperty(e)?t[e]:null}function VC(t){let e=t&&(t[bm]||t[Sm]);return e||null}function Ug(t){return t&&(t.hasOwnProperty(Vg)||t.hasOwnProperty($C))?t[Vg]:null}var bm=ee({\u0275prov:ee}),Vg=ee({\u0275inj:ee}),Sm=ee({ngInjectableDef:ee}),$C=ee({ngInjectorDef:ee}),A=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=w({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Tm(t){return t&&!!t.\u0275providers}var BC=ee({\u0275cmp:ee}),HC=ee({\u0275dir:ee}),WC=ee({\u0275pipe:ee}),zC=ee({\u0275mod:ee}),Qs=ee({\u0275fac:ee}),Fi=ee({__NG_ELEMENT_ID__:ee}),$g=ee({__NG_ENV_ID__:ee});function Zs(t){return typeof t=="string"?t:t==null?"":String(t)}function qC(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Zs(t)}function GC(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new D(-200,t)}function Bu(t,e){throw new D(-201,!1)}var k=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(k||{}),Xl;function Am(){return Xl}function Me(t){let e=Xl;return Xl=t,e}function Mm(t,e,n){let r=va(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&k.Optional)return null;if(e!==void 0)return e;Bu(t,"Injector")}var YC={},ji=YC,eu="__NG_DI_FLAG__",Js="ngTempTokenPath",KC="ngTokenPath",QC=/\n/gm,ZC="\u0275",Bg="__source",Rr;function JC(){return Rr}function nn(t){let e=Rr;return Rr=t,e}function XC(t,e=k.Default){if(Rr===void 0)throw new D(-203,!1);return Rr===null?Mm(t,void 0,e):Rr.get(t,e&k.Optional?null:void 0,e)}function S(t,e=k.Default){return(Am()||XC)(Ge(t),e)}function m(t,e=k.Default){return S(t,ya(e))}function ya(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function tu(t){let e=[];for(let n=0;n<t.length;n++){let r=Ge(t[n]);if(Array.isArray(r)){if(r.length===0)throw new D(900,!1);let i,o=k.Default;for(let s=0;s<r.length;s++){let a=r[s],c=eD(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(S(i,o))}else e.push(S(r))}return e}function Nm(t,e){return t[eu]=e,t.prototype[eu]=e,t}function eD(t){return t[eu]}function tD(t,e,n,r){let i=t[Js];throw e[Bg]&&i.unshift(e[Bg]),t.message=nD(`
`+t.message,i,n,r),t[KC]=i,t[Js]=null,t}function nD(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==ZC?t.slice(2):t;let i=Ne(e);if(Array.isArray(e))i=e.map(Ne).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Ne(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(QC,`
  `)}`}var Qe=Nm(wm("Optional"),8);var Hu=Nm(wm("SkipSelf"),4);function Un(t,e){let n=t.hasOwnProperty(Qs);return n?t[Qs]:null}function Wu(t,e){t.forEach(n=>Array.isArray(n)?Wu(n,e):e(n))}function Rm(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Xs(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function rD(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function zu(t,e,n){let r=Zi(t,e);return r>=0?t[r|1]=n:(r=~r,rD(t,r,e,n)),r}function jl(t,e){let n=Zi(t,e);if(n>=0)return t[n|1]}function Zi(t,e){return iD(t,e,1)}function iD(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Ui={},$e=[],Or=new A(""),xm=new A("",-1),Om=new A(""),ea=class{get(e,n=ji){if(n===ji){let r=new Error(`NullInjectorError: No provider for ${Ne(e)}!`);throw r.name="NullInjectorError",r}return n}},Pm=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Pm||{}),yt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(yt||{}),Pr=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Pr||{});function oD(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function nu(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];aD(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function sD(t){return t===3||t===4||t===6}function aD(t){return t.charCodeAt(0)===64}function qu(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Hg(t,n,i,null,e[++r]):Hg(t,n,i,null,null))}}return t}function Hg(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var km="ng-template";function cD(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&oD(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Gu(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Gu(t){return t.type===4&&t.value!==km}function lD(t,e,n){let r=t.type===4&&!n?km:t.value;return e===r}function uD(t,e,n){let r=4,i=t.attrs,o=i!==null?hD(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!nt(r)&&!nt(c))return!1;if(s&&nt(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!lD(t,c,n)||c===""&&e.length===1){if(nt(r))return!1;s=!0}}else if(r&8){if(i===null||!cD(t,i,c,n)){if(nt(r))return!1;s=!0}}else{let l=e[++a],u=dD(c,i,Gu(t),n);if(u===-1){if(nt(r))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(nt(r))return!1;s=!0}}}}return nt(r)||s}function nt(t){return(t&1)===0}function dD(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return pD(e,t)}function fD(t,e,n=!1){for(let r=0;r<e.length;r++)if(uD(t,e[r],n))return!0;return!1}function hD(t){for(let e=0;e<t.length;e++){let n=t[e];if(sD(n))return e}return t.length}function pD(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function Wg(t,e){return t?":not("+e.trim()+")":e}function gD(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!nt(s)&&(e+=Wg(o,i),i=""),r=s,o=o||!nt(r);n++}return i!==""&&(e+=Wg(o,i)),e}function mD(t){return t.map(gD).join(",")}function vD(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!nt(i))break;i=o}r++}return{attrs:e,classes:n}}function ln(t){return Ki(()=>{let e=Vm(t),n=ne(_({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Pm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||yt.Emulated,styles:t.styles||$e,_:null,schemas:t.schemas||null,tView:null,id:""});$m(n);let r=t.dependencies;return n.directiveDefs=qg(r,!1),n.pipeDefs=qg(r,!0),n.id=ID(n),n})}function yD(t){return sn(t)||Lm(t)}function _D(t){return t!==null}function Ji(t){return Ki(()=>({type:t.type,bootstrap:t.bootstrap||$e,declarations:t.declarations||$e,imports:t.imports||$e,exports:t.exports||$e,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function zg(t,e){if(t==null)return Ui;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=Pr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==Pr.None?[r,a]:r,e[o]=s):n[o]=r}return n}function Wr(t){return Ki(()=>{let e=Vm(t);return $m(e),e})}function Yu(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function sn(t){return t[BC]||null}function Lm(t){return t[HC]||null}function Fm(t){return t[WC]||null}function jm(t){let e=sn(t)||Lm(t)||Fm(t);return e!==null?e.standalone:!1}function Um(t,e){let n=t[zC]||null;if(!n&&e===!0)throw new Error(`Type ${Ne(t)} does not have '\u0275mod' property.`);return n}function Vm(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ui,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||$e,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:zg(t.inputs,e),outputs:zg(t.outputs),debugInfo:null}}function $m(t){t.features?.forEach(e=>e(t))}function qg(t,e){if(!t)return null;let n=e?Fm:yD;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(_D)}function ID(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function un(t){return{\u0275providers:t}}function wD(...t){return{\u0275providers:Bm(!0,t),\u0275fromNgModule:!0}}function Bm(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Wu(e,s=>{let a=s;ru(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Hm(i,o),n}function Hm(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Ku(i,o=>{e(o,r)})}}function ru(t,e,n,r){if(t=Ge(t),!t)return!1;let i=null,o=Ug(t),s=!o&&sn(t);if(!o&&!s){let c=t.ngModule;if(o=Ug(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)ru(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Wu(o.imports,u=>{ru(u,e,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&Hm(l,e)}if(!a){let l=Un(i)||(()=>new i);e({provide:i,useFactory:l,deps:$e},i),e({provide:Om,useValue:i,multi:!0},i),e({provide:Or,useValue:()=>S(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=t;Ku(c,u=>{e(u,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Ku(t,e){for(let n of t)Tm(n)&&(n=n.\u0275providers),Array.isArray(n)?Ku(n,e):e(n)}var ED=ee({provide:String,useValue:ee});function Wm(t){return t!==null&&typeof t=="object"&&ED in t}function CD(t){return!!(t&&t.useExisting)}function DD(t){return!!(t&&t.useFactory)}function iu(t){return typeof t=="function"}var _a=new A(""),zs={},bD={},Ul;function Qu(){return Ul===void 0&&(Ul=new ea),Ul}var Re=class{},Vi=class extends Re{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,su(e,s=>this.processProvider(s)),this.records.set(xm,Tr(void 0,this)),i.has("environment")&&this.records.set(Re,Tr(void 0,this));let o=this.records.get(_a);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Om,$e,k.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=q(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),q(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=nn(this),r=Me(void 0),i;try{return e()}finally{nn(n),Me(r)}}get(e,n=ji,r=k.Default){if(this.assertNotDestroyed(),e.hasOwnProperty($g))return e[$g](this);r=ya(r);let i,o=nn(this),s=Me(void 0);try{if(!(r&k.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=RD(e)&&va(e);l&&this.injectableDefInScope(l)?c=Tr(ou(e),zs):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&k.Self?Qu():this.parent;return n=r&k.Optional&&n===ji?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Js]=a[Js]||[]).unshift(Ne(e)),o)throw a;return tD(a,e,"R3InjectorError",this.source)}else throw a}finally{Me(s),nn(o)}}resolveInjectorInitializers(){let e=q(null),n=nn(this),r=Me(void 0),i;try{let o=this.get(Or,$e,k.Self);for(let s of o)s()}finally{nn(n),Me(r),q(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Ne(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new D(205,!1)}processProvider(e){e=Ge(e);let n=iu(e)?e:Ge(e&&e.provide),r=TD(e);if(!iu(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Tr(void 0,zs,!0),i.factory=()=>tu(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=q(null);try{return n.value===zs&&(n.value=bD,n.value=n.factory()),typeof n.value=="object"&&n.value&&ND(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{q(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ge(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function ou(t){let e=va(t),n=e!==null?e.factory:Un(t);if(n!==null)return n;if(t instanceof A)throw new D(204,!1);if(t instanceof Function)return SD(t);throw new D(204,!1)}function SD(t){if(t.length>0)throw new D(204,!1);let n=VC(t);return n!==null?()=>n.factory(t):()=>new t}function TD(t){if(Wm(t))return Tr(void 0,t.useValue);{let e=AD(t);return Tr(e,zs)}}function AD(t,e,n){let r;if(iu(t)){let i=Ge(t);return Un(i)||ou(i)}else if(Wm(t))r=()=>Ge(t.useValue);else if(DD(t))r=()=>t.useFactory(...tu(t.deps||[]));else if(CD(t))r=()=>S(Ge(t.useExisting));else{let i=Ge(t&&(t.useClass||t.provide));if(MD(t))r=()=>new i(...tu(t.deps));else return Un(i)||ou(i)}return r}function Tr(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function MD(t){return!!t.deps}function ND(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function RD(t){return typeof t=="function"||typeof t=="object"&&t instanceof A}function su(t,e){for(let n of t)Array.isArray(n)?su(n,e):n&&Tm(n)?su(n.\u0275providers,e):e(n)}function st(t,e){t instanceof Vi&&t.assertNotDestroyed();let n,r=nn(t),i=Me(void 0);try{return e()}finally{nn(r),Me(i)}}function zm(){return Am()!==void 0||JC()!=null}function xD(t){if(!zm())throw new D(-203,!1)}function OD(t){return typeof t=="function"}var jt=0,B=1,N=2,Se=3,it=4,at=5,ta=6,$i=7,ot=8,kr=9,Lt=10,Ie=11,Bi=12,Gg=13,zr=14,_t=15,Lr=16,Ar=17,Fr=18,Ia=19,qm=20,rn=21,Vl=22,Vn=23,Ke=25,Gm=1;var $n=7,na=8,ra=9,Ye=10,ia=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(ia||{});function on(t){return Array.isArray(t)&&typeof t[Gm]=="object"}function Ut(t){return Array.isArray(t)&&t[Gm]===!0}function Ym(t){return(t.flags&4)!==0}function wa(t){return t.componentOffset>-1}function Zu(t){return(t.flags&1)===1}function Xi(t){return!!t.template}function au(t){return(t[N]&512)!==0}var cu=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Km(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Ea(){return Qm}function Qm(t){return t.type.prototype.ngOnChanges&&(t.setInput=kD),PD}Ea.ngInherit=!0;function PD(){let t=Jm(this),e=t?.current;if(e){let n=t.previous;if(n===Ui)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function kD(t,e,n,r,i){let o=this.declaredInputs[r],s=Jm(t)||LD(t,{previous:Ui,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new cu(l&&l.currentValue,n,c===Ui),Km(t,e,i,n)}var Zm="__ngSimpleChanges__";function Jm(t){return t[Zm]||null}function LD(t,e){return t[Zm]=e}var Yg=null;var mt=function(t,e,n){Yg?.(t,e,n)},FD="svg",jD="math";function It(t){for(;Array.isArray(t);)t=t[jt];return t}function Xm(t,e){return It(e[t])}function ct(t,e){return It(e[t.index])}function ev(t,e){return t.data[e]}function Ju(t,e){return t[e]}function dn(t,e){let n=e[t];return on(n)?n:n[jt]}function Xu(t){return(t[N]&128)===128}function UD(t){return Ut(t[Se])}function oa(t,e){return e==null?null:t[e]}function tv(t){t[Ar]=0}function VD(t){t[N]&1024||(t[N]|=1024,Xu(t)&&Ca(t))}function $D(t,e){for(;t>0;)e=e[zr],t--;return e}function Hi(t){return!!(t[N]&9216||t[Vn]?.dirty)}function lu(t){t[Lt].changeDetectionScheduler?.notify(7),t[N]&64&&(t[N]|=1024),Hi(t)&&Ca(t)}function Ca(t){t[Lt].changeDetectionScheduler?.notify(0);let e=Wi(t);for(;e!==null&&!(e[N]&8192||(e[N]|=8192,!Xu(e)));)e=Wi(e)}function nv(t,e){if((t[N]&256)===256)throw new D(911,!1);t[rn]===null&&(t[rn]=[]),t[rn].push(e)}function BD(t,e){if(t[rn]===null)return;let n=t[rn].indexOf(e);n!==-1&&t[rn].splice(n,1)}function Wi(t){let e=t[Se];return Ut(e)?e[Se]:e}var L={lFrame:hv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var rv=!1;function HD(){return L.lFrame.elementDepthCount}function WD(){L.lFrame.elementDepthCount++}function zD(){L.lFrame.elementDepthCount--}function iv(){return L.bindingsEnabled}function qD(){return L.skipHydrationRootTNode!==null}function GD(t){return L.skipHydrationRootTNode===t}function YD(){L.skipHydrationRootTNode=null}function ie(){return L.lFrame.lView}function Vt(){return L.lFrame.tView}function qr(t){return L.lFrame.contextLView=t,t[ot]}function Gr(t){return L.lFrame.contextLView=null,t}function Ze(){let t=ov();for(;t!==null&&t.type===64;)t=t.parent;return t}function ov(){return L.lFrame.currentTNode}function KD(){let t=L.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function eo(t,e){let n=L.lFrame;n.currentTNode=t,n.isParent=e}function sv(){return L.lFrame.isParent}function QD(){L.lFrame.isParent=!1}function ZD(){return L.lFrame.contextLView}function av(){return rv}function Kg(t){rv=t}function ed(){let t=L.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function JD(){return L.lFrame.bindingIndex}function XD(t){return L.lFrame.bindingIndex=t}function cv(){return L.lFrame.bindingIndex++}function lv(t){let e=L.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function eb(){return L.lFrame.inI18n}function tb(t,e){let n=L.lFrame;n.bindingIndex=n.bindingRootIndex=t,uu(e)}function nb(){return L.lFrame.currentDirectiveIndex}function uu(t){L.lFrame.currentDirectiveIndex=t}function rb(t){let e=L.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function uv(t){L.lFrame.currentQueryIndex=t}function ib(t){let e=t[B];return e.type===2?e.declTNode:e.type===1?t[at]:null}function dv(t,e,n){if(n&k.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&k.Host);)if(i=ib(o),i===null||(o=o[zr],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=L.lFrame=fv();return r.currentTNode=e,r.lView=t,!0}function td(t){let e=fv(),n=t[B];L.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function fv(){let t=L.lFrame,e=t===null?null:t.child;return e===null?hv(t):e}function hv(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function pv(){let t=L.lFrame;return L.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var gv=pv;function nd(){let t=pv();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ob(t){return(L.lFrame.contextLView=$D(t,L.lFrame.contextLView))[ot]}function qn(){return L.lFrame.selectedIndex}function Bn(t){L.lFrame.selectedIndex=t}function sb(){let t=L.lFrame;return ev(t.tView,t.selectedIndex)}function ab(){return L.lFrame.currentNamespace}var mv=!0;function rd(){return mv}function id(t){mv=t}function cb(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=Qm(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function od(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function qs(t,e,n){vv(t,e,3,n)}function Gs(t,e,n,r){(t[N]&3)===n&&vv(t,e,n,r)}function $l(t,e){let n=t[N];(n&3)===e&&(n&=16383,n+=1,t[N]=n)}function vv(t,e,n,r){let i=r!==void 0?t[Ar]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Ar]+=65536),(a<o||o==-1)&&(lb(t,n,e,c),t[Ar]=(t[Ar]&4294901760)+c+2),c++}function Qg(t,e){mt(4,t,e);let n=q(null);try{e.call(t)}finally{q(n),mt(5,t,e)}}function lb(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[N]>>14<t[Ar]>>16&&(t[N]&3)===e&&(t[N]+=16384,Qg(a,o)):Qg(a,o)}var xr=-1,zi=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function ub(t){return t instanceof zi}function db(t){return(t.flags&8)!==0}function fb(t){return(t.flags&16)!==0}function yv(t){return t!==xr}function sa(t){return t&32767}function hb(t){return t>>16}function aa(t,e){let n=hb(t),r=e;for(;n>0;)r=r[zr],n--;return r}var du=!0;function ca(t){let e=du;return du=t,e}var pb=256,_v=pb-1,Iv=5,gb=0,vt={};function mb(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Fi)&&(r=n[Fi]),r==null&&(r=n[Fi]=gb++);let i=r&_v,o=1<<i;e.data[t+(i>>Iv)]|=o}function wv(t,e){let n=Ev(t,e);if(n!==-1)return n;let r=e[B];r.firstCreatePass&&(t.injectorIndex=e.length,Bl(r.data,t),Bl(e,null),Bl(r.blueprint,null));let i=sd(t,e),o=t.injectorIndex;if(yv(i)){let s=sa(i),a=aa(i,e),c=a[B].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function Bl(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ev(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function sd(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Tv(i),r===null)return xr;if(n++,i=i[zr],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return xr}function vb(t,e,n){mb(t,e,n)}function Cv(t,e,n){if(n&k.Optional||t!==void 0)return t;Bu(e,"NodeInjector")}function Dv(t,e,n,r){if(n&k.Optional&&r===void 0&&(r=null),!(n&(k.Self|k.Host))){let i=t[kr],o=Me(void 0);try{return i?i.get(e,r,n&k.Optional):Mm(e,r,n&k.Optional)}finally{Me(o)}}return Cv(r,e,n)}function bv(t,e,n,r=k.Default,i){if(t!==null){if(e[N]&2048&&!(r&k.Self)){let s=Eb(t,e,n,r,vt);if(s!==vt)return s}let o=Sv(t,e,n,r,vt);if(o!==vt)return o}return Dv(e,n,r,i)}function Sv(t,e,n,r,i){let o=Ib(n);if(typeof o=="function"){if(!dv(e,t,r))return r&k.Host?Cv(i,n,r):Dv(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&k.Optional))Bu(n);else return s}finally{gv()}}else if(typeof o=="number"){let s=null,a=Ev(t,e),c=xr,l=r&k.Host?e[_t][at]:null;for((a===-1||r&k.SkipSelf)&&(c=a===-1?sd(t,e):e[a+8],c===xr||!Jg(r,!1)?a=-1:(s=e[B],a=sa(c),e=aa(c,e)));a!==-1;){let u=e[B];if(Zg(o,a,u.data)){let d=yb(a,e,n,s,r,l);if(d!==vt)return d}c=e[a+8],c!==xr&&Jg(r,e[B].data[a+8]===l)&&Zg(o,a,e)?(s=u,a=sa(c),e=aa(c,e)):a=-1}}return i}function yb(t,e,n,r,i,o){let s=e[B],a=s.data[t+8],c=r==null?wa(a)&&du:r!=s&&(a.type&3)!==0,l=i&k.Host&&o===a,u=_b(a,s,n,c,l);return u!==null?qi(e,s,u,a):vt}function _b(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,l=t.directiveEnd,u=o>>20,d=r?a:a+u,f=i?a+u:l;for(let h=d;h<f;h++){let p=s[h];if(h<c&&n===p||h>=c&&p.type===n)return h}if(i){let h=s[c];if(h&&Xi(h)&&h.type===n)return c}return null}function qi(t,e,n,r){let i=t[n],o=e.data;if(ub(i)){let s=i;s.resolving&&GC(qC(o[n]));let a=ca(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?Me(s.injectImpl):null,u=dv(t,r,k.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&cb(n,o[n],e)}finally{l!==null&&Me(l),ca(a),s.resolving=!1,gv()}}return i}function Ib(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Fi)?t[Fi]:void 0;return typeof e=="number"?e>=0?e&_v:wb:e}function Zg(t,e,n){let r=1<<t;return!!(n[e+(t>>Iv)]&r)}function Jg(t,e){return!(t&k.Self)&&!(t&k.Host&&e)}var jn=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return bv(this._tNode,this._lView,e,ya(r),n)}};function wb(){return new jn(Ze(),ie())}function ad(t){return Ki(()=>{let e=t.prototype.constructor,n=e[Qs]||fu(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Qs]||fu(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function fu(t){return Cm(t)?()=>{let e=fu(Ge(t));return e&&e()}:Un(t)}function Eb(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[N]&2048&&!(s[N]&512);){let a=Sv(o,s,n,r|k.Self,vt);if(a!==vt)return a;let c=o.parent;if(!c){let l=s[qm];if(l){let u=l.get(n,vt,r);if(u!==vt)return u}c=Tv(s),s=s[zr]}o=c}return i}function Tv(t){let e=t[B],n=e.type;return n===2?e.declTNode:n===1?t[at]:null}function Xg(t,e=null,n=null,r){let i=Av(t,e,n,r);return i.resolveInjectorInitializers(),i}function Av(t,e=null,n=null,r,i=new Set){let o=[n||$e,wD(t)];return r=r||(typeof t=="object"?void 0:Ne(t)),new Vi(o,e||Qu(),r||null,i)}var Ln=class Ln{static create(e,n){if(Array.isArray(e))return Xg({name:""},n,e,"");{let r=e.name??"";return Xg({name:r},e.parent,e.providers,r)}}};Ln.THROW_IF_NOT_FOUND=ji,Ln.NULL=new ea,Ln.\u0275prov=w({token:Ln,providedIn:"any",factory:()=>S(xm)}),Ln.__NG_ELEMENT_ID__=-1;var xe=Ln;var Cb=new A("");Cb.__NG_ELEMENT_ID__=t=>{let e=Ze();if(e===null)throw new D(204,!1);if(e.type&2)return e.value;if(t&k.Optional)return null;throw new D(204,!1)};var Db="ngOriginalError";function Hl(t){return t[Db]}var wt=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Hl(e);for(;n&&Hl(n);)n=Hl(n);return n||null}},Mv=new A("",{providedIn:"root",factory:()=>m(wt).handleError.bind(void 0)}),cd=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=bb,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),hu=class extends cd{constructor(e){super(),this._lView=e}onDestroy(e){return nv(this._lView,e),()=>BD(this._lView,e)}};function bb(){return new hu(ie())}function Sb(){return Da(Ze(),ie())}function Da(t,e){return new to(ct(t,e))}var to=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=Sb;let t=e;return t})();var pu=class extends De{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,zm()&&(this.destroyRef=m(cd,{optional:!0})??void 0)}emit(e){let n=q(null);try{super.next(e)}finally{q(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=Wl(o),i&&(i=Wl(i)),s&&(s=Wl(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof oe&&e.add(a),a}};function Wl(t){return e=>{setTimeout(t,void 0,e)}}var be=pu;function Nv(t){return(t.flags&128)===128}var Rv=new Map,Tb=0;function Ab(){return Tb++}function Mb(t){Rv.set(t[Ia],t)}function Nb(t){Rv.delete(t[Ia])}var em="__ngContext__";function Hn(t,e){on(e)?(t[em]=e[Ia],Mb(e)):t[em]=e}function xv(t){return Pv(t[Bi])}function Ov(t){return Pv(t[it])}function Pv(t){for(;t!==null&&!Ut(t);)t=t[it];return t}var gu;function kv(t){gu=t}function Rb(){if(gu!==void 0)return gu;if(typeof document<"u")return document;throw new D(210,!1)}var ld=new A("",{providedIn:"root",factory:()=>xb}),xb="ng",ud=new A(""),Et=new A("",{providedIn:"platform",factory:()=>"unknown"});var dd=new A("",{providedIn:"root",factory:()=>Rb().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Ob="h",Pb="b";var kb=()=>null;function fd(t,e,n=!1){return kb(t,e,n)}var Lv=!1,Lb=new A("",{providedIn:"root",factory:()=>Lv});var mu=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${FC})`}};function hd(t){return t instanceof mu?t.changingThisBreaksApplicationSecurity:t}function Fv(t){return t instanceof Function?t():t}function Fb(t){return(t??m(xe)).get(Et)==="browser"}var Ft=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ft||{}),jb;function pd(t,e){return jb(t,e)}function Mr(t,e,n,r,i){if(r!=null){let o,s=!1;Ut(r)?o=r:on(r)&&(s=!0,r=r[jt]);let a=It(r);t===0&&n!==null?i==null?Bv(e,n,a):la(e,n,a,i||null,!0):t===1&&n!==null?la(e,n,a,i||null,!0):t===2?eS(e,a,s):t===3&&e.destroyNode(a),o!=null&&nS(e,t,o,n,i)}}function Ub(t,e){return t.createText(e)}function Vb(t,e,n){t.setValue(e,n)}function jv(t,e,n){return t.createElement(e,n)}function $b(t,e){Uv(t,e),e[jt]=null,e[at]=null}function Bb(t,e,n,r,i,o){r[jt]=i,r[at]=e,ba(t,r,n,1,i,o)}function Uv(t,e){e[Lt].changeDetectionScheduler?.notify(8),ba(t,e,e[Ie],2,null,null)}function Hb(t){let e=t[Bi];if(!e)return zl(t[B],t);for(;e;){let n=null;if(on(e))n=e[Bi];else{let r=e[Ye];r&&(n=r)}if(!n){for(;e&&!e[it]&&e!==t;)on(e)&&zl(e[B],e),e=e[Se];e===null&&(e=t),on(e)&&zl(e[B],e),n=e&&e[it]}e=n}}function Wb(t,e,n,r){let i=Ye+r,o=n.length;r>0&&(n[i-1][it]=e),r<o-Ye?(e[it]=n[i],Rm(n,Ye+r,e)):(n.push(e),e[it]=null),e[Se]=n;let s=e[Lr];s!==null&&n!==s&&Vv(s,e);let a=e[Fr];a!==null&&a.insertView(t),lu(e),e[N]|=128}function Vv(t,e){let n=t[ra],r=e[Se];if(on(r))t[N]|=ia.HasTransplantedViews;else{let i=r[Se][_t];e[_t]!==i&&(t[N]|=ia.HasTransplantedViews)}n===null?t[ra]=[e]:n.push(e)}function gd(t,e){let n=t[ra],r=n.indexOf(e);n.splice(r,1)}function vu(t,e){if(t.length<=Ye)return;let n=Ye+e,r=t[n];if(r){let i=r[Lr];i!==null&&i!==t&&gd(i,r),e>0&&(t[n-1][it]=r[it]);let o=Xs(t,Ye+e);$b(r[B],r);let s=o[Fr];s!==null&&s.detachView(o[B]),r[Se]=null,r[it]=null,r[N]&=-129}return r}function $v(t,e){if(!(e[N]&256)){let n=e[Ie];n.destroyNode&&ba(t,e,n,3,null,null),Hb(e)}}function zl(t,e){if(e[N]&256)return;let n=q(null);try{e[N]&=-129,e[N]|=256,e[Vn]&&cg(e[Vn]),qb(t,e),zb(t,e),e[B].type===1&&e[Ie].destroy();let r=e[Lr];if(r!==null&&Ut(e[Se])){r!==e[Se]&&gd(r,e);let i=e[Fr];i!==null&&i.detachView(t)}Nb(e)}finally{q(n)}}function zb(t,e){let n=t.cleanup,r=e[$i];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[$i]=null);let i=e[rn];if(i!==null){e[rn]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function qb(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof zi)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];mt(4,a,c);try{c.call(a)}finally{mt(5,a,c)}}else{mt(4,i,o);try{o.call(i)}finally{mt(5,i,o)}}}}}function Gb(t,e,n){return Yb(t,e.parent,n)}function Yb(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[jt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===yt.None||o===yt.Emulated)return null}return ct(r,n)}}function la(t,e,n,r,i){t.insertBefore(e,n,r,i)}function Bv(t,e,n){t.appendChild(e,n)}function tm(t,e,n,r,i){r!==null?la(t,e,n,r,i):Bv(t,e,n)}function Kb(t,e,n,r){t.removeChild(e,n,r)}function md(t,e){return t.parentNode(e)}function Qb(t,e){return t.nextSibling(e)}function Zb(t,e,n){return Xb(t,e,n)}function Jb(t,e,n){return t.type&40?ct(t,n):null}var Xb=Jb,nm;function vd(t,e,n,r){let i=Gb(t,r,e),o=e[Ie],s=r.parent||e[at],a=Zb(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)tm(o,i,n[c],a,!1);else tm(o,i,n,a,!1);nm!==void 0&&nm(o,r,e,n,i)}function Ys(t,e){if(e!==null){let n=e.type;if(n&3)return ct(e,t);if(n&4)return yu(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Ys(t,r);{let i=t[e.index];return Ut(i)?yu(-1,i):It(i)}}else{if(n&32)return pd(e,t)()||It(t[e.index]);{let r=Hv(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Wi(t[_t]);return Ys(i,r)}else return Ys(t,e.next)}}}return null}function Hv(t,e){if(e!==null){let r=t[_t][at],i=e.projection;return r.projection[i]}return null}function yu(t,e){let n=Ye+t+1;if(n<e.length){let r=e[n],i=r[B].firstChild;if(i!==null)return Ys(r,i)}return e[$n]}function eS(t,e,n){let r=md(t,e);r&&Kb(t,r,e,n)}function yd(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],c=n.type;if(s&&e===0&&(a&&Hn(It(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)yd(t,e,n.child,r,i,o,!1),Mr(e,t,i,a,o);else if(c&32){let l=pd(n,r),u;for(;u=l();)Mr(e,t,i,u,o);Mr(e,t,i,a,o)}else c&16?tS(t,e,r,n,i,o):Mr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function ba(t,e,n,r,i,o){yd(n,r,t.firstChild,e,i,o,!1)}function tS(t,e,n,r,i,o){let s=n[_t],c=s[at].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Mr(e,t,i,u,o)}else{let l=c,u=s[Se];Nv(r)&&(l.flags|=128),yd(t,e,l,u,i,o,!0)}}function nS(t,e,n,r,i){let o=n[$n],s=It(n);o!==s&&Mr(e,t,r,o,i);for(let a=Ye;a<n.length;a++){let c=n[a];ba(c[B],c,t,e,r,o)}}function rS(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Ft.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ft.Important),t.setStyle(n,r,i,o))}}function iS(t,e,n){t.setAttribute(e,"style",n)}function Wv(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function zv(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&nu(t,e,r),i!==null&&Wv(t,e,i),o!==null&&iS(t,e,o)}var Ct={};function U(t=1){qv(Vt(),ie(),qn()+t,!1)}function qv(t,e,n,r){if(!r)if((e[N]&3)===3){let o=t.preOrderCheckHooks;o!==null&&qs(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Gs(e,o,0,n)}Bn(n)}function ue(t,e=k.Default){let n=ie();if(n===null)return S(t,e);let r=Ze();return bv(r,n,Ge(t),e)}function Gv(){let t="invalid";throw new Error(t)}function Yv(t,e,n,r,i,o){let s=q(null);try{let a=null;i&Pr.SignalBased&&(a=e[r][ig]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Pr.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):Km(e,a,r,o)}finally{q(s)}}function oS(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Bn(~i);else{let o=i,s=n[++r],a=n[++r];tb(s,o);let c=e[o];a(2,c)}}}finally{Bn(-1)}}function Sa(t,e,n,r,i,o,s,a,c,l,u){let d=e.blueprint.slice();return d[jt]=i,d[N]=r|4|128|8|64,(l!==null||t&&t[N]&2048)&&(d[N]|=2048),tv(d),d[Se]=d[zr]=t,d[ot]=n,d[Lt]=s||t&&t[Lt],d[Ie]=a||t&&t[Ie],d[kr]=c||t&&t[kr]||null,d[at]=o,d[Ia]=Ab(),d[ta]=u,d[qm]=l,d[_t]=e.type==2?t[_t]:d,d}function Ta(t,e,n,r,i){let o=t.data[e];if(o===null)o=sS(t,e,n,r,i),eb()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=KD();o.injectorIndex=s===null?-1:s.injectorIndex}return eo(o,!0),o}function sS(t,e,n,r,i){let o=ov(),s=sv(),a=s?o:o&&o.parent,c=t.data[e]=dS(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function Kv(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Qv(t,e,n,r,i){let o=qn(),s=r&2;try{Bn(-1),s&&e.length>Ke&&qv(t,e,Ke,!1),mt(s?2:0,i),n(r,i)}finally{Bn(o),mt(s?3:1,i)}}function Zv(t,e,n){if(Ym(e)){let r=q(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{q(r)}}}function Jv(t,e,n){iv()&&(yS(t,e,n,ct(n,e)),(n.flags&64)===64&&ry(t,e,n))}function Xv(t,e,n=ct){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function ey(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=_d(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function _d(t,e,n,r,i,o,s,a,c,l,u){let d=Ke+r,f=d+i,h=aS(d,f),p=typeof l=="function"?l():l;return h[B]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function aS(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ct);return n}function cS(t,e,n,r){let o=r.get(Lb,Lv)||n===yt.ShadowDom,s=t.selectRootElement(e,o);return lS(s),s}function lS(t){uS(t)}var uS=()=>null;function dS(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return qD()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function rm(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=Pr.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}t===0?im(r,n,l,a,c):im(r,n,l,a)}return r}function im(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function fS(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=o[u],f=n?n.get(d):null,h=f?f.inputs:null,p=f?f.outputs:null;c=rm(0,d.inputs,u,c,h),l=rm(1,d.outputs,u,l,p);let v=c!==null&&s!==null&&!Gu(e)?TS(c,u,s):null;a.push(v)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function hS(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function pS(t,e,n,r,i,o,s,a){let c=ct(e,n),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(Id(t,n,u,r,i),wa(e)&&gS(n,e.index)):e.type&3?(r=hS(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function gS(t,e){let n=dn(e,t);n[N]&16||(n[N]|=64)}function ty(t,e,n,r){if(iv()){let i=r===null?null:{"":-1},o=IS(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&ny(t,e,n,s,i,a),i&&wS(n,r,i)}n.mergedAttrs=qu(n.mergedAttrs,n.attrs)}function ny(t,e,n,r,i,o){for(let l=0;l<r.length;l++)vb(wv(n,e),t,r[l].type);CS(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=Kv(t,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=qu(n.mergedAttrs,u.hostAttrs),DS(t,n,e,c,u),ES(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}fS(t,n,o)}function mS(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;vS(s)!=a&&s.push(a),s.push(n,r,o)}}function vS(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function yS(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;wa(n)&&bS(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||wv(n,e),Hn(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let c=t.data[a],l=qi(e,t,a,n);if(Hn(l,e),s!==null&&SS(e,a-i,l,c,n,s),Xi(c)){let u=dn(n.index,e);u[ot]=qi(e,t,a,n)}}}function ry(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=nb();try{Bn(o);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];uu(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&_S(c,l)}}finally{Bn(-1),uu(s)}}function _S(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function IS(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(fD(e,s.selectors,!1))if(r||(r=[]),Xi(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;_u(t,e,c)}else r.unshift(s),_u(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function _u(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function wS(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new D(-301,!1);r.push(e[i],o)}}}function ES(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Xi(e)&&(n[""]=t)}}function CS(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function DS(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Un(i.type,!0)),s=new zi(o,Xi(i),ue);t.blueprint[r]=s,n[r]=s,mS(t,e,r,Kv(t,n,i.hostVars,Ct),i)}function bS(t,e,n){let r=ct(e,t),i=ey(n),o=t[Lt].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Aa(t,Sa(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function SS(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],u=s[a++],d=s[a++];Yv(r,n,c,l,u,d)}}function TS(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function iy(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function oy(t,e){let n=t.contentQueries;if(n!==null){let r=q(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];uv(o),a.contentQueries(2,e[s],s)}}}finally{q(r)}}}function Aa(t,e){return t[Bi]?t[Gg][it]=e:t[Bi]=e,t[Gg]=e,e}function Iu(t,e,n){uv(0);let r=q(null);try{e(t,n)}finally{q(r)}}function AS(t){return t[$i]||(t[$i]=[])}function MS(t){return t.cleanup||(t.cleanup=[])}function sy(t,e){let n=t[kr],r=n?n.get(wt,null):null;r&&r.handleError(e)}function Id(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],l=e[s],u=t.data[s];Yv(u,l,r,a,c,i)}}function ay(t,e,n){let r=Xm(e,t);Vb(t[Ie],r,n)}function NS(t,e){let n=dn(e,t),r=n[B];RS(r,n);let i=n[jt];i!==null&&n[ta]===null&&(n[ta]=fd(i,n[kr])),wd(r,n,n[ot])}function RS(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function wd(t,e,n){td(e);try{let r=t.viewQuery;r!==null&&Iu(1,r,n);let i=t.template;i!==null&&Qv(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Fr]?.finishViewCreation(t),t.staticContentQueries&&oy(t,e),t.staticViewQueries&&Iu(2,t.viewQuery,n);let o=t.components;o!==null&&xS(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[N]&=-5,nd()}}function xS(t,e){for(let n=0;n<e.length;n++)NS(t,e[n])}function OS(t,e,n,r){let i=q(null);try{let o=e.tView,a=t[N]&4096?4096:16,c=Sa(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[Lr]=l;let u=t[Fr];return u!==null&&(c[Fr]=u.createEmbeddedView(o)),wd(o,c,n),c}finally{q(i)}}function om(t,e){return!e||e.firstChild===null||Nv(t)}function PS(t,e,n,r=!0){let i=e[B];if(Wb(i,e,t,n),r){let s=yu(n,t),a=e[Ie],c=md(a,t[$n]);c!==null&&Bb(i,t[at],a,e,c,s)}let o=e[ta];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function ua(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(It(o)),Ut(o)&&kS(o,r);let s=n.type;if(s&8)ua(t,e,n.child,r);else if(s&32){let a=pd(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=Hv(e,n);if(Array.isArray(a))r.push(...a);else{let c=Wi(e[_t]);ua(c[B],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function kS(t,e){for(let n=Ye;n<t.length;n++){let r=t[n],i=r[B].firstChild;i!==null&&ua(r[B],r,i,e)}t[$n]!==t[jt]&&e.push(t[$n])}var cy=[];function LS(t){return t[Vn]??FS(t)}function FS(t){let e=cy.pop()??Object.create(US);return e.lView=t,e}function jS(t){t.lView[Vn]!==t&&(t.lView=null,cy.push(t))}var US=ne(_({},og),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Ca(t.lView)},consumerOnSignalRead(){this.lView[Vn]=this}}),VS=100;function ly(t,e=!0,n=0){let r=t[Lt],i=r.rendererFactory,o=!1;o||i.begin?.();try{$S(t,n)}catch(s){throw e&&sy(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function $S(t,e){let n=av();try{Kg(!0),wu(t,e);let r=0;for(;Hi(t);){if(r===VS)throw new D(103,!1);r++,wu(t,1)}}finally{Kg(n)}}function BS(t,e,n,r){let i=e[N];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Lt].inlineEffectRunner?.flush(),td(e);let a=null,c=null;!o&&HS(t)&&(c=LS(e),a=sg(c));try{tv(e),XD(t.bindingStartIndex),n!==null&&Qv(t,e,n,2,r);let l=(i&3)===3;if(!o)if(l){let f=t.preOrderCheckHooks;f!==null&&qs(e,f,null)}else{let f=t.preOrderHooks;f!==null&&Gs(e,f,0,null),$l(e,0)}if(s||WS(e),uy(e,0),t.contentQueries!==null&&oy(t,e),!o)if(l){let f=t.contentCheckHooks;f!==null&&qs(e,f)}else{let f=t.contentHooks;f!==null&&Gs(e,f,1),$l(e,1)}oS(t,e);let u=t.components;u!==null&&fy(e,u,0);let d=t.viewQuery;if(d!==null&&Iu(2,d,r),!o)if(l){let f=t.viewCheckHooks;f!==null&&qs(e,f)}else{let f=t.viewHooks;f!==null&&Gs(e,f,2),$l(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Vl]){for(let f of e[Vl])f();e[Vl]=null}o||(e[N]&=-73)}catch(l){throw o||Ca(e),l}finally{c!==null&&(ag(c,a),jS(c)),nd()}}function HS(t){return t.type!==2}function uy(t,e){for(let n=xv(t);n!==null;n=Ov(n))for(let r=Ye;r<n.length;r++){let i=n[r];dy(i,e)}}function WS(t){for(let e=xv(t);e!==null;e=Ov(e)){if(!(e[N]&ia.HasTransplantedViews))continue;let n=e[ra];for(let r=0;r<n.length;r++){let i=n[r];VD(i)}}}function zS(t,e,n){let r=dn(e,t);dy(r,n)}function dy(t,e){Xu(t)&&wu(t,e)}function wu(t,e){let r=t[B],i=t[N],o=t[Vn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&ml(o)),s||=!1,o&&(o.dirty=!1),t[N]&=-9217,s)BS(r,t,r.template,t[ot]);else if(i&8192){uy(t,1);let a=r.components;a!==null&&fy(t,a,1)}}function fy(t,e,n){for(let r=0;r<e.length;r++)zS(t,e[r],n)}function Ed(t,e){let n=av()?64:1088;for(t[Lt].changeDetectionScheduler?.notify(e);t;){t[N]|=n;let r=Wi(t);if(au(t)&&!r)return t;t=r}return null}var Wn=class{get rootNodes(){let e=this._lView,n=e[B];return ua(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ot]}set context(e){this._lView[ot]=e}get destroyed(){return(this._lView[N]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Se];if(Ut(e)){let n=e[na],r=n?n.indexOf(this):-1;r>-1&&(vu(e,r),Xs(n,r))}this._attachedToViewContainer=!1}$v(this._lView[B],this._lView)}onDestroy(e){nv(this._lView,e)}markForCheck(){Ed(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[N]&=-129}reattach(){lu(this._lView),this._lView[N]|=128}detectChanges(){this._lView[N]|=1024,ly(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new D(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=au(this._lView),n=this._lView[Lr];n!==null&&!e&&gd(n,this._lView),Uv(this._lView[B],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new D(902,!1);this._appRef=e;let n=au(this._lView),r=this._lView[Lr];r!==null&&!n&&Vv(r,this._lView),lu(this._lView)}},Ma=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=YS;let t=e;return t})(),qS=Ma,GS=class extends qS{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=OS(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Wn(i)}};function YS(){return hy(Ze(),ie())}function hy(t,e){return t.type&4?new GS(e,t,Da(t,e)):null}var j$=new RegExp(`^(\\d+)*(${Pb}|${Ob})*(.*)`);var KS=()=>null;function sm(t,e){return KS(t,e)}var jr=class{},Cd=new A("",{providedIn:"root",factory:()=>!1});var py=new A(""),Eu=class{},da=class{};function QS(t){let e=Error(`No component factory found for ${Ne(t)}.`);return e[ZS]=t,e}var ZS="ngComponent";var Cu=class{resolveComponentFactory(e){throw QS(e)}},Rd=class Rd{};Rd.NULL=new Cu;var Ur=Rd,Vr=class{},Na=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>JS();let t=e;return t})();function JS(){let t=ie(),e=Ze(),n=dn(e.index,t);return(on(n)?n:t)[Ie]}var XS=(()=>{let e=class e{};e.\u0275prov=w({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),ql={};var am=new Set;function Ra(t){am.has(t)||(am.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function gy(t){let e=!0;return setTimeout(()=>{e&&(e=!1,t())}),typeof Fn.requestAnimationFrame=="function"&&Fn.requestAnimationFrame(()=>{e&&(e=!1,t())}),()=>{e=!1}}function cm(t){let e=!0;return queueMicrotask(()=>{e&&t()}),()=>{e=!1}}function lm(...t){}var Q=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new be(!1),this.onMicrotaskEmpty=new be(!1),this.onStable=new be(!1),this.onError=new be(!1),typeof Zone>"u")throw new D(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.callbackScheduled=!1,nT(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new D(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new D(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,eT,lm,lm);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},eT={};function Dd(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function tT(t){t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,Zone.root.run(()=>{gy(()=>{t.callbackScheduled=!1,Du(t),t.isCheckStableRunning=!0,Dd(t),t.isCheckStableRunning=!1})}),Du(t))}function nT(t){let e=()=>{tT(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(rT(a))return n.invokeTask(i,o,s,a);try{return um(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),dm(t)}},onInvoke:(n,r,i,o,s,a,c)=>{try{return um(t),n.invoke(i,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!iT(a)&&e(),dm(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Du(t),Dd(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Du(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function um(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function dm(t){t._nesting--,Dd(t)}var bu=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new be,this.onMicrotaskEmpty=new be,this.onStable=new be,this.onError=new be}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function rT(t){return my(t,"__ignore_ng_zone__")}function iT(t){return my(t,"__scheduler_tick__")}function my(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Nr=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Nr||{}),oT={destroy(){}};function xa(t,e){!e&&xD(xa);let n=e?.injector??m(xe);if(!Fb(n))return oT;Ra("NgAfterNextRender");let r=n.get(bd),i=r.handler??=new Tu,o=e?.phase??Nr.MixedReadWrite,s=()=>{i.unregister(c),a()},a=n.get(cd).onDestroy(s),c=st(n,()=>new Su(o,()=>{s(),t()}));return i.register(c),{destroy:s}}var Su=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=m(Q),this.errorHandler=m(wt,{optional:!0}),m(jr,{optional:!0})?.notify(6)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},Tu=class{constructor(){this.executingCallbacks=!1,this.buckets={[Nr.EarlyRead]:new Set,[Nr.Write]:new Set,[Nr.MixedReadWrite]:new Set,[Nr.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},bd=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=w({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Au(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Jl(i,a);else if(o==2){let c=a,l=e[++s];r=Jl(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var fa=class extends Ur{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=sn(e);return new $r(n,this.ngModule)}};function fm(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function sT(t){let e=t.toLowerCase();return e==="svg"?FD:e==="math"?jD:null}var Mu=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=ya(r);let i=this.injector.get(e,ql,r);return i!==ql||n===ql?i:this.parentInjector.get(e,n,r)}},$r=class extends da{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=fm(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return fm(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=mD(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=q(null);try{i=i||this.ngModule;let s=i instanceof Re?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Mu(e,s):e,c=a.get(Vr,null);if(c===null)throw new D(407,!1);let l=a.get(XS,null),u=a.get(bd,null),d=a.get(jr,null),f={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:d},h=c.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",v=r?cS(h,r,this.componentDef.encapsulation,a):jv(h,p,sT(p)),I=512;this.componentDef.signals?I|=4096:this.componentDef.onPush||(I|=16);let P=null;v!==null&&(P=fd(v,a,!0));let X=_d(0,null,null,1,0,null,null,null,null,null,null),$=Sa(null,X,null,I,null,null,f,h,a,null,P);td($);let ae,We;try{let Ce=this.componentDef,Ot,xi=null;Ce.findHostDirectiveDefs?(Ot=[],xi=new Map,Ce.findHostDirectiveDefs(Ce,Ot,xi),Ot.push(Ce)):Ot=[Ce];let Oi=aT($,v),pl=cT(Oi,v,Ce,Ot,$,f,h);We=ev(X,Ke),v&&dT(h,Ce,v,r),n!==void 0&&fT(We,this.ngContentSelectors,n),ae=uT(pl,Ce,Ot,xi,$,[hT]),wd(X,$,null)}finally{nd()}return new Nu(this.componentType,ae,Da(We,$),$,We)}finally{q(o)}}},Nu=class extends Eu{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Wn(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;Id(o[B],o,i,e,n),this.previousInputValues.set(e,n);let s=dn(this._tNode.index,o);Ed(s,1)}}get injector(){return new jn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function aT(t,e){let n=t[B],r=Ke;return t[r]=e,Ta(n,r,2,"#host",null)}function cT(t,e,n,r,i,o,s){let a=i[B];lT(r,t,e,s);let c=null;e!==null&&(c=fd(e,i[kr]));let l=o.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=Sa(i,ey(n),null,u,i[t.index],t,o,l,null,null,c);return a.firstCreatePass&&_u(a,t,r.length-1),Aa(i,d),i[t.index]=d}function lT(t,e,n,r){for(let i of t)e.mergedAttrs=qu(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Au(e,e.mergedAttrs,!0),n!==null&&zv(r,n,e))}function uT(t,e,n,r,i,o){let s=Ze(),a=i[B],c=ct(s,i);ny(a,i,s,n,null,r);for(let u=0;u<n.length;u++){let d=s.directiveStart+u,f=qi(i,a,d,s);Hn(f,i)}ry(a,i,s),c&&Hn(c,i);let l=qi(i,a,s.directiveStart+s.componentOffset,s);if(t[ot]=i[ot]=l,o!==null)for(let u of o)u(l,e);return Zv(a,s,i),l}function dT(t,e,n,r){if(r)nu(t,n,["ng-version","18.0.1"]);else{let{attrs:i,classes:o}=vD(e.selectors[0]);i&&nu(t,n,i),o&&o.length>0&&Wv(t,n,o.join(" "))}}function fT(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function hT(){let t=Ze();od(ie()[B],t)}var Yr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=pT;let t=e;return t})();function pT(){let t=Ze();return mT(t,ie())}var gT=Yr,vy=class extends gT{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Da(this._hostTNode,this._hostLView)}get injector(){return new jn(this._hostTNode,this._hostLView)}get parentInjector(){let e=sd(this._hostTNode,this._hostLView);if(yv(e)){let n=aa(e,this._hostLView),r=sa(e),i=n[B].data[r+8];return new jn(i,n)}else return new jn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=hm(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Ye}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=sm(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,om(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!OD(e),a;if(s)a=n;else{let p=n||{};a=p.index,r=p.injector,i=p.projectableNodes,o=p.environmentInjector||p.ngModuleRef}let c=s?e:new $r(sn(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let v=(s?l:this.parentInjector).get(Re,null);v&&(o=v)}let u=sn(c.componentType??{}),d=sm(this._lContainer,u?.id??null),f=d?.firstChild??null,h=c.create(l,i,f,o);return this.insertImpl(h.hostView,a,om(this._hostTNode,d)),h}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(UD(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Se],l=new vy(c,c[at],c[Se]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return PS(s,i,o,r),e.attachToViewContainerRef(),Rm(Gl(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=hm(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=vu(this._lContainer,n);r&&(Xs(Gl(this._lContainer),n),$v(r[B],r))}detach(e){let n=this._adjustIndex(e,-1),r=vu(this._lContainer,n);return r&&Xs(Gl(this._lContainer),n)!=null?new Wn(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function hm(t){return t[na]}function Gl(t){return t[na]||(t[na]=[])}function mT(t,e){let n,r=e[t.index];return Ut(r)?n=r:(n=iy(r,e,null,t),e[t.index]=n,Aa(e,n)),yT(n,e,t,r),new vy(n,t,e)}function vT(t,e){let n=t[Ie],r=n.createComment(""),i=ct(e,t),o=md(n,i);return la(n,o,r,Qb(n,i),!1),r}var yT=wT,_T=()=>!1;function IT(t,e,n){return _T(t,e,n)}function wT(t,e,n,r){if(t[$n])return;let i;n.type&8?i=It(r):i=vT(e,n),t[$n]=i}var an=class{},Gi=class{};var Ru=class extends an{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new fa(this);let i=Um(e);this._bootstrapComponents=Fv(i.bootstrap),this._r3Injector=Av(e,n,[{provide:an,useValue:this},{provide:Ur,useValue:this.componentFactoryResolver},...r],Ne(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},xu=class extends Gi{constructor(e){super(),this.moduleType=e}create(e){return new Ru(this.moduleType,e,[])}};var ha=class extends an{constructor(e){super(),this.componentFactoryResolver=new fa(this),this.instance=null;let n=new Vi([...e.providers,{provide:an,useValue:this},{provide:Ur,useValue:this.componentFactoryResolver}],e.parent||Qu(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Oa(t,e,n=null){return new ha({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var no=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new me(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function yy(t){return CT(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function ET(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function CT(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function _y(t,e,n){return t[e]=n}function Br(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Iy(t,e,n,r){let i=Br(t,e,n);return Br(t,e+1,r)||i}function DT(t){return(t.flags&32)===32}function bT(t,e,n,r,i,o,s,a,c){let l=e.consts,u=Ta(e,t,4,s||null,a||null);ty(e,n,u,oa(l,c)),od(e,u);let d=u.tView=_d(2,u,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function ST(t,e,n,r,i,o,s,a,c,l){let u=n+Ke,d=e.firstCreatePass?bT(u,e,t,r,i,o,s,a,c):e.data[u];eo(d,!1);let f=TT(e,t,d,n);rd()&&vd(e,t,f,d),Hn(f,t);let h=iy(f,t,f,d);return t[u]=h,Aa(t,h),IT(h,d,t),Zu(d)&&Jv(e,t,d),c!=null&&Xv(t,d,l),d}function Te(t,e,n,r,i,o,s,a){let c=ie(),l=Vt(),u=oa(l.consts,o);return ST(c,l,t,e,n,r,i,u,s,a),Te}var TT=AT;function AT(t,e,n,r){return id(!0),e[Ie].createComment("")}function MT(t,e,n,r){return Br(t,cv(),n)?e+Zs(n)+r:Ct}function NT(t,e,n,r,i,o){let s=JD(),a=Iy(t,s,n,i);return lv(2),a?e+Zs(n)+r+Zs(i)+o:Ct}function Ws(t,e){return t<<17|e<<2}function zn(t){return t>>17&32767}function RT(t){return(t&2)==2}function xT(t,e){return t&131071|e<<17}function Ou(t){return t|2}function Hr(t){return(t&131068)>>2}function Yl(t,e){return t&-131069|e<<2}function OT(t){return(t&1)===1}function Pu(t){return t|1}function PT(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=zn(s),c=Hr(s);t[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||Zi(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let f=zn(t[a+1]);t[r+1]=Ws(f,a),f!==0&&(t[f+1]=Yl(t[f+1],r)),t[a+1]=xT(t[a+1],r)}else t[r+1]=Ws(a,0),a!==0&&(t[a+1]=Yl(t[a+1],r)),a=r;else t[r+1]=Ws(c,0),a===0?a=r:t[c+1]=Yl(t[c+1],r),c=r;l&&(t[r+1]=Ou(t[r+1])),pm(t,u,r,!0),pm(t,u,r,!1),kT(e,u,t,r,o),s=Ws(a,c),o?e.classBindings=s:e.styleBindings=s}function kT(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Zi(o,e)>=0&&(n[r+1]=Pu(n[r+1]))}function pm(t,e,n,r){let i=t[n+1],o=e===null,s=r?zn(i):Hr(i),a=!1;for(;s!==0&&(a===!1||o);){let c=t[s],l=t[s+1];LT(c,e)&&(a=!0,t[s+1]=r?Pu(l):Ou(l)),s=r?zn(l):Hr(l)}a&&(t[n+1]=r?Ou(i):Pu(i))}function LT(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Zi(t,e)>=0:!1}var rt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function FT(t){return t.substring(rt.key,rt.keyEnd)}function jT(t){return UT(t),wy(t,Ey(t,0,rt.textEnd))}function wy(t,e){let n=rt.textEnd;return n===e?-1:(e=rt.keyEnd=VT(t,rt.key=e,n),Ey(t,e,n))}function UT(t){rt.key=0,rt.keyEnd=0,rt.value=0,rt.valueEnd=0,rt.textEnd=t.length}function Ey(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function VT(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function we(t,e,n){let r=ie(),i=cv();if(Br(r,i,e)){let o=Vt(),s=sb();pS(o,s,r,t,e,r[Ie],n,!1)}return we}function ku(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";Id(t,n,o[s],s,r)}function ro(t){BT(KT,$T,t,!0)}function $T(t,e){for(let n=jT(e);n>=0;n=wy(e,n))zu(t,FT(e),!0)}function BT(t,e,n,r){let i=Vt(),o=lv(2);i.firstUpdatePass&&HT(i,null,o,r);let s=ie();if(n!==Ct&&Br(s,o,n)){let a=i.data[qn()];if(Dy(a,r)&&!Cy(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(n=Jl(c,n||"")),ku(i,a,s,n,r)}else QT(i,a,s,s[Ie],s[o+1],s[o+1]=YT(t,e,n),r,o)}}function Cy(t,e){return e>=t.expandoStartIndex}function HT(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[qn()],s=Cy(t,n);Dy(o,r)&&e===null&&!s&&(e=!1),e=WT(i,o,e,r),PT(i,o,e,n,s,r)}}function WT(t,e,n,r){let i=rb(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Kl(null,t,e,n,r),n=Yi(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Kl(i,t,e,n,r),o===null){let c=zT(t,e,r);c!==void 0&&Array.isArray(c)&&(c=Kl(null,t,e,c[1],r),c=Yi(c,e.attrs,r),qT(t,e,r,c))}else o=GT(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function zT(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Hr(r)!==0)return t[zn(r)]}function qT(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[zn(i)]=r}function GT(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Yi(r,s,n)}return Yi(r,e.attrs,n)}function Kl(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Yi(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Yi(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),zu(t,s,n?!0:e[++o]))}return t===void 0?null:t}function YT(t,e,n){if(n==null||n==="")return $e;let r=[],i=hd(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function KT(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&zu(t,r,n)}function QT(t,e,n,r,i,o,s,a){i===Ct&&(i=$e);let c=0,l=0,u=0<i.length?i[0]:null,d=0<o.length?o[0]:null;for(;u!==null||d!==null;){let f=c<i.length?i[c+1]:void 0,h=l<o.length?o[l+1]:void 0,p=null,v;u===d?(c+=2,l+=2,f!==h&&(p=d,v=h)):d===null||u!==null&&u<d?(c+=2,p=u):(l+=2,p=d,v=h),p!==null&&ZT(t,e,n,r,p,v,s,a),u=c<i.length?i[c]:null,d=l<o.length?o[l]:null}}function ZT(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],u=OT(l)?gm(c,e,n,i,Hr(l),s):void 0;if(!pa(u)){pa(o)||RT(l)&&(o=gm(c,null,n,i,a,s));let d=Xm(qn(),n);rS(r,s,d,i,o)}}function gm(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,f=n[i+1];f===Ct&&(f=d?$e:void 0);let h=d?jl(f,r):u===r?f:void 0;if(l&&!pa(h)&&(h=jl(c,r)),pa(h)&&(a=h,s))return a;let p=t[i+1];i=s?zn(p):Hr(p)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=jl(c,r))}return a}function pa(t){return t!==void 0}function Dy(t,e){return(t.flags&(e?8:16))!==0}function JT(t,e,n,r,i,o){let s=e.consts,a=oa(s,i),c=Ta(e,t,2,r,a);return ty(e,n,c,oa(s,o)),c.attrs!==null&&Au(c,c.attrs,!1),c.mergedAttrs!==null&&Au(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function b(t,e,n,r){let i=ie(),o=Vt(),s=Ke+t,a=i[Ie],c=o.firstCreatePass?JT(s,o,i,e,n,r):o.data[s],l=XT(o,i,c,a,e,t);i[s]=l;let u=Zu(c);return eo(c,!0),zv(a,l,c),!DT(c)&&rd()&&vd(o,i,l,c),HD()===0&&Hn(l,i),WD(),u&&(Jv(o,i,c),Zv(o,c,i)),r!==null&&Xv(i,c),b}function C(){let t=Ze();sv()?QD():(t=t.parent,eo(t,!1));let e=t;GD(e)&&YD(),zD();let n=Vt();return n.firstCreatePass&&(od(n,t),Ym(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&db(e)&&ku(n,e,ie(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&fb(e)&&ku(n,e,ie(),e.stylesWithoutHost,!1),C}function Dt(t,e,n,r){return b(t,e,n,r),C(),Dt}var XT=(t,e,n,r,i,o)=>(id(!0),jv(r,i,ab()));function Pa(){return ie()}var kn=void 0;function e0(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var t0=["en",[["a","p"],["AM","PM"],kn],[["AM","PM"],kn,kn],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],kn,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],kn,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",kn,"{1} 'at' {0}",kn],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",e0],Ql={};function Sd(t){let e=n0(t),n=mm(e);if(n)return n;let r=e.split("-")[0];if(n=mm(r),n)return n;if(r==="en")return t0;throw new D(701,!1)}function mm(t){return t in Ql||(Ql[t]=Fn.ng&&Fn.ng.common&&Fn.ng.common.locales&&Fn.ng.common.locales[t]),Ql[t]}var Kr=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Kr||{});function n0(t){return t.toLowerCase().replace(/_/g,"-")}var ga="en-US";var r0=ga;function i0(t){typeof t=="string"&&(r0=t.toLowerCase().replace(/_/g,"-"))}var o0=(t,e,n)=>{};function fn(t,e,n,r){let i=ie(),o=Vt(),s=Ze();return a0(o,i,i[Ie],s,t,e,r),fn}function s0(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[$i],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function a0(t,e,n,r,i,o,s){let a=Zu(r),l=t.firstCreatePass&&MS(t),u=e[ot],d=AS(e),f=!0;if(r.type&3||s){let v=ct(r,e),I=s?s(v):v,P=d.length,X=s?ae=>s(It(ae[r.index])):r.index;o0(v,i,o);let $=null;if(!s&&a&&($=s0(t,e,i,r.index)),$!==null){let ae=$.__ngLastListenerFn__||$;ae.__ngNextListenerFn__=o,$.__ngLastListenerFn__=o,f=!1}else{o=ym(r,e,u,o);let ae=n.listen(I,i,o);d.push(o,ae),l&&l.push(i,X,P,P+1)}}else o=ym(r,e,u,o);let h=r.outputs,p;if(f&&h!==null&&(p=h[i])){let v=p.length;if(v)for(let I=0;I<v;I+=2){let P=p[I],X=p[I+1],We=e[P][X].subscribe(o),Ce=d.length;d.push(o,We),l&&l.push(i,r.index,Ce,-(Ce+1))}}}function vm(t,e,n,r){let i=q(null);try{return mt(6,e,n),n(r)!==!1}catch(o){return sy(t,o),!1}finally{mt(7,e,n),q(i)}}function ym(t,e,n,r){return function i(o){if(o===Function)return r;let s=t.componentOffset>-1?dn(t.index,e):e;Ed(s,5);let a=vm(e,n,r,o),c=i.__ngNextListenerFn__;for(;c;)a=vm(e,n,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function ve(t=1){return ob(t)}function c0(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function hn(t){let e=ZD();return Ju(e,Ke+t)}function M(t,e=""){let n=ie(),r=Vt(),i=t+Ke,o=r.firstCreatePass?Ta(r,i,1,e,null):r.data[i],s=l0(r,n,o,e,t);n[i]=s,rd()&&vd(r,n,s,o),eo(o,!1)}var l0=(t,e,n,r,i)=>(id(!0),Ub(e[Ie],r));function io(t){return ye("",t,""),io}function ye(t,e,n){let r=ie(),i=MT(r,t,e,n);return i!==Ct&&ay(r,qn(),i),ye}function $t(t,e,n,r,i){let o=ie(),s=NT(o,t,e,n,r,i);return s!==Ct&&ay(o,qn(),s),$t}var u0=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=Bm(!1,r.type),o=i.length>0?Oa([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=w({token:e,providedIn:"environment",factory:()=>new e(S(Re))});let t=e;return t})();function pn(t){Ra("NgStandalone"),t.getStandaloneInjector=e=>e.get(u0).getOrCreateStandaloneInjector(t)}function Td(t,e,n,r){return Sy(ie(),ed(),t,e,n,r)}function by(t,e){let n=t[e];return n===Ct?void 0:n}function Sy(t,e,n,r,i,o){let s=e+n;return Br(t,s,i)?_y(t,s+1,o?r.call(o,i):r(i)):by(t,s+1)}function d0(t,e,n,r,i,o,s){let a=e+n;return Iy(t,a,i,o)?_y(t,a+2,s?r.call(s,i,o):r(i,o)):by(t,a+2)}function gn(t,e){let n=Vt(),r,i=t+Ke;n.firstCreatePass?(r=f0(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Un(r.type,!0)),s,a=Me(ue);try{let c=ca(!1),l=o();return ca(c),c0(n,ie(),i,l),l}finally{Me(a)}}function f0(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function ka(t,e,n){let r=t+Ke,i=ie(),o=Ju(i,r);return Ty(i,r)?Sy(i,ed(),e,o.transform,n,o):o.transform(n)}function oo(t,e,n,r){let i=t+Ke,o=ie(),s=Ju(o,i);return Ty(o,i)?d0(o,ed(),e,s.transform,n,r,s):s.transform(n,r)}function Ty(t,e){return t[B].data[e].pure}function mn(t,e){return hy(t,e)}var cn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Ay=new cn("18.0.1"),La=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var My=new A("");function Qr(t){return!!t&&typeof t.then=="function"}function Ad(t){return!!t&&typeof t.subscribe=="function"}var Fa=new A(""),Ny=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=m(Fa,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(Qr(s))r.push(s);else if(Ad(s)){let a=new Promise((c,l)=>{s.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ja=new A("");function h0(){lg(()=>{throw new D(600,!1)})}function p0(t){return t.isBoundToModule}var g0=10;function m0(t,e,n){try{let r=n();return Qr(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Zr=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=m(Mv),this.afterRenderEffectManager=m(bd),this.zonelessEnabled=m(Cd),this.externalTestViews=new Set,this.beforeRender=new De,this.afterTick=new De,this.componentTypes=[],this.components=[],this.isStable=m(no).hasPendingTasks.pipe(E(r=>!r)),this._injector=m(Re)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof da;if(!this._injector.get(Ny).done){let h=!o&&jm(r),p=!1;throw new D(405,p)}let a;o?a=r:a=this._injector.get(Ur).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=p0(a)?void 0:this._injector.get(an),l=i||a.selector,u=a.create(xe.NULL,[],l,c),d=u.location.nativeElement,f=u.injector.get(My,null);return f?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Zl(this.components,u),f?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new D(101,!1);let i=q(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(o){this.internalErrorHandler(o)}finally{this._runningTick=!1,q(i),this.afterTick.next()}}detectChangesInAttachedViews(r){let i=null;this._injector.destroyed||(i=this._injector.get(Vr,null,{optional:!0}));let o=0,s=this.afterRenderEffectManager;for(;o<g0;){let a=o===0;if(r||!a){this.beforeRender.next(a);for(let{_lView:c,notifyErrorHandler:l}of this._views)v0(c,l,a,this.zonelessEnabled)}else i?.begin?.(),i?.end?.();if(o++,s.executeInternalCallbacks(),!this.allViews.some(({_lView:c})=>Hi(c))&&(s.execute(),!this.allViews.some(({_lView:c})=>Hi(c))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Zl(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(ja,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Zl(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new D(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Zl(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function v0(t,e,n,r){if(!n&&!Hi(t))return;ly(t,e,n&&!r?0:1)}var Lu=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Ua=(()=>{let e=class e{compileModuleSync(r){return new xu(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=Um(r),s=Fv(o.declarations).reduce((a,c)=>{let l=sn(c);return l&&a.push(new $r(l)),a},[]);return new Lu(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var y0=(()=>{let e=class e{constructor(){this.zone=m(Q),this.changeDetectionScheduler=m(jr),this.applicationRef=m(Zr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Ry({ngZoneFactory:t,ignoreChangesOutsideZone:e}){return t??=()=>new Q(Oy()),[{provide:Q,useFactory:t},{provide:Or,multi:!0,useFactory:()=>{let n=m(y0,{optional:!0});return()=>n.initialize()}},{provide:Or,multi:!0,useFactory:()=>{let n=m(I0);return()=>{n.initialize()}}},{provide:Mv,useFactory:_0},e===!0?{provide:py,useValue:!0}:[]]}function _0(){let t=m(Q),e=m(wt);return n=>t.runOutsideAngular(()=>e.handleError(n))}function xy(t){let e=t?.ignoreChangesOutsideZone,n=Ry({ngZoneFactory:()=>{let r=Oy(t);return r.shouldCoalesceEventChangeDetection&&Ra("NgZone_CoalesceEvent"),new Q(r)},ignoreChangesOutsideZone:e});return un([[],{provide:Cd,useValue:!1},n])}function Oy(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var I0=(()=>{let e=class e{constructor(){this.subscription=new oe,this.initialized=!1,this.zone=m(Q),this.pendingTasks=m(no)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Q.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Q.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var w0=(()=>{let e=class e{constructor(){this.appRef=m(Zr),this.taskService=m(no),this.ngZone=m(Q),this.zonelessEnabled=m(Cd),this.disableScheduling=m(py,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new oe,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof bu||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?cm:gy;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Q.isInAngularZone())}tick(r){if(this.runningTick||this.appRef.destroyed)return;let i=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(r)},void 0,this.schedulerTickApplyArgs)}catch(o){throw this.taskService.remove(i),o}finally{this.cleanup()}this.useMicrotaskScheduler=!0,cm(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(i)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function E0(){return typeof $localize<"u"&&$localize.locale||ga}var Va=new A("",{providedIn:"root",factory:()=>m(Va,k.Optional|k.SkipSelf)||E0()});var Py=new A("");var Ks=null;function C0(t=[],e){return xe.create({name:e,providers:[{provide:_a,useValue:"platform"},{provide:Py,useValue:new Set([()=>Ks=null])},...t]})}function D0(t=[]){if(Ks)return Ks;let e=C0(t);return Ks=e,h0(),b0(e),e}function b0(t){t.get(ud,null)?.forEach(n=>n())}var Jr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=S0;let t=e;return t})();function S0(t){return T0(Ze(),ie(),(t&16)===16)}function T0(t,e,n){if(wa(t)&&!n){let r=dn(t.index,e);return new Wn(r,r)}else if(t.type&47){let r=e[_t];return new Wn(r,e)}return null}var Fu=class{constructor(){}supports(e){return yy(e)}create(e){return new ju(e)}},A0=(t,e)=>e,ju=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||A0}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<_m(r,i,o)?n:r,a=_m(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,u=c-i;if(l!=u){for(let f=0;f<l;f++){let h=f<o.length?o[f]:o[f]=0,p=h+f;u<=p&&p<l&&(o[f]=h+1)}let d=s.previousIndex;o[d]=u-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!yy(e))throw new D(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,ET(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new Uu(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new ma),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new ma),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Uu=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Vu=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},ma=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Vu,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function _m(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function Im(){return new Md([new Fu])}var Md=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||Im()),deps:[[e,new Hu,new Qe]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new D(901,!1)}};e.\u0275prov=w({token:e,providedIn:"root",factory:Im});let t=e;return t})();function ky(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=D0(r),o=[Ry({}),{provide:jr,useExisting:w0},...n||[]],a=new ha({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(Q);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(wt,null),u;c.runOutsideAngular(()=>{u=c.onError.subscribe({next:h=>{l.handleError(h)}})});let d=()=>a.destroy(),f=i.get(Py);return f.add(d),a.onDestroy(()=>{u.unsubscribe(),f.delete(d)}),m0(l,c,()=>{let h=a.get(Ny);return h.runInitializers(),h.donePromise.then(()=>{let p=a.get(Va,ga);i0(p||ga);let v=a.get(Zr);return e!==void 0&&v.bootstrap(e),v})})})}catch(e){return Promise.reject(e)}}function Nd(t){let e=q(null);try{return t()}finally{q(e)}}function Ly(t){let e=sn(t);if(!e)return null;let n=new $r(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Hy=null;function ei(){return Hy}function Wy(t){Hy??=t}var $a=class{};var Oe=new A(""),$d=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:()=>m(x0),providedIn:"platform"});let t=e;return t})(),zy=new A(""),x0=(()=>{let e=class e extends $d{constructor(){super(),this._doc=m(Oe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ei().getBaseHref(this._doc)}onPopState(r){let i=ei().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=ei().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Bd(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function Fy(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Ht(t){return t&&t[0]!=="?"?"?"+t:t}var Gn=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:()=>m(Hd),providedIn:"root"});let t=e;return t})(),qy=new A(""),Hd=(()=>{let e=class e extends Gn{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??m(Oe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Bd(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Ht(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Ht(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Ht(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(S($d),S(qy,8))},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Gy=(()=>{let e=class e extends Gn{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=Bd(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Ht(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Ht(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(S($d),S(qy,8))},e.\u0275prov=w({token:e,factory:e.\u0275fac});let t=e;return t})(),ti=(()=>{let e=class e{constructor(r){this._subject=new be,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=k0(Fy(jy(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Ht(i))}normalize(r){return e.stripTrailingSlash(P0(this._basePath,jy(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ht(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ht(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=Ht,e.joinWithSlash=Bd,e.stripTrailingSlash=Fy,e.\u0275fac=function(i){return new(i||e)(S(Gn))},e.\u0275prov=w({token:e,factory:()=>O0(),providedIn:"root"});let t=e;return t})();function O0(){return new ti(S(Gn))}function P0(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function jy(t){return t.replace(/\/index.html$/,"")}function k0(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var Yy=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(Yy||{});var bt={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Xr(t,e){let n=Sd(t),r=n[Kr.NumberSymbols][e];if(typeof r>"u"){if(e===bt.CurrencyDecimal)return n[Kr.NumberSymbols][bt.Decimal];if(e===bt.CurrencyGroup)return n[Kr.NumberSymbols][bt.Group]}return r}function L0(t,e){return Sd(t)[Kr.NumberFormats][e]}var F0=/^(\d+)?\.((\d+)(-(\d+))?)?$/,Uy=22,Ba=".",so="0",j0=";",U0=",",xd="#";var V0="%";function $0(t,e,n,r,i,o,s=!1){let a="",c=!1;if(!isFinite(t))a=Xr(n,bt.Infinity);else{let l=z0(t);s&&(l=W0(l));let u=e.minInt,d=e.minFrac,f=e.maxFrac;if(o){let X=o.match(F0);if(X===null)throw new Error(`${o} is not a valid digit info`);let $=X[1],ae=X[3],We=X[5];$!=null&&(u=Od($)),ae!=null&&(d=Od(ae)),We!=null?f=Od(We):ae!=null&&d>f&&(f=d)}q0(l,d,f);let h=l.digits,p=l.integerLen,v=l.exponent,I=[];for(c=h.every(X=>!X);p<u;p++)h.unshift(0);for(;p<0;p++)h.unshift(0);p>0?I=h.splice(p,h.length):(I=h,h=[0]);let P=[];for(h.length>=e.lgSize&&P.unshift(h.splice(-e.lgSize,h.length).join(""));h.length>e.gSize;)P.unshift(h.splice(-e.gSize,h.length).join(""));h.length&&P.unshift(h.join("")),a=P.join(Xr(n,r)),I.length&&(a+=Xr(n,i)+I.join("")),v&&(a+=Xr(n,bt.Exponential)+"+"+v)}return t<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function B0(t,e,n){let r=L0(e,Yy.Percent),i=H0(r,Xr(e,bt.MinusSign));return $0(t,i,e,bt.Group,bt.Decimal,n,!0).replace(new RegExp(V0,"g"),Xr(e,bt.PercentSign))}function H0(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(j0),i=r[0],o=r[1],s=i.indexOf(Ba)!==-1?i.split(Ba):[i.substring(0,i.lastIndexOf(so)+1),i.substring(i.lastIndexOf(so)+1)],a=s[0],c=s[1]||"";n.posPre=a.substring(0,a.indexOf(xd));for(let u=0;u<c.length;u++){let d=c.charAt(u);d===so?n.minFrac=n.maxFrac=u+1:d===xd?n.maxFrac=u+1:n.posSuf+=d}let l=a.split(U0);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let u=i.length-n.posPre.length-n.posSuf.length,d=o.indexOf(xd);n.negPre=o.substring(0,d).replace(/'/g,""),n.negSuf=o.slice(d+u).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function W0(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function z0(t){let e=Math.abs(t)+"",n=0,r,i,o,s,a;for((i=e.indexOf(Ba))>-1&&(e=e.replace(Ba,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===so;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===so;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>Uy&&(r=r.splice(0,Uy-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function q0(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen,o=Math.min(Math.max(e,i),n),s=o+t.integerLen,a=r[s];if(s>0){r.splice(Math.max(t.integerLen,s));for(let d=s;d<r.length;d++)r[d]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let d=1;d<s;d++)r[d]=0}if(a>=5)if(s-1<0){for(let d=0;d>s;d--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let c=o!==0,l=e+t.integerLen,u=r.reduceRight(function(d,f,h,p){return f=f+d,p[h]=f<10?f:f-10,c&&(p[h]===0&&h>=l?p.pop():c=!1),f>=10?1:0},0);u&&(r.unshift(u),t.integerLen++)}function Od(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}function Ky(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Pd=/\s+/,Vy=[],Qy=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=Vy,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(Pd):Vy}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(Pd):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let o=this.stateMap.get(r);o!==void 0?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],o=r[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(Pd).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};e.\u0275fac=function(i){return new(i||e)(ue(to),ue(Na))},e.\u0275dir=Wr({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var kd=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Zy=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,s,a)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new kd(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(s===null?void 0:s);else if(s!==null){let c=i.get(s);i.move(c,a),$y(c,o)}});for(let o=0,s=i.length;o<s;o++){let c=i.get(o).context;c.index=o,c.count=s,c.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let s=i.get(o.currentIndex);$y(s,o)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(ue(Yr),ue(Ma),ue(Md))},e.\u0275dir=Wr({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function $y(t,e){t.context.$implicit=e.item}var Wa=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Ld,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){By("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){By("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(ue(Yr),ue(Ma))},e.\u0275dir=Wr({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Ld=class{constructor(){this.$implicit=null,this.ngIf=null}};function By(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Ne(e)}'.`)}function Jy(t,e){return new D(2100,!1)}var Fd=class{createSubscription(e,n){return Nd(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){Nd(()=>e.unsubscribe())}},jd=class{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}},G0=new jd,Y0=new Fd,za=(()=>{let e=class e{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(Qr(r))return G0;if(Ad(r))return Y0;throw Jy(e,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(i){return new(i||e)(ue(Jr,16))},e.\u0275pipe=Yu({name:"async",type:e,pure:!1,standalone:!0});let t=e;return t})();var Xy=(()=>{let e=class e{constructor(r){this._locale=r}transform(r,i,o){if(!K0(r))return null;o||=this._locale;try{let s=Q0(r);return B0(s,o,i)}catch(s){throw Jy(e,s.message)}}};e.\u0275fac=function(i){return new(i||e)(ue(Va,16))},e.\u0275pipe=Yu({name:"percent",type:e,pure:!0,standalone:!0});let t=e;return t})();function K0(t){return!(t==null||t===""||t!==t)}function Q0(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new Error(`${t} is not a number`);return t}var ao=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ji({type:e}),e.\u0275inj=Qi({});let t=e;return t})(),Wd="browser",Z0="server";function J0(t){return t===Wd}function zd(t){return t===Z0}var e_=(()=>{let e=class e{};e.\u0275prov=w({token:e,providedIn:"root",factory:()=>J0(m(Et))?new Ud(m(Oe),window):new Vd});let t=e;return t})(),Ud=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=X0(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function X0(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Vd=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Ha=class{};var Yd=class extends $a{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Kd=class t extends Yd{static makeCurrent(){Wy(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=eA();return n==null?null:tA(n)}resetBaseElement(){co=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ky(document.cookie,e)}},co=null;function eA(){return co=co||document.querySelector("base"),co?co.getAttribute("href"):null}function tA(t){return new URL(t,document.baseURI).pathname}var nA=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac});let t=e;return t})(),Qd=new A(""),o_=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new D(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(S(Qd),S(Q))},e.\u0275prov=w({token:e,factory:e.\u0275fac});let t=e;return t})(),qa=class{constructor(e){this._doc=e}},qd="ng-app-id",s_=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=zd(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${qd}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(qd),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(qd,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(S(Oe),S(ld),S(dd,8),S(Et))},e.\u0275prov=w({token:e,factory:e.\u0275fac});let t=e;return t})(),Gd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Jd=/%COMP%/g,a_="%COMP%",rA=`_nghost-${a_}`,iA=`_ngcontent-${a_}`,oA=!0,sA=new A("",{providedIn:"root",factory:()=>oA});function aA(t){return iA.replace(Jd,t)}function cA(t){return rA.replace(Jd,t)}function c_(t,e){return e.map(n=>n.replace(Jd,t))}var n_=(()=>{let e=class e{constructor(r,i,o,s,a,c,l,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=zd(c),this.defaultRenderer=new lo(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===yt.ShadowDom&&(i=ne(_({},i),{encapsulation:yt.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof Ga?o.applyToHost(r):o instanceof uo&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(i.encapsulation){case yt.Emulated:s=new Ga(l,u,i,this.appId,d,a,c,f);break;case yt.ShadowDom:return new Zd(l,u,r,i,a,c,this.nonce,f);default:s=new uo(l,u,i,d,a,c,f);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(S(o_),S(s_),S(ld),S(sA),S(Oe),S(Et),S(Q),S(dd))},e.\u0275prov=w({token:e,factory:e.\u0275fac});let t=e;return t})(),lo=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Gd[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(r_(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(r_(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new D(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Gd[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Gd[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Ft.DashCase|Ft.Important)?e.style.setProperty(n,r,i&Ft.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Ft.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=ei().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function r_(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Zd=class extends lo{constructor(e,n,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=c_(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},uo=class extends lo{constructor(e,n,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?c_(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ga=class extends uo{constructor(e,n,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,n,r,o,s,a,c,l),this.contentAttr=aA(l),this.hostAttr=cA(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},lA=(()=>{let e=class e extends qa{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(S(Oe))},e.\u0275prov=w({token:e,factory:e.\u0275fac});let t=e;return t})(),i_=["alt","control","meta","shift"],uA={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},dA={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},fA=(()=>{let e=class e extends qa{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ei().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),i_.forEach(u=>{let d=i.indexOf(u);d>-1&&(i.splice(d,1),a+=u+".")}),a+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let o=uA[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),i_.forEach(a=>{if(a!==o){let c=dA[a];c(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(S(Oe))},e.\u0275prov=w({token:e,factory:e.\u0275fac});let t=e;return t})();function l_(t,e){return ky(_({rootComponent:t},hA(e)))}function hA(t){return{appProviders:[...yA,...t?.providers??[]],platformProviders:vA}}function pA(){Kd.makeCurrent()}function gA(){return new wt}function mA(){return kv(document),document}var vA=[{provide:Et,useValue:Wd},{provide:ud,useValue:pA,multi:!0},{provide:Oe,useFactory:mA,deps:[]}];var yA=[{provide:_a,useValue:"root"},{provide:wt,useFactory:gA,deps:[]},{provide:Qd,useClass:lA,multi:!0,deps:[Oe,Q,Et]},{provide:Qd,useClass:fA,multi:!0,deps:[Oe]},n_,s_,o_,{provide:Vr,useExisting:n_},{provide:Ha,useClass:nA,deps:[]},[]];var Ya=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(S(Oe))},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var x="primary",To=Symbol("RouteTitle"),rf=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ai(t){return new rf(t)}function _A(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function IA(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!St(t[n],e[n]))return!1;return!0}function St(t,e){let n=t?of(t):void 0,r=e?of(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!w_(t[i],e[i]))return!1;return!0}function of(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function w_(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function E_(t){return t.length>0?t[t.length-1]:null}function In(t){return xl(t)?t:Qr(t)?re(Promise.resolve(t)):T(t)}var wA={exact:D_,subset:b_},C_={exact:EA,subset:CA,ignored:()=>!0};function d_(t,e,n){return wA[n.paths](t.root,e.root,n.matrixParams)&&C_[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function EA(t,e){return St(t,e)}function D_(t,e,n){if(!Kn(t.segments,e.segments)||!Za(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!D_(t.children[r],e.children[r],n))return!1;return!0}function CA(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>w_(t[n],e[n]))}function b_(t,e,n){return S_(t,e,e.segments,n)}function S_(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Kn(i,n)||e.hasChildren()||!Za(i,n,r))}else if(t.segments.length===n.length){if(!Kn(t.segments,n)||!Za(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!b_(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Kn(t.segments,i)||!Za(t.segments,i,r)||!t.children[x]?!1:S_(t.children[x],e,o,r)}}function Za(t,e,n){return e.every((r,i)=>C_[n](t[i].parameters,r.parameters))}var vn=class{constructor(e=new K([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ai(this.queryParams),this._queryParamMap}toString(){return SA.serialize(this)}},K=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ja(this)}},Yn=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ai(this.parameters),this._parameterMap}toString(){return A_(this)}};function DA(t,e){return Kn(t,e)&&t.every((n,r)=>St(n.parameters,e[r].parameters))}function Kn(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function bA(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===x&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==x&&(n=n.concat(e(i,r)))}),n}var Ao=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:()=>new ci,providedIn:"root"});let t=e;return t})(),ci=class{parse(e){let n=new af(e);return new vn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${fo(e.root,!0)}`,r=MA(e.queryParams),i=typeof e.fragment=="string"?`#${TA(e.fragment)}`:"";return`${n}${r}${i}`}},SA=new ci;function Ja(t){return t.segments.map(e=>A_(e)).join("/")}function fo(t,e){if(!t.hasChildren())return Ja(t);if(e){let n=t.children[x]?fo(t.children[x],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==x&&r.push(`${i}:${fo(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=bA(t,(r,i)=>i===x?[fo(t.children[x],!1)]:[`${i}:${fo(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[x]!=null?`${Ja(t)}/${n[0]}`:`${Ja(t)}/(${n.join("//")})`}}function T_(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ka(t){return T_(t).replace(/%3B/gi,";")}function TA(t){return encodeURI(t)}function sf(t){return T_(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Xa(t){return decodeURIComponent(t)}function f_(t){return Xa(t.replace(/\+/g,"%20"))}function A_(t){return`${sf(t.path)}${AA(t.parameters)}`}function AA(t){return Object.entries(t).map(([e,n])=>`;${sf(e)}=${sf(n)}`).join("")}function MA(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Ka(n)}=${Ka(i)}`).join("&"):`${Ka(n)}=${Ka(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var NA=/^[^\/()?;#]+/;function Xd(t){let e=t.match(NA);return e?e[0]:""}var RA=/^[^\/()?;=#]+/;function xA(t){let e=t.match(RA);return e?e[0]:""}var OA=/^[^=?&#]+/;function PA(t){let e=t.match(OA);return e?e[0]:""}var kA=/^[^&#]+/;function LA(t){let e=t.match(kA);return e?e[0]:""}var af=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new K([],{}):new K([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[x]=new K(e,n)),r}parseSegment(){let e=Xd(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new D(4009,!1);return this.capture(e),new Yn(Xa(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=xA(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Xd(this.remaining);i&&(r=i,this.capture(r))}e[Xa(n)]=Xa(r)}parseQueryParam(e){let n=PA(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=LA(this.remaining);s&&(r=s,this.capture(r))}let i=f_(n),o=f_(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Xd(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new D(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=x);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[x]:new K([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new D(4011,!1)}};function M_(t){return t.segments.length>0?new K([],{[x]:t}):t}function N_(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=N_(i);if(r===x&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new K(t.segments,e);return FA(n)}function FA(t){if(t.numberOfChildren===1&&t.children[x]){let e=t.children[x];return new K(t.segments.concat(e.segments),e.children)}return t}function yo(t){return t instanceof vn}function jA(t,e,n=null,r=null){let i=R_(t);return x_(i,e,n,r)}function R_(t){let e;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new K(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=M_(r);return e??i}function x_(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return ef(i,i,i,n,r);let o=UA(e);if(o.toRoot())return ef(i,i,new K([],{}),n,r);let s=VA(o,i,t),a=s.processChildren?go(s.segmentGroup,s.index,o.commands):P_(s.segmentGroup,s.index,o.commands);return ef(i,s.segmentGroup,a,n,r)}function ec(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function _o(t){return typeof t=="object"&&t!=null&&t.outlets}function ef(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;t===e?s=n:s=O_(t,e,n);let a=M_(N_(s));return new vn(a,o,i)}function O_(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=O_(o,e,n)}),new K(t.segments,r)}var tc=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&ec(r[0]))throw new D(4003,!1);let i=r.find(_o);if(i&&i!==E_(r))throw new D(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function UA(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new tc(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new tc(n,e,r)}var ii=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function VA(t,e,n){if(t.isAbsolute)return new ii(e,!0,0);if(!n)return new ii(e,!1,NaN);if(n.parent===null)return new ii(n,!0,0);let r=ec(t.commands[0])?0:1,i=n.segments.length-1+r;return $A(n,i,t.numberOfDoubleDots)}function $A(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new D(4005,!1);i=r.segments.length}return new ii(r,!1,i-o)}function BA(t){return _o(t[0])?t[0].outlets:{[x]:t}}function P_(t,e,n){if(t??=new K([],{}),t.segments.length===0&&t.hasChildren())return go(t,e,n);let r=HA(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new K(t.segments.slice(0,r.pathIndex),{});return o.children[x]=new K(t.segments.slice(r.pathIndex),t.children),go(o,0,i)}else return r.match&&i.length===0?new K(t.segments,{}):r.match&&!t.hasChildren()?cf(t,e,n):r.match?go(t,0,i):cf(t,e,n)}function go(t,e,n){if(n.length===0)return new K(t.segments,{});{let r=BA(n),i={};if(Object.keys(r).some(o=>o!==x)&&t.children[x]&&t.numberOfChildren===1&&t.children[x].segments.length===0){let o=go(t.children[x],e,n);return new K(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=P_(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new K(t.segments,i)}}function HA(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(_o(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!p_(c,l,s))return o;r+=2}else{if(!p_(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function cf(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(_o(o)){let c=WA(o.outlets);return new K(r,c)}if(i===0&&ec(n[0])){let c=t.segments[e];r.push(new Yn(c.path,h_(n[0]))),i++;continue}let s=_o(o)?o.outlets[x]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&ec(a)?(r.push(new Yn(s,h_(a))),i+=2):(r.push(new Yn(s,{})),i++)}return new K(r,{})}function WA(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=cf(new K([],{}),0,r))}),e}function h_(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function p_(t,e,n){return t==n.path&&St(e,n.parameters)}var mo="imperative",pe=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(pe||{}),Je=class{constructor(e,n){this.id=e,this.url=n}},yn=class extends Je{constructor(e,n,r="imperative",i=null){super(e,n),this.type=pe.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},zt=class extends Je{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=pe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},He=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(He||{}),nc=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(nc||{}),Wt=class extends Je{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=pe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},_n=class extends Je{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=pe.NavigationSkipped}},Io=class extends Je{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=pe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},rc=class extends Je{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=pe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},lf=class extends Je{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=pe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},uf=class extends Je{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=pe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},df=class extends Je{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=pe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ff=class extends Je{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=pe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hf=class{constructor(e){this.route=e,this.type=pe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},pf=class{constructor(e){this.route=e,this.type=pe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},gf=class{constructor(e){this.snapshot=e,this.type=pe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},mf=class{constructor(e){this.snapshot=e,this.type=pe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vf=class{constructor(e){this.snapshot=e,this.type=pe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},yf=class{constructor(e){this.snapshot=e,this.type=pe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ic=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=pe.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},wo=class{},li=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};var _f=class{constructor(e){this.injector=e,this.outlet=null,this.route=null,this.children=new Mo(this.injector),this.attachRef=null}},Mo=(()=>{let e=class e{constructor(r){this.parentInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new _f(this.parentInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(S(Re))},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),oc=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=If(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=If(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=wf(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return wf(e,this._root).map(n=>n.value)}};function If(t,e){if(t===e.value)return e;for(let n of e.children){let r=If(t,n);if(r)return r}return null}function wf(t,e){if(t===e.value)return[e];for(let n of e.children){let r=wf(t,n);if(r.length)return r.unshift(e),r}return[]}var Be=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function ri(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var sc=class extends oc{constructor(e,n){super(e),this.snapshot=n,Nf(this,e)}toString(){return this.snapshot.toString()}};function k_(t){let e=zA(t),n=new me([new Yn("",{})]),r=new me({}),i=new me({}),o=new me({}),s=new me(""),a=new Qn(n,r,o,s,i,x,t,e.root);return a.snapshot=e.root,new sc(new Be(a,[]),e)}function zA(t){let e={},n={},r={},i="",o=new oi([],e,r,i,n,x,t,null,{});return new cc("",new Be(o,[]))}var Qn=class{constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(E(l=>l[To]))??T(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(E(e=>ai(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(E(e=>ai(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ac(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:_(_({},e.params),t.params),data:_(_({},e.data),t.data),resolve:_(_(_(_({},t.data),e.data),i?.data),t._resolvedData)}:r={params:_({},t.params),data:_({},t.data),resolve:_(_({},t.data),t._resolvedData??{})},i&&F_(i)&&(r.resolve[To]=i.title),r}var oi=class{get title(){return this.data?.[To]}constructor(e,n,r,i,o,s,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ai(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ai(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},cc=class extends oc{constructor(e,n){super(n),this.url=e,Nf(this,n)}toString(){return L_(this._root)}};function Nf(t,e){e.value._routerState=t,e.children.forEach(n=>Nf(t,n))}function L_(t){let e=t.children.length>0?` { ${t.children.map(L_).join(", ")} } `:"";return`${t.value}${e}`}function tf(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,St(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),St(e.params,n.params)||t.paramsSubject.next(n.params),IA(e.url,n.url)||t.urlSubject.next(n.url),St(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Ef(t,e){let n=St(t.params,e.params)&&DA(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Ef(t.parent,e.parent))}function F_(t){return typeof t.title=="string"||t.title===null}var Rf=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=x,this.activateEvents=new be,this.deactivateEvents=new be,this.attachEvents=new be,this.detachEvents=new be,this.parentContexts=m(Mo),this.location=m(Yr),this.changeDetector=m(Jr),this.inputBinder=m(fc,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new D(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new D(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new D(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new D(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new Cf(r,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Wr({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ea]});let t=e;return t})(),Cf=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Qn?this.route:e===Mo?this.childContexts:this.parent.get(e,n)}},fc=new A(""),g_=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,o=Ve([i.queryParams,i.params,i.data]).pipe(qe(([s,a,c],l)=>(c=_(_(_({},s),a),c),l===0?T(c):Promise.resolve(c)))).subscribe(s=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=Ly(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(r,o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac});let t=e;return t})();function qA(t,e,n){let r=Eo(t,e._root,n?n._root:void 0);return new sc(r,e)}function Eo(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=GA(t,e,n);return new Be(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Eo(t,a)),s}}let r=YA(e.value),i=e.children.map(o=>Eo(t,o));return new Be(r,i)}}function GA(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Eo(t,r,i);return Eo(t,r)})}function YA(t){return new Qn(new me(t.url),new me(t.params),new me(t.queryParams),new me(t.fragment),new me(t.data),t.outlet,t.component,t)}var Co=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},j_="ngNavigationCancelingError";function lc(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=yo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=U_(!1,He.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function U_(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[j_]=!0,n.cancellationCode=e,n}function KA(t){return V_(t)&&yo(t.url)}function V_(t){return!!t&&t[j_]}var QA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ln({type:e,selectors:[["ng-component"]],standalone:!0,features:[pn],decls:1,vars:0,template:function(i,o){i&1&&Dt(0,"router-outlet")},dependencies:[Rf],encapsulation:2});let t=e;return t})();function ZA(t,e){return t.providers&&!t._injector&&(t._injector=Oa(t.providers,e,`Route: ${t.path}`)),t._injector??e}function xf(t){let e=t.children&&t.children.map(xf),n=e?ne(_({},t),{children:e}):_({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==x&&(n.component=QA),n}function lt(t){return t.outlet||x}function JA(t,e){let n=t.filter(r=>lt(r)===e);return n.push(...t.filter(r=>lt(r)!==e)),n}function No(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var XA=(t,e,n,r)=>E(i=>(new Df(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Df=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),tf(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=ri(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=ri(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=ri(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=ri(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new yf(o.value.snapshot))}),e.children.length&&this.forwardEvent(new mf(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(tf(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),tf(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=No(i.snapshot);s.attachRef=null,s.route=i,s.injector=a??s.injector,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},uc=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},si=class{constructor(e,n){this.component=e,this.route=n}};function eM(t,e,n){let r=t._root,i=e?e._root:null;return ho(r,i,n,[r.value])}function tM(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function di(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Dm(t)?t:e.get(t):r}function ho(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ri(e);return t.children.forEach(s=>{nM(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>vo(a,n.getContext(s),i)),i}function nM(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=rM(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new uc(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ho(t,e,a?a.children:null,r,i):ho(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new si(a.outlet.component,s))}else s&&vo(e,a,i),i.canActivateChecks.push(new uc(r)),o.component?ho(t,null,a?a.children:null,r,i):ho(t,null,n,r,i);return i}function rM(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Kn(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Kn(t.url,e.url)||!St(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ef(t,e)||!St(t.queryParams,e.queryParams);case"paramsChange":default:return!Ef(t,e)}}function vo(t,e,n){let r=ri(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?vo(s,e.children.getContext(o),n):vo(s,null,n):vo(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new si(e.outlet.component,i)):n.canDeactivateChecks.push(new si(null,i)):n.canDeactivateChecks.push(new si(null,i))}function Ro(t){return typeof t=="function"}function iM(t){return typeof t=="boolean"}function oM(t){return t&&Ro(t.canLoad)}function sM(t){return t&&Ro(t.canActivate)}function aM(t){return t&&Ro(t.canActivateChild)}function cM(t){return t&&Ro(t.canDeactivate)}function lM(t){return t&&Ro(t.canMatch)}function $_(t){return t instanceof Pt||t?.name==="EmptyError"}var Qa=Symbol("INITIAL_VALUE");function ui(){return qe(t=>Ve(t.map(e=>e.pipe(kt(1),Ll(Qa)))).pipe(E(e=>{for(let n of e)if(n!==!0){if(n===Qa)return Qa;if(n===!1||uM(n))return n}return!0}),ze(e=>e!==Qa),kt(1)))}function uM(t){return yo(t)||t instanceof Co}function dM(t,e){return ce(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?T(ne(_({},n),{guardsResult:!0})):fM(s,r,i,t).pipe(ce(a=>a&&iM(a)?hM(r,o,t,e):T(a)),E(a=>ne(_({},n),{guardsResult:a})))})}function fM(t,e,n,r){return re(t).pipe(ce(i=>yM(i.component,i.route,n,e,r)),gt(i=>i!==!0,!0))}function hM(t,e,n,r){return re(e).pipe(Pn(i=>br(gM(i.route.parent,r),pM(i.route,r),vM(t,i.path,n),mM(t,i.route,n))),gt(i=>i!==!0,!0))}function pM(t,e){return t!==null&&e&&e(new vf(t)),T(!0)}function gM(t,e){return t!==null&&e&&e(new gf(t)),T(!0)}function mM(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return T(!0);let i=r.map(o=>$s(()=>{let s=No(e)??n,a=di(o,s),c=sM(a)?a.canActivate(e,t):st(s,()=>a(e,t));return In(c).pipe(gt())}));return T(i).pipe(ui())}function vM(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>tM(s)).filter(s=>s!==null).map(s=>$s(()=>{let a=s.guards.map(c=>{let l=No(s.node)??n,u=di(c,l),d=aM(u)?u.canActivateChild(r,t):st(l,()=>u(r,t));return In(d).pipe(gt())});return T(a).pipe(ui())}));return T(o).pipe(ui())}function yM(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return T(!0);let s=o.map(a=>{let c=No(e)??i,l=di(a,c),u=cM(l)?l.canDeactivate(t,e,n,r):st(c,()=>l(t,e,n,r));return In(u).pipe(gt())});return T(s).pipe(ui())}function _M(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return T(!0);let o=i.map(s=>{let a=di(s,t),c=oM(a)?a.canLoad(e,n):st(t,()=>a(e,n));return In(c)});return T(o).pipe(ui(),B_(r))}function B_(t){return Dl(le(e=>{if(typeof e!="boolean")throw lc(t,e)}),E(e=>e===!0))}function IM(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return T(!0);let o=i.map(s=>{let a=di(s,t),c=lM(a)?a.canMatch(e,n):st(t,()=>a(e,n));return In(c)});return T(o).pipe(ui(),B_(r))}var Do=class{constructor(e){this.segmentGroup=e||null}},bo=class extends Error{constructor(e){super(),this.urlTree=e}};function ni(t){return Cr(new Do(t))}function wM(t){return Cr(new D(4e3,!1))}function EM(t){return Cr(U_(!1,He.GuardRejected))}var bf=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return T(r);if(i.numberOfChildren>1||!i.children[x])return wM(`${e.redirectTo}`);i=i.children[x]}}applyRedirectCommands(e,n,r,i,o){if(typeof n!="string"){let a=n,{queryParams:c,fragment:l,routeConfig:u,url:d,outlet:f,params:h,data:p,title:v}=i,I=st(o,()=>a({params:h,data:p,queryParams:c,fragment:l,routeConfig:u,url:d,outlet:f,title:v}));if(I instanceof vn)throw new bo(I);n=I}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new bo(s);return s}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new vn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new K(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new D(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Sf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function CM(t,e,n,r,i){let o=Of(t,e,n);return o.matched?(r=ZA(e,r),IM(r,e,n,i).pipe(E(s=>s===!0?o:_({},Sf)))):T(o)}function Of(t,e,n){if(e.path==="**")return DM(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?_({},Sf):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||_A)(n,t,e);if(!i)return _({},Sf);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?_(_({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function DM(t){return{matched:!0,parameters:t.length>0?E_(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function m_(t,e,n,r){return n.length>0&&TM(t,n,r)?{segmentGroup:new K(e,SM(r,new K(n,t.children))),slicedSegments:[]}:n.length===0&&AM(t,n,r)?{segmentGroup:new K(t.segments,bM(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new K(t.segments,t.children),slicedSegments:n}}function bM(t,e,n,r){let i={};for(let o of n)if(hc(t,e,o)&&!r[lt(o)]){let s=new K([],{});i[lt(o)]=s}return _(_({},r),i)}function SM(t,e){let n={};n[x]=e;for(let r of t)if(r.path===""&&lt(r)!==x){let i=new K([],{});n[lt(r)]=i}return n}function TM(t,e,n){return n.some(r=>hc(t,e,r)&&lt(r)!==x)}function AM(t,e,n){return n.some(r=>hc(t,e,r))}function hc(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function MM(t,e,n,r){return lt(t)!==r&&(r===x||!hc(e,n,t))?!1:Of(e,t,n).matched}function NM(t,e,n){return e.length===0&&!t.children[n]}var Tf=class{};function RM(t,e,n,r,i,o,s="emptyOnly"){return new Af(t,e,n,r,i,s,o).recognize()}var xM=31,Af=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new bf(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new D(4002,`'${e.segmentGroup}'`)}recognize(){let e=m_(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(E(({children:n,rootSnapshot:r})=>{let i=new Be(r,n),o=new cc("",i),s=jA(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new oi([],Object.freeze({}),Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),x,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,x,n).pipe(E(r=>({children:r,rootSnapshot:n})),en(r=>{if(r instanceof bo)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Do?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(E(s=>s instanceof Be?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return re(o).pipe(Pn(s=>{let a=r.children[s],c=JA(n,s);return this.processSegmentGroup(e,c,a,s,i)}),kl((s,a)=>(s.push(...a),s)),tn(null),Pl(),ce(s=>{if(s===null)return ni(r);let a=H_(s);return OM(a),T(a)}))}processSegment(e,n,r,i,o,s,a){return re(n).pipe(Pn(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,o,s,a).pipe(en(l=>{if(l instanceof Do)return T(null);throw l}))),gt(c=>!!c),en(c=>{if($_(c))return NM(r,i,o)?T(new Tf):ni(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,c){return MM(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,c):ni(i):ni(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:f}=Of(n,i,o);if(!c)return ni(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>xM&&(this.allowRedirects=!1));let h=new oi(o,l,Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,v_(i),lt(i),i.component??i._loadedComponent??null,i,y_(i)),p=ac(h,a,this.paramsInheritanceStrategy);h.params=Object.freeze(p.params),h.data=Object.freeze(p.data);let v=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,h,e);return this.applyRedirects.lineralizeSegments(i,v).pipe(ce(I=>this.processSegment(e,r,n,I.concat(f),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=CM(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(qe(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(qe(({routes:l})=>{let u=r._loadedInjector??e,{parameters:d,consumedSegments:f,remainingSegments:h}=c,p=new oi(f,d,Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,v_(r),lt(r),r.component??r._loadedComponent??null,r,y_(r)),v=ac(p,s,this.paramsInheritanceStrategy);p.params=Object.freeze(v.params),p.data=Object.freeze(v.data);let{segmentGroup:I,slicedSegments:P}=m_(n,f,h,l);if(P.length===0&&I.hasChildren())return this.processChildren(u,l,I,p).pipe(E($=>new Be(p,$)));if(l.length===0&&P.length===0)return T(new Be(p,[]));let X=lt(r)===o;return this.processSegment(u,l,I,P,X?x:o,!0,p).pipe(E($=>new Be(p,$ instanceof Be?[$]:[])))}))):ni(n)))}getChildConfig(e,n,r){return n.children?T({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?T({routes:n._loadedRoutes,injector:n._loadedInjector}):_M(e,n,r,this.urlSerializer).pipe(ce(i=>i?this.configLoader.loadChildren(e,n).pipe(le(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):EM(n))):T({routes:[],injector:e})}};function OM(t){t.sort((e,n)=>e.value.outlet===x?-1:n.value.outlet===x?1:e.value.outlet.localeCompare(n.value.outlet))}function PM(t){let e=t.value.routeConfig;return e&&e.path===""}function H_(t){let e=[],n=new Set;for(let r of t){if(!PM(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=H_(r.children);e.push(new Be(r.value,i))}return e.filter(r=>!n.has(r))}function v_(t){return t.data||{}}function y_(t){return t.resolve||{}}function kM(t,e,n,r,i,o){return ce(s=>RM(t,e,n,r,s.extractedUrl,i,o).pipe(E(({state:a,tree:c})=>ne(_({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function LM(t,e){return ce(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return T(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of W_(c))s.add(l);let a=0;return re(s).pipe(Pn(c=>o.has(c)?FM(c,r,t,e):(c.data=ac(c,c.parent,t).resolve,T(void 0))),le(()=>a++),Sr(1),ce(c=>a===s.size?T(n):Ue))})}function W_(t){let e=t.children.map(n=>W_(n)).flat();return[t,...e]}function FM(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!F_(i)&&(o[To]=i.title),jM(o,t,e,r).pipe(E(s=>(t._resolvedData=s,t.data=ac(t,t.parent,n).resolve,null)))}function jM(t,e,n,r){let i=of(t);if(i.length===0)return T({});let o={};return re(i).pipe(ce(s=>UM(t[s],e,n,r).pipe(gt(),le(a=>{if(a instanceof Co)throw lc(new ci,a);o[s]=a}))),Sr(1),Ol(o),en(s=>$_(s)?Ue:Cr(s)))}function UM(t,e,n,r){let i=No(e)??r,o=di(t,i),s=o.resolve?o.resolve(e,n):st(i,()=>o(e,n));return In(s)}function nf(t){return qe(e=>{let n=t(e);return n?re(n).pipe(E(()=>e)):T(e)})}var z_=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===x);return i}getResolvedTitleForRoute(r){return r.data[To]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:()=>m(VM),providedIn:"root"});let t=e;return t})(),VM=(()=>{let e=class e extends z_{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(S(Ya))},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),xo=new A("",{providedIn:"root",factory:()=>({})}),So=new A(""),Pf=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=m(Ua)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return T(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=In(r.loadComponent()).pipe(E(q_),le(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Li(()=>{this.componentLoaders.delete(r)})),o=new _r(i,()=>new De).pipe(yr());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return T({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=$M(i,this.compiler,r,this.onLoadEndListener).pipe(Li(()=>{this.childrenLoaders.delete(i)})),a=new _r(s,()=>new De).pipe(yr());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function $M(t,e,n,r){return In(t.loadChildren()).pipe(E(q_),ce(i=>i instanceof Gi||Array.isArray(i)?T(i):re(e.compileModuleAsync(i))),E(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(So,[],{optional:!0,self:!0}).flat()),{routes:s.map(xf),injector:o}}))}function BM(t){return t&&typeof t=="object"&&"default"in t}function q_(t){return BM(t)?t.default:t}var kf=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:()=>m(HM),providedIn:"root"});let t=e;return t})(),HM=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),G_=new A(""),Y_=new A("");function WM(t,e,n){let r=t.get(Y_),i=t.get(Oe);return t.get(Q).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),zM(t))),{onViewTransitionCreated:c}=r;return c&&st(t,()=>c({transition:a,from:e,to:n})),s})}function zM(t){return new Promise(e=>{xa(e,{injector:t})})}var qM=new A(""),Lf=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new De,this.transitionAbortSubject=new De,this.configLoader=m(Pf),this.environmentInjector=m(Re),this.urlSerializer=m(Ao),this.rootContexts=m(Mo),this.location=m(ti),this.inputBindingEnabled=m(fc,{optional:!0})!==null,this.titleStrategy=m(z_),this.options=m(xo,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=m(kf),this.createViewTransition=m(G_,{optional:!0}),this.navigationErrorHandler=m(qM,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>T(void 0),this.rootComponentType=null;let r=o=>this.events.next(new hf(o)),i=o=>this.events.next(new pf(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(ne(_(_({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new me({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:mo,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ze(s=>s.id!==0),E(s=>ne(_({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),qe(s=>{let a=!1,c=!1;return T(s).pipe(qe(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",He.SupersededByNewNavigation),Ue;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?ne(_({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&d!=="reload"){let f="";return this.events.next(new _n(l.id,this.urlSerializer.serialize(l.rawUrl),f,nc.IgnoredSameUrlNavigation)),l.resolve(!1),Ue}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return T(l).pipe(qe(f=>{let h=this.transitions?.getValue();return this.events.next(new yn(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),h!==this.transitions?.getValue()?Ue:Promise.resolve(f)}),kM(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),le(f=>{s.targetSnapshot=f.targetSnapshot,s.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=ne(_({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let h=new rc(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(h)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:f,extractedUrl:h,source:p,restoredState:v,extras:I}=l,P=new yn(f,this.urlSerializer.serialize(h),p,v);this.events.next(P);let X=k_(this.rootComponentType).snapshot;return this.currentTransition=s=ne(_({},l),{targetSnapshot:X,urlAfterRedirects:h,extras:ne(_({},I),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,T(s)}else{let f="";return this.events.next(new _n(l.id,this.urlSerializer.serialize(l.extractedUrl),f,nc.IgnoredByUrlHandlingStrategy)),l.resolve(!1),Ue}}),le(l=>{let u=new lf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),E(l=>(this.currentTransition=s=ne(_({},l),{guards:eM(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),dM(this.environmentInjector,l=>this.events.next(l)),le(l=>{if(s.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw lc(this.urlSerializer,l.guardsResult);let u=new uf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),ze(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",He.GuardRejected),!1)),nf(l=>{if(l.guards.canActivateChecks.length)return T(l).pipe(le(u=>{let d=new df(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),qe(u=>{let d=!1;return T(u).pipe(LM(this.paramsInheritanceStrategy,this.environmentInjector),le({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",He.NoDataFromResolver)}}))}),le(u=>{let d=new ff(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),nf(l=>{let u=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(le(h=>{d.component=h}),E(()=>{})));for(let h of d.children)f.push(...u(h));return f};return Ve(u(l.targetSnapshot.root)).pipe(tn(null),kt(1))}),nf(()=>this.afterPreactivation()),qe(()=>{let{currentSnapshot:l,targetSnapshot:u}=s,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?re(d).pipe(E(()=>s)):T(s)}),E(l=>{let u=qA(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=ne(_({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),le(()=>{this.events.next(new wo)}),XA(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),kt(1),le({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new zt(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Fl(this.transitionAbortSubject.pipe(le(l=>{throw l}))),Li(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",He.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),en(l=>{if(c=!0,V_(l))this.events.next(new Wt(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),KA(l)?this.events.next(new li(l.url,l.navigationBehaviorOptions)):s.resolve(!1);else{let u=new Io(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0);try{let d=st(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(d instanceof Co){let{message:f,cancellationCode:h}=lc(this.urlSerializer,d);this.events.next(new Wt(s.id,this.urlSerializer.serialize(s.extractedUrl),f,h)),this.events.next(new li(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(u);let f=r.errorHandler(l);s.resolve(!!f)}}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return Ue}))}))}cancelNavigationTransition(r,i,o){let s=new Wt(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function GM(t){return t!==mo}var YM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:()=>m(KM),providedIn:"root"});let t=e;return t})(),Mf=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},KM=(()=>{let e=class e extends Mf{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=ad(e)))(o||e)}})(),e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),K_=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:()=>m(QM),providedIn:"root"});let t=e;return t})(),QM=(()=>{let e=class e extends K_{constructor(){super(...arguments),this.location=m(ti),this.urlSerializer=m(Ao),this.options=m(xo,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=m(kf),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new vn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=k_(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof yn)this.stateMemento=this.createStateMemento();else if(r instanceof _n)this.rawUrlTree=i.initialUrl;else if(r instanceof rc){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof wo?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Wt&&(r.code===He.GuardRejected||r.code===He.NoDataFromResolver)?this.restoreHistory(i):r instanceof Io?this.restoreHistory(i,!0):r instanceof zt&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=_(_({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=_(_({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=ad(e)))(o||e)}})(),e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),po=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(po||{});function Q_(t,e){t.events.pipe(ze(n=>n instanceof zt||n instanceof Wt||n instanceof Io||n instanceof _n),E(n=>n instanceof zt||n instanceof _n?po.COMPLETE:(n instanceof Wt?n.code===He.Redirect||n.code===He.SupersededByNewNavigation:!1)?po.REDIRECTING:po.FAILED),ze(n=>n!==po.REDIRECTING),kt(1)).subscribe(()=>{e()})}function ZM(t){throw t}var JM={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},XM={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Tt=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=m(La),this.stateManager=m(K_),this.options=m(xo,{optional:!0})||{},this.pendingTasks=m(no),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=m(Lf),this.urlSerializer=m(Ao),this.location=m(ti),this.urlHandlingStrategy=m(kf),this._events=new De,this.errorHandler=this.options.errorHandler||ZM,this.navigated=!1,this.routeReuseStrategy=m(YM),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=m(So,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!m(fc,{optional:!0}),this.eventsSubscription=new oe,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof Wt&&i.code!==He.Redirect&&i.code!==He.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof zt)this.navigated=!0;else if(i instanceof li){let a=i.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),l=_({info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||GM(o.source)},a);this.scheduleNavigation(c,mo,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}tN(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),mo,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let l=_({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(xf),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=_(_({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let h=o?o.snapshot:this.routerState.snapshot.root;f=R_(h)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),f=this.currentUrlTree.root}return x_(f,r,d,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=yo(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,mo,null,i)}navigate(r,i={skipLocationChange:!1}){return eN(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=_({},JM):i===!1?o=_({},XM):o=i,yo(r))return d_(this.currentUrlTree,r,o);let s=this.parseUrl(r);return d_(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((f,h)=>{c=f,l=h});let d=this.pendingTasks.add();return Q_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function eN(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new D(4008,!1)}function tN(t){return!(t instanceof wo)&&!(t instanceof li)}var dc=class{};var nN=(()=>{let e=class e{constructor(r,i,o,s,a){this.router=r,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(ze(r=>r instanceof zt),Pn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let o=[];for(let s of i){s.providers&&!s._injector&&(s._injector=Oa(s.providers,r,`Route: ${s.path}`));let a=s._injector??r,c=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(c,s.children??s._loadedRoutes))}return re(o).pipe(Dr())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;i.loadChildren&&i.canLoad===void 0?o=this.loader.loadChildren(r,i):o=T(null);let s=o.pipe(ce(a=>a===null?T(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return re([s,a]).pipe(Dr())}else return s})}};e.\u0275fac=function(i){return new(i||e)(S(Tt),S(Ua),S(Re),S(dc),S(Pf))},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Z_=new A(""),rN=(()=>{let e=class e{constructor(r,i,o,s,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=m(Re),a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof yn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof zt?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof _n&&r.code===nc.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof ic&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>y(this,null,function*(){yield new Promise(o=>{setTimeout(()=>{o()}),xa(()=>{o()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new ic(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){Gv()},e.\u0275prov=w({token:e,factory:e.\u0275fac});let t=e;return t})();function J_(t,...e){return un([{provide:So,multi:!0,useValue:t},[],{provide:Qn,useFactory:X_,deps:[Tt]},{provide:ja,multi:!0,useFactory:eI},e.map(n=>n.\u0275providers)])}function X_(t){return t.routerState.root}function Oo(t,e){return{\u0275kind:t,\u0275providers:e}}function eI(){let t=m(xe);return e=>{let n=t.get(Zr);if(e!==n.components[0])return;let r=t.get(Tt),i=t.get(tI);t.get(Ff)===1&&r.initialNavigation(),t.get(nI,null,k.Optional)?.setUpPreloading(),t.get(Z_,null,k.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var tI=new A("",{factory:()=>new De}),Ff=new A("",{providedIn:"root",factory:()=>1});function iN(){return Oo(2,[{provide:Ff,useValue:0},{provide:Fa,multi:!0,deps:[xe],useFactory:e=>{let n=e.get(zy,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(Tt),o=e.get(tI);Q_(i,()=>{r(!0)}),e.get(Lf).afterPreactivation=()=>(r(!0),o.closed?T(void 0):o),i.initialNavigation()}))}}])}function oN(){return Oo(3,[{provide:Fa,multi:!0,useFactory:()=>{let e=m(Tt);return()=>{e.setUpLocationChangeListener()}}},{provide:Ff,useValue:2}])}var nI=new A("");function sN(t){return Oo(0,[{provide:nI,useExisting:nN},{provide:dc,useExisting:t}])}function aN(){return Oo(8,[g_,{provide:fc,useExisting:g_}])}function cN(t){let e=[{provide:G_,useValue:WM},{provide:Y_,useValue:_({skipNextTransition:!!t?.skipInitialTransition},t)}];return Oo(9,e)}var __=new A("ROUTER_FORROOT_GUARD"),lN=[ti,{provide:Ao,useClass:ci},Tt,Mo,{provide:Qn,useFactory:X_,deps:[Tt]},Pf,[]],rI=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[lN,[],{provide:So,multi:!0,useValue:r},{provide:__,useFactory:hN,deps:[[Tt,new Qe,new Hu]]},{provide:xo,useValue:i||{}},i?.useHash?dN():fN(),uN(),i?.preloadingStrategy?sN(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?pN(i):[],i?.bindToComponentInputs?aN().\u0275providers:[],i?.enableViewTransitions?cN().\u0275providers:[],gN()]}}static forChild(r){return{ngModule:e,providers:[{provide:So,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(S(__,8))},e.\u0275mod=Ji({type:e}),e.\u0275inj=Qi({});let t=e;return t})();function uN(){return{provide:Z_,useFactory:()=>{let t=m(e_),e=m(Q),n=m(xo),r=m(Lf),i=m(Ao);return n.scrollOffset&&t.setOffset(n.scrollOffset),new rN(i,r,t,e,n)}}}function dN(){return{provide:Gn,useClass:Gy}}function fN(){return{provide:Gn,useClass:Hd}}function hN(t){return"guarded"}function pN(t){return[t.initialNavigation==="disabled"?oN().\u0275providers:[],t.initialNavigation==="enabledBlocking"?iN().\u0275providers:[]]}var I_=new A("");function gN(){return[{provide:I_,useFactory:eI},{provide:ja,multi:!0,useExisting:I_}]}var Uf={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var g=function(t,e){if(!t)throw Zn(e)},Zn=function(t){return new Error("Firebase Database ("+Uf.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var oI=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},vN=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},gc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=o>>2,d=(o&3)<<4|a>>4,f=(a&15)<<2|l>>6,h=l&63;c||(h=64,s||(f=64)),r.push(n[u],n[d],n[f],n[h])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(oI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):vN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||d==null)throw new Vf;let f=o<<2|a>>4;if(r.push(f),l!==64){let h=a<<4&240|l>>2;if(r.push(h),d!==64){let p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Vf=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Bf=function(t){let e=oI(t);return gc.encodeByteArray(e,!0)},Po=function(t){return Bf(t).replace(/\./g,"")},ko=function(t){try{return gc.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function sI(t){return aI(void 0,t)}function aI(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!yN(n)||(t[n]=aI(t[n],e[n]));return t}function yN(t){return t!=="__proto__"}function _N(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var IN=()=>_N().__FIREBASE_DEFAULTS__,wN=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},EN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&ko(t[1]);return e&&JSON.parse(e)},Hf=()=>{try{return IN()||wN()||EN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},cI=t=>{var e,n;return(n=(e=Hf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},lI=t=>{let e=cI(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Wf=()=>{var t;return(t=Hf())===null||t===void 0?void 0:t.config},uI=t=>{var e;return(e=Hf())===null||e===void 0?void 0:e[`_${t}`]};var wn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function dI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Po(JSON.stringify(n)),Po(JSON.stringify(s)),""].join(".")}function ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Lo(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ut())}function fI(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function mc(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Mt(){return Uf.NODE_CLIENT===!0||Uf.NODE_ADMIN===!0}function hI(){try{return typeof indexedDB=="object"}catch{return!1}}function pI(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var CN="FirebaseError",At=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=CN,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qt.prototype.create)}},qt=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?DN(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new At(i,a,r)}};function DN(t,e){return t.replace(bN,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var bN=/\{\$([^}]+)}/g;function fi(t){return JSON.parse(t)}function de(t){return JSON.stringify(t)}var gI=function(t){let e={},n={},r={},i="";try{let o=t.split(".");e=fi(ko(o[0])||""),n=fi(ko(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var mI=function(t){let e=gI(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},vI=function(t){let e=gI(t).claims;return typeof e=="object"&&e.admin===!0};function Nt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Jn(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function vc(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Fo(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function jo(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(iI(o)&&iI(s)){if(!jo(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function iI(t){return t!==null&&typeof t=="object"}function Uo(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var pc=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){let f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^o&(s^a),u=1518500249):(l=o^s^a,u=1859775393):d<60?(l=o&s|a&(o|s),u=2400959708):(l=o^s^a,u=3395469782);let f=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,o=this.buf_,s=this.inbuf_;for(;i<n;){if(s===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(o[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<n;)if(o[s]=e[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[i]>>o&255,++r;return e}};function yI(t,e){let n=new $f(t,e);return n.subscribe.bind(n)}var $f=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");SN(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=jf),i.error===void 0&&(i.error=jf),i.complete===void 0&&(i.complete=jf);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function SN(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function jf(){}function yc(t,e){return`${t} failed: ${e} argument `}var _I=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,g(r<t.length,"Surrogate pair missing trail surrogate.");let s=t.charCodeAt(r)-56320;i=65536+(o<<10)+s}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Vo=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var r2=4*60*60*1e3;function dt(t){return t&&t._delegate?t._delegate:t}var Xe=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Xn="[DEFAULT]";var _c=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new wn;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AN(e))try{this.getOrInitializeService({instanceIdentifier:Xn})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Xn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return y(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Xn){return this.instances.has(e)}getOptions(e=Xn){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:TN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xn){return this.component?this.component.multipleInstances?e:Xn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function TN(t){return t===Xn?void 0:t}function AN(t){return t.instantiationMode==="EAGER"}var $o=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new _c(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var MN=[],Z=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(Z||{}),NN={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},RN=Z.INFO,xN={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},ON=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=xN[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},En=class{constructor(e){this.name=e,this._logLevel=RN,this._logHandler=ON,this._userLogHandler=null,MN.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Z))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...e),this._logHandler(this,Z.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...e),this._logHandler(this,Z.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...e),this._logHandler(this,Z.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...e),this._logHandler(this,Z.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...e),this._logHandler(this,Z.ERROR,...e)}};var PN=(t,e)=>e.some(n=>t instanceof n),II,wI;function kN(){return II||(II=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LN(){return wI||(wI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var EI=new WeakMap,qf=new WeakMap,CI=new WeakMap,zf=new WeakMap,Yf=new WeakMap;function FN(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Rt(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&EI.set(n,t)}).catch(()=>{}),Yf.set(e,t),e}function jN(t){if(qf.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});qf.set(t,e)}var Gf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return qf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||CI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Rt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function DI(t){Gf=t(Gf)}function UN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Ic(this),e,...n);return CI.set(r,e.sort?e.sort():[e]),Rt(r)}:LN().includes(t)?function(...e){return t.apply(Ic(this),e),Rt(EI.get(this))}:function(...e){return Rt(t.apply(Ic(this),e))}}function VN(t){return typeof t=="function"?UN(t):(t instanceof IDBTransaction&&jN(t),PN(t,kN())?new Proxy(t,Gf):t)}function Rt(t){if(t instanceof IDBRequest)return FN(t);if(zf.has(t))return zf.get(t);let e=VN(t);return e!==t&&(zf.set(t,e),Yf.set(e,t)),e}var Ic=t=>Yf.get(t);function SI(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Rt(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Rt(s.result),c.oldVersion,c.newVersion,Rt(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var $N=["get","getKey","getAll","getAllKeys","count"],BN=["put","add","delete","clear"],Kf=new Map;function bI(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Kf.get(e))return Kf.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=BN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||$N.includes(n)))return;let o=function(s,...a){return y(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return Kf.set(e,o),o}DI(t=>ne(_({},t),{get:(e,n,r)=>bI(e,n)||t.get(e,n,r),has:(e,n)=>!!bI(e,n)||t.has(e,n)}));var Zf=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(HN(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function HN(t){let e=t.getComponent();return e?.type==="VERSION"}var Jf="@firebase/app",TI="0.10.5";var er=new En("@firebase/app"),WN="@firebase/app-compat",zN="@firebase/analytics-compat",qN="@firebase/analytics",GN="@firebase/app-check-compat",YN="@firebase/app-check",KN="@firebase/auth",QN="@firebase/auth-compat",ZN="@firebase/database",JN="@firebase/database-compat",XN="@firebase/functions",eR="@firebase/functions-compat",tR="@firebase/installations",nR="@firebase/installations-compat",rR="@firebase/messaging",iR="@firebase/messaging-compat",oR="@firebase/performance",sR="@firebase/performance-compat",aR="@firebase/remote-config",cR="@firebase/remote-config-compat",lR="@firebase/storage",uR="@firebase/storage-compat",dR="@firebase/firestore",fR="@firebase/vertexai-preview",hR="@firebase/firestore-compat",pR="firebase",gR="10.12.2";var Xf="[DEFAULT]",mR={[Jf]:"fire-core",[WN]:"fire-core-compat",[qN]:"fire-analytics",[zN]:"fire-analytics-compat",[YN]:"fire-app-check",[GN]:"fire-app-check-compat",[KN]:"fire-auth",[QN]:"fire-auth-compat",[ZN]:"fire-rtdb",[JN]:"fire-rtdb-compat",[XN]:"fire-fn",[eR]:"fire-fn-compat",[tR]:"fire-iid",[nR]:"fire-iid-compat",[rR]:"fire-fcm",[iR]:"fire-fcm-compat",[oR]:"fire-perf",[sR]:"fire-perf-compat",[aR]:"fire-rc",[cR]:"fire-rc-compat",[lR]:"fire-gcs",[uR]:"fire-gcs-compat",[dR]:"fire-fst",[hR]:"fire-fst-compat",[fR]:"fire-vertex","fire-js":"fire-js",[pR]:"fire-js-all"};var Bo=new Map,vR=new Map,eh=new Map;function AI(t,e){try{t.container.addComponent(e)}catch(n){er.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Dn(t){let e=t.name;if(eh.has(e))return er.debug(`There were multiple attempts to register component ${e}.`),!1;eh.set(e,t);for(let n of Bo.values())AI(n,t);for(let n of vR.values())AI(n,t);return!0}function ih(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function hi(t){return t.settings!==void 0}var yR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cn=new qt("app","Firebase",yR);var th=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xe("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cn.create("app-deleted",{appName:this._name})}};var pi=gR;function oh(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Xf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Cn.create("bad-app-name",{appName:String(i)});if(n||(n=Wf()),!n)throw Cn.create("no-options");let o=Bo.get(i);if(o){if(jo(n,o.options)&&jo(r,o.config))return o;throw Cn.create("duplicate-app",{appName:i})}let s=new $o(i);for(let c of eh.values())s.addComponent(c);let a=new th(n,r,s);return Bo.set(i,a),a}function Wo(t=Xf){let e=Bo.get(t);if(!e&&t===Xf&&Wf())return oh();if(!e)throw Cn.create("no-app",{appName:t});return e}function wc(){return Array.from(Bo.values())}function ge(t,e,n){var r;let i=(r=mR[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),er.warn(a.join(" "));return}Dn(new Xe(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var _R="firebase-heartbeat-database",IR=1,Ho="firebase-heartbeat-store",Qf=null;function xI(){return Qf||(Qf=SI(_R,IR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ho)}catch(n){console.warn(n)}}}}).catch(t=>{throw Cn.create("idb-open",{originalErrorMessage:t.message})})),Qf}function wR(t){return y(this,null,function*(){try{let n=(yield xI()).transaction(Ho),r=yield n.objectStore(Ho).get(OI(t));return yield n.done,r}catch(e){if(e instanceof At)er.warn(e.message);else{let n=Cn.create("idb-get",{originalErrorMessage:e?.message});er.warn(n.message)}}})}function MI(t,e){return y(this,null,function*(){try{let r=(yield xI()).transaction(Ho,"readwrite");yield r.objectStore(Ho).put(e,OI(t)),yield r.done}catch(n){if(n instanceof At)er.warn(n.message);else{let r=Cn.create("idb-set",{originalErrorMessage:n?.message});er.warn(r.message)}}})}function OI(t){return`${t.name}!${t.options.appId}`}var ER=1024,CR=30*24*60*60*1e3,nh=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new rh(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return y(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=NI();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)))return this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let a=new Date(s.date).valueOf();return Date.now()-a<=CR}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return y(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=NI(),{heartbeatsToSend:r,unsentEntries:i}=DR(this._heartbeatsCache.heartbeats),o=Po(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o})}};function NI(){return new Date().toISOString().substring(0,10)}function DR(t,e=ER){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),RI(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),RI(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var rh=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return y(this,null,function*(){return hI()?pI().then(()=>!0).catch(()=>!1):!1})}read(){return y(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield wR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return y(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return MI(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return y(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return MI(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function RI(t){return Po(JSON.stringify({version:2,heartbeats:t})).length}function bR(t){Dn(new Xe("platform-logger",e=>new Zf(e),"PRIVATE")),Dn(new Xe("heartbeat",e=>new nh(e),"PRIVATE")),ge(Jf,TI,t),ge(Jf,TI,"esm2017"),ge("fire-js","")}bR("");var SR="firebase",TR="10.12.2";ge(SR,TR,"app");var mi=new cn("ANGULARFIRE2_VERSION");function ah(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var qo=(t,e)=>{let n=e?[e]:wc(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},zo=class{constructor(){return qo(AR)}},AR="app-check";function gi(){}var Ec=class{zone;delegate;constructor(e,n=Nl){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},sh=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",gi,{},gi,gi)),n.pipe(le({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Go=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Ec(Zone.current)),this.insideAngular=n.run(()=>new Ec(Zone.current,Ml)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(S(Q))};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Cc(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function MR(t){return Cc().ngZone.runOutsideAngular(()=>t())}function tr(t){return Cc().ngZone.run(()=>t())}function NR(t){return RR(Cc())(t)}function RR(t){return function(n){return n=n.lift(new sh(t.ngZone)),n.pipe(Xt(t.outsideAngular),Jt(t.insideAngular))}}var xR=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),tr(()=>t.apply(void 0,r))},bn=(t,e)=>function(){let n,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(n||=tr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",gi,{},gi,gi))),r[o]=xR(r[o],n));let i=MR(()=>t.apply(this,r));if(!e)if(i instanceof H){let o=Cc();return i.pipe(Xt(o.outsideAngular),Jt(o.insideAngular))}else return tr(()=>i);return i instanceof H?i.pipe(NR):i instanceof Promise?tr(()=>new Promise((o,s)=>i.then(a=>tr(()=>o(a)),a=>tr(()=>s(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:tr(()=>i)};var nr=class{constructor(e){return e}},Yo=class{constructor(){return wc()}};function OR(t){return t&&t.length===1?t[0]:new nr(Wo())}var ch=new A("angularfire2._apps"),PR={provide:nr,useFactory:OR,deps:[[new Qe,ch]]},kR={provide:Yo,deps:[[new Qe,ch]]};function LR(t){return(e,n)=>{let r=n.get(Et);ge("angularfire",mi.full,"core"),ge("angularfire",mi.full,"app"),ge("angular",Ay.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new nr(i)}}function PI(t,...e){return un([PR,kR,{provide:ch,useFactory:LR(t),multi:!0,deps:[Q,xe,Go,...e]}])}var kI=bn(oh,!0);function HI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var WI=HI,zI=new qt("auth","Firebase",HI());var Tc=new En("@firebase/auth");function FR(t,...e){Tc.logLevel<=Z.WARN&&Tc.warn(`Auth (${pi}): ${t}`,...e)}function bc(t,...e){Tc.logLevel<=Z.ERROR&&Tc.error(`Auth (${pi}): ${t}`,...e)}function LI(t,...e){throw Ih(t,...e)}function _h(t,...e){return Ih(t,...e)}function qI(t,e,n){let r=Object.assign(Object.assign({},WI()),{[e]:n});return new qt("auth","Firebase",r).create(e,{appName:t.name})}function Sc(t){return qI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ih(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return zI.create(t,...e)}function G(t,e,...n){if(!t)throw Ih(e,...n)}function Ko(t){let e="INTERNAL ASSERTION FAILED: "+t;throw bc(e),new Error(e)}function Ac(t,e){t||Ko(e)}function jR(){return FI()==="http:"||FI()==="https:"}function FI(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function UR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jR()||fI()||"connection"in navigator)?navigator.onLine:!0}function VR(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var ir=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ac(n>e,"Short delay should be less than long delay!"),this.isMobile=Lo()||mc()}get(){return UR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function $R(t,e){Ac(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Mc=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ko("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ko("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ko("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var BR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var HR=new ir(3e4,6e4);function GI(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Oc(o,s,a,c){return y(this,arguments,function*(t,e,n,r,i={}){return YI(t,i,()=>y(this,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let d=Uo(Object.assign({key:t.config.apiKey},u)).slice(1),f=yield t._getAdditionalHeaders();return f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode),Mc.fetch()(KI(t,t.config.apiHost,n,d),Object.assign({method:e,headers:f,referrerPolicy:"no-referrer"},l))}))})}function YI(t,e,n){return y(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},BR),e);try{let i=new dh(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Dc(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Dc(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Dc(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw Dc(t,"user-disabled",s);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw qI(t,u,l);LI(t,u)}}catch(i){if(i instanceof At)throw i;LI(t,"network-request-failed",{message:String(i)})}})}function KI(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?$R(t.config,i):`${t.config.apiScheme}://${i}`}var dh=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(_h(this.auth,"network-request-failed")),HR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Dc(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=_h(t,e,r);return i.customData._tokenResponse=n,i}function WR(t,e){return y(this,null,function*(){return Oc(t,"POST","/v1/accounts:delete",e)})}function QI(t,e){return y(this,null,function*(){return Oc(t,"POST","/v1/accounts:lookup",e)})}function Qo(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function wh(t,e=!1){return y(this,null,function*(){let n=dt(t),r=yield n.getIdToken(e),i=ZI(r);G(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Qo(lh(i.auth_time)),issuedAtTime:Qo(lh(i.iat)),expirationTime:Qo(lh(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function lh(t){return Number(t)*1e3}function ZI(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return bc("JWT malformed, contained fewer than 3 sections"),null;try{let i=ko(n);return i?JSON.parse(i):(bc("Failed to decode base64 JWT payload"),null)}catch(i){return bc("Caught error parsing JWT payload as JSON",i?.toString()),null}}function jI(t){let e=ZI(t);return G(e,"internal-error"),G(typeof e.exp<"u","internal-error"),G(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function fh(t,e,n=!1){return y(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof At&&zR(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function zR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var hh=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>y(this,null,function*(){yield this.iteration()}),n)}iteration(){return y(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Jo=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qo(this.lastLoginAt),this.creationTime=Qo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Nc(t){return y(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield fh(t,QI(n,{idToken:r}));G(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?JI(o.providerUserInfo):[],a=qR(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,u=c?l:!1,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Jo(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(t,d)})}function Eh(t){return y(this,null,function*(){let e=dt(t);yield Nc(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function qR(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function JI(t){return t.map(e=>{var{providerId:n}=e,r=Rl(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function GR(t,e){return y(this,null,function*(){let n=yield YI(t,{},()=>y(this,null,function*(){let r=Uo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=KI(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Mc.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function YR(t,e){return y(this,null,function*(){return Oc(t,"POST","/v2/accounts:revokeToken",GI(t,e))})}var Zo=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){G(e.idToken,"internal-error"),G(typeof e.idToken<"u","internal-error"),G(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){G(e.length!==0,"internal-error");let n=jI(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return y(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(G(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return y(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield GR(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(G(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(G(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(G(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Ko("not implemented")}};function Sn(t,e){G(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Xo=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Rl(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Jo(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return y(this,null,function*(){let n=yield fh(this,this.stsTokenManager.getToken(this.auth,e));return G(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return wh(this,e)}reload(){return Eh(this)}_assign(e){this!==e&&(G(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return y(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Nc(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return y(this,null,function*(){if(hi(this.auth.app))return Promise.reject(Sc(this.auth));let e=yield this.getIdToken();return yield fh(this,WR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,c,l,u;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,h=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,p=(s=n.photoURL)!==null&&s!==void 0?s:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,I=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,P=(l=n.createdAt)!==null&&l!==void 0?l:void 0,X=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:$,emailVerified:ae,isAnonymous:We,providerData:Ce,stsTokenManager:Ot}=n;G($&&Ot,e,"internal-error");let xi=Zo.fromJSON(this.name,Ot);G(typeof $=="string",e,"internal-error"),Sn(d,e.name),Sn(f,e.name),G(typeof ae=="boolean",e,"internal-error"),G(typeof We=="boolean",e,"internal-error"),Sn(h,e.name),Sn(p,e.name),Sn(v,e.name),Sn(I,e.name),Sn(P,e.name),Sn(X,e.name);let Oi=new t({uid:$,auth:e,email:f,emailVerified:ae,displayName:d,isAnonymous:We,photoURL:p,phoneNumber:h,tenantId:v,stsTokenManager:xi,createdAt:P,lastLoginAt:X});return Ce&&Array.isArray(Ce)&&(Oi.providerData=Ce.map(pl=>Object.assign({},pl))),I&&(Oi._redirectEventId=I),Oi}static _fromIdTokenResponse(e,n,r=!1){return y(this,null,function*(){let i=new Zo;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Nc(o),o})}static _fromGetAccountInfoResponse(e,n,r){return y(this,null,function*(){let i=n.users[0];G(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?JI(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Zo;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Jo(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,l),c})}};var UI=new Map;function rr(t){Ac(t instanceof Function,"Expected a class definition");let e=UI.get(t);return e?(Ac(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,UI.set(t,e),e)}var KR=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return y(this,null,function*(){return!0})}_set(n,r){return y(this,null,function*(){this.storage[n]=r})}_get(n){return y(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return y(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),ph=KR;function uh(t,e,n){return`firebase:${t}:${e}:${n}`}var Rc=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=uh(this.userKey,i.apiKey,o),this.fullPersistenceKey=uh("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return y(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Xo._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return y(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return y(this,null,function*(){if(!n.length)return new t(rr(ph),e,r);let i=(yield Promise.all(n.map(l=>y(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||rr(ph),s=uh(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let u=yield l._get(s);if(u){let d=Xo._fromJSON(e,u);l!==o&&(a=d),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new t(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>y(this,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function VI(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(XR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(QR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tx(e))return"Blackberry";if(nx(e))return"Webos";if(ZR(e))return"Safari";if((e.includes("chrome/")||JR(e))&&!e.includes("edge/"))return"Chrome";if(ex(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function QR(t=ut()){return/firefox\//i.test(t)}function ZR(t=ut()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function JR(t=ut()){return/crios\//i.test(t)}function XR(t=ut()){return/iemobile/i.test(t)}function ex(t=ut()){return/android/i.test(t)}function tx(t=ut()){return/blackberry/i.test(t)}function nx(t=ut()){return/webos/i.test(t)}function XI(t,e=[]){let n;switch(t){case"Browser":n=VI(ut());break;case"Worker":n=`${VI(ut())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${pi}/${r}`}var gh=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return y(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function rx(n){return y(this,arguments,function*(t,e={}){return Oc(t,"GET","/v2/passwordPolicy",GI(t,e))})}var ix=6,mh=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:ix,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var vh=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xc(this),this.idTokenSubscription=new xc(this),this.beforeStateQueue=new gh(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=rr(n)),this._initializationPromise=this.queue(()=>y(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Rc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return y(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return y(this,null,function*(){try{let n=yield QI(this,{idToken:e}),r=yield Xo._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return y(this,null,function*(){var n;if(hi(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return G(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return y(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return y(this,null,function*(){try{yield Nc(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=VR()}_delete(){return y(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return y(this,null,function*(){if(hi(this.app))return Promise.reject(Sc(this));let n=e?dt(e):null;return n&&G(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return y(this,null,function*(){if(!this._deleted)return e&&G(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>y(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return y(this,null,function*(){return hi(this.app)?Promise.reject(Sc(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return hi(this.app)?Promise.reject(Sc(this)):this.queue(()=>y(this,null,function*(){yield this.assertedPersistence.setPersistence(rr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return y(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return y(this,null,function*(){let e=yield rx(this),n=new mh(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new qt("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return y(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield YR(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return y(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return y(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&rr(e)||this._popupRedirectResolver;G(n,this,"argument-error"),this.redirectPersistenceManager=yield Rc.create(this,[rr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return y(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>y(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return y(this,null,function*(){if(e===this.currentUser)return this.queue(()=>y(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(G(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(n);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return y(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=XI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return y(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return y(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&FR(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function ox(t){return dt(t)}var xc=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=yI(n=>this.observer=n)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var sx={loadJS(){return y(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ax(t){sx=t}function cx(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function lx(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(rr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var X2=cx("rcb"),eH=new ir(3e4,6e4);var tH=new ir(2e3,1e4);var nH=10*60*1e3;var rH=new ir(3e4,6e4);var iH=new ir(5e3,15e3);var oH=encodeURIComponent("fac");var $I="@firebase/auth",BI="1.7.4";var yh=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return y(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function ux(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dx(t){Dn(new Xe("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;G(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:XI(t)},l=new vh(r,i,o,c);return lx(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Dn(new Xe("auth-internal",e=>{let n=ox(e.getProvider("auth").getImmediate());return(r=>new yh(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ge($I,BI,ux(t)),ge($I,BI,"esm2017")}var fx=5*60,sH=uI("authIdTokenMaxAge")||fx;function hx(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}ax({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=_h("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",hx().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dx("Browser");var fO="auth";var Pc=class{constructor(){return qo(fO)}};var ew="@firebase/database",tw="1.0.5";var Tp="";function hO(t){Tp=t}var Nh=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),de(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:fi(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var Rh=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Nt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var Pw=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Nh(e)}}catch{}return new Rh},sr=Pw("localStorage"),xh=Pw("sessionStorage");var _i=new En("@firebase/database"),pO=function(){let t=1;return function(){return t++}}(),kw=function(t){let e=_I(t),n=new pc;n.update(e);let r=n.digest();return gc.encodeByteArray(r)},ms=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=ms.apply(null,r):typeof r=="object"?e+=de(r):e+=r,e+=" "}return e},cr=null,nw=!0,gO=function(t,e){g(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(_i.logLevel=Z.VERBOSE,cr=_i.log.bind(_i),e&&xh.set("logging_enabled",!0)):typeof t=="function"?cr=t:(cr=null,xh.remove("logging_enabled"))},Ee=function(...t){if(nw===!0&&(nw=!1,cr===null&&xh.get("logging_enabled")===!0&&gO(!0)),cr){let e=ms.apply(null,t);cr(e)}},vs=function(t){return function(...e){Ee(t,...e)}},Oh=function(...t){let e="FIREBASE INTERNAL ERROR: "+ms(...t);_i.error(e)},Gt=function(...t){let e=`FIREBASE FATAL ERROR: ${ms(...t)}`;throw _i.error(e),new Error(e)},ke=function(...t){let e="FIREBASE WARNING: "+ms(...t);_i.warn(e)},mO=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ke("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Lw=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},vO=function(t){if(Mt()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ei="[MIN_NAME]",lr="[MAX_NAME]",Mi=function(t,e){if(t===e)return 0;if(t===Ei||e===lr)return-1;if(e===Ei||t===lr)return 1;{let n=rw(t),r=rw(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},yO=function(t,e){return t===e?0:t<e?-1:1},es=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+de(e))},Ap=function(t){if(typeof t!="object"||t===null)return de(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=de(e[r]),n+=":",n+=Ap(t[e[r]]);return n+="}",n},Fw=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Le(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var jw=function(t){g(!Lw(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,o,s,a,c;t===0?(o=0,s=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),o=a+r,s=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(c=e;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},_O=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},IO=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function wO(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var EO=new RegExp("^-?(0*)\\d{1,10}$"),CO=-2147483648,DO=2147483647,rw=function(t){if(EO.test(t)){let e=Number(t);if(e>=CO&&e<=DO)return e}return null},Ni=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw ke("Exception was thrown by user callback.",n),e},Math.floor(0))}},bO=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},os=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var Ph=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ke(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var kh=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ee("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ke(e)}},ss=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),Lc="5",Uw="v",Vw="s",$w="r",Bw="f",Hw=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ww="ls",zw="p",Lh="ac",qw="websocket",Gw="long_polling";var Fc=class{constructor(e,n,r,i,o=!1,s="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=sr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&sr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function SO(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Yw(t,e,n){g(typeof e=="string","typeof type must == string"),g(typeof n=="object","typeof params must == object");let r;if(e===qw)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Gw)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);SO(t)&&(n.ns=t.namespace);let i=[];return Le(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var Fh=class{constructor(){this.counters_={}}incrementCounter(e,n=1){Nt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return sI(this.counters_)}};var Ch={},Dh={};function Mp(t){let e=t.toString();return Ch[e]||(Ch[e]=new Fh),Ch[e]}function TO(t,e){let n=t.toString();return Dh[n]||(Dh[n]=e()),Dh[n]}var jh=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ni(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var iw="start",AO="close",MO="pLPCommand",NO="pRTLPCB",Kw="id",Qw="pw",Zw="ser",RO="cb",xO="seg",OO="ts",PO="d",kO="dframe",Jw=1870,Xw=30,LO=Jw-Xw,FO=25e3,jO=3e4,Uh=class t{constructor(e,n,r,i,o,s,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=vs(e),this.stats_=Mp(n),this.urlFn=c=>(this.appCheckToken&&(c[Lh]=this.appCheckToken),Yw(n,Gw,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new jh(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(jO)),vO(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Vh((...o)=>{let[s,a,c,l,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===iw)this.id=a,this.password=c;else if(s===AO)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[iw]="t",r[Zw]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[RO]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Uw]=Lc,this.transportSessionId&&(r[Vw]=this.transportSessionId),this.lastSessionId&&(r[Ww]=this.lastSessionId),this.applicationId&&(r[zw]=this.applicationId),this.appCheckToken&&(r[Lh]=this.appCheckToken),typeof location<"u"&&location.hostname&&Hw.test(location.hostname)&&(r[$w]=Bw);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return Mt()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!_O()&&!IO()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=de(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=Bf(n),i=Fw(r,LO);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(Mt())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[kO]="t",r[Kw]=e,r[Qw]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=de(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},Vh=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Mt())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=pO(),window[MO+this.uniqueCallbackIdentifier]=e,window[NO+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){Ee("frame writing exception"),a.stack&&Ee(a.stack),Ee(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ee("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[Kw]=this.myID,e[Qw]=this.myPW,e[Zw]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Xw+r.length<=Jw;){let s=this.pendingSegs.shift();r=r+"&"+xO+i+"="+s.seg+"&"+OO+i+"="+s.ts+"&"+PO+i+"="+s.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(FO)),o=()=>{clearTimeout(i),r()};this.addTag(e,o)}addTag(e,n){Mt()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Ee("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var UO=16384,VO=45e3,jc=null;typeof MozWebSocket<"u"?jc=MozWebSocket:typeof WebSocket<"u"&&(jc=WebSocket);var ts=(()=>{class t{constructor(n,r,i,o,s,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=vs(this.connId),this.stats_=Mp(r),this.connURL=t.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){let a={};return a[Uw]=Lc,!Mt()&&typeof location<"u"&&location.hostname&&Hw.test(location.hostname)&&(a[$w]=Bw),r&&(a[Vw]=r),i&&(a[Ww]=i),o&&(a[Lh]=o),s&&(a[zw]=s),Yw(n,qw,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,sr.set("previous_websocket_failure",!0);try{let i;if(Mt()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Lc}/${Tp}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new jc(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&jc!==null&&!t.forceDisallow_}static previouslyFailed(){return sr.isInMemoryStorage||sr.get("previous_websocket_failure")===!0}markConnectionHealthy(){sr.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=fi(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(g(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=de(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=Fw(r,UO);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(VO))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),$O=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[Uh,ts]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=ts&&ts.isAvailable(),i=r&&!ts.previouslyFailed();if(n.webSocketOnly&&(r||ke("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[ts];else{let o=this.transports_=[];for(let s of t.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),BO=6e4,HO=5e3,WO=10*1024,zO=100*1024,bh="t",ow="d",qO="s",sw="r",GO="e",aw="o",cw="a",lw="n",uw="p",YO="h",$h=class{constructor(e,n,r,i,o,s,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=vs("c:"+this.id+":"),this.transportManager_=new $O(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=os(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>zO?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>WO?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(bh in e){let n=e[bh];n===cw?this.upgradeIfSecondaryHealthy_():n===sw?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===aw&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=es("t",e),r=es("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:uw,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:cw,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:lw,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=es("t",e),r=es("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=es(bh,e);if(ow in e){let r=e[ow];if(n===YO){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===lw){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===qO?this.onConnectionShutdown_(r):n===sw?this.onReset_(r):n===GO?Oh("Server Error: "+r):n===aw?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Oh("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Lc!==r&&ke("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),os(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(BO))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):os(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(HO))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:uw,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(sr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Uc=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var Vc=class{constructor(e){this.allowedEvents_=e,this.listeners_={},g(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(e){g(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var $c=class t extends Vc{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Lo()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return g(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var dw=32,fw=768,J=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function Y(){return new J("")}function F(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function An(t){return t.pieces_.length-t.pieceNum_}function te(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new J(t.pieces_,e)}function eE(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function KO(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function tE(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function nE(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new J(e,0)}function fe(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof J)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new J(n,0)}function V(t){return t.pieceNum_>=t.pieces_.length}function Pe(t,e){let n=F(t),r=F(e);if(n===null)return e;if(n===r)return Pe(te(t),te(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Np(t,e){if(An(t)!==An(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function ht(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(An(t)>An(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var Bh=class{constructor(e,n){this.errorPrefix_=n,this.parts_=tE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Vo(this.parts_[r]);rE(this)}};function QO(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Vo(e),rE(t)}function ZO(t){let e=t.parts_.pop();t.byteLength_-=Vo(e),t.parts_.length>0&&(t.byteLength_-=1)}function rE(t){if(t.byteLength_>fw)throw new Error(t.errorPrefix_+"has a key path longer than "+fw+" bytes ("+t.byteLength_+").");if(t.parts_.length>dw)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+dw+") or object contains a cycle "+or(t))}function or(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var Hh=class t extends Vc{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return g(e==="visible","Unknown event type: "+e),[this.visible_]}};var ns=1e3,JO=60*5*1e3,hw=30*1e3,XO=1.3,eP=3e4,tP="server_kill",pw=3,Rp=(()=>{class t extends Uc{constructor(n,r,i,o,s,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=vs("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ns,this.maxReconnectDelay_=JO,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Mt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Hh.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&$c.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(de(s)),g(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();let r=new wn,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(n,r,i,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),g(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),g(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,c=>{let l=c.d,u=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,o),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&Nt(n,"w")){let i=Jn(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();ke(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||vI(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=hw)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=mI(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),g(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);let s={p:n},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+de(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):Oh("Unrecognized action received from server: "+de(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){g(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ns,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=ns,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>eP&&(this.reconnectDelay_=ns),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*XO)}this.onConnectStatus_(!1)}establishConnection_(){return y(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+t.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(f){g(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,h]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Ee("getToken() completed but was canceled"):(Ee("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,c=new $h(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,p=>{ke(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(tP)},s))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&ke(f),l())}}})}interrupt(n){Ee("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Ee("Resuming connection for reason: "+n),delete this.interruptReasons_[n],vc(this.interruptReasons_)&&(this.reconnectDelay_=ns,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(s=>Ap(s)).join("$"):i="default";let o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){let i=new J(n).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){Ee("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=pw&&(this.reconnectDelay_=hw,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Ee("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=pw&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";Mt()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+Tp.replace(/\./g,"-")]=1,Lo()?n["framework.cordova"]=1:mc()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=$c.getInstance().currentlyOnline();return vc(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),j=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var Ci=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new j(Ei,e),i=new j(Ei,n);return this.compare(r,i)!==0}minPost(){return j.MIN}};var kc,Bc=class extends Ci{static get __EMPTY_NODE(){return kc}static set __EMPTY_NODE(e){kc=e}compare(e,n){return Mi(e.name,n.name)}isDefinedOn(e){throw Zn("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return j.MIN}maxPost(){return new j(lr,kc)}makePost(e,n){return g(typeof e=="string","KeyIndex indexValue must always be a string."),new j(e,kc)}toString(){return".key"}},Ii=new Bc;var yi=class{constructor(e,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=n?r(e.key,n):1,i&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},ft=(()=>{class t{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i??t.RED,this.left=o??et.EMPTY_NODE,this.right=s??et.EMPTY_NODE}copy(n,r,i,o,s){return new t(n??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this,s=i(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return et.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return et.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),Wh=class{copy(e,n,r,i,o){return this}insert(e,n,r){return new ft(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},et=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ft.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ft.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new yi(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new yi(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new yi(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new yi(this.root_,null,this.comparator_,!0,e)}};et.EMPTY_NODE=new Wh;function nP(t,e){return Mi(t.name,e.name)}function xp(t,e){return Mi(t,e)}var zh;function rP(t){zh=t}var iE=function(t){return typeof t=="number"?"number:"+jw(t):"string:"+t},oE=function(t){if(t.isLeafNode()){let e=t.val();g(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Nt(e,".sv"),"Priority must be a string or number.")}else g(t===zh||t.isEmpty(),"priority of unexpected type.");g(t===zh||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var gw,Di=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,g(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),oE(this.priorityNode_)}static set __childrenNodeConstructor(n){gw=n}static get __childrenNodeConstructor(){return gw}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return V(n)?this:F(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=F(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(g(i!==".priority"||An(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(te(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+iE(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=jw(this.value_):n+=this.value_,this.lazyHash_=kw(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(g(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(r),s=t.VALUE_TYPE_ORDER.indexOf(i);return g(o>=0,"Unknown leaf type: "+r),g(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),sE,aE;function iP(t){sE=t}function oP(t){aE=t}var qh=class extends Ci{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?Mi(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return j.MIN}maxPost(){return new j(lr,new Di("[PRIORITY-POST]",aE))}makePost(e,n){let r=sE(e);return new j(n,new Di("[PRIORITY-POST]",r))}toString(){return".priority"}},se=new qh;var sP=Math.log(2),Gh=class{constructor(e){let n=o=>parseInt(Math.log(o)/sP,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Hc=function(t,e,n,r){t.sort(e);let i=function(c,l){let u=l-c,d,f;if(u===0)return null;if(u===1)return d=t[c],f=n?n(d):d,new ft(f,d.node,ft.BLACK,null,null);{let h=parseInt(u/2,10)+c,p=i(c,h),v=i(h+1,l);return d=t[h],f=n?n(d):d,new ft(f,d.node,ft.BLACK,p,v)}},o=function(c){let l=null,u=null,d=t.length,f=function(p,v){let I=d-p,P=d;d-=p;let X=i(I+1,P),$=t[I],ae=n?n($):$;h(new ft(ae,$.node,v,null,X))},h=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){let v=c.nextBitIsOne(),I=Math.pow(2,c.count-(p+1));v?f(I,ft.BLACK):(f(I,ft.BLACK),f(I,ft.RED))}return u},s=new Gh(t.length),a=o(s);return new et(r||e,a)};var Sh,vi={},bi=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return g(vi&&se,"ChildrenNode.ts has not been loaded"),Sh=Sh||new t({".priority":vi},{".priority":se}),Sh}get(e){let n=Jn(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof et?n:null}hasIndex(e){return Nt(this.indexSet_,e.toString())}addIndex(e,n){g(e!==Ii,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=n.getIterator(j.Wrap),s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=Hc(r,e.getCompare()):a=vi;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let u=Object.assign({},this.indexes_);return u[c]=a,new t(u,l)}addToIndexes(e,n){let r=Fo(this.indexes_,(i,o)=>{let s=Jn(this.indexSet_,o);if(g(s,"Missing index implementation for "+o),i===vi)if(s.isDefinedOn(e.node)){let a=[],c=n.getIterator(j.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),Hc(a,s.getCompare())}else return vi;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new j(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=Fo(this.indexes_,i=>{if(i===vi)return i;{let o=n.get(e.name);return o?i.remove(new j(e.name,o)):i}});return new t(r,this.indexSet_)}};var rs,O=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&oE(this.priorityNode_),this.children_.isEmpty()&&g(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return rs||(rs=new t(new et(xp),null,bi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||rs}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?rs:r}}getChild(n){let r=F(n);return r===null?this:this.getImmediateChild(r).getChild(te(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(g(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new j(n,r),o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?rs:this.priorityNode_;return new t(o,a,s)}}updateChild(n,r){let i=F(n);if(i===null)return r;{g(F(n)!==".priority"||An(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(te(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(se,(a,c)=>{r[a]=c.val(n),i++,s&&t.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+iE(this.getPriority().val())+":"),this.forEachChild(se,(r,i)=>{let o=i.hash();o!==""&&(n+=":"+r+":"+o)}),this.lazyHash_=n===""?"":kw(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new j(n,r));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new j(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new j(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,j.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,j.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===ys?-1:0}withIndex(n){if(n===Ii||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===Ii||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(se),o=r.getIterator(se),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===Ii?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),Yh=class extends O{constructor(){super(new et(xp),O.EMPTY_NODE,bi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return O.EMPTY_NODE}isEmpty(){return!1}},ys=new Yh;Object.defineProperties(j,{MIN:{value:new j(Ei,O.EMPTY_NODE)},MAX:{value:new j(lr,ys)}});Bc.__EMPTY_NODE=O.EMPTY_NODE;Di.__childrenNodeConstructor=O;rP(ys);oP(ys);var aP=!0;function _e(t,e=null){if(t===null)return O.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),g(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new Di(n,_e(e))}if(!(t instanceof Array)&&aP){let n=[],r=!1;if(Le(t,(s,a)=>{if(s.substring(0,1)!=="."){let c=_e(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new j(s,c)))}}),n.length===0)return O.EMPTY_NODE;let o=Hc(n,nP,s=>s.name,xp);if(r){let s=Hc(n,se.getCompare());return new O(o,_e(e),new bi({".priority":s},{".priority":se}))}else return new O(o,_e(e),bi.Default)}else{let n=O.EMPTY_NODE;return Le(t,(r,i)=>{if(Nt(t,r)&&r.substring(0,1)!=="."){let o=_e(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(_e(e))}}iP(_e);var Kh=class extends Ci{constructor(e){super(),this.indexPath_=e,g(!V(e)&&F(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?Mi(e.name,n.name):o}makePost(e,n){let r=_e(e),i=O.EMPTY_NODE.updateChild(this.indexPath_,r);return new j(n,i)}maxPost(){let e=O.EMPTY_NODE.updateChild(this.indexPath_,ys);return new j(lr,e)}toString(){return tE(this.indexPath_,0).join("/")}};var Qh=class extends Ci{compare(e,n){let r=e.node.compareTo(n.node);return r===0?Mi(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return j.MIN}maxPost(){return j.MAX}makePost(e,n){let r=_e(e);return new j(n,r)}toString(){return".value"}},cP=new Qh;function cE(t){return{type:"value",snapshotNode:t}}function Si(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function us(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ds(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function lP(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var fs=class{constructor(e){this.index_=e}updateChild(e,n,r,i,o,s){g(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?e.hasChild(n)?s.trackChildChange(us(n,a)):g(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(Si(n,r)):s.trackChildChange(ds(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(se,(i,o)=>{n.hasChild(i)||r.trackChildChange(us(i,o))}),n.isLeafNode()||n.forEachChild(se,(i,o)=>{if(e.hasChild(i)){let s=e.getImmediateChild(i);s.equals(o)||r.trackChildChange(ds(i,o,s))}else r.trackChildChange(Si(i,o))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?O.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Wc=class t{constructor(e){this.indexedFilter_=new fs(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,o,s){return this.matches(new j(n,r))||(r=O.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,o,s)}updateFullNode(e,n,r){n.isLeafNode()&&(n=O.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(O.EMPTY_NODE);let o=this;return n.forEachChild(se,(s,a)=>{o.matches(new j(s,a))||(i=i.updateImmediateChild(s,O.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var Zh=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Wc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,o,s){return this.rangedFilter_.matches(new j(n,r))||(r=O.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,o,s):this.fullLimitUpdateChild_(e,n,r,o,s)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=O.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=O.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(O.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,O.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,o){let s;if(this.reverse_){let d=this.index_.getCompare();s=(f,h)=>d(h,f)}else s=this.index_.getCompare();let a=e;g(a.numChildren()===this.limit_,"");let c=new j(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){let d=a.getImmediateChild(n),f=i.getChildAfterChild(this.index_,l,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);let h=f==null?1:s(f,c);if(u&&!r.isEmpty()&&h>=0)return o?.trackChildChange(ds(n,r,d)),a.updateImmediateChild(n,r);{o?.trackChildChange(us(n,d));let v=a.updateImmediateChild(n,O.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(o?.trackChildChange(Si(f.name,f.node)),v.updateImmediateChild(f.name,f.node)):v}}else return r.isEmpty()?e:u&&s(l,c)>=0?(o!=null&&(o.trackChildChange(us(l.name,l.node)),o.trackChildChange(Si(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,O.EMPTY_NODE)):e}};var Jh=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=se}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return g(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return g(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ei}hasEnd(){return this.endSet_}getIndexEndValue(){return g(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return g(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:lr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return g(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===se}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function uP(t){return t.loadsAllData()?new fs(t.getIndex()):t.hasLimit()?new Zh(t):new Wc(t)}function mw(t){let e={};if(t.isDefault())return e;let n;if(t.index_===se?n="$priority":t.index_===cP?n="$value":t.index_===Ii?n="$key":(g(t.index_ instanceof Kh,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=de(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=de(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+de(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=de(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+de(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function vw(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==se&&(e.i=t.index_.toString()),e}var Xh=class t extends Uc{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=vs("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(g(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);let s=t.getListenId_(e,r),a={};this.listens_[s]=a;let c=mw(e._queryParams);this.restRequest_(o+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(o,d,!1,r),Jn(this.listens_,s)===a){let f;l?l===401?f="permission_denied":f="rest_error:"+l:f="ok",i(f,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=mw(e._queryParams),r=e._path.toString(),i=new wn;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Uo(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=fi(a.responseText)}catch{ke("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&ke("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var ep=class{constructor(){this.rootNode_=O.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function zc(){return{value:null,children:new Map}}function lE(t,e,n){if(V(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=F(e);t.children.has(r)||t.children.set(r,zc());let i=t.children.get(r);e=te(e),lE(i,e,n)}}function tp(t,e,n){t.value!==null?n(e,t.value):dP(t,(r,i)=>{let o=new J(e.toString()+"/"+r);tp(i,o,n)})}function dP(t,e){t.children.forEach((n,r)=>{e(r,n)})}var np=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Le(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var yw=10*1e3,fP=30*1e3,hP=5*60*1e3,rp=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new np(e);let r=yw+(fP-yw)*Math.random();os(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;Le(e,(i,o)=>{o>0&&Nt(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),os(this.reportStats_.bind(this),Math.floor(Math.random()*2*hP))}};var xt=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(xt||{});function uE(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Op(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Pp(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var ip=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=xt.ACK_USER_WRITE,this.source=uE()}operationForChild(e){if(V(this.path)){if(this.affectedTree.value!=null)return g(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new J(e));return new t(Y(),n,this.revert)}}else return g(F(this.path)===e,"operationForChild called for unrelated child."),new t(te(this.path),this.affectedTree,this.revert)}};var qc=class t{constructor(e,n){this.source=e,this.path=n,this.type=xt.LISTEN_COMPLETE}operationForChild(e){return V(this.path)?new t(this.source,Y()):new t(this.source,te(this.path))}};var Ti=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=xt.OVERWRITE}operationForChild(e){return V(this.path)?new t(this.source,Y(),this.snap.getImmediateChild(e)):new t(this.source,te(this.path),this.snap)}};var Gc=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=xt.MERGE}operationForChild(e){if(V(this.path)){let n=this.children.subtree(new J(e));return n.isEmpty()?null:n.value?new Ti(this.source,Y(),n.value):new t(this.source,Y(),n)}else return g(F(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,te(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Yt=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(V(e))return this.isFullyInitialized()&&!this.filtered_;let n=F(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var op=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function pP(t,e,n,r){let i=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(lP(s.childName,s.snapshotNode))}),is(t,i,"child_removed",e,r,n),is(t,i,"child_added",e,r,n),is(t,i,"child_moved",o,r,n),is(t,i,"child_changed",e,r,n),is(t,i,"value",e,r,n),i}function is(t,e,n,r,i,o){let s=r.filter(a=>a.type===n);s.sort((a,c)=>mP(t,a,c)),s.forEach(a=>{let c=gP(t,a,o);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function gP(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function mP(t,e,n){if(e.childName==null||n.childName==null)throw Zn("Should only compare child_ events.");let r=new j(e.childName,e.snapshotNode),i=new j(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function il(t,e){return{eventCache:t,serverCache:e}}function as(t,e,n,r){return il(new Yt(e,n,r),t.serverCache)}function dE(t,e,n,r){return il(t.eventCache,new Yt(e,n,r))}function sp(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ur(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Th,vP=()=>(Th||(Th=new et(yO)),Th),Fe=class t{constructor(e,n=vP()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return Le(e,(r,i)=>{n=n.set(new J(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Y(),value:this.value};if(V(e))return null;{let r=F(e),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(te(e),n);return o!=null?{path:fe(new J(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(V(e))return this;{let n=F(e),r=this.children.get(n);return r!==null?r.subtree(te(e)):new t(null)}}set(e,n){if(V(e))return new t(n,this.children);{let r=F(e),o=(this.children.get(r)||new t(null)).set(te(e),n),s=this.children.insert(r,o);return new t(this.value,s)}}remove(e){if(V(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=F(e),r=this.children.get(n);if(r){let i=r.remove(te(e)),o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new t(null):new t(this.value,o)}else return this}}get(e){if(V(e))return this.value;{let n=F(e),r=this.children.get(n);return r?r.get(te(e)):null}}setTree(e,n){if(V(e))return n;{let r=F(e),o=(this.children.get(r)||new t(null)).setTree(te(e),n),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new t(this.value,s)}}fold(e){return this.fold_(Y(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(fe(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Y(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(V(e))return null;{let o=F(e),s=this.children.get(o);return s?s.findOnPath_(te(e),fe(n,o),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Y(),n)}foreachOnPath_(e,n,r){if(V(e))return this;{this.value&&r(n,this.value);let i=F(e),o=this.children.get(i);return o?o.foreachOnPath_(te(e),fe(n,i),r):new t(null)}}foreach(e){this.foreach_(Y(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(fe(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var pt=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new Fe(null))}};function cs(t,e,n){if(V(e))return new pt(new Fe(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,o=r.value,s=Pe(i,e);return o=o.updateChild(s,n),new pt(t.writeTree_.set(i,o))}else{let i=new Fe(n),o=t.writeTree_.setTree(e,i);return new pt(o)}}}function _w(t,e,n){let r=t;return Le(n,(i,o)=>{r=cs(r,fe(e,i),o)}),r}function Iw(t,e){if(V(e))return pt.empty();{let n=t.writeTree_.setTree(e,new Fe(null));return new pt(n)}}function ap(t,e){return dr(t,e)!=null}function dr(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Pe(n.path,e)):null}function ww(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(se,(r,i)=>{e.push(new j(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new j(r,i.value))}),e}function Tn(t,e){if(V(e))return t;{let n=dr(t,e);return n!=null?new pt(new Fe(n)):new pt(t.writeTree_.subtree(e))}}function cp(t){return t.writeTree_.isEmpty()}function Ai(t,e){return fE(Y(),t.writeTree_,e)}function fE(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{i===".priority"?(g(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=fE(fe(t,i),o,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(fe(t,".priority"),r)),n}}function kp(t,e){return mE(e,t)}function yP(t,e,n,r,i){g(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=cs(t.visibleWrites,e,n)),t.lastWriteId=r}function _P(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function IP(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);g(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,o=!1,s=t.allWrites.length-1;for(;i&&s>=0;){let a=t.allWrites[s];a.visible&&(s>=n&&wP(a,r.path)?i=!1:ht(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return EP(t),!0;if(r.snap)t.visibleWrites=Iw(t.visibleWrites,r.path);else{let a=r.children;Le(a,c=>{t.visibleWrites=Iw(t.visibleWrites,fe(r.path,c))})}return!0}else return!1}function wP(t,e){if(t.snap)return ht(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&ht(fe(t.path,n),e))return!0;return!1}function EP(t){t.visibleWrites=hE(t.allWrites,CP,Y()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function CP(t){return t.visible}function hE(t,e,n){let r=pt.empty();for(let i=0;i<t.length;++i){let o=t[i];if(e(o)){let s=o.path,a;if(o.snap)ht(n,s)?(a=Pe(n,s),r=cs(r,a,o.snap)):ht(s,n)&&(a=Pe(s,n),r=cs(r,Y(),o.snap.getChild(a)));else if(o.children){if(ht(n,s))a=Pe(n,s),r=_w(r,a,o.children);else if(ht(s,n))if(a=Pe(s,n),V(a))r=_w(r,Y(),o.children);else{let c=Jn(o.children,F(a));if(c){let l=c.getChild(te(a));r=cs(r,Y(),l)}}}else throw Zn("WriteRecord should have .snap or .children")}}return r}function pE(t,e,n,r,i){if(!r&&!i){let o=dr(t.visibleWrites,e);if(o!=null)return o;{let s=Tn(t.visibleWrites,e);if(cp(s))return n;if(n==null&&!ap(s,Y()))return null;{let a=n||O.EMPTY_NODE;return Ai(s,a)}}}else{let o=Tn(t.visibleWrites,e);if(!i&&cp(o))return n;if(!i&&n==null&&!ap(o,Y()))return null;{let s=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(ht(l.path,e)||ht(e,l.path))},a=hE(t.allWrites,s,e),c=n||O.EMPTY_NODE;return Ai(a,c)}}}function DP(t,e,n){let r=O.EMPTY_NODE,i=dr(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(se,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){let o=Tn(t.visibleWrites,e);return n.forEachChild(se,(s,a)=>{let c=Ai(Tn(o,new J(s)),a);r=r.updateImmediateChild(s,c)}),ww(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=Tn(t.visibleWrites,e);return ww(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function bP(t,e,n,r,i){g(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=fe(e,n);if(ap(t.visibleWrites,o))return null;{let s=Tn(t.visibleWrites,o);return cp(s)?i.getChild(n):Ai(s,i.getChild(n))}}function SP(t,e,n,r){let i=fe(e,n),o=dr(t.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){let s=Tn(t.visibleWrites,i);return Ai(s,r.getNode().getImmediateChild(n))}else return null}function TP(t,e){return dr(t.visibleWrites,e)}function AP(t,e,n,r,i,o,s){let a,c=Tn(t.visibleWrites,e),l=dr(c,Y());if(l!=null)a=l;else if(n!=null)a=Ai(c,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),h=f.getNext();for(;h&&u.length<i;)d(h,r)!==0&&u.push(h),h=f.getNext();return u}else return[]}function MP(){return{visibleWrites:pt.empty(),allWrites:[],lastWriteId:-1}}function Yc(t,e,n,r){return pE(t.writeTree,t.treePath,e,n,r)}function Lp(t,e){return DP(t.writeTree,t.treePath,e)}function Ew(t,e,n,r){return bP(t.writeTree,t.treePath,e,n,r)}function Kc(t,e){return TP(t.writeTree,fe(t.treePath,e))}function NP(t,e,n,r,i,o){return AP(t.writeTree,t.treePath,e,n,r,i,o)}function Fp(t,e,n){return SP(t.writeTree,t.treePath,e,n)}function gE(t,e){return mE(fe(t.treePath,e),t.writeTree)}function mE(t,e){return{treePath:t,writeTree:e}}var lp=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;g(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),g(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,ds(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,us(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,Si(r,e.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,ds(r,e.snapshotNode,i.oldSnap));else throw Zn("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var up=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},vE=new up,hs=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Yt(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Fp(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ur(this.viewCache_),o=NP(this.writes_,i,n,1,r,e);return o.length===0?null:o[0]}};function RP(t){return{filter:t}}function xP(t,e){g(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),g(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function OP(t,e,n,r,i){let o=new lp,s,a;if(n.type===xt.OVERWRITE){let l=n;l.source.fromUser?s=dp(t,e,l.path,l.snap,r,i,o):(g(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!V(l.path),s=Qc(t,e,l.path,l.snap,r,i,a,o))}else if(n.type===xt.MERGE){let l=n;l.source.fromUser?s=kP(t,e,l.path,l.children,r,i,o):(g(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=fp(t,e,l.path,l.children,r,i,a,o))}else if(n.type===xt.ACK_USER_WRITE){let l=n;l.revert?s=jP(t,e,l.path,r,i,o):s=LP(t,e,l.path,l.affectedTree,r,i,o)}else if(n.type===xt.LISTEN_COMPLETE)s=FP(t,e,n.path,r,o);else throw Zn("Unknown operation type: "+n.type);let c=o.getChanges();return PP(e,s,c),{viewCache:s,changes:c}}function PP(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=sp(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(cE(sp(e)))}}function yE(t,e,n,r,i,o){let s=e.eventCache;if(Kc(r,n)!=null)return e;{let a,c;if(V(n))if(g(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=ur(e),u=l instanceof O?l:O.EMPTY_NODE,d=Lp(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{let l=Yc(r,ur(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,o)}else{let l=F(n);if(l===".priority"){g(An(n)===1,"Can't have a priority with additional path components");let u=s.getNode();c=e.serverCache.getNode();let d=Ew(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=s.getNode()}else{let u=te(n),d;if(s.isCompleteForChild(l)){c=e.serverCache.getNode();let f=Ew(r,n,s.getNode(),c);f!=null?d=s.getNode().getImmediateChild(l).updateChild(u,f):d=s.getNode().getImmediateChild(l)}else d=Fp(r,l,e.serverCache);d!=null?a=t.filter.updateChild(s.getNode(),l,d,u,i,o):a=s.getNode()}}return as(e,a,s.isFullyInitialized()||V(n),t.filter.filtersNodes())}}function Qc(t,e,n,r,i,o,s,a){let c=e.serverCache,l,u=s?t.filter:t.filter.getIndexedFilter();if(V(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let h=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),h,null)}else{let h=F(n);if(!c.isCompleteForPath(n)&&An(n)>1)return e;let p=te(n),I=c.getNode().getImmediateChild(h).updateChild(p,r);h===".priority"?l=u.updatePriority(c.getNode(),I):l=u.updateChild(c.getNode(),h,I,p,vE,null)}let d=dE(e,l,c.isFullyInitialized()||V(n),u.filtersNodes()),f=new hs(i,d,o);return yE(t,d,n,i,f,a)}function dp(t,e,n,r,i,o,s){let a=e.eventCache,c,l,u=new hs(i,e,o);if(V(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,s),c=as(e,l,!0,t.filter.filtersNodes());else{let d=F(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=as(e,l,a.isFullyInitialized(),a.isFiltered());else{let f=te(n),h=a.getNode().getImmediateChild(d),p;if(V(f))p=r;else{let v=u.getCompleteChild(d);v!=null?eE(f)===".priority"&&v.getChild(nE(f)).isEmpty()?p=v:p=v.updateChild(f,r):p=O.EMPTY_NODE}if(h.equals(p))c=e;else{let v=t.filter.updateChild(a.getNode(),d,p,f,u,s);c=as(e,v,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function Cw(t,e){return t.eventCache.isCompleteForChild(e)}function kP(t,e,n,r,i,o,s){let a=e;return r.foreach((c,l)=>{let u=fe(n,c);Cw(e,F(u))&&(a=dp(t,a,u,l,i,o,s))}),r.foreach((c,l)=>{let u=fe(n,c);Cw(e,F(u))||(a=dp(t,a,u,l,i,o,s))}),a}function Dw(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function fp(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;V(n)?l=r:l=new Fe(null).setTree(n,r);let u=e.serverCache.getNode();return l.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){let h=e.serverCache.getNode().getImmediateChild(d),p=Dw(t,h,f);c=Qc(t,c,new J(d),p,i,o,s,a)}}),l.children.inorderTraversal((d,f)=>{let h=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){let p=e.serverCache.getNode().getImmediateChild(d),v=Dw(t,p,f);c=Qc(t,c,new J(d),v,i,o,s,a)}}),c}function LP(t,e,n,r,i,o,s){if(Kc(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(V(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Qc(t,e,n,c.getNode().getChild(n),i,o,a,s);if(V(n)){let l=new Fe(null);return c.getNode().forEachChild(Ii,(u,d)=>{l=l.set(new J(u),d)}),fp(t,e,n,l,i,o,a,s)}else return e}else{let l=new Fe(null);return r.foreach((u,d)=>{let f=fe(n,u);c.isCompleteForPath(f)&&(l=l.set(u,c.getNode().getChild(f)))}),fp(t,e,n,l,i,o,a,s)}}function FP(t,e,n,r,i){let o=e.serverCache,s=dE(e,o.getNode(),o.isFullyInitialized()||V(n),o.isFiltered());return yE(t,s,n,r,vE,i)}function jP(t,e,n,r,i,o){let s;if(Kc(r,n)!=null)return e;{let a=new hs(r,e,i),c=e.eventCache.getNode(),l;if(V(n)||F(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Yc(r,ur(e));else{let d=e.serverCache.getNode();g(d instanceof O,"serverChildren would be complete if leaf node"),u=Lp(r,d)}u=u,l=t.filter.updateFullNode(c,u,o)}else{let u=F(n),d=Fp(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,te(n),a,o):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,O.EMPTY_NODE,te(n),a,o):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=Yc(r,ur(e)),s.isLeafNode()&&(l=t.filter.updateFullNode(l,s,o)))}return s=e.serverCache.isFullyInitialized()||Kc(r,Y())!=null,as(e,l,s,t.filter.filtersNodes())}}var hp=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new fs(r.getIndex()),o=uP(r);this.processor_=RP(o);let s=n.serverCache,a=n.eventCache,c=i.updateFullNode(O.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(O.EMPTY_NODE,a.getNode(),null),u=new Yt(c,s.isFullyInitialized(),i.filtersNodes()),d=new Yt(l,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=il(d,u),this.eventGenerator_=new op(this.query_)}get query(){return this.query_}};function UP(t){return t.viewCache_.serverCache.getNode()}function VP(t,e){let n=ur(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!V(e)&&!n.getImmediateChild(F(e)).isEmpty())?n.getChild(e):null}function bw(t){return t.eventRegistrations_.length===0}function $P(t,e){t.eventRegistrations_.push(e)}function Sw(t,e,n){let r=[];if(n){g(e==null,"A cancel should cancel all event registrations.");let i=t.query._path;t.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(n,i);s&&r.push(s)})}if(e){let i=[];for(let o=0;o<t.eventRegistrations_.length;++o){let s=t.eventRegistrations_[o];if(!s.matches(e))i.push(s);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(o+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function Tw(t,e,n,r){e.type===xt.MERGE&&e.source.queryId!==null&&(g(ur(t.viewCache_),"We should always have a full cache before handling merges"),g(sp(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,o=OP(t.processor_,i,e,n,r);return xP(t.processor_,o.viewCache),g(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,_E(t,o.changes,o.viewCache.eventCache.getNode(),null)}function BP(t,e){let n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(se,(o,s)=>{r.push(Si(o,s))}),n.isFullyInitialized()&&r.push(cE(n.getNode())),_E(t,r,n.getNode(),e)}function _E(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return pP(t.eventGenerator_,e,n,i)}var Zc,pp=class{constructor(){this.views=new Map}};function HP(t){g(!Zc,"__referenceConstructor has already been defined"),Zc=t}function WP(){return g(Zc,"Reference.ts has not been loaded"),Zc}function zP(t){return t.views.size===0}function jp(t,e,n,r){let i=e.source.queryId;if(i!==null){let o=t.views.get(i);return g(o!=null,"SyncTree gave us an op for an invalid query."),Tw(o,e,n,r)}else{let o=[];for(let s of t.views.values())o=o.concat(Tw(s,e,n,r));return o}}function qP(t,e,n,r,i){let o=e._queryIdentifier,s=t.views.get(o);if(!s){let a=Yc(n,i?r:null),c=!1;a?c=!0:r instanceof O?(a=Lp(n,r),c=!1):(a=O.EMPTY_NODE,c=!1);let l=il(new Yt(a,c,!1),new Yt(r,i,!1));return new hp(e,l)}return s}function GP(t,e,n,r,i,o){let s=qP(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),$P(s,n),BP(s,n)}function YP(t,e,n,r){let i=e._queryIdentifier,o=[],s=[],a=Mn(t);if(i==="default")for(let[c,l]of t.views.entries())s=s.concat(Sw(l,n,r)),bw(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||o.push(l.query));else{let c=t.views.get(i);c&&(s=s.concat(Sw(c,n,r)),bw(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||o.push(c.query)))}return a&&!Mn(t)&&o.push(new(WP())(e._repo,e._path)),{removed:o,events:s}}function IE(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function wi(t,e){let n=null;for(let r of t.views.values())n=n||VP(r,e);return n}function wE(t,e){if(e._queryParams.loadsAllData())return ol(t);{let r=e._queryIdentifier;return t.views.get(r)}}function EE(t,e){return wE(t,e)!=null}function Mn(t){return ol(t)!=null}function ol(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var Jc;function KP(t){g(!Jc,"__referenceConstructor has already been defined"),Jc=t}function QP(){return g(Jc,"Reference.ts has not been loaded"),Jc}var ZP=1,Xc=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Fe(null),this.pendingWriteTree_=MP(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function CE(t,e,n,r,i){return yP(t.pendingWriteTree_,e,n,r,i),i?_s(t,new Ti(uE(),e,n)):[]}function ar(t,e,n=!1){let r=_P(t.pendingWriteTree_,e);if(IP(t.pendingWriteTree_,e)){let o=new Fe(null);return r.snap!=null?o=o.set(Y(),!0):Le(r.children,s=>{o=o.set(new J(s),!0)}),_s(t,new ip(r.path,o,n))}else return[]}function sl(t,e,n){return _s(t,new Ti(Op(),e,n))}function JP(t,e,n){let r=Fe.fromObject(n);return _s(t,new Gc(Op(),e,r))}function XP(t,e){return _s(t,new qc(Op(),e))}function ek(t,e,n){let r=Vp(t,n);if(r){let i=$p(r),o=i.path,s=i.queryId,a=Pe(o,e),c=new qc(Pp(s),a);return Bp(t,o,c)}else return[]}function gp(t,e,n,r,i=!1){let o=e._path,s=t.syncPointTree_.get(o),a=[];if(s&&(e._queryIdentifier==="default"||EE(s,e))){let c=YP(s,e,n,r);zP(s)&&(t.syncPointTree_=t.syncPointTree_.remove(o));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(o,(f,h)=>Mn(h));if(u&&!d){let f=t.syncPointTree_.subtree(o);if(!f.isEmpty()){let h=rk(f);for(let p=0;p<h.length;++p){let v=h[p],I=v.query,P=SE(t,v);t.listenProvider_.startListening(ls(I),el(t,I),P.hashFn,P.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(ls(e),null):l.forEach(f=>{let h=t.queryToTagMap.get(al(f));t.listenProvider_.stopListening(ls(f),h)}))}ik(t,l)}return a}function tk(t,e,n,r){let i=Vp(t,r);if(i!=null){let o=$p(i),s=o.path,a=o.queryId,c=Pe(s,e),l=new Ti(Pp(a),c,n);return Bp(t,s,l)}else return[]}function nk(t,e,n,r){let i=Vp(t,r);if(i){let o=$p(i),s=o.path,a=o.queryId,c=Pe(s,e),l=Fe.fromObject(n),u=new Gc(Pp(a),c,l);return Bp(t,s,u)}else return[]}function Aw(t,e,n,r=!1){let i=e._path,o=null,s=!1;t.syncPointTree_.foreachOnPath(i,(f,h)=>{let p=Pe(f,i);o=o||wi(h,p),s=s||Mn(h)});let a=t.syncPointTree_.get(i);a?(s=s||Mn(a),o=o||wi(a,Y())):(a=new pp,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;o!=null?c=!0:(c=!1,o=O.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((h,p)=>{let v=wi(p,Y());v&&(o=o.updateImmediateChild(h,v))}));let l=EE(a,e);if(!l&&!e._queryParams.loadsAllData()){let f=al(e);g(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");let h=ok();t.queryToTagMap.set(f,h),t.tagToQueryMap.set(h,f)}let u=kp(t.pendingWriteTree_,i),d=GP(a,e,n,u,o,c);if(!l&&!s&&!r){let f=wE(a,e);d=d.concat(sk(t,e,f))}return d}function Up(t,e,n){let i=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(s,a)=>{let c=Pe(s,e),l=wi(a,c);if(l)return l});return pE(i,e,o,n,!0)}function _s(t,e){return DE(e,t.syncPointTree_,null,kp(t.pendingWriteTree_,Y()))}function DE(t,e,n,r){if(V(t.path))return bE(t,e,n,r);{let i=e.get(Y());n==null&&i!=null&&(n=wi(i,Y()));let o=[],s=F(t.path),a=t.operationForChild(s),c=e.children.get(s);if(c&&a){let l=n?n.getImmediateChild(s):null,u=gE(r,s);o=o.concat(DE(a,c,l,u))}return i&&(o=o.concat(jp(i,t,r,n))),o}}function bE(t,e,n,r){let i=e.get(Y());n==null&&i!=null&&(n=wi(i,Y()));let o=[];return e.children.inorderTraversal((s,a)=>{let c=n?n.getImmediateChild(s):null,l=gE(r,s),u=t.operationForChild(s);u&&(o=o.concat(bE(u,a,c,l)))}),i&&(o=o.concat(jp(i,t,r,n))),o}function SE(t,e){let n=e.query,r=el(t,n);return{hashFn:()=>(UP(e)||O.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?ek(t,n._path,r):XP(t,n._path);{let o=wO(i,n);return gp(t,n,null,o)}}}}function el(t,e){let n=al(e);return t.queryToTagMap.get(n)}function al(t){return t._path.toString()+"$"+t._queryIdentifier}function Vp(t,e){return t.tagToQueryMap.get(e)}function $p(t){let e=t.indexOf("$");return g(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new J(t.substr(0,e))}}function Bp(t,e,n){let r=t.syncPointTree_.get(e);g(r,"Missing sync point for query tag that we're tracking");let i=kp(t.pendingWriteTree_,e);return jp(r,n,i,null)}function rk(t){return t.fold((e,n,r)=>{if(n&&Mn(n))return[ol(n)];{let i=[];return n&&(i=IE(n)),Le(r,(o,s)=>{i=i.concat(s)}),i}})}function ls(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(QP())(t._repo,t._path):t}function ik(t,e){for(let n=0;n<e.length;++n){let r=e[n];if(!r._queryParams.loadsAllData()){let i=al(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}function ok(){return ZP++}function sk(t,e,n){let r=e._path,i=el(t,e),o=SE(t,n),s=t.listenProvider_.startListening(ls(e),i,o.hashFn,o.onComplete),a=t.syncPointTree_.subtree(r);if(i)g(!Mn(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!V(l)&&u&&Mn(u))return[ol(u).query];{let f=[];return u&&(f=f.concat(IE(u).map(h=>h.query))),Le(d,(h,p)=>{f=f.concat(p)}),f}});for(let l=0;l<c.length;++l){let u=c[l];t.listenProvider_.stopListening(ls(u),el(t,u))}}return s}var mp=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},vp=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=fe(this.path_,e);return new t(this.syncTree_,n)}node(){return Up(this.syncTree_,this.path_)}},ak=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Mw=function(t,e,n){if(!t||typeof t!="object")return t;if(g(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return ck(t[".sv"],e,n);if(typeof t[".sv"]=="object")return lk(t[".sv"],e);g(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},ck=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:g(!1,"Unexpected server value: "+t)}},lk=function(t,e,n){t.hasOwnProperty("increment")||g(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&g(!1,"Unexpected increment value: "+r);let i=e.node();if(g(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},uk=function(t,e,n,r){return Hp(e,new vp(n,t),r)},TE=function(t,e,n){return Hp(t,new mp(e),n)};function Hp(t,e,n){let r=t.getPriority().val(),i=Mw(r,e.getImmediateChild(".priority"),n),o;if(t.isLeafNode()){let s=t,a=Mw(s.getValue(),e,n);return a!==s.getValue()||i!==s.getPriority().val()?new Di(a,_e(i)):t}else{let s=t;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new Di(i))),s.forEachChild(se,(a,c)=>{let l=Hp(c,e.getImmediateChild(a),n);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}var ps=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function Wp(t,e){let n=e instanceof J?e:new J(e),r=t,i=F(n);for(;i!==null;){let o=Jn(r.node.children,i)||{children:{},childCount:0};r=new ps(i,r,o),n=te(n),i=F(n)}return r}function Ri(t){return t.node.value}function AE(t,e){t.node.value=e,yp(t)}function ME(t){return t.node.childCount>0}function dk(t){return Ri(t)===void 0&&!ME(t)}function cl(t,e){Le(t.node.children,(n,r)=>{e(new ps(n,t,r))})}function NE(t,e,n,r){n&&!r&&e(t),cl(t,i=>{NE(i,e,!0,r)}),n&&r&&e(t)}function fk(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Is(t){return new J(t.parent===null?t.name:Is(t.parent)+"/"+t.name)}function yp(t){t.parent!==null&&hk(t.parent,t.name,t)}function hk(t,e,n){let r=dk(n),i=Nt(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,yp(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,yp(t))}var pk=/[\[\].#$\/\u0000-\u001F\u007F]/,gk=/[\[\].#$\u0000-\u001F\u007F]/,Ah=10*1024*1024,RE=function(t){return typeof t=="string"&&t.length!==0&&!pk.test(t)},xE=function(t){return typeof t=="string"&&t.length!==0&&!gk.test(t)},mk=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),xE(t)};var vk=function(t,e,n,r){r&&e===void 0||zp(yc(t,"value"),e,n)},zp=function(t,e,n){let r=n instanceof J?new Bh(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+or(r));if(typeof e=="function")throw new Error(t+"contains a function "+or(r)+" with contents = "+e.toString());if(Lw(e))throw new Error(t+"contains "+e.toString()+" "+or(r));if(typeof e=="string"&&e.length>Ah/3&&Vo(e)>Ah)throw new Error(t+"contains a string greater than "+Ah+" utf8 bytes "+or(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,o=!1;if(Le(e,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!RE(s)))throw new Error(t+" contains an invalid key ("+s+") "+or(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);QO(r,s),zp(t,a,r),ZO(r)}),i&&o)throw new Error(t+' contains ".value" child '+or(r)+" in addition to actual children.")}};var OE=function(t,e,n,r){if(!(r&&n===void 0)&&!xE(n))throw new Error(yc(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},yk=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),OE(t,e,n,r)},_k=function(t,e){if(F(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Ik=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!RE(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!mk(n))throw new Error(yc(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var _p=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function qp(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],o=i.getPath();n!==null&&!Np(o,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function PE(t,e,n){qp(t,n),kE(t,r=>Np(r,e))}function Kt(t,e,n){qp(t,n),kE(t,r=>ht(r,e)||ht(e,r))}function kE(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let o=i.path;e(o)?(wk(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function wk(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();cr&&Ee("event: "+n.toString()),Ni(r)}}}var Ek="repo_interrupt",Ck=25,Ip=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new _p,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=zc(),this.transactionQueueTree_=new ps,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function Dk(t,e,n){if(t.stats_=Mp(t.repoInfo_),t.forceRestClient_||bO())t.server_=new Xh(t.repoInfo_,(r,i,o,s)=>{Nw(t,r,i,o,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Rw(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{de(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Rp(t.repoInfo_,e,(r,i,o,s)=>{Nw(t,r,i,o,s)},r=>{Rw(t,r)},r=>{Sk(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=TO(t.repoInfo_,()=>new rp(t.stats_,t.server_)),t.infoData_=new ep,t.infoSyncTree_=new Xc({startListening:(r,i,o,s)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=sl(t.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),Yp(t,"connected",!1),t.serverSyncTree_=new Xc({startListening:(r,i,o,s)=>(t.server_.listen(r,o,i,(a,c)=>{let l=s(a,c);Kt(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function bk(t){let n=t.infoData_.getNode(new J(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Gp(t){return ak({timestamp:bk(t)})}function Nw(t,e,n,r,i){t.dataUpdateCount++;let o=new J(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let s=[];if(i)if(r){let c=Fo(n,l=>_e(l));s=nk(t.serverSyncTree_,o,c,i)}else{let c=_e(n);s=tk(t.serverSyncTree_,o,c,i)}else if(r){let c=Fo(n,l=>_e(l));s=JP(t.serverSyncTree_,o,c)}else{let c=_e(n);s=sl(t.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=ll(t,o)),Kt(t.eventQueue_,a,s)}function Rw(t,e){Yp(t,"connected",e),e===!1&&Ak(t)}function Sk(t,e){Le(e,(n,r)=>{Yp(t,n,r)})}function Yp(t,e,n){let r=new J("/.info/"+e),i=_e(n);t.infoData_.updateSnapshot(r,i);let o=sl(t.infoSyncTree_,r,i);Kt(t.eventQueue_,r,o)}function LE(t){return t.nextWriteId_++}function Tk(t,e,n,r,i){Kp(t,"set",{path:e.toString(),value:n,priority:r});let o=Gp(t),s=_e(n,r),a=Up(t.serverSyncTree_,e),c=TE(s,a,o),l=LE(t),u=CE(t.serverSyncTree_,e,c,l,!0);qp(t.eventQueue_,u),t.server_.put(e.toString(),s.val(!0),(f,h)=>{let p=f==="ok";p||ke("set at "+e+" failed: "+f);let v=ar(t.serverSyncTree_,l,!p);Kt(t.eventQueue_,e,v),Rk(t,i,f,h)});let d=$E(t,e);ll(t,d),Kt(t.eventQueue_,d,[])}function Ak(t){Kp(t,"onDisconnectEvents");let e=Gp(t),n=zc();tp(t.onDisconnect_,Y(),(i,o)=>{let s=uk(i,o,t.serverSyncTree_,e);lE(n,i,s)});let r=[];tp(n,Y(),(i,o)=>{r=r.concat(sl(t.serverSyncTree_,i,o));let s=$E(t,i);ll(t,s)}),t.onDisconnect_=zc(),Kt(t.eventQueue_,Y(),r)}function Mk(t,e,n){let r;F(e._path)===".info"?r=Aw(t.infoSyncTree_,e,n):r=Aw(t.serverSyncTree_,e,n),PE(t.eventQueue_,e._path,r)}function xw(t,e,n){let r;F(e._path)===".info"?r=gp(t.infoSyncTree_,e,n):r=gp(t.serverSyncTree_,e,n),PE(t.eventQueue_,e._path,r)}function Nk(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Ek)}function Kp(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ee(n,...e)}function Rk(t,e,n,r){e&&Ni(()=>{if(n==="ok")e(null);else{let i=(n||"error").toUpperCase(),o=i;r&&(o+=": "+r);let s=new Error(o);s.code=i,e(s)}})}function FE(t,e,n){return Up(t.serverSyncTree_,e,n)||O.EMPTY_NODE}function Qp(t,e=t.transactionQueueTree_){if(e||ul(t,e),Ri(e)){let n=UE(t,e);g(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&xk(t,Is(e),n)}else ME(e)&&cl(e,n=>{Qp(t,n)})}function xk(t,e,n){let r=n.map(l=>l.currentWriteId),i=FE(t,e,r),o=i,s=i.hash();for(let l=0;l<n.length;l++){let u=n[l];g(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=Pe(e,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}let a=o.val(!0),c=e;t.server_.put(c.toString(),a,l=>{Kp(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(ar(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();ul(t,Wp(t.transactionQueueTree_,e)),Qp(t,t.transactionQueueTree_),Kt(t.eventQueue_,e,u);for(let f=0;f<d.length;f++)Ni(d[f])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{ke("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}ll(t,e)}},s)}function ll(t,e){let n=jE(t,e),r=Is(n),i=UE(t,n);return Ok(t,i,r),r}function Ok(t,e,n){if(e.length===0)return;let r=[],i=[],s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=Pe(n,c.path),u=!1,d;if(g(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(ar(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=Ck)u=!0,d="maxretry",i=i.concat(ar(t.serverSyncTree_,c.currentWriteId,!0));else{let f=FE(t,c.path,s);c.currentInputSnapshot=f;let h=e[a].update(f.val());if(h!==void 0){zp("transaction failed: Data returned ",h,c.path);let p=_e(h);typeof h=="object"&&h!=null&&Nt(h,".priority")||(p=p.updatePriority(f.getPriority()));let I=c.currentWriteId,P=Gp(t),X=TE(p,f,P);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=X,c.currentWriteId=LE(t),s.splice(s.indexOf(I),1),i=i.concat(CE(t.serverSyncTree_,c.path,X,c.currentWriteId,c.applyLocally)),i=i.concat(ar(t.serverSyncTree_,I,!0))}else u=!0,d="nodata",i=i.concat(ar(t.serverSyncTree_,c.currentWriteId,!0))}Kt(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}ul(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Ni(r[a]);Qp(t,t.transactionQueueTree_)}function jE(t,e){let n,r=t.transactionQueueTree_;for(n=F(e);n!==null&&Ri(r)===void 0;)r=Wp(r,n),e=te(e),n=F(e);return r}function UE(t,e){let n=[];return VE(t,e,n),n.sort((r,i)=>r.order-i.order),n}function VE(t,e,n){let r=Ri(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);cl(e,i=>{VE(t,i,n)})}function ul(t,e){let n=Ri(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,AE(e,n.length>0?n:void 0)}cl(e,r=>{ul(t,r)})}function $E(t,e){let n=Is(jE(t,e)),r=Wp(t.transactionQueueTree_,e);return fk(r,i=>{Mh(t,i)}),Mh(t,r),NE(r,i=>{Mh(t,i)}),n}function Mh(t,e){let n=Ri(e);if(n){let r=[],i=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(g(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(g(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(ar(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?AE(e,void 0):n.length=o+1,Kt(t.eventQueue_,Is(e),i);for(let s=0;s<r.length;s++)Ni(r[s])}}function Pk(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function kk(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ke(`Invalid query segment '${n}' in query '${t}'`)}return e}var Ow=function(t,e){let n=Lk(t),r=n.namespace;n.domain==="firebase.com"&&Gt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Gt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||mO();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Fc(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new J(n.pathString)}},Lk=function(t){let e="",n="",r="",i="",o="",s=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=Pk(t.substring(u,d)));let f=kk(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(s=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let h=e.slice(0,l);if(h.toLowerCase()==="localhost")n="localhost";else if(h.split(".").length<=2)n=h;else{let p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var tl=class{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+de(this.snapshot.exportVal())}},nl=class{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var wp=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return g(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var Ep=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return V(this._path)?null:eE(this._path)}get ref(){return new Qt(this._repo,this._path)}get _queryIdentifier(){let e=vw(this._queryParams),n=Ap(e);return n==="{}"?"default":n}get _queryObject(){return vw(this._queryParams)}isEqual(e){if(e=dt(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=Np(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+KO(this._path)}};var Qt=class t extends Ep{constructor(e,n){super(e,n,new Jh,!1)}get parent(){let e=nE(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},rl=class t{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new J(e),r=gs(this.ref,e);return new t(this._node.getChild(n),r,se)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new t(i,gs(this.ref,r),se)))}hasChild(e){let n=new J(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function BE(t,e){return t=dt(t),t._checkNotDeleted("ref"),e!==void 0?gs(t._root,e):t._root}function gs(t,e){return t=dt(t),F(t._path)===null?yk("child","path",e,!1):OE("child","path",e,!1),new Qt(t._repo,fe(t._path,e))}function HE(t,e){t=dt(t),_k("set",t._path),vk("set",e,t._path,!1);let n=new wn;return Tk(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}var Cp=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let r=n._queryParams.getIndex();return new tl("value",this,new rl(e.snapshotNode,new Qt(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new nl(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Dp=class t{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new nl(this,e,n):null}createEvent(e,n){g(e.childName!=null,"Child events should have a childName.");let r=gs(new Qt(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new tl(e.type,this,new rl(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function Fk(t,e,n,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){let c=n,l=(u,d)=>{xw(t._repo,t,a),c(u,d)};l.userCallback=n.userCallback,l.context=n.context,n=l}let s=new wp(n,o||void 0),a=e==="value"?new Cp(s):new Dp(e,s);return Mk(t._repo,t,a),()=>xw(t._repo,t,a)}function WE(t,e,n,r){return Fk(t,"value",e,n,r)}HP(Qt);KP(Qt);var jk="FIREBASE_DATABASE_EMULATOR_HOST",bp={},Uk=!1;function Vk(t,e,n,r){t.repoInfo_=new Fc(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function $k(t,e,n,r,i){let o=r||t.options.databaseURL;o===void 0&&(t.options.projectId||Gt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ee("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let s=Ow(o,i),a=s.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[jk]),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,s=Ow(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let u=i&&c?new ss(ss.OWNER):new kh(t.name,t.options,e);Ik("Invalid Firebase Database URL",s),V(s.path)||Gt("Database URL must point to the root of a Firebase Database (not including a child path).");let d=Hk(a,t,u,new Ph(t.name,n));return new Sp(d,t)}function Bk(t,e){let n=bp[e];(!n||n[t.key]!==t)&&Gt(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Nk(t),delete n[t.key]}function Hk(t,e,n,r){let i=bp[e.name];i||(i={},bp[e.name]=i);let o=i[t.toURLString()];return o&&Gt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Ip(t,Uk,n,r),i[t.toURLString()]=o,o}var Sp=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Dk(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Qt(this._repo,Y())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Bk(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Gt("Cannot call "+e+" on a deleted database.")}};function zE(t=Wo(),e){let n=ih(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=lI("database");r&&qE(n,...r)}return n}function qE(t,e,n,r={}){t=dt(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Gt("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Gt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new ss(ss.OWNER);else if(r.mockUserToken){let s=typeof r.mockUserToken=="string"?r.mockUserToken:dI(r.mockUserToken,t.app.options.projectId);o=new ss(s)}Vk(i,e,n,o)}function Wk(t){hO(pi),Dn(new Xe("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return $k(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),ge(ew,tw,t),ge(ew,tw,"esm2017")}Rp.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Rp.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Wk();var fr=class{constructor(e){return e}},GE="database",Zp=class{constructor(){return qo(GE)}};var Jp=new A("angularfire2.database-instances");function zk(t,e){let n=ah(GE,t,e);return n&&new fr(n)}function qk(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new fr(r)}}var Gk={provide:Zp,deps:[[new Qe,Jp]]},Yk={provide:fr,useFactory:zk,deps:[[new Qe,Jp],nr]};function YE(t,...e){return ge("angularfire",mi.full,"rtdb"),un([Yk,Gk,{provide:Jp,useFactory:qk(t),multi:!0,deps:[Q,xe,Go,Yo,[new Qe,Pc],[new Qe,zo],...e]}])}var KE=bn(zE,!0);var QE=bn(WE,!0);var ws=bn(BE,!0);var dl=bn(HE,!0);var ZE={apiKey:"AIzaSyATS3nUxmfjwf83Zo4AEq1TeM6SiLIxs94",authDomain:"qstar-app.firebaseapp.com",databaseURL:"https://qstar-app-default-rtdb.europe-west1.firebasedatabase.app",projectId:"qstar-app",storageBucket:"qstar-app.appspot.com",messagingSenderId:"232376159453",appId:"1:232376159453:web:91b6d0576bff13990f1f34"};var Xp="QSTAR_APP_ID";function Qk(t=8){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",r=e.length;for(let i=0;i<t;i++)n+=e.charAt(Math.floor(Math.random()*r));return n}var fl=(()=>{let e=class e{constructor(){this.id=null,Xp in localStorage||(localStorage[Xp]=Qk()),this.id=localStorage[Xp]}getId(){return this.id}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Jk=3600,Xk=3600;function eL(t){let e=5381;for(let n=0;n<t.length;n++)e=e*33^t.charCodeAt(n);return e=e>>>0,e%100/100}function tL(t,e,n,r){let i=eL(n+r);return e&&(e>0&&t==="B"&&i<e&&(t="A"),e<0&&t==="A"&&i<-e&&(t="B")),t}function JE(t,e){if(!t)return null;let n=new Set,r=Date.now();for(let[i,o]of Object.entries(t))(r-o)/1e3<=e&&n.add(i);return n}var hl=(()=>{let e=class e{constructor(r){this.db=r,this.identityService=m(fl),this.data$=this.getData(),this.questionId$=this.data$.pipe(E(i=>(i?.survey.state||"-").split("-")[0]||null)),this.questionIds$=this.data$.pipe(E(i=>{let o=Object.keys(i?.survey.questions||{});return o.sort(),o})),this.state$=this.data$.pipe(E(i=>(i?.survey.state||"-").split("-")[1]||null)),this.question$=Ve([this.data$,this.questionId$]).pipe(E(([i,o])=>{if(i&&o){if(i.survey.questions.hasOwnProperty(o))return i.survey.questions[o];console.warn("Missing",o,"in",i.survey.questions)}return null})),this.active$=this.data$.pipe(E(i=>i?.survey.active||null)),this.onlineIds$=this.active$.pipe(E(i=>JE(i,Jk))),this.votes$=this.data$.pipe(E(i=>i?.survey.votes||null)),this.counts$=this.data$.pipe(E(i=>{let o=i?.survey.votes,s=i?.survey.questions,a=i?.survey.active||null,c=JE(a,Xk)||new Set;if(!o||!s||!c)return null;let l=new Map;for(let[u,d]of Object.entries(o)){let[f,h]=u.split("-");if(!c.has(f))continue;l.has(h)||l.set(h,new Map);let p=l.get(h),v=s[h]||{};for(let ae of[v.identityA,v.identityB])p.has(ae)||p.set(ae,0);let I=tL(d,v.biasA,f,h),P=v.identityA||"?",X=v.identityB||"?",$={A:P,B:X}[I]||"??";p.has($)||p.set($,0),p.set($,p.get($)||1)}return l}))}getData(){return new H(r=>{let i=ws(this.db,"/");return{unsubscribe:QE(i,s=>{s.exists()?r.next(s.val()):(console.log("No data available"),r.next(null))})}})}ping(){let r=this.identityService.getId(),i=ws(this.db,`survey/active/${r}`);return re(dl(i,Date.now()))}vote(r,i){let o=this.identityService.getId(),s=ws(this.db,`survey/votes/${o}-${r}`);return re(dl(s,i))}setState(r,i){let o=ws(this.db,"survey/state");return re(dl(o,`${r}-${i}`))}getVote(r){return Ve([this.questionId$,this.votes$]).pipe(E(([i,o])=>{if(!i||!o)return null;let s=`${r}-${i}`;return o[s]||null}))}};e.\u0275fac=function(i){return new(i||e)(S(fr))},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var XE=t=>({active:t});function rL(t,e){t&1&&(b(0,"div",12),M(1,"(Voting ended, please watch screen)"),C())}function iL(t,e){if(t&1){let n=Pa();b(0,"div")(1,"h2"),M(2),C(),b(3,"ul",6)(4,"li",7)(5,"div")(6,"span",8),M(7,"Answer A:"),C(),M(8),C()(),b(9,"li",7)(10,"div")(11,"span",8),M(12,"Answer B:"),C(),M(13),C()()(),b(14,"div",9)(15,"button",10),fn("click",function(){qr(n);let i=ve().ngIf,o=ve();return Gr(o.setActive(i.questionId,"A"))}),M(16,"A is human"),C(),b(17,"button",10),fn("click",function(){qr(n);let i=ve().ngIf,o=ve();return Gr(o.setActive(i.questionId,"B"))}),M(18,"B is human"),C()(),Te(19,rL,2,0,"div",11),C()}if(t&2){let n=ve().ngIf;U(2),$t("#",n.questionId," ",n.question==null?null:n.question.question,""),U(6),ye(" ",n.question==null?null:n.question.answerA," "),U(5),ye(" ",n.question==null?null:n.question.answerB," "),U(2),we("disabled",n.state!=="voting")("ngClass",Td(9,XE,n.activeAnswer==="A")),U(2),we("disabled",n.state!=="voting")("ngClass",Td(11,XE,n.activeAnswer==="B")),U(2),we("ngIf",n.state!=="voting")}}function oL(t,e){t&1&&(b(0,"div")(1,"div",13)(2,"h2"),M(3,"All questions answered"),C(),b(4,"p"),M(5,"Thank you for your votes!"),C()()())}function sL(t,e){t&1&&(b(0,"div",14)(1,"h2"),M(2,"Please wait"),C(),Dt(3,"img",15),b(4,"p"),M(5,"We're currently working on activating the first question in the system. The question will be shown in this screen as soon as it's ready."),C()())}function aL(t,e){if(t&1&&Te(0,oL,6,0,"div",5)(1,sL,6,0,"ng-template",null,2,mn),t&2){let n=hn(2),r=ve().ngIf;we("ngIf",r.state==="id")("ngIfElse",n)}}function cL(t,e){if(t&1&&(b(0,"article",4),Te(1,iL,20,13,"div",5)(2,aL,3,2,"ng-template",null,1,mn),C()),t&2){let n=e.ngIf,r=hn(3);U(),we("ngIf",n.questionId)("ngIfElse",r)}}function lL(t,e){t&1&&(b(0,"p"),M(1,"Loading..."),C())}var eC=(()=>{let e=class e{constructor(r,i){this.firebaseService=r,this.identityService=i,this.activeAnswer$=this.firebaseService.getVote(this.identityService.getId()),this.data$=Ve([this.firebaseService.question$,this.firebaseService.questionId$,this.firebaseService.state$,this.activeAnswer$]).pipe(E(([o,s,a,c])=>({question:o,questionId:s,state:a,activeAnswer:c})))}setActive(r,i){r&&this.firebaseService.vote(r,i)}ngOnInit(){this.startPinging()}ngOnDestroy(){this.stopPinging()}startPinging(){this.pingInterval=setInterval(()=>{this.firebaseService.ping()},1e3)}stopPinging(){this.pingInterval&&clearInterval(this.pingInterval)}};e.\u0275fac=function(i){return new(i||e)(ue(hl),ue(fl))},e.\u0275cmp=ln({type:e,selectors:[["app-vote"]],standalone:!0,features:[pn],decls:4,vars:4,consts:[["loading",""],["noquestion",""],["waiting",""],["class","page",4,"ngIf","ngIfElse"],[1,"page"],[4,"ngIf","ngIfElse"],[1,"answers"],[1,"answer"],[1,"ab"],[1,"buttons"],[3,"click","disabled","ngClass"],["class","status",4,"ngIf"],[1,"status"],[1,"done"],[1,"waiting"],["src","rctt_visual.jpg"]],template:function(i,o){if(i&1&&(Te(0,cL,4,2,"article",3),gn(1,"async"),Te(2,lL,2,0,"ng-template",null,0,mn)),i&2){let s=hn(3);we("ngIf",ka(1,2,o.data$))("ngIfElse",s)}},dependencies:[ao,Qy,Wa,za],styles:[".page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:3rem}.answers[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:2rem}.answers[_ngcontent-%COMP%]   .ab[_ngcontent-%COMP%]{text-decoration:underline}.buttons[_ngcontent-%COMP%]{display:flex;gap:1rem;width:90%;margin:3em auto}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;height:3rem;color:var(--fg);background:transparent;font-weight:700;border:1px solid var(--fg)}.buttons[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:var(--bg4)}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{border:0}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:not(.active){color:var(--fg-dim)}.status[_ngcontent-%COMP%]{text-align:center;color:var(--fg-dim)}.waiting[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:80%;display:block;margin:0 auto}"]});let t=e;return t})();function uL(t,e){if(t&1&&(b(0,"div",9)(1,"span"),M(2),C(),M(3," \u2014 "),b(4,"span"),M(5),C()()),t&2){let n=ve().ngIf,r=ve();U(2),$t(" Question ",n.questionIndex+1,"/",n.questionNum,""),U(3),io(r.formatState(n.state))}}function dL(t,e){if(t&1&&(b(0,"div",9),M(1),C()),t&2){let n=ve().ngIf;U(),ye(" ",n.state==="id"?"RCTT Results":"Randomized Controlled Touring Test"," ")}}function fL(t,e){if(t&1&&(b(0,"div")(1,"h2"),M(2),C(),M(3," XXX "),b(4,"ul",10)(5,"li",11)(6,"div",12),M(7),gn(8,"percent"),C(),b(9,"div",13)(10,"span",14),M(11,"Answer A:"),C(),M(12),C(),b(13,"div",15),M(14),C()(),b(15,"li",11)(16,"div",12),M(17),gn(18,"percent"),C(),b(19,"div",13)(20,"span",14),M(21,"Answer B:"),C(),M(22),C(),b(23,"div",15),M(24),C()()(),b(25,"div",16),M(26),C()()),t&2){let n=ve().ngIf,r=ve();U(2),$t("#",n.questionId," ",n.question==null?null:n.question.question,""),U(4),ro(""),U(),ye(" ",oo(8,18,r.getFraction(n.question,n.currentResultRow,"A"),"1.0")," "),U(5),ye(" ",n.question==null?null:n.question.answerA," "),U(),ro(""),U(),ye(" ",r.formatIdentity(n.question==null?null:n.question.identityA)," "),U(2),ro(""),U(),ye(" ",oo(18,21,r.getFraction(n.question,n.currentResultRow,"B"),"1.0")," "),U(5),ye(" ",n.question==null?null:n.question.answerB," "),U(),ro(""),U(),ye(" ",r.formatIdentity(n.question==null?null:n.question.identityB)," "),U(2),$t(" Collected votes: ",(n.currentResultRow==null?null:n.currentResultRow.total)||0," / ",n.onlineIds==null?null:n.onlineIds.size," ")}}function hL(t,e){t&1&&(b(0,"div",19),Dt(1,"img",20),C())}function pL(t,e){if(t&1&&(b(0,"tr")(1,"td",24),M(2),C(),b(3,"td",25),M(4),C(),b(5,"td",26),M(6),C(),b(7,"td",27),M(8),gn(9,"percent"),b(10,"span",28),M(11),C()()()),t&2){let n=e.$implicit;U(2),io(n.questionId),U(2),ye("Human vs. ",n.agent,""),U(2),ye(" ",n.count>n.total/2?n.agent:"Human"," "),U(2),ye(" ",oo(9,6,n.count/n.total,"1.0")," "),U(3),$t("(",n.count," / ",n.total," votes)")}}function gL(t,e){if(t&1&&(b(0,"tr")(1,"td",29),M(2),C(),b(3,"td",27),M(4),gn(5,"percent"),b(6,"span",28),M(7),C()()()),t&2){let n=e.$implicit;U(2),io(n.agent),U(2),ye(" ",oo(5,4,n.count/n.total,"1.0")," "),U(3),$t("(",n.count," / ",n.total," votes)")}}function mL(t,e){if(t&1&&(b(0,"div",21)(1,"table")(2,"thead")(3,"tr")(4,"th"),M(5,"Question"),C(),b(6,"th"),M(7,"Opponents"),C(),b(8,"th"),M(9,"Winner"),C(),b(10,"th"),M(11,"Humanness"),C()()(),b(12,"tbody"),Te(13,pL,12,9,"tr",22),C()(),b(14,"table",23)(15,"thead")(16,"tr"),Dt(17,"th"),b(18,"th"),M(19,"Humanness"),C()()(),b(20,"tbody"),Te(21,gL,8,7,"tr",22),C()()()),t&2){let n=ve(2).ngIf;U(13),we("ngForOf",n.results),U(8),we("ngForOf",n.totals)}}function vL(t,e){if(t&1&&Te(0,hL,2,0,"div",17)(1,mL,22,2,"div",18),t&2){let n=ve().ngIf;we("ngIf",n.state==="voting"),U(),we("ngIf",n.state==="id")}}function yL(t,e){if(t&1){let n=Pa();b(0,"article",4)(1,"div",5)(2,"button",6),fn("click",function(){let i=qr(n).ngIf,o=ve();return Gr(o.prev(i.questionId,i.state))}),M(3,"<<"),C(),Te(4,uL,6,3,"div",7)(5,dL,2,1,"ng-template",null,1,mn),b(7,"button",6),fn("click",function(){let i=qr(n).ngIf,o=ve();return Gr(o.next(i.questionId,i.state))}),M(8,">>"),C()(),Te(9,fL,27,24,"div",8)(10,vL,2,2,"ng-template",null,2,mn),C()}if(t&2){let n=e.ngIf,r=hn(6),i=hn(11);U(4),we("ngIf",n.questionId)("ngIfElse",r),U(5),we("ngIf",n.questionId)("ngIfElse",i)}}function _L(t,e){t&1&&(b(0,"p"),M(1,"Loading..."),C())}function eg(t){return t.toLowerCase().startsWith("human")}function tC(t){let e=[];for(let[n,r]of t.entries()){let i=new Set,o=new Set,s=0,a=0;for(let[c,l]of r.entries())a+=l,eg(c)?o.add(c):(i.add(c),s+=l);e.push({questionId:n,agent:[...i].join("-"),human:[...o].join("-"),count:s,total:a})}return e}var nC=(()=>{let e=class e{getFraction(r,i,o){if(!r||!i)return 0;let s={A:r.identityA,B:r.identityB}[o];return eg(s)?(i.total-i.count)/i.total:i.count/i.total}getNumAnswered(r){return 0}getOnline(){return 0}constructor(){this.firebaseService=m(hl),this.results$=this.firebaseService.counts$.pipe(E(r=>r?tC(r):null)),this.totals$=this.firebaseService.counts$.pipe(E(r=>{if(!r)return null;let i=tC(r),o=new Map,s={questionId:null,agent:"?",human:"",count:0,total:0};for(let c of i){let l=o.get(c.agent)||ne(_({},s),{agent:c.agent});o.set(c.agent,ne(_({},l),{count:l.count+c.count,total:l.total+c.total}))}let a=[...new Set(o.keys())];return a.sort(),a.map(c=>o.get(c)||s)})),this.currentResultRow$=Ve([this.firebaseService.questionId$,this.results$]).pipe(E(([r,i])=>{if(!r||!i)return null;for(let o of i)if(o.questionId===r)return o;return null})),this.data$=Ve([this.firebaseService.state$,this.firebaseService.questionId$,this.firebaseService.questionIds$,this.firebaseService.question$,this.firebaseService.onlineIds$,this.results$,this.totals$,this.currentResultRow$]).pipe(E(([r,i,o,s,a,c,l,u])=>({state:r,questionId:i,question:s,questionIndex:o?.indexOf(i||""),questionNum:o.length,onlineIds:a,results:c,totals:l,currentResultRow:u}))),this.questionIds=null,this.firebaseService.questionIds$.subscribe(r=>{this.questionIds=r})}formatState(r){return r?{voting:"Voting (1/3)",stats:"Show Results (2/3)",id:"Reveal Identities (3/3)"}[r]:""}formatIdentity(r){return r?eg(r)?"Human":r:null}questionIdsStates(){let r=["-voting"];for(let i of this.questionIds||[])r.push(`${i}-voting`),r.push(`${i}-stats`),r.push(`${i}-id`);return r.push("-id"),r}prevNext(r,i,o){let s=this.questionIdsStates(),a=s.indexOf(`${r||""}-${i}`);a===-1?a=0:a=a+o;let c=s[(s.length+a)%s.length],[l,u]=c.split("-");this.firebaseService.setState(l,u)}prev(r,i){this.prevNext(r,i,-1)}next(r,i){this.prevNext(r,i,1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ln({type:e,selectors:[["app-results"]],standalone:!0,features:[pn],decls:4,vars:4,consts:[["loading",""],["specialstate",""],["noquestion",""],["class","page",4,"ngIf","ngIfElse"],[1,"page"],[1,"buttons"],[3,"click"],["class","state",4,"ngIf","ngIfElse"],[4,"ngIf","ngIfElse"],[1,"state"],[1,"answers"],[1,"answer"],[1,"percentage"],[1,"text"],[1,"ab"],[1,"id"],[1,"status"],["class","voting",4,"ngIf"],["class","results",4,"ngIf"],[1,"voting"],["src","rctt_visual.jpg"],[1,"results"],[4,"ngFor","ngForOf"],[1,"totals"],[1,"question"],[1,"opponents"],[1,"winner"],[1,"stats"],[1,"details"],[1,"agent"]],template:function(i,o){if(i&1&&(Te(0,yL,12,4,"article",3),gn(1,"async"),Te(2,_L,2,0,"ng-template",null,0,mn)),i&2){let s=hn(3);we("ngIf",ka(1,2,o.data$))("ngIfElse",s)}},dependencies:[ao,Zy,Wa,za,Xy],styles:["*[_ngcontent-%COMP%]{font-size:2vw}.page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:3rem}h2[_ngcontent-%COMP%]{font-size:1.2em;margin:1em 0 2em}.buttons[_ngcontent-%COMP%]{display:flex;gap:1em;margin:0 auto;padding-top:1em;align-items:center;cursor:pointer}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:.5em 1em;color:var(--fg);background:transparent;font-weight:700;border:1px solid var(--fg)}.buttons[_ngcontent-%COMP%]   .state[_ngcontent-%COMP%]{width:20em;text-align:center}.answers[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:1em}.answers[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]{display:flex;gap:3rem;font-size:.8em}.answers[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]   .percentage[_ngcontent-%COMP%]{width:15%;text-align:right;font-weight:lighter;font-size:2em}.answers[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]   .percentage.hidden[_ngcontent-%COMP%]{opacity:0}.answers[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:65%}.answers[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{width:20%;font-size:1.3em;font-weight:700}.answers[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]   .id.hidden[_ngcontent-%COMP%]{opacity:0}.answers[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]   .ab[_ngcontent-%COMP%]{text-decoration:underline}.status[_ngcontent-%COMP%]{font-size:1em;margin-top:3em}.voting[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;margin:0 auto;max-width:80%}.results[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:3em}.results[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{font-size:.5em}.results[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{margin:0 auto;border-collapse:collapse;border:1px solid var(--fg)}.results[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:is(td, th)[_ngcontent-%COMP%]{border:1px solid var(--fg);padding:.5em 2em}.results[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.stats[_ngcontent-%COMP%]{display:flex;gap:1em;align-items:center}"]});let t=e;return t})();var rC=[{path:"",component:eC},{path:"results",component:nC}];var iC={providers:[xy({eventCoalescing:!0}),J_(rC),PI(()=>kI(ZE)),YE(()=>KE())]};var oC="0.0.5";var sC=(()=>{let e=class e{constructor(r,i){this.router=r,this.titleService=i,this.title=`QSTAR Research App v${oC}`}ngOnInit(){this.titleService.setTitle(this.title),this.router.events.subscribe(r=>{if(r instanceof yn){let o=new URL(r.url,window.location.origin).searchParams.get("goto");o&&this.router.navigate([`/${o}`])}})}};e.\u0275fac=function(i){return new(i||e)(ue(Tt),ue(Ya))},e.\u0275cmp=ln({type:e,selectors:[["app-root"]],standalone:!0,features:[pn],decls:2,vars:0,consts:[[1,"container"]],template:function(i,o){i&1&&(b(0,"div",0),Dt(1,"router-outlet"),C())},dependencies:[Rf,rI]});let t=e;return t})();l_(sC,iC).catch(t=>console.error(t));
